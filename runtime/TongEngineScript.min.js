TONG.RenderableObject=function(){this.id=0,this.object=null,this.z=0,this.renderOrder=0},TONG.RenderableFace=function(){this.id=0,this.v1=new TONG.RenderableVertex,this.v2=new TONG.RenderableVertex,this.v3=new TONG.RenderableVertex,this.normalModel=new TONG.Vector3,this.vertexNormalsModel=[new TONG.Vector3,new TONG.Vector3,new TONG.Vector3],this.vertexNormalsLength=0,this.color=new TONG.Color,this.material=null,this.uvs=[new TONG.Vector2,new TONG.Vector2,new TONG.Vector2],this.z=0,this.renderOrder=0},TONG.RenderableVertex=function(){this.position=new TONG.Vector3,this.positionWorld=new TONG.Vector3,this.positionScreen=new TONG.Vector4,this.visible=!0},TONG.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},TONG.RenderableLine=function(){this.id=0,this.v1=new TONG.RenderableVertex,this.v2=new TONG.RenderableVertex,this.vertexColors=[new TONG.Color,new TONG.Color],this.material=null,this.z=0,this.renderOrder=0},TONG.RenderableSprite=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new TONG.Vector2,this.material=null,this.renderOrder=0},TONG.Projector=function(){var t,K,i,X,Z,$,Q,ee,o,te,re,r=[],n=0,ne=[],s=0,a=[],l=0,u=[],c=0,p=[],h=0,oe={objects:[],lights:[],elements:[]},ie=new TONG.Vector3,se=new TONG.Vector4,m=new TONG.Box3(new TONG.Vector3(-1,-1,-1),new TONG.Vector3(1,1,1)),g=new TONG.Box3,y=new Array(3),ae=new TONG.Matrix4,le=new TONG.Matrix4,ue=new TONG.Matrix4,ce=new TONG.Matrix3,pe=new TONG.Frustum,he=new TONG.Vector4,de=new TONG.Vector4;this.projectVector=function(e,t){console.warn("TONG.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("TONG.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("TONG.Projector: .pickingRay() is now raycaster.setFromCamera().")};var fe=new function(){var l=[],o=[],u=[],c=null,p=null,h=new TONG.Matrix3;function n(e){var t=e.position,r=e.positionWorld,n=e.positionScreen;r.copy(t).applyMatrix4(re),n.copy(r).applyMatrix4(le);var o=1/n.w;n.x*=o,n.y*=o,n.z*=o,e.visible=-1<=n.x&&n.x<=1&&-1<=n.y&&n.y<=1&&-1<=n.z&&n.z<=1}function d(e,t,r){return!0===e.visible||!0===t.visible||!0===r.visible||(y[0]=e.positionScreen,y[1]=t.positionScreen,y[2]=r.positionScreen,m.intersectsBox(g.setFromPoints(y)))}function f(e,t,r){return(r.positionScreen.x-e.positionScreen.x)*(t.positionScreen.y-e.positionScreen.y)-(r.positionScreen.y-e.positionScreen.y)*(t.positionScreen.x-e.positionScreen.x)<0}return{setObject:function(e){p=(c=e).material,h.getNormalMatrix(c.matrixWorld),l.length=0,o.length=0,u.length=0},projectVertex:n,checkTriangleVisibility:d,checkBackfaceCulling:f,pushVertex:function(e,t,r){(i=ye()).position.set(e,t,r),n(i)},pushNormal:function(e,t,r){l.push(e,t,r)},pushColor:function(e,t,r){o.push(e,t,r)},pushUv:function(e,t){u.push(e,t)},pushLine:function(e,t){var r=ne[e],n=ne[t];r.positionScreen.copy(r.position).applyMatrix4(ue),n.positionScreen.copy(n.position).applyMatrix4(ue),!0===we(r.positionScreen,n.positionScreen)&&(r.positionScreen.multiplyScalar(1/r.positionScreen.w),n.positionScreen.multiplyScalar(1/n.positionScreen.w),(Q=be()).id=c.id,Q.v1.copy(r),Q.v2.copy(n),Q.z=Math.max(r.positionScreen.z,n.positionScreen.z),Q.renderOrder=c.renderOrder,Q.material=c.material,c.material.vertexColors===TONG.VertexColors&&(Q.vertexColors[0].fromArray(o,3*e),Q.vertexColors[1].fromArray(o,3*t)),oe.elements.push(Q))},pushTriangle:function(e,t,r){var n=ne[e],o=ne[t],i=ne[r];if(!1!==d(n,o,i)&&(p.side===TONG.DoubleSide||!0===f(n,o,i))){(Z=ve()).id=c.id,Z.v1.copy(n),Z.v2.copy(o),Z.v3.copy(i),Z.z=(n.positionScreen.z+o.positionScreen.z+i.positionScreen.z)/3,Z.renderOrder=c.renderOrder,Z.normalModel.fromArray(l,3*e),Z.normalModel.applyMatrix3(h).normalize();for(var s=0;s<3;s++){var a=Z.vertexNormalsModel[s];a.fromArray(l,3*arguments[s]),a.applyMatrix3(h).normalize(),Z.uvs[s].fromArray(u,2*arguments[s])}Z.vertexNormalsLength=3,Z.material=c.material,oe.elements.push(Z)}}}};function me(e){(t=function(){if(K===n){var e=new TONG.RenderableObject;return r.push(e),n++,K++,e}return r[K++]}()).id=e.id,t.object=e,ie.setFromMatrixPosition(e.matrixWorld),ie.applyMatrix4(le),t.z=ie.z,t.renderOrder=e.renderOrder,oe.objects.push(t)}function ge(e,t,r){var n=1/e.w;e.z*=n,-1<=e.z&&e.z<=1&&((o=function(){if(te===h){var e=new TONG.RenderableSprite;return p.push(e),h++,te++,e}return p[te++]}()).id=t.id,o.x=e.x*n,o.y=e.y*n,o.z=e.z,o.renderOrder=t.renderOrder,o.object=t,o.rotation=t.rotation,o.scale.x=t.scale.x*Math.abs(o.x-(e.x+r.projectionMatrix.elements[0])/(e.w+r.projectionMatrix.elements[12])),o.scale.y=t.scale.y*Math.abs(o.y-(e.y+r.projectionMatrix.elements[5])/(e.w+r.projectionMatrix.elements[13])),o.material=t.material,oe.elements.push(o))}function ye(){if(X===s){var e=new TONG.RenderableVertex;return ne.push(e),s++,X++,e}return ne[X++]}function ve(){if($===l){var e=new TONG.RenderableFace;return a.push(e),l++,$++,e}return a[$++]}function be(){if(ee===c){var e=new TONG.RenderableLine;return u.push(e),c++,ee++,e}return u[ee++]}function xe(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id!==t.id?e.id-t.id:0}function we(e,t){var r=0,n=1,o=e.z+e.w,i=t.z+t.w,s=-e.z+e.w,a=-t.z+t.w;return 0<=o&&0<=i&&0<=s&&0<=a||!(o<0&&i<0||s<0&&a<0)&&(o<0?r=Math.max(r,o/(o-i)):i<0&&(n=Math.min(n,o/(o-i))),s<0?r=Math.max(r,s/(s-a)):a<0&&(n=Math.min(n,s/(s-a))),!(n<r)&&(e.lerp(t,r),t.lerp(e,1-n),!0))}this.projectScene=function(e,t,r,n){te=ee=$=0,!(oe.elements.length=0)===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),ae.copy(t.matrixWorldInverse.getInverse(t.matrixWorld)),le.multiplyMatrices(t.projectionMatrix,ae),pe.setFromMatrix(le),K=0,oe.objects.length=0,oe.lights.length=0,function e(t){if(!1!==t.visible){if(t instanceof TONG.Light)oe.lights.push(t);else if(t instanceof TONG.Mesh||t instanceof TONG.Line||t instanceof TONG.Points){if(!1===t.material.visible)return;if(!0===t.frustumCulled&&!1===pe.intersectsObject(t))return;me(t)}else if(t instanceof TONG.Sprite){if(!1===t.material.visible)return;if(!0===t.frustumCulled&&!1===pe.intersectsSprite(t))return;me(t)}for(var r=t.children,n=0,o=r.length;n<o;n++)e(r[n])}}(e),!0===r&&oe.objects.sort(xe);for(var o=oe.objects,i=0,s=o.length;i<s;i++){var a=o[i].object,l=a.geometry;if(fe.setObject(a),re=a.matrixWorld,X=0,a instanceof TONG.Mesh){if(l instanceof TONG.BufferGeometry){var u=l.attributes,c=l.groups;if(void 0===u.position)continue;for(var p=0,h=(q=u.position.array).length;p<h;p+=3)fe.pushVertex(q[p],q[p+1],q[p+2]);if(void 0!==u.normal){var d=u.normal.array;for(p=0,h=d.length;p<h;p+=3)fe.pushNormal(d[p],d[p+1],d[p+2])}if(void 0!==u.uv){var f=u.uv.array;for(p=0,h=f.length;p<h;p+=2)fe.pushUv(f[p],f[p+1])}if(null!==l.index){var m=l.index.array;if(0<c.length)for(var g=0;g<c.length;g++){var y=c[g];for(p=y.start,h=y.start+y.count;p<h;p+=3)fe.pushTriangle(m[p],m[p+1],m[p+2])}else for(p=0,h=m.length;p<h;p+=3)fe.pushTriangle(m[p],m[p+1],m[p+2])}else for(p=0,h=q.length/3;p<h;p+=3)fe.pushTriangle(p,p+1,p+2)}else if(l instanceof TONG.Geometry){var v=l.vertices,b=l.faces,x=l.faceVertexUvs[0];ce.getNormalMatrix(re);for(var w=a.material,T=Array.isArray(w),N=0,O=v.length;N<O;N++){var S=v[N];if(ie.copy(S),!0===w.morphTargets)for(var C=l.morphTargets,G=a.morphTargetInfluences,k=0,A=C.length;k<A;k++){var L=G[k];if(0!==L){var M=C[k].vertices[N];ie.x+=(M.x-S.x)*L,ie.y+=(M.y-S.y)*L,ie.z+=(M.z-S.z)*L}}fe.pushVertex(ie.x,ie.y,ie.z)}for(var E=0,j=b.length;E<j;E++){var P=b[E];if(void 0!==(w=!0===T?a.material[P.materialIndex]:a.material)){var I=w.side,R=ne[P.a],V=ne[P.b],D=ne[P.c];if(!1!==fe.checkTriangleVisibility(R,V,D)){var F=fe.checkBackfaceCulling(R,V,D);if(I!==TONG.DoubleSide){if(I===TONG.FrontSide&&!1===F)continue;if(I===TONG.BackSide&&!0===F)continue}(Z=ve()).id=a.id,Z.v1.copy(R),Z.v2.copy(V),Z.v3.copy(D),Z.normalModel.copy(P.normal),!1!==F||I!==TONG.BackSide&&I!==TONG.DoubleSide||Z.normalModel.negate(),Z.normalModel.applyMatrix3(ce).normalize();for(var _=P.vertexNormals,B=0,U=Math.min(_.length,3);B<U;B++){var z=Z.vertexNormalsModel[B];z.copy(_[B]),!1!==F||I!==TONG.BackSide&&I!==TONG.DoubleSide||z.negate(),z.applyMatrix3(ce).normalize()}Z.vertexNormalsLength=_.length;var W=x[E];if(void 0!==W)for(var H=0;H<3;H++)Z.uvs[H].copy(W[H]);Z.color=P.color,Z.material=w,Z.z=(R.positionScreen.z+V.positionScreen.z+D.positionScreen.z)/3,Z.renderOrder=a.renderOrder,oe.elements.push(Z)}}}}}else if(a instanceof TONG.Line){if(ue.multiplyMatrices(le,re),l instanceof TONG.BufferGeometry){if(void 0!==(u=l.attributes).position){var q;for(p=0,h=(q=u.position.array).length;p<h;p+=3)fe.pushVertex(q[p],q[p+1],q[p+2]);if(void 0!==u.color){var Y=u.color.array;for(p=0,h=Y.length;p<h;p+=3)fe.pushColor(Y[p],Y[p+1],Y[p+2])}if(null!==l.index)for(p=0,h=(m=l.index.array).length;p<h;p+=2)fe.pushLine(m[p],m[p+1]);else{var J=a instanceof TONG.LineSegments?2:1;for(p=0,h=q.length/3-1;p<h;p+=J)fe.pushLine(p,p+1)}}}else if(l instanceof TONG.Geometry){if(0===(v=a.geometry.vertices).length)continue;(R=ye()).positionScreen.copy(v[0]).applyMatrix4(ue);for(J=a instanceof TONG.LineSegments?2:1,N=1,O=v.length;N<O;N++)(R=ye()).positionScreen.copy(v[N]).applyMatrix4(ue),0<(N+1)%J||(V=ne[X-2],he.copy(R.positionScreen),de.copy(V.positionScreen),!0===we(he,de)&&(he.multiplyScalar(1/he.w),de.multiplyScalar(1/de.w),(Q=be()).id=a.id,Q.v1.positionScreen.copy(he),Q.v2.positionScreen.copy(de),Q.z=Math.max(he.z,de.z),Q.renderOrder=a.renderOrder,Q.material=a.material,a.material.vertexColors===TONG.VertexColors&&(Q.vertexColors[0].copy(a.geometry.colors[N]),Q.vertexColors[1].copy(a.geometry.colors[N-1])),oe.elements.push(Q)))}}else if(a instanceof TONG.Points){if(ue.multiplyMatrices(le,re),l instanceof TONG.Geometry)for(N=0,O=(v=a.geometry.vertices).length;N<O;N++){S=v[N];se.set(S.x,S.y,S.z,1),se.applyMatrix4(ue),ge(se,a,t)}}else a instanceof TONG.Sprite&&(se.set(re.elements[12],re.elements[13],re.elements[14],1),se.applyMatrix4(le),ge(se,a,t))}return!0===n&&oe.elements.sort(xe),oe}},TONG.SpriteCanvasMaterial=function(e){TONG.Material.call(this),this.type="SpriteCanvasMaterial",this.color=new TONG.Color(16777215),this.program=function(){},this.setValues(e)},TONG.SpriteCanvasMaterial.prototype=Object.create(TONG.Material.prototype),TONG.SpriteCanvasMaterial.prototype.constructor=TONG.SpriteCanvasMaterial,TONG.SpriteCanvasMaterial.prototype.isSpriteCanvasMaterial=!0,TONG.SpriteCanvasMaterial.prototype.clone=function(){var e=new TONG.SpriteCanvasMaterial;return e.copy(this),e.color.copy(this.color),e.program=this.program,e},TONG.CanvasRenderer=function(e){console.log("TONG.CanvasRenderer",TONG.REVISION),e=e||{};var a,l,f,u,c,p,m,g,y,v,b,x,w,T,N,O,S,C,G,k=this,h=new TONG.Projector,n=void 0!==e.canvas?e.canvas:document.createElement("canvas"),d=n.width,A=n.height,L=Math.floor(d/2),M=Math.floor(A/2),E=0,j=0,P=d,I=A,o=1,R=n.getContext("2d",{alpha:!0===e.alpha}),r=new TONG.Color(0),i=!0===e.alpha?0:1,s=1,V=0,D=null,F=null,_=null,B=null,U=null,t=[],z=new TONG.Color,W=new TONG.Color,H=new TONG.Color,q=new TONG.Color,Y={},J=new TONG.Box2,K=new TONG.Box2,X=new TONG.Box2,Z=new TONG.Color,$=new TONG.Color,Q=new TONG.Color,ee=new TONG.Vector3,te=new TONG.Vector3,re=new TONG.Vector3,ne=new TONG.Matrix3;function oe(e,t,r){he(r.opacity),de(r.blending);var n=t.scale.x*L,o=t.scale.y*M,i=Math.sqrt(n*n+o*o);if(X.min.set(e.x-i,e.y-i),X.max.set(e.x+i,e.y+i),r.isSpriteMaterial){var s=r.map;if(null!==s){var a=Y[s.id];if(void 0!==a&&a.version===s.version||(a=ue(s),Y[s.id]=a),void 0!==a.canvas){ve(a.canvas);var l=s.image,u=l.width*s.offset.x,c=l.height*s.offset.y,p=l.width*s.repeat.x,h=l.height*s.repeat.y,d=n/p,f=o/h;R.save(),R.translate(e.x,e.y),0!==r.rotation&&R.rotate(r.rotation),R.translate(-n/2,-o/2),R.scale(d,f),R.translate(-u,-c),R.fillRect(u,c,p,h),R.restore()}}else ve(r.color.getStyle()),R.save(),R.translate(e.x,e.y),0!==r.rotation&&R.rotate(r.rotation),R.scale(n,-o),R.fillRect(-.5,-.5,1,1),R.restore()}else r.isSpriteCanvasMaterial?(ye(r.color.getStyle()),ve(r.color.getStyle()),R.save(),R.translate(e.x,e.y),0!==r.rotation&&R.rotate(r.rotation),R.scale(n,o),r.program(R),R.restore()):r.isPointsMaterial&&(ve(r.color.getStyle()),R.save(),R.translate(e.x,e.y),0!==r.rotation&&R.rotate(r.rotation),R.scale(n*r.size,-o*r.size),R.fillRect(-.5,-.5,1,1),R.restore())}function ie(e,t,r,n){if(he(n.opacity),de(n.blending),R.beginPath(),R.moveTo(e.positionScreen.x,e.positionScreen.y),R.lineTo(t.positionScreen.x,t.positionScreen.y),n.isLineBasicMaterial){if(fe(n.linewidth),me(n.linecap),ge(n.linejoin),n.vertexColors!==TONG.VertexColors)ye(n.color.getStyle());else{var o=r.vertexColors[0].getStyle(),i=r.vertexColors[1].getStyle();if(o===i)ye(o);else{try{var s=R.createLinearGradient(e.positionScreen.x,e.positionScreen.y,t.positionScreen.x,t.positionScreen.y);s.addColorStop(0,o),s.addColorStop(1,i)}catch(e){s=o}ye(s)}}R.stroke(),X.expandByScalar(2*n.linewidth)}else n.isLineDashedMaterial&&(fe(n.linewidth),me(n.linecap),ge(n.linejoin),ye(n.color.getStyle()),be([n.dashSize,n.gapSize]),R.stroke(),X.expandByScalar(2*n.linewidth),be([]))}function se(e,t,r,n,o,i,s,a){var l,u,c,p,h,d;if(k.info.render.vertices+=3,k.info.render.faces++,he(a.opacity),de(a.blending),m=e.positionScreen.x,g=e.positionScreen.y,y=t.positionScreen.x,v=t.positionScreen.y,b=r.positionScreen.x,x=r.positionScreen.y,l=m,u=g,c=y,p=v,h=b,d=x,R.beginPath(),R.moveTo(l,u),R.lineTo(c,p),R.lineTo(h,d),R.closePath(),(a.isMeshLambertMaterial||a.isMeshPhongMaterial||a.isMeshStandardMaterial)&&null===a.map)W.copy(a.color),H.copy(a.emissive),a.vertexColors===TONG.FaceColors&&W.multiply(s.color),z.copy(Z),te.copy(e.positionWorld).add(t.positionWorld).add(r.positionWorld).divideScalar(3),function(e,t,r){for(var n=0,o=f.length;n<o;n++){var i=f[n];if(q.copy(i.color),i.isDirectionalLight){var s=ee.setFromMatrixPosition(i.matrixWorld).normalize();if((a=t.dot(s))<=0)continue;a*=i.intensity,r.add(q.multiplyScalar(a))}else if(i.isPointLight){var a;if(s=ee.setFromMatrixPosition(i.matrixWorld),(a=t.dot(ee.subVectors(s,e).normalize()))<=0)continue;if(0==(a*=0==i.distance?1:1-Math.min(e.distanceTo(s)/i.distance,1)))continue;a*=i.intensity,r.add(q.multiplyScalar(a))}}}(te,s.normalModel,z),z.multiply(W).add(H),!0===a.wireframe?ae(z,a.wireframeLinewidth,a.wireframeLinecap,a.wireframeLinejoin):le(z);else if(a.isMeshBasicMaterial||a.isMeshLambertMaterial||a.isMeshPhongMaterial||a.isMeshStandardMaterial){if(null!==a.map)a.map.mapping===TONG.UVMapping&&(w=s.uvs,ce(m,g,y,v,b,x,w[n].x,w[n].y,w[o].x,w[o].y,w[i].x,w[i].y,a.map));else null!==a.envMap?a.envMap.mapping===TONG.SphericalReflectionMapping&&(re.copy(s.vertexNormalsModel[n]).applyMatrix3(ne),T=.5*re.x+.5,N=.5*re.y+.5,re.copy(s.vertexNormalsModel[o]).applyMatrix3(ne),O=.5*re.x+.5,S=.5*re.y+.5,re.copy(s.vertexNormalsModel[i]).applyMatrix3(ne),C=.5*re.x+.5,G=.5*re.y+.5,ce(m,g,y,v,b,x,T,N,O,S,C,G,a.envMap)):(z.copy(a.color),a.vertexColors===TONG.FaceColors&&z.multiply(s.color),!0===a.wireframe?ae(z,a.wireframeLinewidth,a.wireframeLinecap,a.wireframeLinejoin):le(z))}else a.isMeshNormalMaterial?(re.copy(s.normalModel).applyMatrix3(ne),z.setRGB(re.x,re.y,re.z).multiplyScalar(.5).addScalar(.5)):z.setRGB(1,1,1),!0===a.wireframe?ae(z,a.wireframeLinewidth,a.wireframeLinecap,a.wireframeLinejoin):le(z)}function ae(e,t,r,n){fe(t),me(r),ge(n),ye(e.getStyle()),R.stroke(),X.expandByScalar(2*t)}function le(e){ve(e.getStyle()),R.fill()}function ue(e){if(0===e.version||e instanceof TONG.CompressedTexture||e instanceof TONG.DataTexture)return{canvas:void 0,version:e.version};var t=e.image;if(!1===t.complete)return{canvas:void 0,version:0};var r=e.wrapS===TONG.RepeatWrapping||e.wrapS===TONG.MirroredRepeatWrapping,n=e.wrapT===TONG.RepeatWrapping||e.wrapT===TONG.MirroredRepeatWrapping,o=e.wrapS===TONG.MirroredRepeatWrapping,i=e.wrapT===TONG.MirroredRepeatWrapping,s=document.createElement("canvas");s.width=t.width*(o?2:1),s.height=t.height*(i?2:1);var a=s.getContext("2d");a.setTransform(1,0,0,-1,0,t.height),a.drawImage(t,0,0),!0===o&&(a.setTransform(-1,0,0,-1,t.width,t.height),a.drawImage(t,-t.width,0)),!0===i&&(a.setTransform(1,0,0,1,0,0),a.drawImage(t,0,t.height)),!0===o&&!0===i&&(a.setTransform(-1,0,0,1,t.width,0),a.drawImage(t,-t.width,t.height));var l="no-repeat";!0===r&&!0===n?l="repeat":!0===r?l="repeat-x":!0===n&&(l="repeat-y");var u=R.createPattern(s,l);return e.onUpdate&&e.onUpdate(e),{canvas:u,version:e.version}}function ce(e,t,r,n,o,i,s,a,l,u,c,p,h){var d=Y[h.id];if(void 0!==d&&d.version===h.version||(d=ue(h),Y[h.id]=d),void 0===d.canvas)return ve("rgba( 0, 0, 0, 1)"),void R.fill();ve(d.canvas);var f,m,g,y,v,b,x,w,T=h.offset.x/h.repeat.x,N=h.offset.y/h.repeat.y,O=h.image.width*h.repeat.x,S=h.image.height*h.repeat.y;l=(l+T)*O,u=(u+N)*S,c=(c+T)*O,p=(p+N)*S,r-=e,n-=t,o-=e,i-=t,0!==(x=(l-=s=(s+T)*O)*(p-=a=(a+N)*S)-(c-=s)*(u-=a))&&(v=e-(f=(p*r-u*o)*(w=1/x))*s-(g=(l*o-c*r)*w)*a,b=t-(m=(p*n-u*i)*w)*s-(y=(l*i-c*n)*w)*a,R.save(),R.transform(f,m,g,y,v,b),R.fill(),R.restore())}function pe(e,t,r){var n,o=t.x-e.x,i=t.y-e.y,s=o*o+i*i;0!==s&&(o*=n=r/Math.sqrt(s),i*=n,t.x+=o,t.y+=i,e.x-=o,e.y-=i)}function he(e){s!==e&&(R.globalAlpha=e,s=e)}function de(e){V!==e&&(e===TONG.NormalBlending?R.globalCompositeOperation="source-over":e===TONG.AdditiveBlending?R.globalCompositeOperation="lighter":e===TONG.SubtractiveBlending?R.globalCompositeOperation="darker":e===TONG.MultiplyBlending&&(R.globalCompositeOperation="multiply"),V=e)}function fe(e){_!==e&&(R.lineWidth=e,_=e)}function me(e){B!==e&&(R.lineCap=e,B=e)}function ge(e){U!==e&&(R.lineJoin=e,U=e)}function ye(e){D!==e&&(R.strokeStyle=e,D=e)}function ve(e){F!==e&&(R.fillStyle=e,F=e)}function be(e){t.length!==e.length&&(R.setLineDash(e),t=e)}void 0===R.setLineDash&&(R.setLineDash=function(){}),this.domElement=n,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.getContext=function(){return R},this.getContextAttributes=function(){return R.getContextAttributes()},this.getPixelRatio=function(){return o},this.setPixelRatio=function(e){void 0!==e&&(o=e)},this.setSize=function(e,t,r){d=e*o,A=t*o,n.width=d,n.height=A,L=Math.floor(d/2),M=Math.floor(A/2),!1!==r&&(n.style.width=e+"px",n.style.height=t+"px"),J.min.set(-L,-M),J.max.set(L,M),K.min.set(-L,-M),K.max.set(L,M),s=1,V=0,U=B=_=F=D=null,this.setViewport(0,0,e,t)},this.setViewport=function(e,t,r,n){E=e*o,j=t*o,P=r*o,I=n*o},this.setScissor=function(){},this.setScissorTest=function(){},this.setClearColor=function(e,t){r.set(e),i=void 0!==t?t:1,K.min.set(-L,-M),K.max.set(L,M)},this.setClearColorHex=function(e,t){console.warn("TONG.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(e,t)},this.getClearColor=function(){return r},this.getClearAlpha=function(){return i},this.getMaxAnisotropy=function(){return 0},this.clear=function(){!1===K.isEmpty()&&(K.intersect(J),K.expandByScalar(2),K.min.x=K.min.x+L,K.min.y=-K.min.y+M,K.max.x=K.max.x+L,K.max.y=-K.max.y+M,i<1&&R.clearRect(0|K.min.x,0|K.max.y,K.max.x-K.min.x|0,K.min.y-K.max.y|0),0<i&&(de(TONG.NormalBlending),he(1),ve("rgba("+Math.floor(255*r.r)+","+Math.floor(255*r.g)+","+Math.floor(255*r.b)+","+i+")"),R.fillRect(0|K.min.x,0|K.max.y,K.max.x-K.min.x|0,K.min.y-K.max.y|0)),K.makeEmpty())},this.clearColor=function(){},this.clearDepth=function(){},this.clearStencil=function(){},this.render=function(e,t){if(void 0!==t.isCamera){var r=e.background;r&&r.isColor?(ve("rgb("+Math.floor(255*r.r)+","+Math.floor(255*r.g)+","+Math.floor(255*r.b)+")"),R.fillRect(0,0,d,A)):!0===this.autoClear&&this.clear(),k.info.render.vertices=0,k.info.render.faces=0,R.setTransform(P/d,0,0,-I/A,E,A-j),R.translate(L,M),a=h.projectScene(e,t,this.sortObjects,this.sortElements),l=a.elements,f=a.lights,ne.getNormalMatrix(t.matrixWorldInverse),function(){Z.setRGB(0,0,0),$.setRGB(0,0,0),Q.setRGB(0,0,0);for(var e=0,t=f.length;e<t;e++){var r=f[e],n=r.color;r.isAmbientLight?Z.add(n):r.isDirectionalLight?$.add(n):r.isPointLight&&Q.add(n)}}();for(var n=0,o=l.length;n<o;n++){var i=l[n],s=i.material;if(void 0!==s&&0!==s.opacity){if(X.makeEmpty(),i instanceof TONG.RenderableSprite)(u=i).x*=L,u.y*=M,oe(u,i,s);else if(i instanceof TONG.RenderableLine)u=i.v1,c=i.v2,u.positionScreen.x*=L,u.positionScreen.y*=M,c.positionScreen.x*=L,c.positionScreen.y*=M,X.setFromPoints([u.positionScreen,c.positionScreen]),!0===J.intersectsBox(X)&&ie(u,c,i,s);else if(i instanceof TONG.RenderableFace){if(u=i.v1,c=i.v2,p=i.v3,u.positionScreen.z<-1||1<u.positionScreen.z)continue;if(c.positionScreen.z<-1||1<c.positionScreen.z)continue;if(p.positionScreen.z<-1||1<p.positionScreen.z)continue;u.positionScreen.x*=L,u.positionScreen.y*=M,c.positionScreen.x*=L,c.positionScreen.y*=M,p.positionScreen.x*=L,p.positionScreen.y*=M,0<s.overdraw&&(pe(u.positionScreen,c.positionScreen,s.overdraw),pe(c.positionScreen,p.positionScreen,s.overdraw),pe(p.positionScreen,u.positionScreen,s.overdraw)),X.setFromPoints([u.positionScreen,c.positionScreen,p.positionScreen]),!0===J.intersectsBox(X)&&se(u,c,p,0,1,2,i,s)}K.union(X)}}R.setTransform(1,0,0,1,0,0)}else console.error("TONG.CanvasRenderer.render: camera is not an instance of TONG.Camera.")}},TONG.RaytracingRenderer=function(r){console.log("TONG.RaytracingRenderer",TONG.REVISION),r=r||{};var i,s,a=this,l=[],u=!1,n=document.createElement("canvas"),c=n.getContext("2d",{alpha:!0===r.alpha}),o=new TONG.Color(0);this.domElement=n,this.autoClear=!0;var p=r.workers,h=r.blockSize||64;this.randomize=r.randomize;var d,f,m,g=[],y=0,v=0;function b(e){e.postMessage({init:[i,s],worker:e.id,blockSize:h})}function x(e){if(!g.length)return u=!1,a.dispatchEvent({type:"complete"});var t=g.pop(),r=t%f*h,n=(t/f|0)*h;e.postMessage({render:!0,x:r,y:n,sceneId:v}),c.fillStyle="#"+e.color,c.fillRect(r,n,h,h)}console.log("%cSpinning off "+p+" Workers ","font-size: 20px; background: black; color: white; font-family: monospace;"),this.setWorkers=function(e){for(p=e||navigator.hardwareConcurrency||4;l.length<p;){var t=new Worker(r.workerPath);t.id=y++,t.onmessage=function(e){var t=e.data;if(t&&t.blockSize&&v==t.sceneId){var r=new ImageData(new Uint8ClampedArray(t.data),t.blockSize,t.blockSize);if(c.putImageData(r,t.blockX,t.blockY),console.log("Worker "+this.id,t.time/1e3,(Date.now()-N)/1e3+" s"),l.length>p)return l.splice(l.indexOf(this),1),this.terminate();x(this)}},t.color=(new TONG.Color).setHSL(Math.random(),.8,.8).getHexString(),l.push(t),u&&(b(t),t.postMessage({scene:w,camera:T,annex:O,sceneId:v}),x(t))}if(!u)for(;l.length>p;)l.pop().terminate()},this.setWorkers(p),this.setClearColor=function(e,t){o.set(e)},this.setPixelRatio=function(){},this.setSize=function(e,t){n.width=e,n.height=t,i=n.width,s=n.height,Math.floor(i/2),Math.floor(s/2),c.fillStyle="white",l.forEach(b)},this.setSize(n.width,n.height),this.clear=function(){};var w,T,N,O={},S={mirror:1,reflectivity:1,refractionRatio:1,glass:1};function C(e){var t=e.material;if(t&&!(t.uuid in O)){var r={};for(var n in S)void 0!==t[n]&&(r[n]=t[n]);O[t.uuid]=r}}this.render=function(e,t){(u=!0)===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),w=e.toJSON(),T=t.toJSON(),++v,e.traverse(C),l.forEach(function(e){e.postMessage({scene:w,camera:T,annex:O,sceneId:v})}),c.clearRect(0,0,i,s),N=Date.now(),f=Math.ceil(i/h),m=Math.ceil(s/h),d=f*m,g=[];for(var r=0;r<d;r++)g.push(r);if(a.randomize)for(r=0;r<d;r++){var n=Math.random()*d|0,o=g[n];g[n]=g[r],g[r]=o}l.forEach(x)}},Object.assign(TONG.RaytracingRenderer.prototype,TONG.EventDispatcher.prototype),TONG.SoftwareRenderer=function(e){console.log("TONG.SoftwareRenderer",TONG.REVISION);var Tt,Nt,Ot,V,St,Ct,Gt,kt,At,Lt,D,Mt,Et,F,jt,Pt,_=void 0!==(e=e||{}).canvas?e.canvas:document.createElement("canvas"),B=_.getContext("2d",{alpha:!0===e.alpha}),U=e.alpha,i={},O={},z=new TONG.Color(0),It=1,Rt=2,Vt=4,Dt=(1<<Vt)-1,Ft=3,_t=1<<Ft,W=1<<24,H=!1,q=new TONG.Vector3(0,0,1),Y=new TONG.Vector3,Bt=1/0,Ut=1/0,zt=0,Wt=0,m=1/0,g=1/0,y=0,v=0,b=new TONG.Projector,x=new TONG.Vector4,w=new TONG.Vector4,T=new TONG.Vector4,N=new TONG.Vector2,S=new TONG.Vector2,C=new TONG.Vector2,Ht=[],qt=0,Yt=[],Jt=0,Kt=[],Xt=0;function J(e){for(var t=Tt*Nt*4,r=0;r<t;r+=4)Mt[r]=255*e.r|0,Mt[r+1]=255*e.g|0,Mt[r+2]=255*e.b|0,Mt[r+3]=U?0:255;B.fillStyle=U?"rgba(0, 0, 0, 0)":e.getStyle(),B.fillRect(0,0,Tt,Nt)}function s(e,t){var r=0,n=0,o=255*e.color.r,i=255*e.color.g,s=255*e.color.b,a=new Uint8Array(768);if(t){for(;r<204;)a[n++]=Math.min(r*o/204,255),a[n++]=Math.min(r*i/204,255),a[n++]=Math.min(r*s/204,255),++r;for(;r<256;)a[n++]=Math.min(o+(r-204)*(255-o)/82,255),a[n++]=Math.min(i+(r-204)*(255-i)/82,255),a[n++]=Math.min(s+(r-204)*(255-s)/82,255),++r}else for(;r<256;)a[n++]=Math.min(r*o/255,255),a[n++]=Math.min(r*i/255,255),a[n++]=Math.min(r*s/255,255),++r;return a}function a(e,t,r,n,o,i,s,a,l){var u=4*r,c=O[l.map.id];if(c.data){var p=c.width,h=l.transparent,d=p-1,f=c.data,m=4*((i*p&d)*p+(o*p&d));if(h){var g=f[m],y=f[m+1],v=f[m+2],b=f[m+3]*l.opacity/255,x=e[u],w=e[u+1],T=e[u+2];e[u]=g*b+x*(1-b),e[u+1]=y*b+w*(1-b),e[u+2]=v*b+T*(1-b),e[u+3]=(l.opacity<<8)-1,255==e[u+3]&&(t[r]=n)}else e[u]=f[m],e[u+1]=f[m+1],e[u+2]=f[m+2],e[u+3]=(l.opacity<<8)-1,t[r]=n}}function l(e,t,r,n,o,i,s,a,l){var u=4*r,c=O[l.map.id];if(c.data){var p=c.width,h=l.transparent,d=3*(0<s?~~s:0),f=p-1,m=c.data,g=4*((i*p&f)*p+(o*p&f));if(h){var y=l.palette[d]*m[g],v=l.palette[d+1]*m[g+1],b=l.palette[d+2]*m[g+2],x=m[g+3]*l.opacity/256,w=e[u],T=e[u+1],N=e[u+2];e[u]=y*x+w*(1-x),e[u+1]=v*x+T*(1-x),e[u+2]=b*x+N*(1-x),e[u+3]=(l.opacity<<8)-1,255==e[u+3]&&(t[r]=n)}else e[u]=l.palette[d]*m[g]>>8,e[u+1]=l.palette[d+1]*m[g+1]>>8,e[u+2]=l.palette[d+2]*m[g+2]>>8,e[u+3]=(l.opacity<<8)-1,t[r]=n}}function G(e){var t=e.id,r=i[t];if(r&&e.map&&!O[e.map.id]&&delete i[t],void 0===i[t]||!0===e.needsUpdate){if(e instanceof TONG.MeshBasicMaterial||e instanceof TONG.MeshLambertMaterial||e instanceof TONG.MeshPhongMaterial||e instanceof TONG.SpriteMaterial)if(e instanceof TONG.MeshLambertMaterial?e.palette||(e.palette=s(e,!1)):e instanceof TONG.MeshPhongMaterial&&(e.palette||(e.palette=s(e,!0))),e.map){var n=new TONG.SoftwareRenderer.Texture;if(n.fromImage(e.map.image),!n.data)return;O[e.map.id]=n,r=e instanceof TONG.MeshBasicMaterial||e instanceof TONG.SpriteMaterial?a:l}else o=e.vertexColors===TONG.FaceColors?["var colorOffset = offset * 4;","buffer[ colorOffset ] = face.color.r * 255;","buffer[ colorOffset + 1 ] = face.color.g * 255;","buffer[ colorOffset + 2 ] = face.color.b * 255;","buffer[ colorOffset + 3 ] = material.opacity * 255;","depthBuf[ offset ] = depth;"].join("\n"):["var colorOffset = offset * 4;","buffer[ colorOffset ] = material.color.r * 255;","buffer[ colorOffset + 1 ] = material.color.g * 255;","buffer[ colorOffset + 2 ] = material.color.b * 255;","buffer[ colorOffset + 3 ] = material.opacity * 255;","depthBuf[ offset ] = depth;"].join("\n"),r=new Function("buffer, depthBuf, offset, depth, u, v, n, face, material",o);else if(e instanceof TONG.LineBasicMaterial){var o=["var colorOffset = offset * 4;","buffer[ colorOffset ] = material.color.r * (color1.r+color2.r) * 0.5 * 255;","buffer[ colorOffset + 1 ] = material.color.g * (color1.g+color2.g) * 0.5 * 255;","buffer[ colorOffset + 2 ] = material.color.b * (color1.b+color2.b) * 0.5 * 255;","buffer[ colorOffset + 3 ] = 255;","depthBuf[ offset ] = depth;"].join("\n");r=new Function("buffer, depthBuf, offset, depth, color1, color2, material",o)}else{o=["var colorOffset = offset * 4;","buffer[ colorOffset ] = u * 255;","buffer[ colorOffset + 1 ] = v * 255;","buffer[ colorOffset + 2 ] = 0;","buffer[ colorOffset + 3 ] = 255;","depthBuf[ offset ] = depth;"].join("\n");r=new Function("buffer, depthBuf, offset, depth, u, v, n, face, material",o)}i[t]=r,e.needsUpdate=!1}return r}function Zt(e,t,r,n,o,i,s,a,l){if(!(e.z<-1||1<e.z||t.z<-1||1<t.z||r.z<-1||1<r.z)){var u=1<<Vt,c=e.x*St+kt|0,p=t.x*St+kt|0,h=r.x*St+kt|0,d=e.y*Ct+At|0,f=t.y*Ct+At|0,m=r.y*Ct+At|0,g=a.vertexNormalsModel&&a.vertexNormalsModel.length,y=n&&o&&i,v=Math.max(Math.sqrt((c-p)*(c-p)+(d-f)*(d-f)),Math.sqrt((p-h)*(p-h)+(f-m)*(f-m)),Math.sqrt((h-c)*(h-c)+(m-d)*(m-d)));if(!(a instanceof TONG.RenderableSprite)&&100*u<v){var b,x,w,T,N,O,S,C,G,k,A={vertexNormalsModel:[],color:a.color};if(y)Xt===Kt.length?(b=new TONG.Vector2,Kt.push(b),++Xt,x=new TONG.Vector2,Kt.push(x),++Xt,w=new TONG.Vector2,Kt.push(w)):(b=Kt[Xt],x=Kt[++Xt],w=Kt[++Xt]),++Xt,T=(1+t.z)*(t.w/e.w)/(1+e.z),b.copy(n).multiplyScalar(T).add(o).multiplyScalar(1/(T+1)),T=(1+r.z)*(r.w/t.w)/(1+t.z),x.copy(o).multiplyScalar(T).add(i).multiplyScalar(1/(T+1)),T=(1+e.z)*(e.w/r.w)/(1+r.z),w.copy(i).multiplyScalar(T).add(n).multiplyScalar(1/(T+1));return qt===Ht.length?(N=new TONG.Vector4,Ht.push(N),++qt,O=new TONG.Vector4,Ht.push(O),++qt,S=new TONG.Vector4,Ht.push(S)):(N=Ht[qt],O=Ht[++qt],S=Ht[++qt]),++qt,N.copy(e).add(t).multiplyScalar(.5),O.copy(t).add(r).multiplyScalar(.5),S.copy(r).add(e).multiplyScalar(.5),g&&(Jt===Yt.length?(C=new TONG.Vector3,Yt.push(C),++Jt,G=new TONG.Vector3,Yt.push(G),++Jt,k=new TONG.Vector3,Yt.push(k)):(C=Yt[Jt],G=Yt[++Jt],k=Yt[++Jt]),++Jt,C.copy(a.vertexNormalsModel[0]).add(a.vertexNormalsModel[1]).normalize(),G.copy(a.vertexNormalsModel[1]).add(a.vertexNormalsModel[2]).normalize(),k.copy(a.vertexNormalsModel[2]).add(a.vertexNormalsModel[0]).normalize()),g&&(A.vertexNormalsModel[0]=a.vertexNormalsModel[0],A.vertexNormalsModel[1]=C,A.vertexNormalsModel[2]=k),Zt(e,N,S,n,b,w,s,A,l),g&&(A.vertexNormalsModel[0]=a.vertexNormalsModel[1],A.vertexNormalsModel[1]=G,A.vertexNormalsModel[2]=C),Zt(t,O,N,o,x,b,s,A,l),g&&(A.vertexNormalsModel[0]=C,A.vertexNormalsModel[1]=G,A.vertexNormalsModel[2]=k),Zt(N,O,S,b,x,w,s,A,l),g&&(A.vertexNormalsModel[0]=a.vertexNormalsModel[2],A.vertexNormalsModel[1]=k,A.vertexNormalsModel[2]=G),void Zt(r,S,O,i,w,x,s,A,l)}var L,M,E,j,P,I,R,V,D,F,_,B,U=e.z*Gt+Lt|0,z=t.z*Gt+Lt|0,W=r.z*Gt+Lt|0;y=!1;n&&o&&i&&(y=!0,L=n.x,M=1-n.y,E=o.x,j=1-o.y,P=i.x,I=1-i.y),g&&(R=a.vertexNormalsModel[0],V=a.vertexNormalsModel[1],D=a.vertexNormalsModel[2],F=255*R.z,_=255*V.z,B=255*D.z);var H=c-p,q=f-d,Y=p-h,J=m-f,K=h-c,X=d-m,Z=Math.max(Math.min(c,p,h)+Dt>>Vt,0),$=Math.min(Math.max(c,p,h)+Dt>>Vt,Tt),Q=Math.max(Math.min(d,f,m)+Dt>>Vt,0),ee=Math.min(Math.max(d,f,m)+Dt>>Vt,Nt);Bt=Math.min(Z,Bt),zt=Math.max($,zt),Ut=Math.min(Q,Ut),Wt=Math.max(ee,Wt);var te=_t,re=(Z&=~(te-1))<<Vt,ne=(Q&=~(te-1))<<Vt,oe=q*(re-c)+H*(ne-d),ie=J*(re-p)+Y*(ne-f),se=X*(re-h)+K*(ne-m);(0<q||0==q&&0<H)&&oe++,(0<J||0==J&&0<Y)&&ie++,(0<X||0==X&&0<K)&&se++;var ae,le,ue,ce,pe,he=U-z,de=W-U,fe=1/(H*X-K*q),me=fe*(he*X-de*q),ge=fe*(he*K-H*de),ye=U+(re-c)*me+(ne-d)*ge|0;if(y){var ve=L-E,be=P-L,xe=fe*(ve*X-be*q),we=fe*(ve*K-H*be),Te=M-j,Ne=I-M;ue=L+(re-c)*xe+(ne-d)*we,ce=M+(re-c)*(ae=fe*(Te*X-Ne*q))+(ne-d)*(le=fe*(Te*K-H*Ne)),xe*=u,we*=u,ae*=u,le*=u}if(g){var Oe,Se=F-_,Ce=B-F,Ge=fe*(Se*X-Ce*q);pe=F+(re-c)*Ge+(ne-d)*(Oe=fe*(Se*K-H*Ce)),Ge*=u,Oe*=u}var ke=te-1,Ae=0,Le=0,Me=0,Ee=0,je=0,Pe=0,Ie=0,Re=0;0<=H?Le-=ke*H:Ae-=ke*H,0<=q?Le-=ke*q:Ae-=ke*q,0<=Y?Ee-=ke*Y:Me-=ke*Y,0<=J?Ee-=ke*J:Me-=ke*J,0<=K?Pe-=ke*K:je-=ke*K,0<=X?Pe-=ke*X:je-=ke*X,0<=(me=me*u|0)?Re+=ke*me:Ie+=ke*me,0<=(ge=ge*u|0)?Re+=ke*ge:Ie+=ke*ge;var Ve,De,Fe,_e=Tt-te,Be=oe=oe-1>>Vt,Ue=ie=ie-1>>Vt,ze=se=se-1>>Vt,We=ye,He=-te,qe=He*q,Ye=He*J,Je=He*X,Ke=He*me;y&&(Ve=He*xe,De=He*ae),g&&(Fe=He*Ge);for(var Xe=Z,Ze=Q;Ze<ee;Ze+=te){for(;Z<=Xe&&Xe<$&&Le<=Be&&Ee<=Ue&&Pe<=ze;)Xe+=He,Be+=qe,Ue+=Ye,ze+=Je,We+=Ke,y&&(ue+=Ve,ce+=De),g&&(pe+=Fe);for(He=-He,qe=-qe,Ye=-Ye,Je=-Je,Ke=-Ke,y&&(Ve=-Ve,De=-De),g&&(Fe=-Fe);Be+=qe,Ue+=Ye,ze+=Je,We+=Ke,y&&(ue+=Ve,ce+=De),g&&(pe+=Fe),!((Xe+=He)<Z||$<=Xe);)if(Be<Le){if(qe<0)break}else if(Ue<Ee){if(Ye<0)break}else if(ze<Pe){if(Je<0)break}else{var $e=Xe>>Ft,Qe=Ze>>Ft,et=$e+Qe*Ot,tt=We+Ie;if(!(jt[et]<tt)){var rt=Pt[et];rt&Rt&&$t($e,Qe),Pt[et]=rt&~(It|Rt);var nt=Xe+Ze*Tt;if(Ae<=Be&&Me<=Ue&&je<=ze){var ot=We+Re;jt[et]=Math.min(jt[et],ot);var it=Be,st=Ue,at=We;y&&(dt=ue,ft=ce),g&&(mt=pe);for(var lt=0;lt<te;lt++){var ut=it,ct=st,pt=at;y&&(yt=dt,vt=ft),g&&(bt=mt);for(var ht=0;ht<te;ht++){(wt=pt)<Et[nt]&&s(Mt,Et,nt,wt,yt,vt,bt,a,l),ut+=q,ct+=J,pt+=me,y&&(yt+=xe,vt+=ae),g&&(bt+=Ge),nt++}it+=H,st+=Y,at+=ge,y&&(dt+=we,ft+=le),g&&(mt+=Oe),nt+=_e}}else{it=Be,st=Ue;var dt,ft,mt,gt=ze;at=We;y&&(dt=ue,ft=ce),g&&(mt=pe);for(lt=0;lt<te;lt++){ut=it,ct=st;var yt,vt,bt,xt=gt;pt=at;y&&(yt=dt,vt=ft),g&&(bt=mt);for(ht=0;ht<te;ht++){var wt;if(0<=(ut|ct|xt))(wt=pt)<Et[nt]&&s(Mt,Et,nt,wt,yt,vt,bt,a,l);ut+=q,ct+=J,xt+=X,pt+=me,y&&(yt+=xe,vt+=ae),g&&(bt+=Ge),nt++}it+=H,st+=Y,gt+=K,at+=ge,y&&(dt+=we,ft+=le),g&&(mt+=Oe),nt+=_e}}}}Be+=te*H,Ue+=te*Y,ze+=te*K,We+=te*ge,y&&(ue+=te*we,ce+=te*le),g&&(pe+=te*Oe)}}}function k(e,t,r,n,o,i){if(H||(H=!0,_t=1<<(Ft=0),function(e,t){Ot=Math.floor(e/_t),V=Math.floor(t/_t);var r=1<<Vt;Ct=-r*(Nt=V*_t)/2,kt=.5+(St=r*(Tt=Ot*_t)/2),At=r*Nt/2+.5,Lt=.5+(Gt=W/2),_.width=Tt,_.height=Nt,B.fillStyle=U?"rgba(0, 0, 0, 0)":z.getStyle(),B.fillRect(0,0,Tt,Nt),D=B.getImageData(0,0,Tt,Nt),Mt=D.data,Et=new Int32Array(Mt.length/4),F=Ot*V,jt=new Int32Array(F),Pt=new Uint8Array(F);for(var n=0,o=Et.length;n<o;n++)Et[n]=W;for(n=0;n<F;n++)Pt[n]=It;J(z)}(_.width,_.height)),!(e.z<-1||1<e.z||t.z<-1||1<t.z)){var s=Math.floor(.5*(i.linewidth-1)),a=e.x*St+kt|0,l=t.x*St+kt|0,u=e.y*Ct+At|0,c=t.y*Ct+At|0,p=e.z*Gt+Lt|0,h=t.z*Gt+Lt|0,d=a-l,f=u-c,m=p-h,g=Math.max(Math.min(a,l)+Dt>>Vt,0),y=Math.min(Math.max(a,l)+Dt>>Vt,Tt),v=Math.max(Math.min(u,c)+Dt>>Vt,0),b=Math.min(Math.max(u,c)+Dt>>Vt,Nt),x=Math.max(Math.min(p,h)+Dt>>Vt,0),w=Math.max(p,h)+Dt>>Vt;Bt=Math.min(g,Bt),zt=Math.max(y,zt),Ut=Math.min(v,Ut),Wt=Math.max(b,Wt);var T,N,O,S,C,G=Math.sqrt(f*f+d*d),k=d/G,A=f/G,L=m/G;for(Y.set(k,A,L),Y.cross(q),Y.normalize();0<G;){T=(T=l+G*k)+Dt>>Vt,N=(N=c+G*A)+Dt>>Vt,C=h+G*L+Dt>>Vt;for(var M=-s;M<=s;++M)if(O=Math.floor(T+Y.x*M),S=Math.floor(N+Y.y*M),!(O<=Bt||zt<=O||S<=Ut||Wt<=S)){var E=O>>Ft,j=S>>Ft,P=E+j*Ot;if(!(jt[P]<x)){jt[P]=Math.min(jt[P],w);var I=Pt[P];I&Rt&&$t(E,j),Pt[P]=I&~(It|Rt);var R=O+S*Tt;C<Et[R]&&o(Mt,Et,R,C,r,n,i)}}--G}}}function $t(e,t){for(var r=e*_t+t*_t*Tt,n=4*r,o=Tt-_t,i=4*o,s=0;s<_t;s++){for(var a=0;a<_t;a++)Et[r++]=W,Mt[n++]=255*z.r|0,Mt[n++]=255*z.g|0,Mt[n++]=255*z.b|0,Mt[n++]=U?0:255;r+=o,n+=i}}this.domElement=_,this.autoClear=!0,this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.setClearColor=function(e){z.set(e),J(z)},this.setPixelRatio=function(){},this.setSize=function(e,t){Ot=Math.floor(e/_t),V=Math.floor(t/_t);var r=1<<Vt;Ct=-r*(Nt=V*_t)/2,kt=(St=r*(Tt=Ot*_t)/2)+.5,At=r*Nt/2+.5,Lt=(Gt=W/2)+.5,_.width=Tt,_.height=Nt,B.fillStyle=U?"rgba(0, 0, 0, 0)":z.getStyle(),B.fillRect(0,0,Tt,Nt),D=B.getImageData(0,0,Tt,Nt),Mt=D.data,Et=new Int32Array(Mt.length/4),F=Ot*V,jt=new Int32Array(F),Pt=new Uint8Array(F);for(var n=0,o=Et.length;n<o;n++)Et[n]=W;for(n=0;n<F;n++)Pt[n]=It;J(z)},this.setSize(_.width,_.height),this.clear=function(){Ut=Bt=1/0;for(var e=Xt=Jt=qt=Wt=zt=0;e<F;e++)jt[e]=W,Pt[e]=Pt[e]&It?It:Rt},this.render=function(e,t){this.clear();var r=e.background;r&&r.isColor&&J(r);for(var n=b.projectScene(e,t,!1,!1).elements,o=0,i=n.length;o<i;o++){var s=n[o],a=s.material;if(c=G(a))if(s instanceof TONG.RenderableFace)s.uvs?Zt(s.v1.positionScreen,s.v2.positionScreen,s.v3.positionScreen,s.uvs[0],s.uvs[1],s.uvs[2],c,s,a):Zt(s.v1.positionScreen,s.v2.positionScreen,s.v3.positionScreen,null,null,null,c,s,a);else if(s instanceof TONG.RenderableSprite){var l=.5*s.scale.x,u=.5*s.scale.y;x.copy(s),x.x-=l,x.y+=u,w.copy(s),w.x-=l,w.y-=u,T.copy(s),T.x+=l,T.y+=u,a.map?(N.set(0,1),S.set(0,0),C.set(1,1),Zt(x,w,T,N,S,C,c,s,a)):Zt(x,w,T,null,null,null,c,s,a),x.copy(s),x.x+=l,x.y+=u,w.copy(s),w.x-=l,w.y-=u,T.copy(s),T.x+=l,T.y-=u,a.map?(N.set(1,1),S.set(0,0),C.set(1,0),Zt(x,w,T,N,S,C,c,s,a)):Zt(x,w,T,null,null,null,c,s,a)}else if(s instanceof TONG.RenderableLine){var c=G(a);k(s.v1.positionScreen,s.v2.positionScreen,s.vertexColors[0],s.vertexColors[1],c,a)}}!function(){for(var e=0,t=0;t<V;t++)for(var r=0;r<Ot;r++)Pt[e]&Rt&&($t(r,t),Pt[e]=It),e++}();var p=Math.min(Bt,m),h=Math.min(Ut,g),d=Math.max(zt,y)-p,f=Math.max(Wt,v)-h;p!==1/0&&B.putImageData(D,0,0,p,h,d,f),m=Bt,g=Ut,y=zt,v=Wt}},TONG.SoftwareRenderer.Texture=function(){var o;this.fromImage=function(e){if(!(!e||e.width<=0||e.height<=0)){void 0===o&&(o=document.createElement("canvas"));var t=e.width>e.height?e.width:e.height;t=TONG.Math.nextPowerOfTwo(t),o.width==t&&o.height==t||(o.width=t,o.height=t);var r=o.getContext("2d");r.clearRect(0,0,t,t),r.drawImage(e,0,0,t,t);var n=r.getImageData(0,0,t,t);this.data=n.data,this.width=t,this.height=t,this.srcUrl=e.src}}},TONG.SVGObject=function(e){TONG.Object3D.call(this),this.node=e},TONG.SVGObject.prototype=Object.create(TONG.Object3D.prototype),TONG.SVGObject.prototype.constructor=TONG.SVGObject,TONG.SVGRenderer=function(){console.log("TONG.SVGRenderer",TONG.REVISION);var a,l,u,r,n,c,p,h,d,f,i,m=this,g=new TONG.Projector,y=document.createElementNS("http://www.w3.org/2000/svg","svg"),v=new TONG.Box2,b=new TONG.Box2,s=new TONG.Color,x=new TONG.Color,w=new TONG.Color,T=new TONG.Color,N=new TONG.Color,o=new TONG.Color,O=1,S=new TONG.Vector3,C=new TONG.Vector3,G=new TONG.Vector3,k=new TONG.Matrix3,A=new TONG.Matrix4,L=new TONG.Matrix4,M=[],E=[],j=[],P=0,I=0,R=0,V=1;function D(){for(R=I=P=0;0<y.childNodes.length;)y.removeChild(y.childNodes[0])}function F(e,t,r){var n=t.scale.x*c,o=t.scale.y*p;(i=function(e){if(null==j[e])return j[e]=document.createElementNS("http://www.w3.org/2000/svg","rect"),0==V&&j[e].setAttribute("shape-rendering","crispEdges"),j[e];return j[e]}(R++)).setAttribute("x",e.x-.5*n),i.setAttribute("y",e.y-.5*o),i.setAttribute("width",n),i.setAttribute("height",o),r instanceof TONG.SpriteMaterial&&i.setAttribute("style","fill: "+r.color.getStyle()),y.appendChild(i)}function _(e,t,r,n){(i=function(e){if(null==E[e])return E[e]=document.createElementNS("http://www.w3.org/2000/svg","line"),0==V&&E[e].setAttribute("shape-rendering","crispEdges"),E[e];return E[e]}(I++)).setAttribute("x1",e.positionScreen.x),i.setAttribute("y1",e.positionScreen.y),i.setAttribute("x2",t.positionScreen.x),i.setAttribute("y2",t.positionScreen.y),n instanceof TONG.LineBasicMaterial&&(i.setAttribute("style","fill: none; stroke: "+n.color.getStyle()+"; stroke-width: "+n.linewidth+"; stroke-opacity: "+n.opacity+"; stroke-linecap: "+n.linecap+"; stroke-linejoin: "+n.linejoin),y.appendChild(i))}function B(e,t,r,n,o){m.info.render.vertices+=3,m.info.render.faces++,(i=function(e){if(null==M[e])return M[e]=document.createElementNS("http://www.w3.org/2000/svg","path"),0==V&&M[e].setAttribute("shape-rendering","crispEdges"),M[e];return M[e]}(P++)).setAttribute("d","M "+e.positionScreen.x+" "+e.positionScreen.y+" L "+t.positionScreen.x+" "+t.positionScreen.y+" L "+r.positionScreen.x+","+r.positionScreen.y+"z"),o instanceof TONG.MeshBasicMaterial?(s.copy(o.color),o.vertexColors===TONG.FaceColors&&s.multiply(n.color)):o instanceof TONG.MeshLambertMaterial||o instanceof TONG.MeshPhongMaterial?(x.copy(o.color),o.vertexColors===TONG.FaceColors&&x.multiply(n.color),s.copy(w),C.copy(e.positionWorld).add(t.positionWorld).add(r.positionWorld).divideScalar(3),function(e,t,r,n){for(var o=0,i=e.length;o<i;o++){var s=e[o],a=s.color;if(s instanceof TONG.DirectionalLight){var l=S.setFromMatrixPosition(s.matrixWorld).normalize();if((u=r.dot(l))<=0)continue;u*=s.intensity,n.r+=a.r*u,n.g+=a.g*u,n.b+=a.b*u}else if(s instanceof TONG.PointLight){var u;if(l=S.setFromMatrixPosition(s.matrixWorld),(u=r.dot(S.subVectors(l,t).normalize()))<=0)continue;if(0==(u*=0==s.distance?1:1-Math.min(t.distanceTo(l)/s.distance,1)))continue;u*=s.intensity,n.r+=a.r*u,n.g+=a.g*u,n.b+=a.b*u}}}(u,C,n.normalModel,s),s.multiply(x).add(o.emissive)):o instanceof TONG.MeshNormalMaterial&&(G.copy(n.normalModel).applyMatrix3(k),s.setRGB(G.x,G.y,G.z).multiplyScalar(.5).addScalar(.5)),o.wireframe?i.setAttribute("style","fill: none; stroke: "+s.getStyle()+"; stroke-width: "+o.wireframeLinewidth+"; stroke-opacity: "+o.opacity+"; stroke-linecap: "+o.wireframeLinecap+"; stroke-linejoin: "+o.wireframeLinejoin):i.setAttribute("style","fill: "+s.getStyle()+"; fill-opacity: "+o.opacity),y.appendChild(i)}this.domElement=y,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.setQuality=function(e){switch(e){case"high":V=1;break;case"low":V=0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.setClearColor=function(e,t){o.set(e),O=void 0!==t?t:1},this.setPixelRatio=function(){},this.setSize=function(e,t){c=(r=e)/2,p=(n=t)/2,y.setAttribute("viewBox",-c+" "+-p+" "+r+" "+n),y.setAttribute("width",r),y.setAttribute("height",n),v.min.set(-c,-p),v.max.set(c,p)},this.clear=function(){D(),y.style.backgroundColor="rgba("+Math.floor(255*o.r)+","+Math.floor(255*o.g)+","+Math.floor(255*o.b)+","+O+")"},this.render=function(e,t){if(t instanceof TONG.Camera!=!1){var r=e.background;r&&r.isColor?(D(),y.style.backgroundColor="rgb("+Math.floor(255*r.r)+","+Math.floor(255*r.g)+","+Math.floor(255*r.b)+")"):!0===this.autoClear&&this.clear(),m.info.render.vertices=0,m.info.render.faces=0,A.copy(t.matrixWorldInverse.getInverse(t.matrixWorld)),L.multiplyMatrices(t.projectionMatrix,A),a=g.projectScene(e,t,this.sortObjects,this.sortElements),l=a.elements,u=a.lights,k.getNormalMatrix(t.matrixWorldInverse),function(e){w.setRGB(0,0,0),T.setRGB(0,0,0),N.setRGB(0,0,0);for(var t=0,r=e.length;t<r;t++){var n=e[t],o=n.color;n instanceof TONG.AmbientLight?(w.r+=o.r,w.g+=o.g,w.b+=o.b):n instanceof TONG.DirectionalLight?(T.r+=o.r,T.g+=o.g,T.b+=o.b):n instanceof TONG.PointLight&&(N.r+=o.r,N.g+=o.g,N.b+=o.b)}}(u);for(var n=0,o=l.length;n<o;n++){var i=l[n],s=i.material;if(void 0!==s&&0!==s.opacity)if(b.makeEmpty(),i instanceof TONG.RenderableSprite)(h=i).x*=c,h.y*=-p,F(h,i,s);else if(i instanceof TONG.RenderableLine)h=i.v1,d=i.v2,h.positionScreen.x*=c,h.positionScreen.y*=-p,d.positionScreen.x*=c,d.positionScreen.y*=-p,b.setFromPoints([h.positionScreen,d.positionScreen]),!0===v.intersectsBox(b)&&_(h,d,i,s);else if(i instanceof TONG.RenderableFace){if(h=i.v1,d=i.v2,f=i.v3,h.positionScreen.z<-1||1<h.positionScreen.z)continue;if(d.positionScreen.z<-1||1<d.positionScreen.z)continue;if(f.positionScreen.z<-1||1<f.positionScreen.z)continue;h.positionScreen.x*=c,h.positionScreen.y*=-p,d.positionScreen.x*=c,d.positionScreen.y*=-p,f.positionScreen.x*=c,f.positionScreen.y*=-p,b.setFromPoints([h.positionScreen,d.positionScreen,f.positionScreen]),!0===v.intersectsBox(b)&&B(h,d,f,i,s)}}e.traverseVisible(function(e){if(e instanceof TONG.SVGObject){S.setFromMatrixPosition(e.matrixWorld),S.applyMatrix4(L);var t=S.x*c,r=-S.y*p,n=e.node;n.setAttribute("transform","translate("+t+","+r+")"),y.appendChild(n)}})}else console.error("TONG.SVGRenderer.render: camera is not an instance of TONG.Camera.")}},function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return define([],e);(this||window).CodeMirror=e()}}(function(){"use strict";var e=navigator.userAgent,t=navigator.platform,m=/gecko\/\d/i.test(e),r=/MSIE \d/.test(e),n=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),x=r||n,w=x&&(r?document.documentMode||6:n[1]),g=/WebKit\//.test(e),o=g&&/Qt\/\d+\.\d+/.test(e),i=/Chrome\//.test(e),y=/Opera\//.test(e),l=/Apple Computer/.test(navigator.vendor),s=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),u=/PhantomJS/.test(e),a=/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),c=a||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),v=a||/Mac/.test(t),h=/\bCrOS\b/.test(e),p=/win/i.test(t),d=y&&e.match(/Version\/(\d*\.\d*)/);d&&(d=Number(d[1])),d&&15<=d&&(g=!(y=!1));var f=v&&(o||y&&(null==d||d<12.11)),b=m||x&&9<=w,T=!1,N=!1;function O(e,t){if(!(this instanceof O))return new O(e,t);this.options=t=t?xi(t):{},xi(Zr,t,!1),R(t);var r=t.value;"string"==typeof r&&(r=new go(r,t.mode,null,t.lineSeparator)),this.doc=r,this.mode="javascript";var n=new O.inputStyles[t.inputStyle](this),o=this.display=new S(e,r,n);E(o.wrapper.CodeMirror=this),L(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),t.autofocus&&!c&&o.input.focus(),_(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new ui,keySeq:null,specialChars:null};var i=this;for(var s in x&&w<11&&setTimeout(function(){i.display.input.reset(!0)},20),function(o){var i=o.display;qo(i.scroller,"mousedown",Jt(o,lr)),qo(i.scroller,"dblclick",x&&w<11?Jt(o,function(e){if(!ei(o,e)){var t=ar(o,e);if(t&&!cr(o,e)&&!sr(o.display,e)){_o(e);var r=o.findWordAt(t);Be(o.doc,r.anchor,r.head)}}}):function(e){ei(o,e)||_o(e)});b||qo(i.scroller,"contextmenu",function(e){Lr(o,e)});var r,n={end:0};function s(){i.activeTouch&&(r=setTimeout(function(){i.activeTouch=null},1e3),(n=i.activeTouch).end=+new Date)}function a(e,t){if(null==t.left)return!0;var r=t.left-e.left,n=t.top-e.top;return 400<r*r+n*n}qo(i.scroller,"touchstart",function(e){if(!ei(o,e)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(e)){clearTimeout(r);var t=+new Date;i.activeTouch={start:t,moved:!1,prev:t-n.end<=300?n:null},1==e.touches.length&&(i.activeTouch.left=e.touches[0].pageX,i.activeTouch.top=e.touches[0].pageY)}}),qo(i.scroller,"touchmove",function(){i.activeTouch&&(i.activeTouch.moved=!0)}),qo(i.scroller,"touchend",function(e){var t=i.activeTouch;if(t&&!sr(i,e)&&null!=t.left&&!t.moved&&new Date-t.start<300){var r,n=o.coordsChar(i.activeTouch,"page");r=!t.prev||a(t,t.prev)?new je(n,n):!t.prev.prev||a(t,t.prev.prev)?o.findWordAt(n):new je(de(n.line,0),Ve(o.doc,de(n.line+1,0))),o.setSelection(r.anchor,r.head),o.focus(),_o(e)}s()}),qo(i.scroller,"touchcancel",s),qo(i.scroller,"scroll",function(){i.scroller.clientHeight&&(fr(o,i.scroller.scrollTop),mr(o,i.scroller.scrollLeft,!0),Xo(o,"scroll",o))}),qo(i.scroller,"mousewheel",function(e){br(o,e)}),qo(i.scroller,"DOMMouseScroll",function(e){br(o,e)}),qo(i.wrapper,"scroll",function(){i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),i.dragFunctions={enter:function(e){ei(o,e)||zo(e)},over:function(e){ei(o,e)||(!function(e,t){var r=ar(e,t);if(!r)return;var n=document.createDocumentFragment();rt(e,r,n),e.display.dragCursor||(e.display.dragCursor=Ai("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv));Mi(e.display.dragCursor,n)}(o,e),zo(e))},start:function(e){!function(e,t){if(x&&(!e.state.draggingText||+new Date-pr<100))return zo(t);if(ei(e,t)||sr(e.display,t))return;if(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!l){var r=Ai("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",y&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),y&&r.parentNode.removeChild(r)}}(o,e)},drop:Jt(o,hr),leave:function(e){ei(o,e)||dr(o)}};var e=i.input.getField();qo(e,"keyup",function(e){Cr.call(o,e)}),qo(e,"keydown",Jt(o,Sr)),qo(e,"keypress",Jt(o,Gr)),qo(e,"focus",wi(kr,o)),qo(e,"blur",wi(Ar,o))}(this),function(){if(Fi)return;qo(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Di(ir)},100))}),qo(window,"blur",function(){Di(Ar)}),Fi=!0;var e}(),Bt(this),this.curOp.forceUpdate=!0,xo(this,r),t.autofocus&&!c||i.hasFocus()?setTimeout(wi(kr,this),20):Ar(this),$r)$r.hasOwnProperty(s)&&$r[s](this,t[s],en);H(this),t.finishInit&&t.finishInit(this);for(var a=0;a<on.length;++a)on[a](this);Ut(this),g&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}function S(e,t,r){var n=this;this.input=r,n.scrollbarFiller=Ai("div",null,"CodeMirror-scrollbar-filler"),n.scrollbarFiller.setAttribute("cm-not-content","true"),n.gutterFiller=Ai("div",null,"CodeMirror-gutter-filler"),n.gutterFiller.setAttribute("cm-not-content","true"),n.lineDiv=Ai("div",null,"CodeMirror-code"),n.selectionDiv=Ai("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=Ai("div",null,"CodeMirror-cursors"),n.measure=Ai("div",null,"CodeMirror-measure"),n.lineMeasure=Ai("div",null,"CodeMirror-measure"),n.lineSpace=Ai("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none"),n.mover=Ai("div",[Ai("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=Ai("div",[n.mover],"CodeMirror-sizer"),n.sizerWidth=null,n.heightForcer=Ai("div",null,null,"position: absolute; height: "+oi+"px; width: 1px;"),n.gutters=Ai("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=Ai("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=Ai("div",[n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),x&&w<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),g||m&&c||(n.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(n.wrapper):e(n.wrapper)),n.viewFrom=n.viewTo=t.first,n.reportedViewFrom=n.reportedViewTo=t.first,n.view=[],n.renderedView=null,n.externalMeasured=null,n.viewOffset=0,n.lastWrapHeight=n.lastWrapWidth=0,n.updateLineNumbers=null,n.nativeBarWidth=n.barHeight=n.barWidth=0,n.scrollbarsClipped=!1,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.alignWidgets=!1,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null,n.activeTouch=null,r.init(n)}function C(e){e.doc.mode=O.getMode(e.options,e.doc.modeOption),G(e)}function G(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,it(e,100),e.state.modeGen++,e.curOp&&Qt(e)}function k(n){var o=It(n.display),i=n.options.lineWrapping,s=i&&Math.max(5,n.display.scroller.clientWidth/Rt(n.display)-3);return function(e){if(Bn(n.doc,e))return 0;var t=0;if(e.widgets)for(var r=0;r<e.widgets.length;r++)e.widgets[r].height&&(t+=e.widgets[r].height);return i?t+(Math.ceil(e.text.length/s)||1)*o:t+o}}function A(e){var t=e.doc,r=k(e);t.iter(function(e){var t=r(e);t!=e.height&&Oo(e,t)})}function L(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ot(e)}function M(e){E(e),Qt(e),setTimeout(function(){W(e)},20)}function E(e){var t=e.display.gutters,r=e.options.gutters;Li(t);for(var n=0;n<r.length;++n){var o=r[n],i=t.appendChild(Ai("div",null,"CodeMirror-gutter "+o));"CodeMirror-linenumbers"==o&&((e.display.lineGutter=i).style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none",j(e)}function j(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function P(e){if(0==e.height)return 0;for(var t,r=e.text.length,n=e;t=In(n);){n=(o=t.find(0,!0)).from.line,r+=o.from.ch-o.to.ch}for(n=e;t=Rn(n);){var o=t.find(0,!0);r-=n.text.length-o.from.ch,r+=(n=o.to.line).text.length-o.to.ch}return r}function I(e){var r=e.display,t=e.doc;r.maxLine=wo(t,t.first),r.maxLineLength=P(r.maxLine),r.maxLineChanged=!0,t.iter(function(e){var t=P(e);t>r.maxLineLength&&(r.maxLineLength=t,r.maxLine=e)})}function R(e){var t=gi(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):-1<t&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function V(e){var t=e.display,r=t.gutters.offsetWidth,n=Math.round(e.doc.height+ut(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?r:0,docHeight:n,scrollHeight:n+pt(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:r}}function D(e,t,r){this.cm=r;var n=this.vert=Ai("div",[Ai("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),o=this.horiz=Ai("div",[Ai("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(n),e(o),qo(n,"scroll",function(){n.clientHeight&&t(n.scrollTop,"vertical")}),qo(o,"scroll",function(){o.clientWidth&&t(o.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,x&&w<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function F(){}function _(r){r.display.scrollbars&&(r.display.scrollbars.clear(),r.display.scrollbars.addClass&&Ii(r.display.wrapper,r.display.scrollbars.addClass)),r.display.scrollbars=new O.scrollbarModel[r.options.scrollbarStyle](function(e){r.display.wrapper.insertBefore(e,r.display.scrollbarFiller),qo(e,"mousedown",function(){r.state.focused&&setTimeout(function(){r.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,t){"horizontal"==t?mr(r,e):fr(r,e)},r),r.display.scrollbars.addClass&&Ri(r.display.wrapper,r.display.scrollbars.addClass)}function B(e,t){t||(t=V(e));var r=e.display.barWidth,n=e.display.barHeight;U(e,t);for(var o=0;o<4&&r!=e.display.barWidth||n!=e.display.barHeight;o++)r!=e.display.barWidth&&e.options.lineWrapping&&Q(e),U(e,V(e)),r=e.display.barWidth,n=e.display.barHeight}function U(e,t){var r=e.display,n=r.scrollbars.update(t);r.sizer.style.paddingRight=(r.barWidth=n.right)+"px",r.sizer.style.paddingBottom=(r.barHeight=n.bottom)+"px",r.heightForcer.style.borderBottom=n.bottom+"px solid transparent",n.right&&n.bottom?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=n.bottom+"px",r.scrollbarFiller.style.width=n.right+"px"):r.scrollbarFiller.style.display="",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=n.bottom+"px",r.gutterFiller.style.width=t.gutterWidth+"px"):r.gutterFiller.style.display=""}function z(e,t,r){var n=r&&null!=r.top?Math.max(0,r.top):e.scroller.scrollTop;n=Math.floor(n-lt(e));var o=r&&null!=r.bottom?r.bottom:n+e.wrapper.clientHeight,i=Co(t,n),s=Co(t,o);if(r&&r.ensure){var a=r.ensure.from.line,l=r.ensure.to.line;a<i?s=Co(t,Go(wo(t,i=a))+e.wrapper.clientHeight):Math.min(l,t.lastLine())>=s&&(i=Co(t,Go(wo(t,l))-e.wrapper.clientHeight),s=l)}return{from:i,to:Math.max(s,i+1)}}function W(e){var t=e.display,r=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=Y(t)-t.scroller.scrollLeft+e.doc.scrollLeft,o=t.gutters.offsetWidth,i=n+"px",s=0;s<r.length;s++)if(!r[s].hidden){e.options.fixedGutter&&r[s].gutter&&(r[s].gutter.style.left=i);var a=r[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=i}e.options.fixedGutter&&(t.gutters.style.left=n+o+"px")}}function H(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=q(e.options,t.first+t.size-1),n=e.display;if(r.length!=n.lineNumChars){var o=n.measure.appendChild(Ai("div",[Ai("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),i=o.firstChild.offsetWidth,s=o.offsetWidth-i;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(i,n.lineGutter.offsetWidth-s)+1,n.lineNumWidth=n.lineNumInnerWidth+s,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",j(e),!0}return!1}function q(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function Y(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function J(e,t,r){var n=e.display;this.viewport=t,this.visible=z(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=ht(e),this.force=r,this.dims=te(e),this.events=[]}function K(e,t){var r=e.display,n=e.doc;if(t.editorIsHidden)return tr(e),!1;if(!t.force&&t.visible.from>=r.viewFrom&&t.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&0==or(e))return!1;H(e)&&(tr(e),t.dims=te(e));var o=n.first+n.size,i=Math.max(t.visible.from-e.options.viewportMargin,n.first),s=Math.min(o,t.visible.to+e.options.viewportMargin);r.viewFrom<i&&i-r.viewFrom<20&&(i=Math.max(n.first,r.viewFrom)),r.viewTo>s&&r.viewTo-s<20&&(s=Math.min(o,r.viewTo)),N&&(i=Fn(e.doc,i),s=_n(e.doc,s));var a=i!=r.viewFrom||s!=r.viewTo||r.lastWrapHeight!=t.wrapperHeight||r.lastWrapWidth!=t.wrapperWidth;!function(e,t,r){var n=e.display;0==n.view.length||t>=n.viewTo||r<=n.viewFrom?(n.view=$t(e,t,r),n.viewFrom=t):(n.viewFrom>t?n.view=$t(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(rr(e,t))),n.viewFrom=t,n.viewTo<r?n.view=n.view.concat($t(e,n.viewTo,r)):n.viewTo>r&&(n.view=n.view.slice(0,rr(e,r))));n.viewTo=r}(e,i,s),r.viewOffset=Go(wo(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var l=or(e);if(!a&&0==l&&!t.force&&r.renderedView==r.view&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return!1;var u=ji();return 4<l&&(r.lineDiv.style.display="none"),function(r,e,t){var n=r.display,o=r.options.lineNumbers,i=n.lineDiv,s=i.firstChild;function a(e){var t=e.nextSibling;return g&&v&&r.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),t}for(var l=n.view,u=n.viewFrom,c=0;c<l.length;c++){var p=l[c];if(p.hidden);else if(p.node&&p.node.parentNode==i){for(;s!=p.node;)s=a(s);var h=o&&null!=e&&e<=u&&p.lineNumber;p.changes&&(-1<gi(p.changes,"gutter")&&(h=!1),re(r,p,u,t)),h&&(Li(p.lineNumber),p.lineNumber.appendChild(document.createTextNode(q(r.options,u)))),s=p.node.nextSibling}else{var d=ue(r,p,u,t);i.insertBefore(d,s)}u+=p.size}for(;s;)s=a(s)}(e,r.updateLineNumbers,t.dims),4<l&&(r.lineDiv.style.display=""),r.renderedView=r.view,u&&ji()!=u&&u.offsetHeight&&u.focus(),Li(r.cursorDiv),Li(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,a&&(r.lastWrapHeight=t.wrapperHeight,r.lastWrapWidth=t.wrapperWidth,it(e,400)),!(r.updateLineNumbers=null)}function X(e,t){for(var r=t.viewport,n=!0;(n&&e.options.lineWrapping&&t.oldDisplayWidth!=ht(e)||(r&&null!=r.top&&(r={top:Math.min(e.doc.height+ut(e.display)-dt(e),r.top)}),t.visible=z(e.display,e.doc,r),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&K(e,t);n=!1){Q(e);var o=V(e);et(e),B(e,o),$(e,o)}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Z(e,t){var r=new J(e,t);if(K(e,r)){Q(e),X(e,r);var n=V(e);et(e),B(e,n),$(e,n),r.finish()}}function $(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+pt(e)+"px"}function Q(e){for(var t=e.display,r=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var o,i=t.view[n];if(!i.hidden){if(x&&w<8){var s=i.node.offsetTop+i.node.offsetHeight;o=s-r,r=s}else{var a=i.node.getBoundingClientRect();o=a.bottom-a.top}var l=i.line.height-o;if(o<2&&(o=It(t)),(.001<l||l<-.001)&&(Oo(i.line,o),ee(i.line),i.rest))for(var u=0;u<i.rest.length;u++)ee(i.rest[u])}}}function ee(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.parentNode.offsetHeight}function te(e){for(var t=e.display,r={},n={},o=t.gutters.clientLeft,i=t.gutters.firstChild,s=0;i;i=i.nextSibling,++s)r[e.options.gutters[s]]=i.offsetLeft+i.clientLeft+o,n[e.options.gutters[s]]=i.clientWidth;return{fixedPos:Y(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function re(e,t,r,n){for(var o=0;o<t.changes.length;o++){var i=t.changes[o];"text"==i?ie(e,t):"gutter"==i?ae(e,t,r,n):"class"==i?se(t):"widget"==i&&le(e,t,n)}t.changes=null}function ne(e){return e.node==e.text&&(e.node=Ai("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),x&&w<8&&(e.node.style.zIndex=2)),e.node}function oe(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):oo(e,t)}function ie(e,t){var r=t.text.className,n=oe(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,se(t)):r&&(t.text.className=r)}function se(e){!function(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var r=ne(e);e.background=r.insertBefore(Ai("div",null,t),r.firstChild)}}(e),e.line.wrapClass?ne(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function ae(e,t,r,n){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var o=ne(t);t.gutterBackground=Ai("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),o.insertBefore(t.gutterBackground,t.text)}var i=t.line.gutterMarkers;if(e.options.lineNumbers||i){o=ne(t);var s=t.gutter=Ai("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px");if(e.display.input.setUneditable(s),o.insertBefore(s,t.text),t.line.gutterClass&&(s.className+=" "+t.line.gutterClass),!e.options.lineNumbers||i&&i["CodeMirror-linenumbers"]||(t.lineNumber=s.appendChild(Ai("div",q(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),i)for(var a=0;a<e.options.gutters.length;++a){var l=e.options.gutters[a],u=i.hasOwnProperty(l)&&i[l];u&&s.appendChild(Ai("div",[u],"CodeMirror-gutter-elt","left: "+n.gutterLeft[l]+"px; width: "+n.gutterWidth[l]+"px"))}}}function le(e,t,r){t.alignable&&(t.alignable=null);for(var n=t.node.firstChild;n;n=o){var o=n.nextSibling;"CodeMirror-linewidget"==n.className&&t.node.removeChild(n)}ce(e,t,r)}function ue(e,t,r,n){var o=oe(e,t);return t.text=t.node=o.pre,o.bgClass&&(t.bgClass=o.bgClass),o.textClass&&(t.textClass=o.textClass),se(t),ae(e,t,r,n),ce(e,t,n),t.node}function ce(e,t,r){if(pe(e,t.line,t,r,!0),t.rest)for(var n=0;n<t.rest.length;n++)pe(e,t.rest[n],t,r,!1)}function pe(e,t,r,n,o){if(t.widgets)for(var i=ne(r),s=0,a=t.widgets;s<a.length;++s){var l=a[s],u=Ai("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),he(l,u,r,n),e.display.input.setUneditable(u),o&&l.above?i.insertBefore(u,r.gutter||r.text):i.appendChild(u),$o(l,"redraw")}}function he(e,t,r,n){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var o=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(o-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=o+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}D.prototype=xi({update:function(e){var t=e.scrollWidth>e.clientWidth+1,r=e.scrollHeight>e.clientHeight+1,n=e.nativeBarWidth;if(r){this.vert.style.display="block",this.vert.style.bottom=t?n+"px":"0";var o=e.viewHeight-(t?n:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+o)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=r?n+"px":"0",this.horiz.style.left=e.barLeft+"px";var i=e.viewWidth-e.barLeft-(r?n:0);this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+i+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&0<e.clientHeight&&(0==n&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:r?n:0,bottom:t?n:0}},setScrollLeft:function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},setScrollTop:function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},zeroWidthHack:function(){var e=v&&!s?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new ui,this.disableVert=new ui},enableZeroWidthBar:function(r,n){r.style.pointerEvents="auto",n.set(1e3,function e(){var t=r.getBoundingClientRect();document.elementFromPoint(t.left+1,t.bottom-1)!=r?r.style.pointerEvents="none":n.set(1e3,e)})},clear:function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},D.prototype),F.prototype=xi({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},F.prototype),O.scrollbarModel={native:D,null:F},J.prototype.signal=function(e,t){ri(e,t)&&this.events.push(arguments)},J.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Xo.apply(null,this.events[e])};var de=O.Pos=function(e,t){if(!(this instanceof de))return new de(e,t);this.line=e,this.ch=t},fe=O.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};function me(e){return de(e.line,e.ch)}function ge(e,t){return fe(e,t)<0?t:e}function ye(e,t){return fe(e,t)<0?e:t}function ve(e){e.state.focused||(e.display.input.focus(),kr(e))}var be=null;function xe(e,t,r,n,o){var i=e.doc;e.display.shift=!1,n||(n=i.sel);var s=e.state.pasteIncoming||"paste"==o,a=i.splitLines(t),l=null;if(s&&1<n.ranges.length)if(be&&be.join("\n")==t){if(n.ranges.length%be.length==0){l=[];for(var u=0;u<be.length;u++)l.push(i.splitLines(be[u]))}}else a.length==n.ranges.length&&(l=yi(a,function(e){return[e]}));for(u=n.ranges.length-1;0<=u;u--){var c=n.ranges[u],p=c.from(),h=c.to();c.empty()&&(r&&0<r?p=de(p.line,p.ch-r):e.state.overwrite&&!s&&(h=de(h.line,Math.min(wo(i,h.line).text.length,h.ch+fi(a).length))));var d=e.curOp.updateInput,f={from:p,to:h,text:l?l[u%l.length]:a,origin:o||(s?"paste":e.state.cutIncoming?"cut":"+input")};Rr(e.doc,f),$o(e,"inputRead",e,f)}t&&!s&&Te(e,t),Wr(e),e.curOp.updateInput=d,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function we(e,t){var r=e.clipboardData&&e.clipboardData.getData("text/plain");if(r)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Yt(t,function(){xe(t,r,0,null,"paste")}),!0}function Te(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var r=e.doc.sel,n=r.ranges.length-1;0<=n;n--){var o=r.ranges[n];if(!(100<o.head.ch||n&&r.ranges[n-1].head.line==o.head.line)){var i=e.getModeAt(o.head),s=!1;if(i.electricChars){for(var a=0;a<i.electricChars.length;a++)if(-1<t.indexOf(i.electricChars.charAt(a))){s=qr(e,o.head.line,"smart");break}}else i.electricInput&&i.electricInput.test(wo(e.doc,o.head.line).text.slice(0,o.head.ch))&&(s=qr(e,o.head.line,"smart"));s&&$o(e,"electricInput",e,o.head.line)}}}function Ne(e){for(var t=[],r=[],n=0;n<e.doc.sel.ranges.length;n++){var o=e.doc.sel.ranges[n].head.line,i={anchor:de(o,0),head:de(o+1,0)};r.push(i),t.push(e.getRange(i.anchor,i.head))}return{text:t,ranges:r}}function Oe(e){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck","false")}function Se(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new ui,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function Ce(){var e=Ai("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),t=Ai("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return g?e.style.width="1000px":e.setAttribute("wrap","off"),a&&(e.style.border="1px solid black"),Oe(e),t}function Ge(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new ui,this.gracePeriod=!1}function ke(e,t){var r=gt(e,t.line);if(!r||r.hidden)return null;var n=wo(e.doc,t.line),o=ft(r,n,t.line),i=ko(n),s="left";i&&(s=os(i,t.ch)%2?"right":"left");var a=wt(o.map,t.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function Ae(e,t){return t&&(e.bad=!0),e}function Le(e,t,r){var n;if(t==e.display.lineDiv){if(!(n=e.display.lineDiv.childNodes[r]))return Ae(e.clipPos(de(e.display.viewTo-1)),!0);t=null,r=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var o=0;o<e.display.view.length;o++){var i=e.display.view[o];if(i.node==n)return Me(i,t,r)}}function Me(u,e,t){var r=u.text.firstChild,n=!1;if(!e||!Ei(r,e))return Ae(de(So(u.line),0),!0);if(e==r&&(n=!0,e=r.childNodes[t],t=0,!e)){var o=u.rest?fi(u.rest):u.line;return Ae(de(So(o),o.text.length),n)}var i=3==e.nodeType?e:null,s=e;for(i||1!=e.childNodes.length||3!=e.firstChild.nodeType||(i=e.firstChild,t&&(t=i.nodeValue.length));s.parentNode!=r;)s=s.parentNode;var c=u.measure,p=c.maps;function a(e,t,r){for(var n=-1;n<(p?p.length:0);n++)for(var o=n<0?c.map:p[n],i=0;i<o.length;i+=3){var s=o[i+2];if(s==e||s==t){var a=So(n<0?u.line:u.rest[n]),l=o[i]+r;return(r<0||s!=e)&&(l=o[i+(r?1:0)]),de(a,l)}}}var l=a(i,s,t);if(l)return Ae(l,n);for(var h=s.nextSibling,d=i?i.nodeValue.length-t:0;h;h=h.nextSibling){if(l=a(h,h.firstChild,0))return Ae(de(l.line,l.ch-d),n);d+=h.textContent.length}var f=s.previousSibling;for(d=t;f;f=f.previousSibling){if(l=a(f,f.firstChild,-1))return Ae(de(l.line,l.ch+d),n);d+=h.textContent.length}}function Ee(e,t){this.ranges=e,this.primIndex=t}function je(e,t){this.anchor=e,this.head=t}function Pe(e,t){var r=e[t];e.sort(function(e,t){return fe(e.from(),t.from())}),t=gi(e,r);for(var n=1;n<e.length;n++){var o=e[n],i=e[n-1];if(0<=fe(i.to(),o.from())){var s=ye(i.from(),o.from()),a=ge(i.to(),o.to()),l=i.empty()?o.from()==o.head:i.from()==i.head;n<=t&&--t,e.splice(--n,2,new je(l?a:s,l?s:a))}}return new Ee(e,t)}function Ie(e,t){return new Ee([new je(e,t||e)],0)}function Re(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Ve(e,t){if(t.line<e.first)return de(e.first,0);var r,n,o,i=e.first+e.size-1;return t.line>i?de(i,wo(e,i).text.length):(n=wo(e,(r=t).line).text.length,null==(o=r.ch)||n<o?de(r.line,n):o<0?de(r.line,0):r)}function De(e,t){return t>=e.first&&t<e.first+e.size}function Fe(e,t){for(var r=[],n=0;n<t.length;n++)r[n]=Ve(e,t[n]);return r}function _e(e,t,r,n){if(e.cm&&e.cm.display.shift||e.extend){var o=t.anchor;if(n){var i=fe(r,o)<0;i!=fe(n,o)<0?(o=r,r=n):i!=fe(r,n)<0&&(r=n)}return new je(o,r)}return new je(n||r,r)}function Be(e,t,r,n){qe(e,new Ee([_e(e,e.sel.primary(),t,r)],0),n)}function Ue(e,t,r){for(var n=[],o=0;o<e.sel.ranges.length;o++)n[o]=_e(e,e.sel.ranges[o],t[o],null);qe(e,Pe(n,e.sel.primIndex),r)}function ze(e,t,r,n){var o=e.sel.ranges.slice(0);o[t]=r,qe(e,Pe(o,e.sel.primIndex),n)}function We(e,t,r,n){qe(e,Ie(t,r),n)}function He(e,t,r){var n=e.history.done,o=fi(n);o&&o.ranges?Ye(e,n[n.length-1]=t,r):qe(e,t,r)}function qe(e,t,r){Ye(e,t,r),function(e,t,r,n){var o=e.history,i=n&&n.origin;r==o.lastSelOp||i&&o.lastSelOrigin==i&&(o.lastModTime==o.lastSelTime&&o.lastOrigin==i||(s=e,a=i,l=fi(o.done),u=t,c=a.charAt(0),"*"==c||"+"==c&&l.ranges.length==u.ranges.length&&l.somethingSelected()==u.somethingSelected()&&new Date-s.history.lastSelTime<=(s.cm?s.cm.options.historyEventDelay:500)))?o.done[o.done.length-1]=t:jo(t,o.done);var s,a,l,u,c;o.lastSelTime=+new Date,o.lastSelOrigin=i,o.lastSelOp=r,n&&!1!==n.clearRedo&&Mo(o.undone)}(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function Ye(e,t,r){var n,o,i,s;(ri(e,"beforeSelectionChange")||e.cm&&ri(e.cm,"beforeSelectionChange"))&&(n=e,i=r,s={ranges:(o=t).ranges,update:function(e){this.ranges=[];for(var t=0;t<e.length;t++)this.ranges[t]=new je(Ve(n,e[t].anchor),Ve(n,e[t].head))},origin:i&&i.origin},Xo(n,"beforeSelectionChange",n,s),n.cm&&Xo(n.cm,"beforeSelectionChange",n.cm,s),t=s.ranges!=o.ranges?Pe(s.ranges,s.ranges.length-1):o),Je(e,Xe(e,t,r&&r.bias||(fe(t.primary().head,e.sel.primary().head)<0?-1:1),!0)),r&&!1===r.scroll||!e.cm||Wr(e.cm)}function Je(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,ti(e.cm)),$o(e,"cursorActivity",e))}function Ke(e){Je(e,Xe(e,e.sel,null,!1))}function Xe(e,t,r,n){for(var o,i=0;i<t.ranges.length;i++){var s=t.ranges[i],a=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[i],l=$e(e,s.anchor,a&&a.anchor,r,n),u=$e(e,s.head,a&&a.head,r,n);(o||l!=s.anchor||u!=s.head)&&(o||(o=t.ranges.slice(0,i)),o[i]=new je(l,u))}return o?Pe(o,t.primIndex):t}function Ze(e,t,r,n,o){var i=wo(e,t.line);if(i.markedSpans)for(var s=0;s<i.markedSpans.length;++s){var a=i.markedSpans[s],l=a.marker;if((null==a.from||(l.inclusiveLeft?a.from<=t.ch:a.from<t.ch))&&(null==a.to||(l.inclusiveRight?a.to>=t.ch:a.to>t.ch))){if(o&&(Xo(l,"beforeCursorEnter"),l.explicitlyCleared)){if(i.markedSpans){--s;continue}break}if(!l.atomic)continue;if(r){var u,c=l.find(n<0?1:-1);if((n<0?l.inclusiveRight:l.inclusiveLeft)&&(c=Qe(e,c,-n,c&&c.line==t.line?i:null)),c&&c.line==t.line&&(u=fe(c,r))&&(n<0?u<0:0<u))return Ze(e,c,t,n,o)}var p=l.find(n<0?-1:1);return(n<0?l.inclusiveLeft:l.inclusiveRight)&&(p=Qe(e,p,n,p.line==t.line?i:null)),p?Ze(e,p,t,n,o):null}}return t}function $e(e,t,r,n,o){var i=n||1,s=Ze(e,t,r,i,o)||!o&&Ze(e,t,r,i,!0)||Ze(e,t,r,-i,o)||!o&&Ze(e,t,r,-i,!0);return s||(e.cantEdit=!0,de(e.first,0))}function Qe(e,t,r,n){return r<0&&0==t.ch?t.line>e.first?Ve(e,de(t.line-1)):null:0<r&&t.ch==(n||wo(e,t.line)).text.length?t.line<e.first+e.size-1?de(t.line+1,0):null:new de(t.line,t.ch+r)}function et(e){e.display.input.showSelection(e.display.input.prepareSelection())}function tt(e,t){for(var r=e.doc,n={},o=n.cursors=document.createDocumentFragment(),i=n.selection=document.createDocumentFragment(),s=0;s<r.sel.ranges.length;s++)if(!1!==t||s!=r.sel.primIndex){var a=r.sel.ranges[s];if(!(a.from().line>=e.display.viewTo||a.to().line<e.display.viewFrom)){var l=a.empty();(l||e.options.showCursorWhenSelecting)&&rt(e,a.head,o),l||nt(e,a,i)}}return n}function rt(e,t,r){var n=Lt(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),o=r.appendChild(Ai("div","","CodeMirror-cursor"));if(o.style.left=n.left+"px",o.style.top=n.top+"px",o.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",n.other){var i=r.appendChild(Ai("div","","CodeMirror-cursor CodeMirror-secondarycursor"));i.style.display="",i.style.left=n.other.left+"px",i.style.top=n.other.top+"px",i.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function nt(o,e,t){var r=o.display,i=o.doc,s=document.createDocumentFragment(),n=ct(o.display),f=n.left,m=Math.max(r.sizerWidth,ht(o)-r.sizer.offsetLeft)-n.right;function g(e,t,r,n){t<0&&(t=0),t=Math.round(t),n=Math.round(n),s.appendChild(Ai("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==r?m-e:r)+"px; height: "+(n-t)+"px"))}function a(r,l,u){var c,p,n=wo(i,r),h=n.text.length;function d(e,t){return At(o,de(r,e),"div",n,t)}return function(e,t,r,n){if(!e)return n(t,r,"ltr");for(var o=!1,i=0;i<e.length;++i){var s=e[i];(s.from<r&&s.to>t||t==r&&s.to==t)&&(n(Math.max(s.from,t),Math.min(s.to,r),1==s.level?"rtl":"ltr"),o=!0)}o||n(t,r,"ltr")}(ko(n),l||0,null==u?h:u,function(e,t,r){var n,o,i,s=d(e,"left");if(e==t)o=i=(n=s).left;else{if(n=d(t-1,"right"),"rtl"==r){var a=s;s=n,n=a}o=s.left,i=n.right}null==l&&0==e&&(o=f),3<n.top-s.top&&(g(o,s.top,null,s.bottom),o=f,s.bottom<n.top&&g(o,s.bottom,null,n.top)),null==u&&t==h&&(i=m),(!c||s.top<c.top||s.top==c.top&&s.left<c.left)&&(c=s),(!p||n.bottom>p.bottom||n.bottom==p.bottom&&n.right>p.right)&&(p=n),o<f+1&&(o=f),g(o,n.top,i-o,n.bottom)}),{start:c,end:p}}var l=e.from(),u=e.to();if(l.line==u.line)a(l.line,l.ch,u.ch);else{var c=wo(i,l.line),p=wo(i,u.line),h=Dn(c)==Dn(p),d=a(l.line,l.ch,h?c.text.length+1:null).end,y=a(u.line,h?0:null,u.ch).start;h&&(d.top<y.top-2?(g(d.right,d.top,null,d.bottom),g(f,y.top,y.left,y.bottom)):g(d.right,d.top,y.left-d.right,d.bottom)),d.bottom<y.top&&g(f,d.bottom,null,y.top)}t.appendChild(s)}function ot(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursorDiv.style.visibility="",0<e.options.cursorBlinkRate?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(r=!r)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function it(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,wi(st,e))}function st(l){var u=l.doc;if(u.frontier<u.first&&(u.frontier=u.first),!(u.frontier>=l.display.viewTo)){var c=+new Date+l.options.workTime,p=an(u.mode,at(l,u.frontier)),h=[];u.iter(u.frontier,Math.min(u.first+u.size,l.display.viewTo+500),function(e){if(u.frontier>=l.display.viewFrom){var t=e.styles,r=e.text.length>l.options.maxHighlightLength,n=$n(l,e,r?an(u.mode,p):p,!0);e.styles=n.styles;var o=e.styleClasses,i=n.classes;i?e.styleClasses=i:o&&(e.styleClasses=null);for(var s=!t||t.length!=e.styles.length||o!=i&&(!o||!i||o.bgClass!=i.bgClass||o.textClass!=i.textClass),a=0;!s&&a<t.length;++a)s=t[a]!=e.styles[a];s&&h.push(u.frontier),e.stateAfter=r?p:an(u.mode,p)}else e.text.length<=l.options.maxHighlightLength&&eo(l,e.text,p),e.stateAfter=u.frontier%5==0?an(u.mode,p):null;if(++u.frontier,+new Date>c)return it(l,l.options.workDelay),!0}),h.length&&Yt(l,function(){for(var e=0;e<h.length;e++)er(l,h[e],"text")})}}function at(r,n,e){var o=r.doc,i=r.display;if(!o.mode.startState)return!0;var s=function(e,t,r){for(var n,o,i=e.doc,s=r?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;s<a;--a){if(a<=i.first)return i.first;var l=wo(i,a-1);if(l.stateAfter&&(!r||a<=i.frontier))return a;var u=ci(l.text,null,e.options.tabSize);(null==o||u<n)&&(o=a-1,n=u)}return o}(r,n,e),a=s>o.first&&wo(o,s-1).stateAfter;return a=a?an(o.mode,a):ln(o.mode),o.iter(s,n,function(e){eo(r,e.text,a);var t=s==n-1||s%5==0||s>=i.viewFrom&&s<i.viewTo;e.stateAfter=t?an(o.mode,a):null,++s}),e&&(o.frontier=s),a}function lt(e){return e.lineSpace.offsetTop}function ut(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function ct(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=Mi(e.measure,Ai("pre","x")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(e.cachedPaddingH=n),n}function pt(e){return oi-e.display.nativeBarWidth}function ht(e){return e.display.scroller.clientWidth-pt(e)-e.display.barWidth}function dt(e){return e.display.scroller.clientHeight-pt(e)-e.display.barHeight}function ft(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(n=0;n<e.rest.length;n++)if(So(e.rest[n])>r)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}function mt(e,t,r,n){return vt(e,yt(e,t),r,n)}function gt(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[rr(e,t)];var r=e.display.externalMeasured;return r&&t>=r.lineN&&t<r.lineN+r.size?r:void 0}function yt(e,t){var r=So(t),n=gt(e,r);n&&!n.text?n=null:n&&n.changes&&(re(e,n,r,te(e)),e.curOp.forceUpdate=!0),n||(n=function(e,t){var r=So(t=Dn(t)),n=e.display.externalMeasured=new Zt(e.doc,t,r);n.lineN=r;var o=n.built=oo(e,n);return n.text=o.pre,Mi(e.display.lineMeasure,o.pre),n}(e,t));var o=ft(n,t,r);return{line:t,view:n,rect:null,map:o.map,cache:o.cache,before:o.before,hasHeights:!1}}function vt(e,t,r,n,o){t.before&&(r=-1);var i,s=r+(n||"");return t.cache.hasOwnProperty(s)?i=t.cache[s]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(!function(e,t,r){var n=e.options.lineWrapping,o=n&&ht(e);if(!t.measure.heights||n&&t.measure.width!=o){var i=t.measure.heights=[];if(n){t.measure.width=o;for(var s=t.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var l=s[a],u=s[a+1];2<Math.abs(l.bottom-u.bottom)&&i.push((l.bottom+u.top)/2-r.top)}}i.push(r.bottom-r.top)}}(e,t.view,t.rect),t.hasHeights=!0),(i=function(e,t,r,n){var o,i=wt(t.map,r,n),s=i.node,a=i.start,l=i.end,u=i.collapse;if(3==s.nodeType){for(var c=0;c<4;c++){for(;a&&ki(t.line.text.charAt(i.coverStart+a));)--a;for(;i.coverStart+l<i.coverEnd&&ki(t.line.text.charAt(i.coverStart+l));)++l;if(x&&w<9&&0==a&&l==i.coverEnd-i.coverStart)o=s.parentNode.getBoundingClientRect();else if(x&&e.options.lineWrapping){var p=Ci(s,a,l).getClientRects();o=p.length?p["right"==n?p.length-1:0]:xt}else o=Ci(s,a,l).getBoundingClientRect()||xt;if(o.left||o.right||0==a)break;l=a,a-=1,u="right"}x&&w<11&&(o=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Ki)return Ki;var t=Mi(e,Ai("span","x")),r=t.getBoundingClientRect(),n=Ci(t,0,1).getBoundingClientRect();return Ki=1<Math.abs(r.left-n.left)}(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*n,bottom:t.bottom*n}}(e.display.measure,o))}else{0<a&&(u=n="right"),o=e.options.lineWrapping&&1<(p=s.getClientRects()).length?p["right"==n?p.length-1:0]:s.getBoundingClientRect()}if(x&&w<9&&!a&&(!o||!o.left&&!o.right)){var h=s.parentNode.getClientRects()[0];o=h?{left:h.left,right:h.left+Rt(e.display),top:h.top,bottom:h.bottom}:xt}for(var d=o.top-t.rect.top,f=o.bottom-t.rect.top,m=(d+f)/2,g=t.view.measure.heights,c=0;c<g.length-1&&!(m<g[c]);c++);var y=c?g[c-1]:0,v=g[c],b={left:("right"==u?o.right:o.left)-t.rect.left,right:("left"==u?o.left:o.right)-t.rect.left,top:y,bottom:v};o.left||o.right||(b.bogus=!0);e.options.singleCursorHeightPerLine||(b.rtop=d,b.rbottom=f);return b}(e,t,r,n)).bogus||(t.cache[s]=i)),{left:i.left,right:i.right,top:o?i.rtop:i.top,bottom:o?i.rbottom:i.bottom}}Se.prototype=xi({init:function(t){var r=this,n=this.cm,e=this.wrapper=Ce(),o=this.textarea=e.firstChild;function i(e){if(!ei(n,e)){if(n.somethingSelected())be=n.getSelections(),r.inaccurateSelection&&(r.prevInput="",r.inaccurateSelection=!1,o.value=be.join("\n"),mi(o));else{if(!n.options.lineWiseCopyCut)return;var t=Ne(n);be=t.text,"cut"==e.type?n.setSelections(t.ranges,null,si):(r.prevInput="",o.value=t.text.join("\n"),mi(o))}"cut"==e.type&&(n.state.cutIncoming=!0)}}t.wrapper.insertBefore(e,t.wrapper.firstChild),a&&(o.style.width="0px"),qo(o,"input",function(){x&&9<=w&&r.hasSelection&&(r.hasSelection=null),r.poll()}),qo(o,"paste",function(e){ei(n,e)||we(e,n)||(n.state.pasteIncoming=!0,r.fastPoll())}),qo(o,"cut",i),qo(o,"copy",i),qo(t.scroller,"paste",function(e){sr(t,e)||ei(n,e)||(n.state.pasteIncoming=!0,r.focus())}),qo(t.lineSpace,"selectstart",function(e){sr(t,e)||_o(e)}),qo(o,"compositionstart",function(){var e=n.getCursor("from");r.composing&&r.composing.range.clear(),r.composing={start:e,range:n.markText(e,n.getCursor("to"),{className:"CodeMirror-composing"})}}),qo(o,"compositionend",function(){r.composing&&(r.poll(),r.composing.range.clear(),r.composing=null)})},prepareSelection:function(){var e=this.cm,t=e.display,r=e.doc,n=tt(e);if(e.options.moveInputWithCursor){var o=Lt(e,r.sel.primary().head,"div"),i=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,o.top+s.top-i.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,o.left+s.left-i.left))}return n},showSelection:function(e){var t=this.cm.display;Mi(t.cursorDiv,e.cursors),Mi(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},reset:function(e){if(!this.contextMenuPending){var t,r,n=this.cm,o=n.doc;if(n.somethingSelected()){this.prevInput="";var i=o.sel.primary(),s=(t=Ji&&(100<i.to().line-i.from().line||1e3<(r=n.getSelection()).length))?"-":r||n.getSelection();this.textarea.value=s,n.state.focused&&mi(this.textarea),x&&9<=w&&(this.hasSelection=s)}else e||(this.prevInput=this.textarea.value="",x&&9<=w&&(this.hasSelection=null));this.inaccurateSelection=t}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!c||ji()!=this.textarea))try{this.textarea.focus()}catch(e){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var e=this;e.pollingFast||e.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},fastPoll:function(){var t=!1,r=this;r.pollingFast=!0,r.polling.set(20,function e(){r.poll()||t?(r.pollingFast=!1,r.slowPoll()):(t=!0,r.polling.set(60,e))})},poll:function(){var e=this.cm,t=this.textarea,r=this.prevInput;if(this.contextMenuPending||!e.state.focused||Yi(t)&&!r&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var n=t.value;if(n==r&&!e.somethingSelected())return!1;if(x&&9<=w&&this.hasSelection===n||v&&/[\uf700-\uf7ff]/.test(n))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var o=n.charCodeAt(0);if(8203!=o||r||(r=""),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var i=0,s=Math.min(r.length,n.length);i<s&&r.charCodeAt(i)==n.charCodeAt(i);)++i;var a=this;return Yt(e,function(){xe(e,n.slice(i),r.length-i,null,a.composing?"*compose":null),1e3<n.length||-1<n.indexOf("\n")?t.value=a.prevInput="":a.prevInput=n,a.composing&&(a.composing.range.clear(),a.composing.range=e.markText(a.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){x&&9<=w&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){var r=this,n=r.cm,o=n.display,i=r.textarea,t=ar(n,e),s=o.scroller.scrollTop;if(t&&!y){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(t)&&Jt(n,qe)(n.doc,Ie(t),si);var a=i.style.cssText,l=r.wrapper.style.cssText;r.wrapper.style.cssText="position: absolute";var u=r.wrapper.getBoundingClientRect();if(i.style.cssText="position: absolute; width: 30px; height: 30px; top: "+(e.clientY-u.top-5)+"px; left: "+(e.clientX-u.left-5)+"px; z-index: 1000; background: "+(x?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",g)var c=window.scrollY;if(o.input.focus(),g&&window.scrollTo(null,c),o.input.reset(),n.somethingSelected()||(i.value=r.prevInput=" "),r.contextMenuPending=!0,o.selForContextMenu=n.doc.sel,clearTimeout(o.detectingSelectAll),x&&9<=w&&h(),b){zo(e);var p=function(){Ko(window,"mouseup",p),setTimeout(d,20)};qo(window,"mouseup",p)}else setTimeout(d,50)}function h(){if(null!=i.selectionStart){var e=n.somethingSelected(),t=""+(e?i.value:"");i.value="",i.value=t,r.prevInput=e?"":"",i.selectionStart=1,i.selectionEnd=t.length,o.selForContextMenu=n.doc.sel}}function d(){if(r.contextMenuPending=!1,r.wrapper.style.cssText=l,i.style.cssText=a,x&&w<9&&o.scrollbars.setScrollTop(o.scroller.scrollTop=s),null!=i.selectionStart){(!x||x&&w<9)&&h();var e=0,t=function(){o.selForContextMenu==n.doc.sel&&0==i.selectionStart&&0<i.selectionEnd&&""==r.prevInput?Jt(n,un.selectAll)(n):e++<10?o.detectingSelectAll=setTimeout(t,500):o.input.reset()};o.detectingSelectAll=setTimeout(t,200)}}},readOnlyChanged:function(e){e||this.reset()},setUneditable:vi,needsContentAttribute:!1},Se.prototype),Ge.prototype=xi({init:function(e){var o=this,i=o.cm,t=o.div=e.lineDiv;function r(e){if(!ei(i,e)){if(i.somethingSelected())be=i.getSelections(),"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=Ne(i);be=t.text,"cut"==e.type&&i.operation(function(){i.setSelections(t.ranges,0,si),i.replaceSelection("",null,"cut")})}if(e.clipboardData&&!a)e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/plain",be.join("\n"));else{var r=Ce(),n=r.firstChild;i.display.lineSpace.insertBefore(r,i.display.lineSpace.firstChild),n.value=be.join("\n");var o=document.activeElement;mi(n),setTimeout(function(){i.display.lineSpace.removeChild(r),o.focus()},50)}}}Oe(t),qo(t,"paste",function(e){ei(i,e)||we(e,i)}),qo(t,"compositionstart",function(e){var t=e.data;if(o.composing={sel:i.doc.sel,data:t,startData:t},t){var r=i.doc.sel.primary(),n=i.getLine(r.head.line).indexOf(t,Math.max(0,r.head.ch-t.length));-1<n&&n<=r.head.ch&&(o.composing.sel=Ie(de(r.head.line,n),de(r.head.line,n+t.length)))}}),qo(t,"compositionupdate",function(e){o.composing.data=e.data}),qo(t,"compositionend",function(e){var t=o.composing;t&&(e.data==t.startData||/\u200b/.test(e.data)||(t.data=e.data),setTimeout(function(){t.handled||o.applyComposition(t),o.composing==t&&(o.composing=null)},50))}),qo(t,"touchstart",function(){o.forceCompositionEnd()}),qo(t,"input",function(){o.composing||!i.isReadOnly()&&o.pollContent()||Yt(o.cm,function(){Qt(i)})}),qo(t,"copy",r),qo(t,"cut",r)},prepareSelection:function(){var e=tt(this.cm,!1);return e.focus=this.cm.state.focused,e},showSelection:function(e){e&&this.cm.display.view.length&&(e.focus&&this.showPrimarySelection(),this.showMultipleSelections(e))},showPrimarySelection:function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),r=Le(this.cm,e.anchorNode,e.anchorOffset),n=Le(this.cm,e.focusNode,e.focusOffset);if(!r||r.bad||!n||n.bad||0!=fe(ye(r,n),t.from())||0!=fe(ge(r,n),t.to())){var o=ke(this.cm,t.from()),i=ke(this.cm,t.to());if(o||i){var s=this.cm.display.view,a=e.rangeCount&&e.getRangeAt(0);if(o){if(!i){var l=s[s.length-1].measure,u=l.maps?l.maps[l.maps.length-1]:l.map;i={node:u[u.length-1],offset:u[u.length-2]-u[u.length-3]}}}else o={node:s[0].measure.map[2],offset:0};try{var c=Ci(o.node,o.offset,i.offset,i.node)}catch(e){}c&&(!m&&this.cm.state.focused?(e.collapse(o.node,o.offset),c.collapsed||e.addRange(c)):(e.removeAllRanges(),e.addRange(c)),a&&null==e.anchorNode?e.addRange(a):m&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){e.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(e){Mi(this.cm.display.cursorDiv,e.cursors),Mi(this.cm.display.selectionDiv,e.selection)},rememberSelection:function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},selectionInEditor:function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return Ei(this.div,t)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){var t=this;this.selectionInEditor()?this.pollSelection():Yt(this.cm,function(){t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))})},selectionChanged:function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;this.rememberSelection();var r=Le(t,e.anchorNode,e.anchorOffset),n=Le(t,e.focusNode,e.focusOffset);r&&n&&Yt(t,function(){qe(t.doc,Ie(r,n),si),(r.bad||n.bad)&&(t.curOp.selectionChanged=!0)})}},pollContent:function(){var e,t=this.cm,r=t.display,n=t.doc.sel.primary(),o=n.from(),i=n.to();if(o.line<r.viewFrom||i.line>r.viewTo-1)return!1;if(o.line==r.viewFrom||0==(e=rr(t,o.line)))var s=So(r.view[0].line),a=r.view[0].node;else s=So(r.view[e].line),a=r.view[e-1].node.nextSibling;var l=rr(t,i.line);if(l==r.view.length-1)var u=r.viewTo-1,c=r.lineDiv.lastChild;else u=So(r.view[l+1].line)-1,c=r.view[l+1].node.previousSibling;for(var p=t.doc.splitLines(function(l,e,t,u,c){var p="",h=!1,d=l.doc.lineSeparator();function f(e){if(1==e.nodeType){var t=e.getAttribute("cm-text");if(null!=t)return""==t&&(t=e.textContent.replace(/\u200b/g,"")),void(p+=t);var r,n=e.getAttribute("cm-marker");if(n){var o=l.findMarks(de(u,0),de(c+1,0),(a=+n,function(e){return e.id==a}));return void(o.length&&(r=o[0].find())&&(p+=To(l.doc,r.from,r.to).join(d)))}if("false"==e.getAttribute("contenteditable"))return;for(var i=0;i<e.childNodes.length;i++)f(e.childNodes[i]);/^(pre|div|p)$/i.test(e.nodeName)&&(h=!0)}else if(3==e.nodeType){var s=e.nodeValue;if(!s)return;h&&(p+=d,h=!1),p+=s}var a}for(;f(e),e!=t;)e=e.nextSibling;return p}(t,a,c,s,u)),h=To(t.doc,de(s,0),de(u,wo(t.doc,u).text.length));1<p.length&&1<h.length;)if(fi(p)==fi(h))p.pop(),h.pop(),u--;else{if(p[0]!=h[0])break;p.shift(),h.shift(),s++}for(var d=0,f=0,m=p[0],g=h[0],y=Math.min(m.length,g.length);d<y&&m.charCodeAt(d)==g.charCodeAt(d);)++d;for(var v=fi(p),b=fi(h),x=Math.min(v.length-(1==p.length?d:0),b.length-(1==h.length?d:0));f<x&&v.charCodeAt(v.length-f-1)==b.charCodeAt(b.length-f-1);)++f;p[p.length-1]=v.slice(0,v.length-f),p[0]=p[0].slice(d);var w=de(s,d),T=de(u,h.length?fi(h).length-f:0);return 1<p.length||p[0]||fe(w,T)?(Br(t.doc,p,w,T,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(e){this.cm.isReadOnly()?Jt(this.cm,Qt)(this.cm):e.data&&e.data!=e.startData&&Jt(this.cm,xe)(this.cm,e.data,0,e.sel)},setUneditable:function(e){e.contentEditable="false"},onKeyPress:function(e){e.preventDefault(),this.cm.isReadOnly()||Jt(this.cm,xe)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},readOnlyChanged:function(e){this.div.contentEditable=String("nocursor"!=e)},onContextMenu:vi,resetPosition:vi,needsContentAttribute:!0},Ge.prototype),O.inputStyles={textarea:Se,contenteditable:Ge},Ee.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var r=this.ranges[t],n=e.ranges[t];if(0!=fe(r.anchor,n.anchor)||0!=fe(r.head,n.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new je(me(this.ranges[t].anchor),me(this.ranges[t].head));return new Ee(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var r=0;r<this.ranges.length;r++){var n=this.ranges[r];if(0<=fe(t,n.from())&&fe(e,n.to())<=0)return r}return-1}},je.prototype={from:function(){return ye(this.anchor,this.head)},to:function(){return ge(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var bt,xt={left:0,right:0,top:0,bottom:0};function wt(e,t,r){for(var n,o,i,s,a=0;a<e.length;a+=3){var l=e[a],u=e[a+1];if(t<l?(o=0,i=1,s="left"):t<u?i=(o=t-l)+1:(a==e.length-3||t==u&&e[a+3]>t)&&(o=(i=u-l)-1,u<=t&&(s="right")),null!=o){if(n=e[a+2],l==u&&r==(n.insertLeft?"left":"right")&&(s=r),"left"==r&&0==o)for(;a&&e[a-2]==e[a-3]&&e[a-1].insertLeft;)n=e[2+(a-=3)],s="left";if("right"==r&&o==u-l)for(;a<e.length-3&&e[a+3]==e[a+4]&&!e[a+5].insertLeft;)n=e[(a+=3)+2],s="right";break}}return{node:n,start:o,end:i,collapse:s,coverStart:l,coverEnd:u}}function Tt(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Nt(e){e.display.externalMeasure=null,Li(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Tt(e.display.view[t])}function Ot(e){Nt(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function St(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Ct(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Gt(e,t,r,n){if(t.widgets)for(var o=0;o<t.widgets.length;++o)if(t.widgets[o].above){var i=Hn(t.widgets[o]);r.top+=i,r.bottom+=i}if("line"==n)return r;n||(n="local");var s=Go(t);if("local"==n?s+=lt(e.display):s-=e.display.viewOffset,"page"==n||"window"==n){var a=e.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==n?0:Ct());var l=a.left+("window"==n?0:St());r.left+=l,r.right+=l}return r.top+=s,r.bottom+=s,r}function kt(e,t,r){if("div"==r)return t;var n=t.left,o=t.top;if("page"==r)n-=St(),o-=Ct();else if("local"==r||!r){var i=e.display.sizer.getBoundingClientRect();n+=i.left,o+=i.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:n-s.left,top:o-s.top}}function At(e,t,r,n,o){return n||(n=wo(e.doc,t.line)),Gt(e,n,mt(e,n,t.ch,o),r)}function Lt(n,e,o,i,s,a){function l(e,t){var r=vt(n,s,e,t?"right":"left",a);return t?r.left=r.right:r.right=r.left,Gt(n,i,r,o)}function t(e,t){var r=u[t],n=r.level%2;return e==$i(r)&&t&&r.level<u[t-1].level?(e=Qi(r=u[--t])-(r.level%2?0:1),n=!0):e==Qi(r)&&t<u.length-1&&r.level<u[t+1].level&&(e=$i(r=u[++t])-r.level%2,n=!1),n&&e==r.to&&e>r.from?l(e-1):l(e,n)}i=i||wo(n.doc,e.line),s||(s=yt(n,i));var u=ko(i),r=e.ch;if(!u)return l(r);var c=t(r,os(u,r));return null!=Xi&&(c.other=t(r,Xi)),c}function Mt(e,t){var r=0;t=Ve(e.doc,t);e.options.lineWrapping||(r=Rt(e.display)*t.ch);var n=wo(e.doc,t.line),o=Go(n)+lt(e.display);return{left:r,right:r,top:o,bottom:o+n.height}}function Et(e,t,r,n){var o=de(e,t);return o.xRel=n,r&&(o.outside=!0),o}function jt(e,t,r){var n=e.doc;if((r+=e.display.viewOffset)<0)return Et(n.first,0,!0,-1);var o=Co(n,r),i=n.first+n.size-1;if(i<o)return Et(n.first+n.size-1,wo(n,i).text.length,!0,1);t<0&&(t=0);for(var s=wo(n,o);;){var a=Pt(e,s,o,t,r),l=Rn(s),u=l&&l.find(0,!0);if(!l||!(a.ch>u.from.ch||a.ch==u.from.ch&&0<a.xRel))return a;o=So(s=u.to.line)}}function Pt(r,n,o,e,t){var i=t-Go(n),s=!1,a=2*r.display.wrapper.clientWidth,l=yt(r,n);function u(e){var t=Lt(r,de(o,e),"line",n,l);return s=!0,i>t.bottom?t.left-a:i<t.top?t.left+a:(s=!1,t.left)}var c=ko(n),p=n.text.length,h=es(n),d=ts(n),f=u(h),m=s,g=u(d),y=s;if(g<e)return Et(o,d,y,1);for(;;){if(c?d==h||d==ss(n,h,1):d-h<=1){for(var v=e<f||e-f<=g-e?h:d,b=e-(v==h?f:g);ki(n.text.charAt(v));)++v;return Et(o,v,v==h?m:y,b<-1?-1:1<b?1:0)}var x=Math.ceil(p/2),w=h+x;if(c){w=h;for(var T=0;T<x;++T)w=ss(n,w,1)}var N=u(w);e<N?(d=w,g=N,(y=s)&&(g+=1e3),p=x):(h=w,f=N,m=s,p-=x)}}function It(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==bt){bt=Ai("pre");for(var t=0;t<49;++t)bt.appendChild(document.createTextNode("x")),bt.appendChild(Ai("br"));bt.appendChild(document.createTextNode("x"))}Mi(e.measure,bt);var r=bt.offsetHeight/50;return 3<r&&(e.cachedTextHeight=r),Li(e.measure),r||1}function Rt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=Ai("span","xxxxxxxxxx"),r=Ai("pre",[t]);Mi(e.measure,r);var n=t.getBoundingClientRect(),o=(n.right-n.left)/10;return 2<o&&(e.cachedCharWidth=o),o||10}var Vt,Dt,Ft=null,_t=0;function Bt(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++_t},Ft?Ft.ops.push(e.curOp):e.curOp.ownsGroup=Ft={ops:[e.curOp],delayedCallbacks:[]}}function Ut(e){var t=e.curOp.ownsGroup;if(t)try{!function(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r].call(null);for(var n=0;n<e.ops.length;n++){var o=e.ops[n];if(o.cursorActivityHandlers)for(;o.cursorActivityCalled<o.cursorActivityHandlers.length;)o.cursorActivityHandlers[o.cursorActivityCalled++].call(null,o.cm)}}while(r<t.length)}(t)}finally{Ft=null;for(var r=0;r<t.ops.length;r++)t.ops[r].cm.curOp=null;!function(e){for(var t=e.ops,r=0;r<t.length;r++)zt(t[r]);for(var r=0;r<t.length;r++)n=t[r],n.updatedDisplay=n.mustUpdate&&K(n.cm,n.update);var n;for(var r=0;r<t.length;r++)Wt(t[r]);for(var r=0;r<t.length;r++)Ht(t[r]);for(var r=0;r<t.length;r++)qt(t[r])}(t)}}function zt(e){var t,r,n=e.cm,o=n.display;!(r=(t=n).display).scrollbarsClipped&&r.scroller.offsetWidth&&(r.nativeBarWidth=r.scroller.offsetWidth-r.scroller.clientWidth,r.heightForcer.style.height=pt(t)+"px",r.sizer.style.marginBottom=-r.nativeBarWidth+"px",r.sizer.style.borderRightWidth=pt(t)+"px",r.scrollbarsClipped=!0),e.updateMaxLine&&I(n),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<o.viewFrom||e.scrollToPos.to.line>=o.viewTo)||o.maxLineChanged&&n.options.lineWrapping,e.update=e.mustUpdate&&new J(n,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Wt(e){var t=e.cm,r=t.display;e.updatedDisplay&&Q(t),e.barMeasure=V(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=mt(t,r.maxLine,r.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+e.adjustWidthTo+pt(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo-ht(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=r.input.prepareSelection())}function Ht(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&mr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1),e.preparedSelection&&t.display.input.showSelection(e.preparedSelection),(e.updatedDisplay||e.startHeight!=t.doc.height)&&B(t,e.barMeasure),e.updatedDisplay&&$(t,e.barMeasure),e.selectionChanged&&ot(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),!e.focus||e.focus!=ji()||document.hasFocus&&!document.hasFocus()||ve(e.cm)}function qt(e){var t=e.cm,r=t.display,n=t.doc;if(e.updatedDisplay&&X(t,e.update),null==r.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null==e.scrollTop||r.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(n.scrollTop=Math.max(0,Math.min(r.scroller.scrollHeight-r.scroller.clientHeight,e.scrollTop)),r.scrollbars.setScrollTop(n.scrollTop),r.scroller.scrollTop=n.scrollTop),null==e.scrollLeft||r.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(n.scrollLeft=Math.max(0,Math.min(r.scroller.scrollWidth-r.scroller.clientWidth,e.scrollLeft)),r.scrollbars.setScrollLeft(n.scrollLeft),r.scroller.scrollLeft=n.scrollLeft,W(t)),e.scrollToPos){var o=function(e,t,r,n){null==n&&(n=0);for(var o=0;o<5;o++){var i=!1,s=Lt(e,t),a=r&&r!=t?Lt(e,r):s,l=Ur(e,Math.min(s.left,a.left),Math.min(s.top,a.top)-n,Math.max(s.left,a.left),Math.max(s.bottom,a.bottom)+n),u=e.doc.scrollTop,c=e.doc.scrollLeft;if(null!=l.scrollTop&&(fr(e,l.scrollTop),1<Math.abs(e.doc.scrollTop-u)&&(i=!0)),null!=l.scrollLeft&&(mr(e,l.scrollLeft),1<Math.abs(e.doc.scrollLeft-c)&&(i=!0)),!i)break}return s}(t,Ve(n,e.scrollToPos.from),Ve(n,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&function(e,t){if(ei(e,"scrollCursorIntoView"))return;var r=e.display,n=r.sizer.getBoundingClientRect(),o=null;t.top+n.top<0?o=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(o=!1);if(null!=o&&!u){var i=Ai("div","",null,"position: absolute; top: "+(t.top-r.viewOffset-lt(e.display))+"px; height: "+(t.bottom-t.top+pt(e)+r.barHeight)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(i),i.scrollIntoView(o),e.display.lineSpace.removeChild(i)}}(t,o)}var i=e.maybeHiddenMarkers,s=e.maybeUnhiddenMarkers;if(i)for(var a=0;a<i.length;++a)i[a].lines.length||Xo(i[a],"hide");if(s)for(a=0;a<s.length;++a)s[a].lines.length&&Xo(s[a],"unhide");r.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Xo(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Yt(e,t){if(e.curOp)return t();Bt(e);try{return t()}finally{Ut(e)}}function Jt(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Bt(e);try{return t.apply(e,arguments)}finally{Ut(e)}}}function Kt(e){return function(){if(this.curOp)return e.apply(this,arguments);Bt(this);try{return e.apply(this,arguments)}finally{Ut(this)}}}function Xt(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Bt(e);try{return t.apply(this,arguments)}finally{Ut(e)}}}function Zt(e,t,r){this.line=t,this.rest=function(e){var t,r;for(;t=Rn(e);)e=t.find(1,!0).line,(r||(r=[])).push(e);return r}(t),this.size=this.rest?So(fi(this.rest))-r+1:1,this.node=this.text=null,this.hidden=Bn(e,t)}function $t(e,t,r){for(var n,o=[],i=t;i<r;i=n){var s=new Zt(e.doc,wo(e.doc,i),i);n=i+s.size,o.push(s)}return o}function Qt(e,t,r,n){null==t&&(t=e.doc.first),null==r&&(r=e.doc.first+e.doc.size),n||(n=0);var o=e.display;if(n&&r<o.viewTo&&(null==o.updateLineNumbers||o.updateLineNumbers>t)&&(o.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=o.viewTo)N&&Fn(e.doc,t)<o.viewTo&&tr(e);else if(r<=o.viewFrom)N&&_n(e.doc,r+n)>o.viewFrom?tr(e):(o.viewFrom+=n,o.viewTo+=n);else if(t<=o.viewFrom&&r>=o.viewTo)tr(e);else if(t<=o.viewFrom){(i=nr(e,r,r+n,1))?(o.view=o.view.slice(i.index),o.viewFrom=i.lineN,o.viewTo+=n):tr(e)}else if(r>=o.viewTo){var i;(i=nr(e,t,t,-1))?(o.view=o.view.slice(0,i.index),o.viewTo=i.lineN):tr(e)}else{var s=nr(e,t,t,-1),a=nr(e,r,r+n,1);s&&a?(o.view=o.view.slice(0,s.index).concat($t(e,s.lineN,a.lineN)).concat(o.view.slice(a.index)),o.viewTo+=n):tr(e)}var l=o.externalMeasured;l&&(r<l.lineN?l.lineN+=n:t<l.lineN+l.size&&(o.externalMeasured=null))}function er(e,t,r){e.curOp.viewChanged=!0;var n=e.display,o=e.display.externalMeasured;if(o&&t>=o.lineN&&t<o.lineN+o.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var i=n.view[rr(e,t)];if(null!=i.node){var s=i.changes||(i.changes=[]);-1==gi(s,r)&&s.push(r)}}}function tr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function rr(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var r=e.display.view,n=0;n<r.length;n++)if((t-=r[n].size)<0)return n}function nr(e,t,r,n){var o,i=rr(e,t),s=e.display.view;if(!N||r==e.doc.first+e.doc.size)return{index:i,lineN:r};for(var a=0,l=e.display.viewFrom;a<i;a++)l+=s[a].size;if(l!=t){if(0<n){if(i==s.length-1)return null;o=l+s[i].size-t,i++}else o=l-t;t+=o,r+=o}for(;Fn(e.doc,r)!=r;){if(i==(n<0?0:s.length-1))return null;r+=n*s[i-(n<0?1:0)].size,i+=n}return{index:i,lineN:r}}function or(e){for(var t=e.display.view,r=0,n=0;n<t.length;n++){var o=t[n];o.hidden||o.node&&!o.changes||++r}return r}function ir(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function sr(e,t){for(var r=Wo(t);r!=e.wrapper;r=r.parentNode)if(!r||1==r.nodeType&&"true"==r.getAttribute("cm-ignore-events")||r.parentNode==e.sizer&&r!=e.mover)return!0}function ar(e,t,r,n){var o=e.display;if(!r&&"true"==Wo(t).getAttribute("cm-not-content"))return null;var i,s,a=o.lineSpace.getBoundingClientRect();try{i=t.clientX-a.left,s=t.clientY-a.top}catch(t){return null}var l,u=jt(e,i,s);if(n&&1==u.xRel&&(l=wo(e.doc,u.line).text).length==u.ch){var c=ci(l,l.length,e.options.tabSize)-l.length;u=de(u.line,Math.max(0,Math.round((i-ct(e.display).left)/Rt(e.display))-c))}return u}function lr(e){var t=this,r=t.display;if(!(ei(t,e)||r.activeTouch&&r.input.supportsTouch()))if(r.shift=e.shiftKey,sr(r,e))g||(r.scroller.draggable=!1,setTimeout(function(){r.scroller.draggable=!0},100));else if(!cr(t,e)){var n,o=ar(t,e);switch(window.focus(),Ho(e)){case 1:t.state.selectingText?t.state.selectingText(e):o?function(e,t,r){x?setTimeout(wi(ve,e),0):e.curOp.focus=ji();var n,o=+new Date;Dt&&Dt.time>o-400&&0==fe(Dt.pos,r)?n="triple":Vt&&Vt.time>o-400&&0==fe(Vt.pos,r)?(n="double",Dt={time:o,pos:r}):(n="single",Vt={time:o,pos:r});var i,s=e.doc.sel,a=v?t.metaKey:t.ctrlKey;e.options.dragDrop&&Ui&&!e.isReadOnly()&&"single"==n&&-1<(i=s.contains(r))&&(fe((i=s.ranges[i]).from(),r)<0||0<r.xRel)&&(0<fe(i.to(),r)||r.xRel<0)?function(t,r,n,o){var i=t.display,s=+new Date,a=Jt(t,function(e){g&&(i.scroller.draggable=!1),t.state.draggingText=!1,Ko(document,"mouseup",a),Ko(i.scroller,"drop",a),Math.abs(r.clientX-e.clientX)+Math.abs(r.clientY-e.clientY)<10&&(_o(e),!o&&+new Date-200<s&&Be(t.doc,n),g||x&&9==w?setTimeout(function(){document.body.focus(),i.input.focus()},20):i.input.focus())});g&&(i.scroller.draggable=!0);t.state.draggingText=a,i.scroller.dragDrop&&i.scroller.dragDrop();qo(document,"mouseup",a),qo(i.scroller,"drop",a)}(e,t,r,a):function(m,e,g,y,t){var i=m.display,v=m.doc;_o(e);var b,x,w=v.sel,r=w.ranges;t&&!e.shiftKey?(x=v.sel.contains(g),b=-1<x?r[x]:new je(g,g)):(b=v.sel.primary(),x=v.sel.primIndex);if(h?e.shiftKey&&e.metaKey:e.altKey)y="rect",t||(b=new je(g,g)),g=ar(m,e,!0,!0),x=-1;else if("double"==y){var n=m.findWordAt(g);b=m.display.shift||v.extend?_e(v,b,n.anchor,n.head):n}else if("triple"==y){var o=new je(de(g.line,0),Ve(v,de(g.line+1,0)));b=m.display.shift||v.extend?_e(v,b,o.anchor,o.head):o}else b=_e(v,b,g);t?-1==x?(x=r.length,qe(v,Pe(r.concat([b]),x),{scroll:!1,origin:"*mouse"})):1<r.length&&r[x].empty()&&"single"==y&&!e.shiftKey?(qe(v,Pe(r.slice(0,x).concat(r.slice(x+1)),0),{scroll:!1,origin:"*mouse"}),w=v.sel):ze(v,x,b,ai):(qe(v,new Ee([b],x=0),ai),w=v.sel);var T=g;var s=i.wrapper.getBoundingClientRect(),a=0;function l(e){var t=++a,r=ar(m,e,!0,"rect"==y);if(r)if(0!=fe(r,T)){m.curOp.focus=ji(),function(e){if(0==fe(T,e))return;if(T=e,"rect"==y){for(var t=[],r=m.options.tabSize,n=ci(wo(v,g.line).text,g.ch,r),o=ci(wo(v,e.line).text,e.ch,r),i=Math.min(n,o),s=Math.max(n,o),a=Math.min(g.line,e.line),l=Math.min(m.lastLine(),Math.max(g.line,e.line));a<=l;a++){var u=wo(v,a).text,c=pi(u,i,r);i==s?t.push(new je(de(a,c),de(a,c))):u.length>c&&t.push(new je(de(a,c),de(a,pi(u,s,r))))}t.length||t.push(new je(g,g)),qe(v,Pe(w.ranges.slice(0,x).concat(t),x),{origin:"*mouse",scroll:!1}),m.scrollIntoView(e)}else{var p=b,h=p.anchor,d=e;if("single"!=y){if("double"==y)var f=m.findWordAt(e);else var f=new je(de(e.line,0),Ve(v,de(e.line+1,0)));0<fe(f.anchor,h)?(d=f.head,h=ye(p.from(),f.anchor)):(d=f.anchor,h=ge(p.to(),f.head))}var t=w.ranges.slice(0);t[x]=new je(Ve(v,h),d),qe(v,Pe(t,x),ai)}}(r);var n=z(i,v);(r.line>=n.to||r.line<n.from)&&setTimeout(Jt(m,function(){a==t&&l(e)}),150)}else{var o=e.clientY<s.top?-20:e.clientY>s.bottom?20:0;o&&setTimeout(Jt(m,function(){a==t&&(i.scroller.scrollTop+=o,l(e))}),50)}}function u(e){m.state.selectingText=!1,a=1/0,_o(e),i.input.focus(),Ko(document,"mousemove",c),Ko(document,"mouseup",p),v.history.lastSelOrigin=null}var c=Jt(m,function(e){Ho(e)?l(e):u(e)}),p=Jt(m,u);m.state.selectingText=p,qo(document,"mousemove",c),qo(document,"mouseup",p)}(e,t,r,n,a)}(t,e,o):Wo(e)==r.scroller&&_o(e);break;case 2:g&&(t.state.lastMiddleDown=+new Date),o&&Be(t.doc,o),setTimeout(function(){r.input.focus()},20),_o(e);break;case 3:b?Lr(t,e):((n=t).state.delayingBlurEvent=!0,setTimeout(function(){n.state.delayingBlurEvent&&(n.state.delayingBlurEvent=!1,Ar(n))},100))}}}function ur(e,t,r,n){try{var o=t.clientX,i=t.clientY}catch(t){return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&_o(t);var s=e.display,a=s.lineDiv.getBoundingClientRect();if(i>a.bottom||!ri(e,r))return Uo(t);i-=a.top-s.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var u=s.gutters.childNodes[l];if(u&&u.getBoundingClientRect().right>=o){var c=Co(e.doc,i),p=e.options.gutters[l];return Xo(e,r,e,c,p,t),Uo(t)}}}function cr(e,t){return ur(e,t,"gutterClick",!0)}var pr=0;function hr(e){var o=this;if(dr(o),!ei(o,e)&&!sr(o.display,e)){_o(e),x&&(pr=+new Date);var i=ar(o,e,!0),t=e.dataTransfer.files;if(i&&!o.isReadOnly())if(t&&t.length&&window.FileReader&&window.File)for(var s=t.length,a=Array(s),l=0,r=function(e,r){if(!o.options.allowDropFileTypes||-1!=gi(o.options.allowDropFileTypes,e.type)){var n=new FileReader;n.onload=Jt(o,function(){var e=n.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),a[r]=e,++l==s){var t={from:i=Ve(o.doc,i),to:i,text:o.doc.splitLines(a.join(o.doc.lineSeparator())),origin:"paste"};Rr(o.doc,t),He(o.doc,Ie(i,Mr(t)))}}),n.readAsText(e)}},n=0;n<s;++n)r(t[n],n);else{if(o.state.draggingText&&-1<o.doc.sel.contains(i))return o.state.draggingText(e),void setTimeout(function(){o.display.input.focus()},20);try{if(a=e.dataTransfer.getData("Text")){if(o.state.draggingText&&!(v?e.altKey:e.ctrlKey))var u=o.listSelections();if(Ye(o.doc,Ie(i,i)),u)for(n=0;n<u.length;++n)Br(o.doc,"",u[n].anchor,u[n].head,"drag");o.replaceSelection(a,"around","paste"),o.display.input.focus()}}catch(e){}}}}function dr(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function fr(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,m||Z(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),m&&Z(e),it(e,100))}function mr(e,t,r){(r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,W(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}var gr=0,yr=null;x?yr=-.53:m?yr=15:i?yr=-.7:l&&(yr=-1/3);var vr=function(e){var t=e.wheelDeltaX,r=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==r&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:null==r&&(r=e.wheelDelta),{x:t,y:r}};function br(e,t){var r=vr(t),n=r.x,o=r.y,i=e.display,s=i.scroller,a=s.scrollWidth>s.clientWidth,l=s.scrollHeight>s.clientHeight;if(n&&a||o&&l){if(o&&v&&g)e:for(var u=t.target,c=i.view;u!=s;u=u.parentNode)for(var p=0;p<c.length;p++)if(c[p].node==u){e.display.currentWheelTarget=u;break e}if(n&&!m&&!y&&null!=yr)return o&&l&&fr(e,Math.max(0,Math.min(s.scrollTop+o*yr,s.scrollHeight-s.clientHeight))),mr(e,Math.max(0,Math.min(s.scrollLeft+n*yr,s.scrollWidth-s.clientWidth))),(!o||o&&l)&&_o(t),void(i.wheelStartX=null);if(o&&null!=yr){var h=o*yr,d=e.doc.scrollTop,f=d+i.wrapper.clientHeight;h<0?d=Math.max(0,d+h-50):f=Math.min(e.doc.height,f+h+50),Z(e,{top:d,bottom:f})}gr<20&&(null==i.wheelStartX?(i.wheelStartX=s.scrollLeft,i.wheelStartY=s.scrollTop,i.wheelDX=n,i.wheelDY=o,setTimeout(function(){if(null!=i.wheelStartX){var e=s.scrollLeft-i.wheelStartX,t=s.scrollTop-i.wheelStartY,r=t&&i.wheelDY&&t/i.wheelDY||e&&i.wheelDX&&e/i.wheelDX;i.wheelStartX=i.wheelStartY=null,r&&(yr=(yr*gr+r)/(gr+1),++gr)}},200)):(i.wheelDX+=n,i.wheelDY+=o))}}function xr(e,t,r){if("string"==typeof t&&!(t=un[t]))return!1;e.display.input.ensurePolled();var n=e.display.shift,o=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),o=t(e)!=ii}finally{e.display.shift=n,e.state.suppressEdits=!1}return o}O.wheelEventPixels=function(e){var t=vr(e);return t.x*=yr,t.y*=yr,t};var wr=new ui;function Tr(e,t,r,n){var o=e.state.keySeq;if(o){if(dn(t))return"handled";wr.set(50,function(){e.state.keySeq==o&&(e.state.keySeq=null,e.display.input.reset())}),t=o+" "+t}var i=function(e,t,r){for(var n=0;n<e.state.keyMaps.length;n++){var o=hn(t,e.state.keyMaps[n],r,e);if(o)return o}return e.options.extraKeys&&hn(t,e.options.extraKeys,r,e)||hn(t,e.options.keyMap,r,e)}(e,t,n);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&$o(e,"keyHandled",e,t,r),"handled"!=i&&"multi"!=i||(_o(r),ot(e)),o&&!i&&/\'$/.test(t)?(_o(r),!0):!!i}function Nr(t,e){var r=fn(e,!0);return!!r&&(e.shiftKey&&!t.state.keySeq?Tr(t,"Shift-"+r,e,function(e){return xr(t,e,!0)})||Tr(t,r,e,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return xr(t,e)}):Tr(t,r,e,function(e){return xr(t,e)}))}var Or=null;function Sr(e){var t=this;if(t.curOp.focus=ji(),!ei(t,e)){x&&w<11&&27==e.keyCode&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=16==r||e.shiftKey;var n=Nr(t,e);y&&(Or=n?r:null,!n&&88==r&&!Ji&&(v?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=r||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function r(e){18!=e.keyCode&&e.altKey||(Ii(t,"CodeMirror-crosshair"),Ko(document,"keyup",r),Ko(document,"mouseover",r))}Ri(t,"CodeMirror-crosshair"),qo(document,"keyup",r),qo(document,"mouseover",r)}(t)}}function Cr(e){16==e.keyCode&&(this.doc.sel.shift=!1),ei(this,e)}function Gr(e){var t=this;if(!(sr(t.display,e)||ei(t,e)||e.ctrlKey&&!e.altKey||v&&e.metaKey)){var r=e.keyCode,n=e.charCode;if(y&&r==Or)return Or=null,void _o(e);if(!y||e.which&&!(e.which<10)||!Nr(t,e)){var o,i=String.fromCharCode(null==n?r:n);if(!Tr(o=t,"'"+i+"'",e,function(e){return xr(o,e,!0)}))t.display.input.onKeyPress(e)}}}function kr(e){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(Xo(e,"focus",e),e.state.focused=!0,Ri(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),g&&setTimeout(function(){e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),ot(e))}function Ar(e){e.state.delayingBlurEvent||(e.state.focused&&(Xo(e,"blur",e),e.state.focused=!1,Ii(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Lr(e,t){var r,n;sr(e.display,t)||(n=t,ri(r=e,"gutterContextMenu")&&ur(r,n,"gutterContextMenu",!1))||(ei(e,t,"contextmenu")||e.display.input.onContextMenu(t))}var Mr=O.changeEnd=function(e){return e.text?de(e.from.line+e.text.length-1,fi(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};function Er(e,t){if(fe(e,t.from)<0)return e;if(fe(e,t.to)<=0)return Mr(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=Mr(t).ch-t.to.ch),de(r,n)}function jr(e,t){for(var r=[],n=0;n<e.sel.ranges.length;n++){var o=e.sel.ranges[n];r.push(new je(Er(o.anchor,t),Er(o.head,t)))}return Pe(r,e.sel.primIndex)}function Pr(e,t,r){return e.line==t.line?de(r.line,e.ch-t.ch+r.ch):de(r.line+(e.line-t.line),e.ch)}function Ir(o,e,t){var r={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){this.canceled=!0}};return t&&(r.update=function(e,t,r,n){e&&(this.from=Ve(o,e)),t&&(this.to=Ve(o,t)),r&&(this.text=r),void 0!==n&&(this.origin=n)}),Xo(o,"beforeChange",o,r),o.cm&&Xo(o.cm,"beforeChange",o.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Rr(e,t,r){if(e.cm){if(!e.cm.curOp)return Jt(e.cm,Rr)(e,t,r);if(e.cm.state.suppressEdits)return}if(!(ri(e,"beforeChange")||e.cm&&ri(e.cm,"beforeChange"))||(t=Ir(e,t,!0))){var n=T&&!r&&function(e,t,r){var n=null;if(e.iter(t.line,r.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var r=e.markedSpans[t].marker;!r.readOnly||n&&-1!=gi(n,r)||(n||(n=[])).push(r)}}),!n)return null;for(var o=[{from:t,to:r}],i=0;i<n.length;++i)for(var s=n[i],a=s.find(0),l=0;l<o.length;++l){var u=o[l];if(!(fe(u.to,a.from)<0||0<fe(u.from,a.to))){var c=[l,1],p=fe(u.from,a.from),h=fe(u.to,a.to);(p<0||!s.inclusiveLeft&&!p)&&c.push({from:u.from,to:a.from}),(0<h||!s.inclusiveRight&&!h)&&c.push({from:a.to,to:u.to}),o.splice.apply(o,c),l+=c.length-1}}return o}(e,t.from,t.to);if(n)for(var o=n.length-1;0<=o;--o)Vr(e,{from:n[o].from,to:n[o].to,text:o?[""]:t.text});else Vr(e,t)}}function Vr(e,r){if(1!=r.text.length||""!=r.text[0]||0!=fe(r.from,r.to)){var t=jr(e,r);Eo(e,r,t,e.cm?e.cm.curOp.id:NaN),_r(e,r,t,Cn(e,r));var n=[];bo(e,function(e,t){t||-1!=gi(n,e.history)||(Fo(e.history,r),n.push(e.history)),_r(e,r,null,Cn(e,r))})}}function Dr(e,t,r){if(!e.cm||!e.cm.state.suppressEdits){for(var n,o=e.history,i=e.sel,s="undo"==t?o.done:o.undone,a="undo"==t?o.undone:o.done,l=0;l<s.length&&(n=s[l],r?!n.ranges||n.equals(e.sel):n.ranges);l++);if(l!=s.length){for(o.lastOrigin=o.lastSelOrigin=null;(n=s.pop()).ranges;){if(jo(n,a),r&&!n.equals(e.sel))return void qe(e,n,{clearRedo:!1});i=n}var u=[];jo(i,a),a.push({changes:u,generation:o.generation}),o.generation=n.generation||++o.maxGeneration;var c=ri(e,"beforeChange")||e.cm&&ri(e.cm,"beforeChange");for(l=n.changes.length-1;0<=l;--l){var p=n.changes[l];if(p.origin=t,c&&!Ir(e,p,!1))return void(s.length=0);u.push(Lo(e,p));var h=l?jr(e,p):fi(s);_r(e,p,h,kn(e,p)),!l&&e.cm&&e.cm.scrollIntoView({from:p.from,to:Mr(p)});var d=[];bo(e,function(e,t){t||-1!=gi(d,e.history)||(Fo(e.history,p),d.push(e.history)),_r(e,p,null,kn(e,p))})}}}}function Fr(e,t){if(0!=t&&(e.first+=t,e.sel=new Ee(yi(e.sel.ranges,function(e){return new je(de(e.anchor.line+t,e.anchor.ch),de(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Qt(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,n=r.viewFrom;n<r.viewTo;n++)er(e.cm,n,"gutter")}}function _r(e,t,r,n){if(e.cm&&!e.cm.curOp)return Jt(e.cm,_r)(e,t,r,n);if(t.to.line<e.first)Fr(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var o=t.text.length-1-(e.first-t.from.line);Fr(e,o),t={from:de(e.first,0),to:de(t.to.line+o,t.to.ch),text:[fi(t.text)],origin:t.origin}}var i=e.lastLine();t.to.line>i&&(t={from:t.from,to:de(i,wo(e,i).text.length),text:[t.text[0]],origin:t.origin}),t.removed=To(e,t.from,t.to),r||(r=jr(e,t)),e.cm?function(e,t,r){var n=e.doc,o=e.display,i=t.from,s=t.to,a=!1,l=i.line;e.options.lineWrapping||(l=So(Dn(wo(n,i.line))),n.iter(l,s.line+1,function(e){if(e==o.maxLine)return a=!0}));-1<n.sel.contains(t.from,t.to)&&ti(e);po(n,t,r,k(e)),e.options.lineWrapping||(n.iter(l,i.line+t.text.length,function(e){var t=P(e);t>o.maxLineLength&&(o.maxLine=e,o.maxLineLength=t,o.maxLineChanged=!0,a=!1)}),a&&(e.curOp.updateMaxLine=!0));n.frontier=Math.min(n.frontier,i.line),it(e,400);var u=t.text.length-(s.line-i.line)-1;t.full?Qt(e):i.line!=s.line||1!=t.text.length||co(e.doc,t)?Qt(e,i.line,s.line+1,u):er(e,i.line,"text");var c=ri(e,"changes"),p=ri(e,"change");if(p||c){var h={from:i,to:s,text:t.text,removed:t.removed,origin:t.origin};p&&$o(e,"change",e,h),c&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}(e.cm,t,n):po(e,t,n),Ye(e,r,si)}}function Br(e,t,r,n,o){if(n||(n=r),fe(n,r)<0){var i=n;n=r,r=i}"string"==typeof t&&(t=e.splitLines(t)),Rr(e,{from:r,to:n,text:t,origin:o})}function Ur(e,t,r,n,o){var i=e.display,s=It(e.display);r<0&&(r=0);var a=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:i.scroller.scrollTop,l=dt(e),u={};l<o-r&&(o=r+l);var c=e.doc.height+ut(i),p=r<s,h=c-s<o;if(r<a)u.scrollTop=p?0:r;else if(a+l<o){var d=Math.min(r,(h?c:o)-l);d!=a&&(u.scrollTop=d)}var f=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:i.scroller.scrollLeft,m=ht(e)-(e.options.fixedGutter?i.gutters.offsetWidth:0),g=m<n-t;return g&&(n=t+m),t<10?u.scrollLeft=0:t<f?u.scrollLeft=Math.max(0,t-(g?0:10)):m+f-3<n&&(u.scrollLeft=n+(g?0:10)-m),u}function zr(e,t,r){null==t&&null==r||Hr(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=r&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+r)}function Wr(e){Hr(e);var t=e.getCursor(),r=t,n=t;e.options.lineWrapping||(r=t.ch?de(t.line,t.ch-1):t,n=de(t.line,t.ch+1)),e.curOp.scrollToPos={from:r,to:n,margin:e.options.cursorScrollMargin,isCursor:!0}}function Hr(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var r=Mt(e,t.from),n=Mt(e,t.to),o=Ur(e,Math.min(r.left,n.left),Math.min(r.top,n.top)-t.margin,Math.max(r.right,n.right),Math.max(r.bottom,n.bottom)+t.margin);e.scrollTo(o.scrollLeft,o.scrollTop)}}function qr(e,t,r,n){var o,i=e.doc;null==r&&(r="add"),"smart"==r&&(i.mode.indent?o=at(e,t):r="prev");var s=e.options.tabSize,a=wo(i,t),l=ci(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var u,c=a.text.match(/^\s*/)[0];if(n||/\S/.test(a.text)){if("smart"==r&&((u=i.mode.indent(o,a.text.slice(c.length),a.text))==ii||150<u)){if(!n)return;r="prev"}}else u=0,r="not";"prev"==r?u=t>i.first?ci(wo(i,t-1).text,null,s):0:"add"==r?u=l+e.options.indentUnit:"subtract"==r?u=l-e.options.indentUnit:"number"==typeof r&&(u=l+r),u=Math.max(0,u);var p="",h=0;if(e.options.indentWithTabs)for(var d=Math.floor(u/s);d;--d)h+=s,p+="\t";if(h<u&&(p+=di(u-h)),p!=c)return Br(i,p,de(t,0),de(t,c.length),"+input"),!(a.stateAfter=null);for(d=0;d<i.sel.ranges.length;d++){var f=i.sel.ranges[d];if(f.head.line==t&&f.head.ch<c.length){ze(i,d,new je(h=de(t,c.length),h));break}}}function Yr(e,t,r,n){var o=t,i=t;return"number"==typeof t?i=wo(e,Re(e,t)):o=So(t),null==o?null:(n(i,o)&&e.cm&&er(e.cm,o,r),i)}function Jr(t,e){for(var r=t.doc.sel.ranges,n=[],o=0;o<r.length;o++){for(var i=e(r[o]);n.length&&fe(i.from,fi(n).to)<=0;){var s=n.pop();if(fe(s.from,i.from)<0){i.from=s.from;break}}n.push(i)}Yt(t,function(){for(var e=n.length-1;0<=e;e--)Br(t.doc,"",n[e].from,n[e].to,"+delete");Wr(t)})}function Kr(n,e,o,t,i){var s=e.line,a=e.ch,r=o,l=wo(n,s);function u(e){var t,r=(i?ss:as)(l,a,o,!0);if(null==r){if(e||(t=s+o)<n.first||t>=n.first+n.size||!(l=wo(n,s=t)))return!1;a=i?(o<0?ts:es)(l):o<0?l.text.length:0}else a=r;return!0}if("char"==t)u();else if("column"==t)u(!0);else if("word"==t||"group"==t)for(var c=null,p="group"==t,h=n.cm&&n.cm.getHelper(e,"wordChars"),d=!0;!(o<0)||u(!d);d=!1){var f=l.text.charAt(a)||"\n",m=Oi(f,h)?"w":p&&"\n"==f?"n":!p||/\s/.test(f)?null:"p";if(!p||d||m||(m="s"),c&&c!=m){o<0&&(o=1,u());break}if(m&&(c=m),0<o&&!u(!d))break}var g=$e(n,de(s,a),e,r,!0);return fe(e,g)||(g.hitSide=!0),g}function Xr(e,t,r,n){var o,i=e.doc,s=t.left;if("page"==n){var a=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);o=t.top+r*(a-(r<0?1.5:.5)*It(e.display))}else"line"==n&&(o=0<r?t.bottom+3:t.top-3);for(;;){var l=jt(e,s,o);if(!l.outside)break;if(r<0?o<=0:o>=i.height){l.hitSide=!0;break}o+=5*r}return l}O.prototype={constructor:O,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var r=this.options,n=r[e];r[e]==t&&"mode"!=e||(r[e]=t,$r.hasOwnProperty(e)&&Jt(this,$r[e])(this,t,n))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](mn(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,r=0;r<t.length;++r)if(t[r]==e||t[r].name==e)return t.splice(r,1),!0},addOverlay:Kt(function(e,t){var r=e.token?e:O.getMode(this.options,e);if(r.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:r,modeSpec:e,opaque:t&&t.opaque}),this.state.modeGen++,Qt(this)}),removeOverlay:Kt(function(e){for(var t=this.state.overlays,r=0;r<t.length;++r){var n=t[r].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(r,1),this.state.modeGen++,void Qt(this)}}),indentLine:Kt(function(e,t,r){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),De(this.doc,e)&&qr(this,e,t,r)}),indentSelection:Kt(function(e){for(var t=this.doc.sel.ranges,r=-1,n=0;n<t.length;n++){var o=t[n];if(o.empty())o.head.line>r&&(qr(this,o.head.line,e,!0),r=o.head.line,n==this.doc.sel.primIndex&&Wr(this));else{var i=o.from(),s=o.to(),a=Math.max(r,i.line);r=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var l=a;l<r;++l)qr(this,l,e);var u=this.doc.sel.ranges;0==i.ch&&t.length==u.length&&0<u[n].from().ch&&ze(this.doc,n,new je(i,u[n].to()),si)}}}),getTokenAt:function(e,t){return Xn(this,e,t)},getLineTokens:function(e,t){return Xn(this,de(e),t,!0)},getTokenTypeAt:function(e){e=Ve(this.doc,e);var t,r=Qn(this,wo(this.doc,e.line)),n=0,o=(r.length-1)/2,i=e.ch;if(0==i)t=r[2];else for(;;){var s=n+o>>1;if((s?r[2*s-1]:0)>=i)o=s;else{if(!(r[2*s+1]<i)){t=r[2*s+2];break}n=s+1}}var a=t?t.indexOf("cm-overlay "):-1;return a<0?t:0==a?null:t.slice(0,a-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?O.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!sn.hasOwnProperty(t))return r;var n=sn[t],o=this.getModeAt(e);if("string"==typeof o[t])n[o[t]]&&r.push(n[o[t]]);else if(o[t])for(var i=0;i<o[t].length;i++){var s=n[o[t][i]];s&&r.push(s)}else o.helperType&&n[o.helperType]?r.push(n[o.helperType]):n[o.name]&&r.push(n[o.name]);for(i=0;i<n._global.length;i++){var a=n._global[i];a.pred(o,this)&&-1==gi(r,a.val)&&r.push(a.val)}return r},getStateAfter:function(e,t){var r=this.doc;return at(this,(e=Re(r,null==e?r.first+r.size-1:e))+1,t)},cursorCoords:function(e,t){var r=this.doc.sel.primary();return Lt(this,null==e?r.head:"object"==typeof e?Ve(this.doc,e):e?r.from():r.to(),t||"page")},charCoords:function(e,t){return At(this,Ve(this.doc,e),t||"page")},coordsChar:function(e,t){return jt(this,(e=kt(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=kt(this,{top:e,left:0},t||"page").top,Co(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var r,n=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:o<e&&(e=o,n=!0),r=wo(this.doc,e)}else r=e;return Gt(this,r,{top:0,left:0},t||"page").top+(n?this.doc.height-Go(r):0)},defaultTextHeight:function(){return It(this.display)},defaultCharWidth:function(){return Rt(this.display)},setGutterMarker:Kt(function(e,r,n){return Yr(this.doc,e,"gutter",function(e){var t=e.gutterMarkers||(e.gutterMarkers={});return!(t[r]=n)&&Si(t)&&(e.gutterMarkers=null),!0})}),clearGutter:Kt(function(t){var r=this,e=r.doc,n=e.first;e.iter(function(e){e.gutterMarkers&&e.gutterMarkers[t]&&(e.gutterMarkers[t]=null,er(r,n,"gutter"),Si(e.gutterMarkers)&&(e.gutterMarkers=null)),++n})}),lineInfo:function(e){if("number"==typeof e){if(!De(this.doc,e))return null;var t=e;if(!(e=wo(this.doc,e)))return null}else{if(null==(t=So(e)))return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,r,n,o){var i,s,a,l,u,c,p=this.display,h=(e=Lt(this,Ve(this.doc,e))).bottom,d=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),p.sizer.appendChild(t),"over"==n)h=e.top;else if("above"==n||"near"==n){var f=Math.max(p.wrapper.clientHeight,this.doc.height),m=Math.max(p.sizer.clientWidth,p.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>f)&&e.top>t.offsetHeight?h=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=f&&(h=e.bottom),d+t.offsetWidth>m&&(d=m-t.offsetWidth)}t.style.top=h+"px",t.style.left=t.style.right="","right"==o?(d=p.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==o?d=0:"middle"==o&&(d=(p.sizer.clientWidth-t.offsetWidth)/2),t.style.left=d+"px"),r&&(i=this,a=h,l=(s=d)+t.offsetWidth,u=h+t.offsetHeight,null!=(c=Ur(i,s,a,l,u)).scrollTop&&fr(i,c.scrollTop),null!=c.scrollLeft&&mr(i,c.scrollLeft))},triggerOnKeyDown:Kt(Sr),triggerOnKeyPress:Kt(Gr),triggerOnKeyUp:Cr,execCommand:function(e){if(un.hasOwnProperty(e))return un[e].call(null,this)},triggerElectric:Kt(function(e){Te(this,e)}),findPosH:function(e,t,r,n){var o=1;t<0&&(o=-1,t=-t);for(var i=0,s=Ve(this.doc,e);i<t&&!(s=Kr(this.doc,s,o,r,n)).hitSide;++i);return s},moveH:Kt(function(t,r){var n=this;n.extendSelectionsBy(function(e){return n.display.shift||n.doc.extend||e.empty()?Kr(n.doc,e.head,t,r,n.options.rtlMoveVisually):t<0?e.from():e.to()},li)}),deleteH:Kt(function(r,n){var e=this.doc.sel,o=this.doc;e.somethingSelected()?o.replaceSelection("",null,"+delete"):Jr(this,function(e){var t=Kr(o,e.head,r,n,!1);return r<0?{from:t,to:e.head}:{from:e.head,to:t}})}),findPosV:function(e,t,r,n){var o=1,i=n;t<0&&(o=-1,t=-t);for(var s=0,a=Ve(this.doc,e);s<t;++s){var l=Lt(this,a,"div");if(null==i?i=l.left:l.left=i,(a=Xr(this,l,o,r)).hitSide)break}return a},moveV:Kt(function(n,o){var i=this,s=this.doc,a=[],l=!i.display.shift&&!s.extend&&s.sel.somethingSelected();if(s.extendSelectionsBy(function(e){if(l)return n<0?e.from():e.to();var t=Lt(i,e.head,"div");null!=e.goalColumn&&(t.left=e.goalColumn),a.push(t.left);var r=Xr(i,t,n,o);return"page"==o&&e==s.sel.primary()&&zr(i,null,At(i,r,"div").top-t.top),r},li),a.length)for(var e=0;e<s.sel.ranges.length;e++)s.sel.ranges[e].goalColumn=a[e]}),findWordAt:function(e){var t=wo(this.doc,e.line).text,r=e.ch,n=e.ch;if(t){var o=this.getHelper(e,"wordChars");(e.xRel<0||n==t.length)&&r?--r:++n;for(var i=t.charAt(r),s=Oi(i,o)?function(e){return Oi(e,o)}:/\s/.test(i)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!Oi(e)};0<r&&s(t.charAt(r-1));)--r;for(;n<t.length&&s(t.charAt(n));)++n}return new je(de(e.line,r),de(e.line,n))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Ri(this.display.cursorDiv,"CodeMirror-overwrite"):Ii(this.display.cursorDiv,"CodeMirror-overwrite"),Xo(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==ji()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Kt(function(e,t){null==e&&null==t||Hr(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-pt(this)-this.display.barHeight,width:e.scrollWidth-pt(this)-this.display.barWidth,clientHeight:dt(this),clientWidth:ht(this)}},scrollIntoView:Kt(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:de(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)Hr(this),this.curOp.scrollToPos=e;else{var r=Ur(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(r.scrollLeft,r.scrollTop)}}),setSize:Kt(function(e,t){var r=this;function n(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}null!=e&&(r.display.wrapper.style.width=n(e)),null!=t&&(r.display.wrapper.style.height=n(t)),r.options.lineWrapping&&Nt(this);var o=r.display.viewFrom;r.doc.iter(o,r.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){er(r,o,"widget");break}++o}),r.curOp.forceUpdate=!0,Xo(r,"refresh",this)}),operation:function(e){return Yt(this,e)},refresh:Kt(function(){var e=this.display.cachedTextHeight;Qt(this),this.curOp.forceUpdate=!0,Ot(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),j(this),(null==e||.5<Math.abs(e-It(this.display)))&&A(this),Xo(this,"refresh",this)}),swapDoc:Kt(function(e){var t=this.doc;return t.cm=null,xo(this,e),Ot(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,$o(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ni(O);var Zr=O.defaults={},$r=O.optionHandlers={};function Qr(e,t,n,r){O.defaults[e]=t,n&&($r[e]=r?function(e,t,r){r!=en&&n(e,t,r)}:n)}var en=O.Init={toString:function(){return"CodeMirror.Init"}};Qr("value","",function(e,t){e.setValue(t)},!0),Qr("mode",null,function(e,t){e.doc.modeOption=t,C(e)},!0),Qr("indentUnit",2,C,!0),Qr("indentWithTabs",!1),Qr("smartIndent",!0),Qr("tabSize",4,function(e){G(e),Ot(e),Qt(e)},!0),Qr("lineSeparator",null,function(e,n){if(e.doc.lineSep=n){var o=[],i=e.doc.first;e.doc.iter(function(e){for(var t=0;;){var r=e.text.indexOf(n,t);if(-1==r)break;t=r+n.length,o.push(de(i,r))}i++});for(var t=o.length-1;0<=t;t--)Br(e.doc,n,o[t],de(o[t].line,o[t].ch+n.length))}}),Qr("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,r){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),r!=O.Init&&e.refresh()}),Qr("specialCharPlaceholder",function(e){var t=Ai("span","","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t},function(e){e.refresh()},!0),Qr("electricChars",!0),Qr("inputStyle",c?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),Qr("rtlMoveVisually",!p),Qr("wholeLineUpdateBefore",!0),Qr("theme","default",function(e){L(e),M(e)},!0),Qr("keyMap","default",function(e,t,r){var n=mn(t),o=r!=O.Init&&mn(r);o&&o.detach&&o.detach(e,n),n.attach&&n.attach(e,o||null)}),Qr("extraKeys",null),Qr("lineWrapping",!1,function(e){e.options.lineWrapping?(Ri(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Ii(e.display.wrapper,"CodeMirror-wrap"),I(e)),A(e),Qt(e),Ot(e),setTimeout(function(){B(e)},100)},!0),Qr("gutters",[],function(e){R(e.options),M(e)},!0),Qr("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?Y(e.display)+"px":"0",e.refresh()},!0),Qr("coverGutterNextToScrollbar",!1,function(e){B(e)},!0),Qr("scrollbarStyle","native",function(e){_(e),B(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),Qr("lineNumbers",!1,function(e){R(e.options),M(e)},!0),Qr("firstLineNumber",1,M,!0),Qr("lineNumberFormatter",function(e){return e},M,!0),Qr("showCursorWhenSelecting",!1,et,!0),Qr("resetSelectionOnContextMenu",!0),Qr("lineWiseCopyCut",!0),Qr("readOnly",!1,function(e,t){"nocursor"==t?(Ar(e),e.display.input.blur(),e.display.disabled=!0):e.display.disabled=!1,e.display.input.readOnlyChanged(t)}),Qr("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),Qr("dragDrop",!0,function(e,t,r){if(!t!=!(r&&r!=O.Init)){var n=e.display.dragFunctions,o=t?qo:Ko;o(e.display.scroller,"dragstart",n.start),o(e.display.scroller,"dragenter",n.enter),o(e.display.scroller,"dragover",n.over),o(e.display.scroller,"dragleave",n.leave),o(e.display.scroller,"drop",n.drop)}}),Qr("allowDropFileTypes",null),Qr("cursorBlinkRate",530),Qr("cursorScrollMargin",0),Qr("cursorHeight",1,et,!0),Qr("singleCursorHeightPerLine",!0,et,!0),Qr("workTime",100),Qr("workDelay",100),Qr("flattenSpans",!0,G,!0),Qr("addModeClass",!1,G,!0),Qr("pollInterval",100),Qr("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),Qr("historyEventDelay",1250),Qr("viewportMargin",10,function(e){e.refresh()},!0),Qr("maxHighlightLength",1e4,G,!0),Qr("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),Qr("tabindex",null,function(e,t){e.display.input.getField().tabIndex=t||""}),Qr("autofocus",null);var tn=O.modes={},rn=O.mimeModes={};O.defineMode=function(e,t){O.defaults.mode||"null"==e||(O.defaults.mode=e),2<arguments.length&&(t.dependencies=Array.prototype.slice.call(arguments,2)),tn[e]=t},O.defineMIME=function(e,t){rn[e]=t},O.resolveMode=function(e){if("string"==typeof e&&rn.hasOwnProperty(e))e=rn[e];else if(e&&"string"==typeof e.name&&rn.hasOwnProperty(e.name)){var t=rn[e.name];"string"==typeof t&&(t={name:t}),(e=bi(t,e)).name=t.name}else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return O.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},O.getMode=function(e,t){t=O.resolveMode(t);var r=tn[t.name];if(!r)return O.getMode(e,"text/plain");var n=r(e,t);if(nn.hasOwnProperty(t.name)){var o=nn[t.name];for(var i in o)o.hasOwnProperty(i)&&(n.hasOwnProperty(i)&&(n["_"+i]=n[i]),n[i]=o[i])}if(n.name=t.name,t.helperType&&(n.helperType=t.helperType),t.modeProps)for(var i in t.modeProps)n[i]=t.modeProps[i];return n},O.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),O.defineMIME("text/plain","null");var nn=O.modeExtensions={};O.extendMode=function(e,t){xi(t,nn.hasOwnProperty(e)?nn[e]:nn[e]={})},O.defineExtension=function(e,t){O.prototype[e]=t},O.defineDocExtension=function(e,t){go.prototype[e]=t},O.defineOption=Qr;var on=[];O.defineInitHook=function(e){on.push(e)};var sn=O.helpers={};O.registerHelper=function(e,t,r){sn.hasOwnProperty(e)||(sn[e]=O[e]={_global:[]}),sn[e][t]=r},O.registerGlobalHelper=function(e,t,r,n){O.registerHelper(e,t,n),sn[e]._global.push({pred:r,val:n})};var an=O.copyState=function(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var o=t[n];o instanceof Array&&(o=o.concat([])),r[n]=o}return r},ln=O.startState=function(e,t,r){return!e.startState||e.startState(t,r)};O.innerMode=function(e,t){for(;e.innerMode;){var r=e.innerMode(t);if(!r||r.mode==e)break;t=r.state,e=r.mode}return r||{mode:e,state:t}};var un=O.commands={selectAll:function(e){e.setSelection(de(e.firstLine(),0),de(e.lastLine()),si)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),si)},killLine:function(r){Jr(r,function(e){if(e.empty()){var t=wo(r.doc,e.head.line).text.length;return e.head.ch==t&&e.head.line<r.lastLine()?{from:e.head,to:de(e.head.line+1,0)}:{from:e.head,to:de(e.head.line,t)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){Jr(t,function(e){return{from:de(e.from().line,0),to:Ve(t.doc,de(e.to().line+1,0))}})},delLineLeft:function(e){Jr(e,function(e){return{from:de(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(r){Jr(r,function(e){var t=r.charCoords(e.head,"div").top+5;return{from:r.coordsChar({left:0,top:t},"div"),to:e.from()}})},delWrappedLineRight:function(n){Jr(n,function(e){var t=n.charCoords(e.head,"div").top+5,r=n.coordsChar({left:n.display.lineDiv.offsetWidth+100,top:t},"div");return{from:e.from(),to:r}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(de(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(de(e.lastLine()))},goLineStart:function(t){t.extendSelectionsBy(function(e){return rs(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){t.extendSelectionsBy(function(e){return ns(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){t.extendSelectionsBy(function(e){return function(e,t){var r,n=wo(e.doc,t);for(;r=Rn(n);)n=r.find(1,!0).line,t=null;var o=ko(n),i=o?o[0].level%2?es(n):ts(n):n.text.length;return de(null==t?So(n):t,i)}(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(r){r.extendSelectionsBy(function(e){var t=r.charCoords(e.head,"div").top+5;return r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:t},"div")},li)},goLineLeft:function(r){r.extendSelectionsBy(function(e){var t=r.charCoords(e.head,"div").top+5;return r.coordsChar({left:0,top:t},"div")},li)},goLineLeftSmart:function(n){n.extendSelectionsBy(function(e){var t=n.charCoords(e.head,"div").top+5,r=n.coordsChar({left:0,top:t},"div");return r.ch<n.getLine(r.line).search(/\S/)?ns(n,e.head):r},li)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),n=e.options.tabSize,o=0;o<r.length;o++){var i=r[o].from(),s=ci(e.getLine(i.line),i.ch,n);t.push(new Array(n-s%n+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(s){Yt(s,function(){for(var e=s.listSelections(),t=[],r=0;r<e.length;r++){var n=e[r].head,o=wo(s.doc,n.line).text;if(o)if(n.ch==o.length&&(n=new de(n.line,n.ch-1)),0<n.ch)n=new de(n.line,n.ch+1),s.replaceRange(o.charAt(n.ch-1)+o.charAt(n.ch-2),de(n.line,n.ch-2),n,"+transpose");else if(n.line>s.doc.first){var i=wo(s.doc,n.line-1).text;i&&s.replaceRange(o.charAt(0)+s.doc.lineSeparator()+i.charAt(i.length-1),de(n.line-1,i.length-1),de(n.line,1),"+transpose")}t.push(new je(n,n))}s.setSelections(t)})},newlineAndIndent:function(n){Yt(n,function(){for(var e=n.listSelections().length,t=0;t<e;t++){var r=n.listSelections()[t];n.replaceRange(n.doc.lineSeparator(),r.anchor,r.head,"+input"),n.indentLine(r.from().line+1,null,!0)}Wr(n)})},toggleOverwrite:function(e){e.toggleOverwrite()}},cn=O.keyMap={};function pn(e){for(var t,r,n,o,i=e.split(/-(?!$)/),s=(e=i[i.length-1],0);s<i.length-1;s++){var a=i[s];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))r=!0;else{if(!/^s(hift)$/i.test(a))throw new Error("Unrecognized modifier name: "+a);n=!0}}return t&&(e="Alt-"+e),r&&(e="Ctrl-"+e),o&&(e="Cmd-"+e),n&&(e="Shift-"+e),e}cn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},cn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},cn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},cn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},cn.default=v?cn.macDefault:cn.pcDefault,O.normalizeKeyMap=function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if("..."==n){delete e[r];continue}for(var o=yi(r.split(" "),pn),i=0;i<o.length;i++){var s,a;i==o.length-1?(a=o.join(" "),s=n):(a=o.slice(0,i+1).join(" "),s="...");var l=t[a];if(l){if(l!=s)throw new Error("Inconsistent bindings for "+a)}else t[a]=s}delete e[r]}for(var u in t)e[u]=t[u];return e};var hn=O.lookupKey=function(e,t,r,n){var o=(t=mn(t)).call?t.call(e,n):t[e];if(!1===o)return"nothing";if("..."===o)return"multi";if(null!=o&&r(o))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return hn(e,t.fallthrough,r,n);for(var i=0;i<t.fallthrough.length;i++){var s=hn(e,t.fallthrough[i],r,n);if(s)return s}}},dn=O.isModifierKey=function(e){var t="string"==typeof e?e:Zi[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},fn=O.keyName=function(e,t){if(y&&34==e.keyCode&&e.char)return!1;var r=Zi[e.keyCode],n=r;return null!=n&&!e.altGraphKey&&(e.altKey&&"Alt"!=r&&(n="Alt-"+n),(f?e.metaKey:e.ctrlKey)&&"Ctrl"!=r&&(n="Ctrl-"+n),(f?e.ctrlKey:e.metaKey)&&"Cmd"!=r&&(n="Cmd-"+n),!t&&e.shiftKey&&"Shift"!=r&&(n="Shift-"+n),n)};function mn(e){return"string"==typeof e?cn[e]:e}O.fromTextArea=function(t,e){if((e=e?xi(e):{}).value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var r=ji();e.autofocus=r==t||null!=t.getAttribute("autofocus")&&r==document.body}function n(){t.value=a.getValue()}if(t.form&&(qo(t.form,"submit",n),!e.leaveSubmitMethodAlone)){var o=t.form,i=o.submit;try{var s=o.submit=function(){n(),o.submit=i,o.submit(),o.submit=s}}catch(e){}}e.finishInit=function(e){e.save=n,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,n(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(Ko(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=i))}},t.style.display="none";var a=O(function(e){t.parentNode.insertBefore(e,t.nextSibling)},e);return a};var gn=O.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};gn.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var r=t==e;else r=t&&(e.test?e.test(t):e(t));if(r)return++this.pos,t},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(-1<t)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ci(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?ci(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return ci(this.string,null,this.tabSize)-(this.lineStart?ci(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,r){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&0<n.index?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}var o=function(e){return r?e.toLowerCase():e};if(o(this.string.substr(this.pos,e.length))==o(e))return!1!==t&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var yn=0,vn=O.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++yn};ni(vn),vn.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Bt(e),ri(this,"clear")){var r=this.find();r&&$o(this,"clear",r.from,r.to)}for(var n=null,o=null,i=0;i<this.lines.length;++i){var s=this.lines[i],a=On(s.markedSpans,this);e&&!this.collapsed?er(e,So(s),"text"):e&&(null!=a.to&&(o=So(s)),null!=a.from&&(n=So(s))),s.markedSpans=Sn(s.markedSpans,a),null==a.from&&this.collapsed&&!Bn(this.doc,s)&&e&&Oo(s,It(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(i=0;i<this.lines.length;++i){var l=Dn(this.lines[i]),u=P(l);u>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=n&&e&&this.collapsed&&Qt(e,n,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Ke(e.doc)),e&&$o(e,"markerCleared",e,this),t&&Ut(e),this.parent&&this.parent.clear()}},vn.prototype.find=function(e,t){var r,n;null==e&&"bookmark"==this.type&&(e=1);for(var o=0;o<this.lines.length;++o){var i=this.lines[o],s=On(i.markedSpans,this);if(null!=s.from&&(r=de(t?i:So(i),s.from),-1==e))return r;if(null!=s.to&&(n=de(t?i:So(i),s.to),1==e))return n}return r&&{from:r,to:n}},vn.prototype.changed=function(){var i=this.find(-1,!0),s=this,a=this.doc.cm;i&&a&&Yt(a,function(){var e=i.line,t=So(i.line),r=gt(a,t);if(r&&(Tt(r),a.curOp.selectionChanged=a.curOp.forceUpdate=!0),a.curOp.updateMaxLine=!0,!Bn(s.doc,e)&&null!=s.height){var n=s.height;s.height=null;var o=Hn(s)-n;o&&Oo(e,e.height+o)}})},vn.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=gi(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},vn.prototype.detachLine=function(e){if(this.lines.splice(gi(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};yn=0;function bn(t,n,o,e,r){if(e&&e.shared)return function(e,r,n,o,i){(o=xi(o)).shared=!1;var s=[bn(e,r,n,o,i)],a=s[0],l=o.widgetNode;return bo(e,function(e){l&&(o.widgetNode=l.cloneNode(!0)),s.push(bn(e,Ve(e,r),Ve(e,n),o,i));for(var t=0;t<e.linked.length;++t)if(e.linked[t].isParent)return;a=fi(s)}),new xn(s,a)}(t,n,o,e,r);if(t.cm&&!t.cm.curOp)return Jt(t.cm,bn)(t,n,o,e,r);var i=new vn(t,r),s=fe(n,o);if(e&&xi(e,i,!1),0<s||0==s&&!1!==i.clearWhenEmpty)return i;if(i.replacedWith&&(i.collapsed=!0,i.widgetNode=Ai("span",[i.replacedWith],"CodeMirror-widget"),e.handleMouseEvents||i.widgetNode.setAttribute("cm-ignore-events","true"),e.insertLeft&&(i.widgetNode.insertLeft=!0)),i.collapsed){if(Vn(t,n.line,n,o,i)||n.line!=o.line&&Vn(t,o.line,n,o,i))throw new Error("Inserting collapsed marker partially overlapping an existing one");N=!0}i.addToHistory&&Eo(t,{from:n,to:o,origin:"markText"},t.sel,NaN);var a,l=n.line,u=t.cm;if(t.iter(l,o.line+1,function(e){var t,r;u&&i.collapsed&&!u.options.lineWrapping&&Dn(e)==u.display.maxLine&&(a=!0),i.collapsed&&l!=n.line&&Oo(e,0),t=e,r=new Nn(i,l==n.line?n.ch:null,l==o.line?o.ch:null),t.markedSpans=t.markedSpans?t.markedSpans.concat([r]):[r],r.marker.attachLine(t),++l}),i.collapsed&&t.iter(n.line,o.line+1,function(e){Bn(t,e)&&Oo(e,0)}),i.clearOnEnter&&qo(i,"beforeCursorEnter",function(){i.clear()}),i.readOnly&&(T=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),i.collapsed&&(i.id=++yn,i.atomic=!0),u){if(a&&(u.curOp.updateMaxLine=!0),i.collapsed)Qt(u,n.line,o.line+1);else if(i.className||i.title||i.startStyle||i.endStyle||i.css)for(var c=n.line;c<=o.line;c++)er(u,c,"text");i.atomic&&Ke(u.doc),$o(u,"markerAdded",u,i)}return i}var xn=O.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=this};function wn(e){return e.findMarks(de(e.first,0),e.clipPos(de(e.lastLine())),function(e){return e.parent})}function Tn(e){for(var t=0;t<e.length;t++){var r=e[t],n=[r.primary.doc];bo(r.primary.doc,function(e){n.push(e)});for(var o=0;o<r.markers.length;o++){var i=r.markers[o];-1==gi(n,i.doc)&&(i.parent=null,r.markers.splice(o--,1))}}}function Nn(e,t,r){this.marker=e,this.from=t,this.to=r}function On(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.marker==t)return n}}function Sn(e,t){for(var r,n=0;n<e.length;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function Cn(e,t){if(t.full)return null;var r=De(e,t.from.line)&&wo(e,t.from.line).markedSpans,n=De(e,t.to.line)&&wo(e,t.to.line).markedSpans;if(!r&&!n)return null;var o=t.from.ch,i=t.to.ch,s=0==fe(t.from,t.to),a=function(e,t,r){if(e)for(var n,o=0;o<e.length;++o){var i=e[o],s=i.marker;if(null==i.from||(s.inclusiveLeft?i.from<=t:i.from<t)||i.from==t&&"bookmark"==s.type&&(!r||!i.marker.insertLeft)){var a=null==i.to||(s.inclusiveRight?i.to>=t:i.to>t);(n||(n=[])).push(new Nn(s,i.from,a?null:i.to))}}return n}(r,o,s),l=function(e,t,r){if(e)for(var n,o=0;o<e.length;++o){var i=e[o],s=i.marker;if(null==i.to||(s.inclusiveRight?i.to>=t:i.to>t)||i.from==t&&"bookmark"==s.type&&(!r||i.marker.insertLeft)){var a=null==i.from||(s.inclusiveLeft?i.from<=t:i.from<t);(n||(n=[])).push(new Nn(s,a?null:i.from-t,null==i.to?null:i.to-t))}}return n}(n,i,s),u=1==t.text.length,c=fi(t.text).length+(u?o:0);if(a)for(var p=0;p<a.length;++p){if(null==(h=a[p]).to)(d=On(l,h.marker))?u&&(h.to=null==d.to?null:d.to+c):h.to=o}if(l)for(p=0;p<l.length;++p){var h,d;if(null!=(h=l[p]).to&&(h.to+=c),null==h.from)(d=On(a,h.marker))||(h.from=c,u&&(a||(a=[])).push(h));else h.from+=c,u&&(a||(a=[])).push(h)}a&&(a=Gn(a)),l&&l!=a&&(l=Gn(l));var f=[a];if(!u){var m,g=t.text.length-2;if(0<g&&a)for(p=0;p<a.length;++p)null==a[p].to&&(m||(m=[])).push(new Nn(a[p].marker,null,null));for(p=0;p<g;++p)f.push(m);f.push(l)}return f}function Gn(e){for(var t=0;t<e.length;++t){var r=e[t];null!=r.from&&r.from==r.to&&!1!==r.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function kn(e,t){var r=function(e,t){var r=t["spans_"+e.id];if(!r)return null;for(var n=0,o=[];n<t.text.length;++n)o.push(Io(r[n]));return o}(e,t),n=Cn(e,t);if(!r)return n;if(!n)return r;for(var o=0;o<r.length;++o){var i=r[o],s=n[o];if(i&&s)e:for(var a=0;a<s.length;++a){for(var l=s[a],u=0;u<i.length;++u)if(i[u].marker==l.marker)continue e;i.push(l)}else s&&(r[o]=s)}return r}function An(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function Ln(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function Mn(e){return e.inclusiveLeft?-1:0}function En(e){return e.inclusiveRight?1:0}function jn(e,t){var r=e.lines.length-t.lines.length;if(0!=r)return r;var n=e.find(),o=t.find(),i=fe(n.from,o.from)||Mn(e)-Mn(t);if(i)return-i;var s=fe(n.to,o.to)||En(e)-En(t);return s||t.id-e.id}function Pn(e,t){var r,n=N&&e.markedSpans;if(n)for(var o,i=0;i<n.length;++i)(o=n[i]).marker.collapsed&&null==(t?o.from:o.to)&&(!r||jn(r,o.marker)<0)&&(r=o.marker);return r}function In(e){return Pn(e,!0)}function Rn(e){return Pn(e,!1)}function Vn(e,t,r,n,o){var i=wo(e,t),s=N&&i.markedSpans;if(s)for(var a=0;a<s.length;++a){var l=s[a];if(l.marker.collapsed){var u=l.marker.find(0),c=fe(u.from,r)||Mn(l.marker)-Mn(o),p=fe(u.to,n)||En(l.marker)-En(o);if(!(0<=c&&p<=0||c<=0&&0<=p)&&(c<=0&&(0<fe(u.to,r)||l.marker.inclusiveRight&&o.inclusiveLeft)||0<=c&&(fe(u.from,n)<0||l.marker.inclusiveLeft&&o.inclusiveRight)))return!0}}}function Dn(e){for(var t;t=In(e);)e=t.find(-1,!0).line;return e}function Fn(e,t){var r=wo(e,t),n=Dn(r);return r==n?t:So(n)}function _n(e,t){if(t>e.lastLine())return t;var r,n=wo(e,t);if(!Bn(e,n))return t;for(;r=Rn(n);)n=r.find(1,!0).line;return So(n)+1}function Bn(e,t){var r=N&&t.markedSpans;if(r)for(var n,o=0;o<r.length;++o)if((n=r[o]).marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&Un(e,t,n))return!0}}function Un(e,t,r){if(null==r.to){var n=r.marker.find(1,!0);return Un(e,n.line,On(n.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var o,i=0;i<t.markedSpans.length;++i)if((o=t.markedSpans[i]).marker.collapsed&&!o.marker.widgetNode&&o.from==r.to&&(null==o.to||o.to!=r.from)&&(o.marker.inclusiveLeft||r.marker.inclusiveRight)&&Un(e,t,o))return!0}ni(xn),xn.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();$o(this,"clear")}},xn.prototype.find=function(e,t){return this.primary.find(e,t)};var zn=O.LineWidget=function(e,t,r){if(r)for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.doc=e,this.node=t};function Wn(e,t,r){Go(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&zr(e,null,r)}function Hn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!Ei(document.body,e.node)){var r="position: relative;";e.coverGutter&&(r+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(r+="width: "+t.display.wrapper.clientWidth+"px;"),Mi(t.display.measure,Ai("div",[e.node],null,r))}return e.height=e.node.parentNode.offsetHeight}ni(zn),zn.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,r=this.line,n=So(r);if(null!=n&&t){for(var o=0;o<t.length;++o)t[o]==this&&t.splice(o--,1);t.length||(r.widgets=null);var i=Hn(this);Oo(r,Math.max(0,r.height-i)),e&&Yt(e,function(){Wn(e,r,-i),er(e,n,"widget")})}},zn.prototype.changed=function(){var e=this.height,t=this.doc.cm,r=this.line;this.height=null;var n=Hn(this)-e;n&&(Oo(r,r.height+n),t&&Yt(t,function(){t.curOp.forceUpdate=!0,Wn(t,r,n)}))};var qn=O.Line=function(e,t,r){this.text=e,Ln(this,t),this.height=r?r(this):1};function Yn(e,t){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var n=r[1]?"bgClass":"textClass";null==t[n]?t[n]=r[2]:new RegExp("(?:^|s)"+r[2]+"(?:$|s)").test(t[n])||(t[n]+=" "+r[2])}return e}function Jn(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var r=O.innerMode(e,t);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function Kn(e,t,r,n){for(var o=0;o<10;o++){n&&(n[0]=O.innerMode(e,r).mode);var i=e.token(t,r);if(t.pos>t.start)return i}throw new Error("Mode "+e.name+" failed to advance stream.")}function Xn(e,t,r,n){function o(e){return{start:p.start,end:p.pos,string:p.current(),type:i||null,state:e?an(s.mode,c):c}}var i,s=e.doc,a=s.mode;t=Ve(s,t);var l,u=wo(s,t.line),c=at(e,t.line,r),p=new gn(u.text,e.options.tabSize);for(n&&(l=[]);(n||p.pos<t.ch)&&!p.eol();)p.start=p.pos,i=Kn(a,p,c),n&&l.push(o(!0));return n?l:o()}function Zn(e,t,r,n,o,i,s){var a=r.flattenSpans;null==a&&(a=e.options.flattenSpans);var l,u=0,c=null,p=new gn(t,e.options.tabSize),h=e.options.addModeClass&&[null];for(""==t&&Yn(Jn(r,n),i);!p.eol();){if(p.pos>e.options.maxHighlightLength?(a=!1,s&&eo(e,t,n,p.pos),p.pos=t.length,l=null):l=Yn(Kn(r,p,n,h),i),h){var d=h[0].name;d&&(l="m-"+(l?d+" "+l:d))}if(!a||c!=l){for(;u<p.start;)o(u=Math.min(p.start,u+5e4),c);c=l}p.start=p.pos}for(;u<p.pos;){var f=Math.min(p.pos,u+5e4);o(f,c),u=f}}function $n(e,t,r,n){var i=[e.state.modeGen],o={};Zn(e,t.text,e.doc.mode,r,function(e,t){i.push(e,t)},o,n);for(var s=0;s<e.state.overlays.length;++s){var a=e.state.overlays[s],l=1,u=0;Zn(e,t.text,a.mode,!0,function(e,t){for(var r=l;u<e;){var n=i[l];e<n&&i.splice(l,1,e,i[l+1],n),l+=2,u=Math.min(e,n)}if(t)if(a.opaque)i.splice(r,l-r,e,"cm-overlay "+t),l=r+2;else for(;r<l;r+=2){var o=i[r+1];i[r+1]=(o?o+" ":"")+"cm-overlay "+t}},o)}return{styles:i,classes:o.bgClass||o.textClass?o:null}}function Qn(e,t,r){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=at(e,So(t)),o=$n(e,t,t.text.length>e.options.maxHighlightLength?an(e.doc.mode,n):n);t.stateAfter=n,t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),r===e.doc.frontier&&e.doc.frontier++}return t.styles}function eo(e,t,r,n){var o=e.doc.mode,i=new gn(t,e.options.tabSize);for(i.start=i.pos=n||0,""==t&&Jn(o,r);!i.eol();)Kn(o,i,r),i.start=i.pos}ni(qn),qn.prototype.lineNo=function(){return So(this)};var to={},ro={};function no(e,t){if(!e||/^\s*$/.test(e))return null;var r=t.addModeClass?ro:to;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function oo(e,t){var r=Ai("span",null,null,g?"padding-right: .1px":null),n={pre:Ai("pre",[r],"CodeMirror-line"),content:r,col:0,pos:0,cm:e,splitSpaces:(x||g)&&e.getOption("lineWrapping")};t.measure={};for(var o=0;o<=(t.rest?t.rest.length:0);o++){var i,s=o?t.rest[o-1]:t.line;n.pos=0,n.addToken=io,Wi(e.display.measure)&&(i=ko(s))&&(n.addToken=ao(n.addToken,i)),n.map=[],uo(s,n,Qn(e,s,t!=e.display.externalMeasured&&So(s))),s.styleClasses&&(s.styleClasses.bgClass&&(n.bgClass=Vi(s.styleClasses.bgClass,n.bgClass||"")),s.styleClasses.textClass&&(n.textClass=Vi(s.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(zi(e.display.measure))),0==o?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return g&&/\bcm-tab\b/.test(n.content.lastChild.className)&&(n.content.className="cm-tab-wrap-hack"),Xo(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=Vi(n.pre.className,n.textClass||"")),n}function io(e,t,r,n,o,i,s){if(t){var a=e.splitSpaces?t.replace(/ {3,}/g,so):t,l=e.cm.state.specialChars,u=!1;if(l.test(t)){g=document.createDocumentFragment();for(var c=0;;){l.lastIndex=c;var p=l.exec(t),h=p?p.index-c:t.length-c;if(h){var d=document.createTextNode(a.slice(c,c+h));x&&w<9?g.appendChild(Ai("span",[d])):g.appendChild(d),e.map.push(e.pos,e.pos+h,d),e.col+=h,e.pos+=h}if(!p)break;if(c+=h+1,"\t"==p[0]){var f=e.cm.options.tabSize,m=f-e.col%f;(d=g.appendChild(Ai("span",di(m),"cm-tab"))).setAttribute("role","presentation"),d.setAttribute("cm-text","\t"),e.col+=m}else if("\r"==p[0]||"\n"==p[0]){(d=g.appendChild(Ai("span","\r"==p[0]?"":"","cm-invalidchar"))).setAttribute("cm-text",p[0]),e.col+=1}else{(d=e.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),x&&w<9?g.appendChild(Ai("span",[d])):g.appendChild(d),e.col+=1}e.map.push(e.pos,e.pos+1,d),e.pos++}}else{e.col+=t.length;var g=document.createTextNode(a);e.map.push(e.pos,e.pos+t.length,g),x&&w<9&&(u=!0),e.pos+=t.length}if(r||n||o||u||s){var y=r||"";n&&(y+=n),o&&(y+=o);var v=Ai("span",[g],y,s);return i&&(v.title=i),e.content.appendChild(v)}e.content.appendChild(g)}}function so(e){for(var t=" ",r=0;r<e.length-2;++r)t+=r%2?" ":"";return t+=" "}function ao(p,h){return function(e,t,r,n,o,i,s){r=r?r+" cm-force-border":"cm-force-border";for(var a=e.pos,l=a+t.length;;){for(var u=0;u<h.length;u++){var c=h[u];if(c.to>a&&c.from<=a)break}if(c.to>=l)return p(e,t,r,n,o,i,s);p(e,t.slice(0,c.to-a),r,n,null,i,s),n=null,t=t.slice(c.to-a),a=c.to}}}function lo(e,t,r,n){var o=!n&&r.widgetNode;o&&e.map.push(e.pos,e.pos+t,o),!n&&e.cm.display.input.needsContentAttribute&&(o||(o=e.content.appendChild(document.createElement("span"))),o.setAttribute("cm-marker",r.id)),o&&(e.cm.display.input.setUneditable(o),e.content.appendChild(o)),e.pos+=t}function uo(e,t,r){var n=e.markedSpans,o=e.text,i=0;if(n)for(var s,a,l,u,c,p,h,d=o.length,f=0,m=(S=1,""),g=0;;){if(g==f){l=u=c=p=a="",h=null,g=1/0;for(var y,v=[],b=0;b<n.length;++b){var x=n[b],w=x.marker;"bookmark"==w.type&&x.from==f&&w.widgetNode?v.push(w):x.from<=f&&(null==x.to||x.to>f||w.collapsed&&x.to==f&&x.from==f)?(null!=x.to&&x.to!=f&&g>x.to&&(g=x.to,u=""),w.className&&(l+=" "+w.className),w.css&&(a=(a?a+";":"")+w.css),w.startStyle&&x.from==f&&(c+=" "+w.startStyle),w.endStyle&&x.to==g&&(y||(y=[])).push(w.endStyle,x.to),w.title&&!p&&(p=w.title),w.collapsed&&(!h||jn(h.marker,w)<0)&&(h=x)):x.from>f&&g>x.from&&(g=x.from)}if(y)for(b=0;b<y.length;b+=2)y[b+1]==g&&(u+=" "+y[b]);if(!h||h.from==f)for(b=0;b<v.length;++b)lo(t,0,v[b]);if(h&&(h.from||0)==f){if(lo(t,(null==h.to?d+1:h.to)-f,h.marker,null==h.from),null==h.to)return;h.to==f&&(h=!1)}}if(d<=f)break;for(var T=Math.min(d,g);;){if(m){var N=f+m.length;if(!h){var O=T<N?m.slice(0,T-f):m;t.addToken(t,O,s?s+l:l,c,f+O.length==g?u:"",p,a)}if(T<=N){m=m.slice(T-f),f=T;break}f=N,c=""}m=o.slice(i,i=r[S++]),s=no(r[S++],t.cm.options)}}else for(var S=1;S<r.length;S+=2)t.addToken(t,o.slice(i,i=r[S]),no(r[S+1],t.cm.options))}function co(e,t){return 0==t.from.ch&&0==t.to.ch&&""==fi(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function po(e,n,t,o){function i(e){return t?t[e]:null}function r(e,t,r){!function(e,t,r,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),An(e),Ln(e,r);var o=n?n(e):1;o!=e.height&&Oo(e,o)}(e,t,r,o),$o(e,"change",e,n)}function s(e,t){for(var r=e,n=[];r<t;++r)n.push(new qn(u[r],i(r),o));return n}var a=n.from,l=n.to,u=n.text,c=wo(e,a.line),p=wo(e,l.line),h=fi(u),d=i(u.length-1),f=l.line-a.line;if(n.full)e.insert(0,s(0,u.length)),e.remove(u.length,e.size-u.length);else if(co(e,n)){var m=s(0,u.length-1);r(p,p.text,d),f&&e.remove(a.line,f),m.length&&e.insert(a.line,m)}else if(c==p){if(1==u.length)r(c,c.text.slice(0,a.ch)+h+c.text.slice(l.ch),d);else(m=s(1,u.length-1)).push(new qn(h+c.text.slice(l.ch),d,o)),r(c,c.text.slice(0,a.ch)+u[0],i(0)),e.insert(a.line+1,m)}else if(1==u.length)r(c,c.text.slice(0,a.ch)+u[0]+p.text.slice(l.ch),i(0)),e.remove(a.line+1,f);else{r(c,c.text.slice(0,a.ch)+u[0],i(0)),r(p,h+p.text.slice(l.ch),d);m=s(1,u.length-1);1<f&&e.remove(a.line+1,f-1),e.insert(a.line+1,m)}$o(e,"change",e,n)}function ho(e){this.lines=e,this.parent=null;for(var t=0,r=0;t<e.length;++t)e[t].parent=this,r+=e[t].height;this.height=r}function fo(e){this.children=e;for(var t=0,r=0,n=0;n<e.length;++n){var o=e[n];t+=o.chunkSize(),r+=o.height,o.parent=this}this.size=t,this.height=r,this.parent=null}ho.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=e,n=e+t;r<n;++r){var o=this.lines[r];this.height-=o.height,(i=o).parent=null,An(i),$o(o,"delete")}var i;this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,r){for(var n=e+t;e<n;++e)if(r(this.lines[e]))return!0}},fo.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var r=0;r<this.children.length;++r){var n=this.children[r],o=n.chunkSize();if(e<o){var i=Math.min(t,o-e),s=n.height;if(n.removeInner(e,i),this.height-=s-n.height,o==i&&(this.children.splice(r--,1),n.parent=null),0==(t-=i))break;e=0}else e-=o}if(this.size-t<25&&(1<this.children.length||!(this.children[0]instanceof ho))){var a=[];this.collapse(a),this.children=[new ho(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,r){this.size+=t.length,this.height+=r;for(var n=0;n<this.children.length;++n){var o=this.children[n],i=o.chunkSize();if(e<=i){if(o.insertInner(e,t,r),o.lines&&50<o.lines.length){for(;50<o.lines.length;){var s=new ho(o.lines.splice(o.lines.length-25,25));o.height-=s.height,this.children.splice(n+1,0,s),s.parent=this}this.maybeSpill()}break}e-=i}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new fo(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var r=gi(e.parent.children,e);e.parent.children.splice(r+1,0,t)}else{var n=new fo(e.children);(n.parent=e).children=[n,t],e=n}t.parent=e.parent}while(10<e.children.length);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var n=0;n<this.children.length;++n){var o=this.children[n],i=o.chunkSize();if(e<i){var s=Math.min(t,i-e);if(o.iterN(e,s,r))return!0;if(0==(t-=s))break;e=0}else e-=i}}};var mo=0,go=O.Doc=function(e,t,r,n){if(!(this instanceof go))return new go(e,t,r,n);null==r&&(r=0),fo.call(this,[new ho([new qn("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=r;var o=de(r,0);this.sel=Ie(o),this.history=new Ao(null),this.id=++mo,this.modeOption=t,this.lineSep=n,this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),po(this,{from:o,to:o,text:e}),qe(this,Ie(o),si)};go.prototype=bi(fo.prototype,{constructor:go,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,n=0;n<t.length;++n)r+=t[n].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=No(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Xt(function(e){var t=de(this.first,0),r=this.first+this.size-1;Rr(this,{from:t,to:de(r,wo(this,r).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),qe(this,Ie(t))}),replaceRange:function(e,t,r,n){Br(this,e,t=Ve(this,t),r=r?Ve(this,r):t,n)},getRange:function(e,t,r){var n=To(this,Ve(this,e),Ve(this,t));return!1===r?n:n.join(r||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(De(this,e))return wo(this,e)},getLineNumber:function(e){return So(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=wo(this,e)),Dn(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Ve(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Xt(function(e,t,r){We(this,Ve(this,"number"==typeof e?de(e,t||0):e),null,r)}),setSelection:Xt(function(e,t,r){We(this,Ve(this,e),Ve(this,t||e),r)}),extendSelection:Xt(function(e,t,r){Be(this,Ve(this,e),t&&Ve(this,t),r)}),extendSelections:Xt(function(e,t){Ue(this,Fe(this,e),t)}),extendSelectionsBy:Xt(function(e,t){Ue(this,Fe(this,yi(this.sel.ranges,e)),t)}),setSelections:Xt(function(e,t,r){if(e.length){for(var n=0,o=[];n<e.length;n++)o[n]=new je(Ve(this,e[n].anchor),Ve(this,e[n].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),qe(this,Pe(o,t),r)}}),addSelection:Xt(function(e,t,r){var n=this.sel.ranges.slice(0);n.push(new je(Ve(this,e),Ve(this,t||e))),qe(this,Pe(n,n.length-1),r)}),getSelection:function(e){for(var t,r=this.sel.ranges,n=0;n<r.length;n++){var o=To(this,r[n].from(),r[n].to());t=t?t.concat(o):o}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],r=this.sel.ranges,n=0;n<r.length;n++){var o=To(this,r[n].from(),r[n].to());!1!==e&&(o=o.join(e||this.lineSeparator())),t[n]=o}return t},replaceSelection:function(e,t,r){for(var n=[],o=0;o<this.sel.ranges.length;o++)n[o]=e;this.replaceSelections(n,t,r||"+input")},replaceSelections:Xt(function(e,t,r){for(var n=[],o=this.sel,i=0;i<o.ranges.length;i++){var s=o.ranges[i];n[i]={from:s.from(),to:s.to(),text:this.splitLines(e[i]),origin:r}}var a=t&&"end"!=t&&function(e,t,r){for(var n=[],o=de(e.first,0),i=o,s=0;s<t.length;s++){var a=t[s],l=Pr(a.from,o,i),u=Pr(Mr(a),o,i);if(o=a.to,i=u,"around"==r){var c=e.sel.ranges[s],p=fe(c.head,c.anchor)<0;n[s]=new je(p?u:l,p?l:u)}else n[s]=new je(l,l)}return new Ee(n,e.sel.primIndex)}(this,n,t);for(i=n.length-1;0<=i;i--)Rr(this,n[i]);a?He(this,a):this.cm&&Wr(this.cm)}),undo:Xt(function(){Dr(this,"undo")}),redo:Xt(function(){Dr(this,"redo")}),undoSelection:Xt(function(){Dr(this,"undo",!0)}),redoSelection:Xt(function(){Dr(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(n=0;n<e.undone.length;n++)e.undone[n].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){this.history=new Ao(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Ro(this.history.done),undone:Ro(this.history.undone)}},setHistory:function(e){var t=this.history=new Ao(this.history.maxGeneration);t.done=Ro(e.done.slice(0),null,!0),t.undone=Ro(e.undone.slice(0),null,!0)},addLineClass:Xt(function(e,r,n){return Yr(this,e,"gutter"==r?"gutter":"class",function(e){var t="text"==r?"textClass":"background"==r?"bgClass":"gutter"==r?"gutterClass":"wrapClass";if(e[t]){if(Pi(n).test(e[t]))return!1;e[t]+=" "+n}else e[t]=n;return!0})}),removeLineClass:Xt(function(e,i,s){return Yr(this,e,"gutter"==i?"gutter":"class",function(e){var t="text"==i?"textClass":"background"==i?"bgClass":"gutter"==i?"gutterClass":"wrapClass",r=e[t];if(!r)return!1;if(null==s)e[t]=null;else{var n=r.match(Pi(s));if(!n)return!1;var o=n.index+n[0].length;e[t]=r.slice(0,n.index)+(n.index&&o!=r.length?" ":"")+r.slice(o)||null}return!0})}),addLineWidget:Xt(function(e,t,r){return o=e,i=new zn(n=this,t,r),(s=n.cm)&&i.noHScroll&&(s.display.alignWidgets=!0),Yr(n,o,"widget",function(e){var t=e.widgets||(e.widgets=[]);if(null==i.insertAt?t.push(i):t.splice(Math.min(t.length-1,Math.max(0,i.insertAt)),0,i),i.line=e,s&&!Bn(n,e)){var r=Go(e)<n.scrollTop;Oo(e,e.height+Hn(i)),r&&zr(s,null,i.height),s.curOp.forceUpdate=!0}return!0}),i;var n,o,i,s}),removeLineWidget:function(e){e.clear()},markText:function(e,t,r){return bn(this,Ve(this,e),Ve(this,t),r,r&&r.type||"range")},setBookmark:function(e,t){var r={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return bn(this,e=Ve(this,e),e,r,"bookmark")},findMarksAt:function(e){var t=[],r=wo(this,(e=Ve(this,e)).line).markedSpans;if(r)for(var n=0;n<r.length;++n){var o=r[n];(null==o.from||o.from<=e.ch)&&(null==o.to||o.to>=e.ch)&&t.push(o.marker.parent||o.marker)}return t},findMarks:function(o,i,s){o=Ve(this,o),i=Ve(this,i);var a=[],l=o.line;return this.iter(o.line,i.line+1,function(e){var t=e.markedSpans;if(t)for(var r=0;r<t.length;r++){var n=t[r];null!=n.to&&l==o.line&&o.ch>=n.to||null==n.from&&l!=o.line||null!=n.from&&l==i.line&&n.from>=i.ch||s&&!s(n.marker)||a.push(n.marker.parent||n.marker)}++l}),a},getAllMarks:function(){var n=[];return this.iter(function(e){var t=e.markedSpans;if(t)for(var r=0;r<t.length;++r)null!=t[r].from&&n.push(t[r].marker)}),n},posFromIndex:function(r){var n,o=this.first,i=this.lineSeparator().length;return this.iter(function(e){var t=e.text.length+i;if(r<t)return n=r,!0;r-=t,++o}),Ve(this,de(o,n))},indexFromPos:function(e){var t=(e=Ve(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var r=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+r}),t},copy:function(e){var t=new go(No(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<r&&(r=e.to);var n=new go(No(this,t,r),e.mode||this.modeOption,t,this.lineSep);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r],o=n.find(),i=e.clipPos(o.from),s=e.clipPos(o.to);if(fe(i,s)){var a=bn(e,i,s,n.primary,n.primary.type);n.markers.push(a),a.parent=n}}}(n,wn(this)),n},unlinkDoc:function(e){if(e instanceof O&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Tn(wn(this));break}}if(e.history==this.history){var r=[e.id];bo(e,function(e){r.push(e.id)},!0),e.history=new Ao(null),e.history.done=Ro(this.history.done,r),e.history.undone=Ro(this.history.undone,r)}},iterLinkedDocs:function(e){bo(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):qi(e)},lineSeparator:function(){return this.lineSep||"\n"}}),go.prototype.eachLine=go.prototype.iter;var yo="iter insert remove copy getEditor constructor".split(" ");for(var vo in go.prototype)go.prototype.hasOwnProperty(vo)&&gi(yo,vo)<0&&(O.prototype[vo]=function(e){return function(){return e.apply(this.doc,arguments)}}(go.prototype[vo]));function bo(e,a,l){!function e(t,r,n){if(t.linked)for(var o=0;o<t.linked.length;++o){var i=t.linked[o];if(i.doc!=r){var s=n&&i.sharedHist;l&&!s||(a(i.doc,s),e(i.doc,t,s))}}}(e,null,!0)}function xo(e,t){if(t.cm)throw new Error("This document is already in use.");A((e.doc=t).cm=e),C(e),e.options.lineWrapping||I(e),e.options.mode=t.modeOption,Qt(e)}function wo(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var r=e;!r.lines;)for(var n=0;;++n){var o=r.children[n],i=o.chunkSize();if(t<i){r=o;break}t-=i}return r.lines[t]}function To(e,r,n){var o=[],i=r.line;return e.iter(r.line,n.line+1,function(e){var t=e.text;i==n.line&&(t=t.slice(0,n.ch)),i==r.line&&(t=t.slice(r.ch)),o.push(t),++i}),o}function No(e,t,r){var n=[];return e.iter(t,r,function(e){n.push(e.text)}),n}function Oo(e,t){var r=t-e.height;if(r)for(var n=e;n;n=n.parent)n.height+=r}function So(e){if(null==e.parent)return null;for(var t=e.parent,r=gi(t.lines,e),n=t.parent;n;n=(t=n).parent)for(var o=0;n.children[o]!=t;++o)r+=n.children[o].chunkSize();return r+t.first}function Co(e,t){var r=e.first;e:do{for(var n=0;n<e.children.length;++n){var o=e.children[n],i=o.height;if(t<i){e=o;continue e}t-=i,r+=o.chunkSize()}return r}while(!e.lines);for(n=0;n<e.lines.length;++n){var s=e.lines[n].height;if(t<s)break;t-=s}return r+n}function Go(e){for(var t=0,r=(e=Dn(e)).parent,n=0;n<r.lines.length;++n){var o=r.lines[n];if(o==e)break;t+=o.height}for(var i=r.parent;i;i=(r=i).parent)for(n=0;n<i.children.length;++n){var s=i.children[n];if(s==r)break;t+=s.height}return t}function ko(e){var t=e.order;return null==t&&(t=e.order=ls(e.text)),t}function Ao(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Lo(e,t){var r={from:me(t.from),to:Mr(t),text:To(e,t.from,t.to)};return Po(e,r,t.from.line,t.to.line+1),bo(e,function(e){Po(e,r,t.from.line,t.to.line+1)},!0),r}function Mo(e){for(;e.length;){if(!fi(e).ranges)break;e.pop()}}function Eo(e,t,r,n){var o=e.history;o.undone.length=0;var i,s,a=+new Date;if((o.lastOp==n||o.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&o.lastModTime>a-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(i=(s=o).lastOp==n?(Mo(s.done),fi(s.done)):s.done.length&&!fi(s.done).ranges?fi(s.done):1<s.done.length&&!s.done[s.done.length-2].ranges?(s.done.pop(),fi(s.done)):void 0)){var l=fi(i.changes);0==fe(t.from,t.to)&&0==fe(t.from,l.to)?l.to=Mr(t):i.changes.push(Lo(e,t))}else{var u=fi(o.done);for(u&&u.ranges||jo(e.sel,o.done),i={changes:[Lo(e,t)],generation:o.generation},o.done.push(i);o.done.length>o.undoDepth;)o.done.shift(),o.done[0].ranges||o.done.shift()}o.done.push(r),o.generation=++o.maxGeneration,o.lastModTime=o.lastSelTime=a,o.lastOp=o.lastSelOp=n,o.lastOrigin=o.lastSelOrigin=t.origin,l||Xo(e,"historyAdded")}function jo(e,t){var r=fi(t);r&&r.ranges&&r.equals(e)||t.push(e)}function Po(t,r,e,n){var o=r["spans_"+t.id],i=0;t.iter(Math.max(t.first,e),Math.min(t.first+t.size,n),function(e){e.markedSpans&&((o||(o=r["spans_"+t.id]={}))[i]=e.markedSpans),++i})}function Io(e){if(!e)return null;for(var t,r=0;r<e.length;++r)e[r].marker.explicitlyCleared?t||(t=e.slice(0,r)):t&&t.push(e[r]);return t?t.length?t:null:e}function Ro(e,t,r){for(var n=0,o=[];n<e.length;++n){var i=e[n];if(i.ranges)o.push(r?Ee.prototype.deepCopy.call(i):i);else{var s=i.changes,a=[];o.push({changes:a});for(var l=0;l<s.length;++l){var u,c=s[l];if(a.push({from:c.from,to:c.to,text:c.text}),t)for(var p in c)(u=p.match(/^spans_(\d+)$/))&&-1<gi(t,Number(u[1]))&&(fi(a)[p]=c[p],delete c[p])}}}return o}function Vo(e,t,r,n){r<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function Do(e,t,r,n){for(var o=0;o<e.length;++o){var i=e[o],s=!0;if(i.ranges){i.copied||((i=e[o]=i.deepCopy()).copied=!0);for(var a=0;a<i.ranges.length;a++)Vo(i.ranges[a].anchor,t,r,n),Vo(i.ranges[a].head,t,r,n)}else{for(a=0;a<i.changes.length;++a){var l=i.changes[a];if(r<l.from.line)l.from=de(l.from.line+n,l.from.ch),l.to=de(l.to.line+n,l.to.ch);else if(t<=l.to.line){s=!1;break}}s||(e.splice(0,o+1),o=0)}}}function Fo(e,t){var r=t.from.line,n=t.to.line,o=t.text.length-(n-r)-1;Do(e.done,r,n,o),Do(e.undone,r,n,o)}ni(go);var _o=O.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Bo=O.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0};function Uo(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}var zo=O.e_stop=function(e){_o(e),Bo(e)};function Wo(e){return e.target||e.srcElement}function Ho(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),v&&e.ctrlKey&&1==t&&(t=3),t}var qo=O.on=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var n=e._handlers||(e._handlers={});(n[t]||(n[t]=[])).push(r)}},Yo=[];function Jo(e,t,r){var n=e._handlers&&e._handlers[t];return r?n&&0<n.length?n.slice():Yo:n||Yo}var Ko=O.off=function(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else for(var n=Jo(e,t,!1),o=0;o<n.length;++o)if(n[o]==r){n.splice(o,1);break}},Xo=O.signal=function(e,t){var r=Jo(e,t,!0);if(r.length)for(var n=Array.prototype.slice.call(arguments,2),o=0;o<r.length;++o)r[o].apply(null,n)},Zo=null;function $o(e,t){var r=Jo(e,t,!1);if(r.length){var n,o=Array.prototype.slice.call(arguments,2);Ft?n=Ft.delayedCallbacks:Zo?n=Zo:(n=Zo=[],setTimeout(Qo,0));for(var i=0;i<r.length;++i)n.push(s(r[i]))}function s(e){return function(){e.apply(null,o)}}}function Qo(){var e=Zo;Zo=null;for(var t=0;t<e.length;++t)e[t]()}function ei(e,t,r){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Xo(e,r||t.type,e,t),Uo(t)||t.codemirrorIgnore}function ti(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)-1==gi(r,t[n])&&r.push(t[n])}function ri(e,t){return 0<Jo(e,t).length}function ni(e){e.prototype.on=function(e,t){qo(this,e,t)},e.prototype.off=function(e,t){Ko(this,e,t)}}var oi=30,ii=O.Pass={toString:function(){return"CodeMirror.Pass"}},si={scroll:!1},ai={origin:"*mouse"},li={origin:"+move"};function ui(){this.id=null}ui.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var ci=O.countColumn=function(e,t,r,n,o){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var i=n||0,s=o||0;;){var a=e.indexOf("\t",i);if(a<0||t<=a)return s+(t-i);s+=a-i,s+=r-s%r,i=a+1}},pi=O.findColumn=function(e,t,r){for(var n=0,o=0;;){var i=e.indexOf("\t",n);-1==i&&(i=e.length);var s=i-n;if(i==e.length||t<=o+s)return n+Math.min(s,t-o);if(o+=i-n,n=i+1,t<=(o+=r-o%r))return n}},hi=[""];function di(e){for(;hi.length<=e;)hi.push(fi(hi)+" ");return hi[e]}function fi(e){return e[e.length-1]}var mi=function(e){e.select()};function gi(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}function yi(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n],n);return r}function vi(){}function bi(e,t){var r;return Object.create?r=Object.create(e):(vi.prototype=e,r=new vi),t&&xi(t,r),r}function xi(e,t,r){for(var n in t||(t={}),e)!e.hasOwnProperty(n)||!1===r&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function wi(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}a?mi=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:x&&(mi=function(e){try{e.select()}catch(e){}});var Ti=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Ni=O.isWordChar=function(e){return/\w/.test(e)||""<e&&(e.toUpperCase()!=e.toLowerCase()||Ti.test(e))};function Oi(e,t){return t?!!(-1<t.source.indexOf("\\w")&&Ni(e))||t.test(e):Ni(e)}function Si(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var Ci,Gi=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ki(e){return 768<=e.charCodeAt(0)&&Gi.test(e)}function Ai(e,t,r,n){var o=document.createElement(e);if(r&&(o.className=r),n&&(o.style.cssText=n),"string"==typeof t)o.appendChild(document.createTextNode(t));else if(t)for(var i=0;i<t.length;++i)o.appendChild(t[i]);return o}function Li(e){for(var t=e.childNodes.length;0<t;--t)e.removeChild(e.firstChild);return e}function Mi(e,t){return Li(e).appendChild(t)}Ci=document.createRange?function(e,t,r,n){var o=document.createRange();return o.setEnd(n||e,r),o.setStart(e,t),o}:function(e,t,r){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(e){return n}return n.collapse(!0),n.moveEnd("character",r),n.moveStart("character",t),n};var Ei=O.contains=function(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)};function ji(){for(var e=document.activeElement;e&&e.root&&e.root.activeElement;)e=e.root.activeElement;return e}function Pi(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}x&&w<11&&(ji=function(){try{return document.activeElement}catch(e){return document.body}});var Ii=O.rmClass=function(e,t){var r=e.className,n=Pi(t).exec(r);if(n){var o=r.slice(n.index+n[0].length);e.className=r.slice(0,n.index)+(o?n[1]+o:"")}},Ri=O.addClass=function(e,t){var r=e.className;Pi(t).test(r)||(e.className+=(r?" ":"")+t)};function Vi(e,t){for(var r=e.split(" "),n=0;n<r.length;n++)r[n]&&!Pi(r[n]).test(t)&&(t+=" "+r[n]);return t}function Di(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),r=0;r<t.length;r++){var n=t[r].CodeMirror;n&&e(n)}}var Fi=!1;var _i,Bi,Ui=function(){if(x&&w<9)return!1;var e=Ai("div");return"draggable"in e||"dragDrop"in e}();function zi(e){if(null==_i){var t=Ai("span","");Mi(e,Ai("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(_i=t.offsetWidth<=1&&2<t.offsetHeight&&!(x&&w<8))}var r=_i?Ai("span",""):Ai("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}function Wi(e){if(null!=Bi)return Bi;var t=Mi(e,document.createTextNode("AA")),r=Ci(t,0,1).getBoundingClientRect();if(!r||r.left==r.right)return!1;var n=Ci(t,1,2).getBoundingClientRect();return Bi=n.right-r.right<3}var Hi,qi=O.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,r=[],n=e.length;t<=n;){var o=e.indexOf("\n",t);-1==o&&(o=e.length);var i=e.slice(t,"\r"==e.charAt(o-1)?o-1:o),s=i.indexOf("\r");-1!=s?(r.push(i.slice(0,s)),t+=s+1):(r.push(i),t=o+1)}return r}:function(e){return e.split(/\r\n?|\n/)},Yi=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Ji="oncopy"in(Hi=Ai("div"))||(Hi.setAttribute("oncopy","return;"),"function"==typeof Hi.oncopy),Ki=null;var Xi,Zi=O.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};function $i(e){return e.level%2?e.to:e.from}function Qi(e){return e.level%2?e.from:e.to}function es(e){var t=ko(e);return t?$i(t[0]):0}function ts(e){var t=ko(e);return t?Qi(fi(t)):e.text.length}function rs(e,t){var r=wo(e.doc,t),n=Dn(r);n!=r&&(t=So(n));var o=ko(n),i=o?o[0].level%2?ts(n):es(n):0;return de(t,i)}function ns(e,t){var r=rs(e,t.line),n=wo(e.doc,r.line),o=ko(n);if(!o||0==o[0].level){var i=Math.max(0,n.text.search(/\S/)),s=t.line==r.line&&t.ch<=i&&t.ch;return de(r.line,s?0:i)}return r}function os(e,t){Xi=null;for(var r,n=0;n<e.length;++n){var o=e[n];if(o.from<t&&o.to>t)return n;if(o.from==t||o.to==t){if(null!=r)return i=e,s=o.level,a=e[r].level,void 0,l=i[0].level,s==l||a!=l&&s<a?(o.from!=o.to&&(Xi=r),n):(o.from!=o.to&&(Xi=n),r);r=n}}var i,s,a,l;return r}function is(e,t,r,n){if(!n)return t+r;for(;0<(t+=r)&&ki(e.text.charAt(t)););return t}function ss(e,t,r,n){var o=ko(e);if(!o)return as(e,t,r,n);for(var i=os(o,t),s=o[i],a=is(e,t,s.level%2?-r:r,n);;){if(a>s.from&&a<s.to)return a;if(a==s.from||a==s.to)return os(o,a)==i?a:0<r==(s=o[i+=r]).level%2?s.to:s.from;if(!(s=o[i+=r]))return null;a=0<r==s.level%2?is(e,s.to,-1,n):is(e,s.from,1,n)}}function as(e,t,r,n){var o=t+r;if(n)for(;0<o&&ki(e.text.charAt(o));)o+=r;return o<0||o>e.text.length?null:o}!function(){for(var e=0;e<10;e++)Zi[e+48]=Zi[e+96]=String(e);for(e=65;e<=90;e++)Zi[e]=String.fromCharCode(e);for(e=1;e<=12;e++)Zi[e+111]=Zi[e+63235]="F"+e}();var ls=function(){var b="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",x="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";var w=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,T=/[stwN]/,N=/[LRr]/,O=/[Lb1n]/,S=/[1n]/;function C(e,t,r){this.level=e,this.from=t,this.to=r}return function(e){if(!w.test(e))return!1;for(var t,r=e.length,n=[],o=0;o<r;++o)n.push(c=(t=e.charCodeAt(o))<=247?b.charAt(t):1424<=t&&t<=1524?"R":1536<=t&&t<=1773?x.charAt(t-1536):1774<=t&&t<=2220?"r":8192<=t&&t<=8203?"w":8204==t?"b":"L");o=0;for(var i="L";o<r;++o){"m"==(c=n[o])?n[o]=i:i=c}o=0;for(var s="L";o<r;++o){"1"==(c=n[o])&&"r"==s?n[o]="n":N.test(c)&&"r"==(s=c)&&(n[o]="R")}for(o=1,i=n[0];o<r-1;++o){"+"==(c=n[o])&&"1"==i&&"1"==n[o+1]?n[o]="1":","!=c||i!=n[o+1]||"1"!=i&&"n"!=i||(n[o]=i),i=c}for(o=0;o<r;++o){if(","==(c=n[o]))n[o]="N";else if("%"==c){for(var a=o+1;a<r&&"%"==n[a];++a);for(var l=o&&"!"==n[o-1]||a<r&&"1"==n[a]?"1":"N",u=o;u<a;++u)n[u]=l;o=a-1}}for(o=0,s="L";o<r;++o){var c=n[o];"L"==s&&"1"==c?n[o]="L":N.test(c)&&(s=c)}for(o=0;o<r;++o)if(T.test(n[o])){for(a=o+1;a<r&&T.test(n[a]);++a);var p="L"==(o?n[o-1]:"L"),h="L"==(a<r?n[a]:"L");for(l=p||h?"L":"R",u=o;u<a;++u)n[u]=l;o=a-1}var d,f=[];for(o=0;o<r;)if(O.test(n[o])){var m=o;for(++o;o<r&&O.test(n[o]);++o);f.push(new C(0,m,o))}else{var g=o,y=f.length;for(++o;o<r&&"L"!=n[o];++o);for(u=g;u<o;)if(S.test(n[u])){g<u&&f.splice(y,0,new C(1,g,u));var v=u;for(++u;u<o&&S.test(n[u]);++u);f.splice(y,0,new C(2,v,u)),g=u}else++u;g<o&&f.splice(y,0,new C(1,g,o))}return 1==f[0].level&&(d=e.match(/^\s+/))&&(f[0].from=d[0].length,f.unshift(new C(0,0,d[0].length))),1==fi(f).level&&(d=e.match(/\s+$/))&&(fi(f).to-=d[0].length,f.push(new C(0,r-d[0].length,r))),2==f[0].level&&f.unshift(new C(1,f[0].to,f[0].to)),f[0].level!=fi(f).level&&f.push(new C(f[0].level,r,r)),f}}();return O.version="5.14.2",O}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(ke){"use strict";function Ae(e,t,r){return/^(?:operator|sof|keyword c|case|new|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(r||0)))}ke.defineMode("javascript",function(e,c){var n,o,p=e.indentUnit,h=c.statementIndent,s=c.jsonld,a=c.json||s,d=c.typescript,l=c.wordCharacters||/[\w$\xa1-\uffff]/,u=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),r=e("keyword b"),n=e("keyword c"),o=e("operator"),i={type:"atom",style:"atom"},s={if:e("if"),while:t,with:t,else:r,do:r,try:r,finally:r,return:n,break:n,continue:n,new:e("new"),delete:n,throw:n,debugger:n,var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:o,typeof:o,instanceof:o,true:i,false:i,null:i,undefined:i,NaN:i,Infinity:i,this:e("this"),class:e("class"),super:e("atom"),yield:n,export:e("export"),import:e("import"),extends:n};if(d){var a={type:"variable",style:"variable-3"},l={interface:e("class"),implements:n,namespace:n,module:e("module"),enum:e("module"),public:e("modifier"),private:e("modifier"),protected:e("modifier"),abstract:e("modifier"),as:o,string:a,number:a,boolean:a,any:a};for(var u in l)s[u]=l[u]}return s}(),f=/[+\-*&%=<>!?|~^]/,m=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function g(e,t,r){return n=e,o=r,t}function y(e,t){var o,r=e.next();if('"'==r||"'"==r)return t.tokenize=(o=r,function(e,t){var r,n=!1;if(s&&"@"==e.peek()&&e.match(m))return t.tokenize=y,g("jsonld-keyword","meta");for(;null!=(r=e.next())&&(r!=o||n);)n=!n&&"\\"==r;return n||(t.tokenize=y),g("string","string")}),t.tokenize(e,t);if("."==r&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return g("number","number");if("."==r&&e.match(".."))return g("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return g(r);if("="==r&&e.eat(">"))return g("=>","operator");if("0"==r&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),g("number","number");if("0"==r&&e.eat(/o/i))return e.eatWhile(/[0-7]/i),g("number","number");if("0"==r&&e.eat(/b/i))return e.eatWhile(/[01]/i),g("number","number");if(/\d/.test(r))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),g("number","number");if("/"==r)return e.eat("*")?(t.tokenize=v)(e,t):e.eat("/")?(e.skipToEnd(),g("comment","comment")):Ae(e,t,1)?(function(e){for(var t,r=!1,n=!1;null!=(t=e.next());){if(!r){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}r=!r&&"\\"==t}}(e),e.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),g("regexp","string-2")):(e.eatWhile(f),g("operator","operator",e.current()));if("`"==r)return(t.tokenize=b)(e,t);if("#"==r)return e.skipToEnd(),g("error","error");if(f.test(r))return e.eatWhile(f),g("operator","operator",e.current());if(l.test(r)){e.eatWhile(l);var n=e.current(),i=u.propertyIsEnumerable(n)&&u[n];return i&&"."!=t.lastType?g(i.type,i.style,n):g("variable","variable",n)}}function v(e,t){for(var r,n=!1;r=e.next();){if("/"==r&&n){t.tokenize=y;break}n="*"==r}return g("comment","comment")}function b(e,t){for(var r,n=!1;null!=(r=e.next());){if(!n&&("`"==r||"$"==r&&e.eat("{"))){t.tokenize=y;break}n=!n&&"\\"==r}return g("quasi","string-2",e.current())}var x="([{}])";function i(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var r=e.string.indexOf("=>",e.start);if(!(r<0)){for(var n=0,o=!1,i=r-1;0<=i;--i){var s=e.string.charAt(i),a=x.indexOf(s);if(0<=a&&a<3){if(!n){++i;break}if(0==--n)break}else if(3<=a&&a<6)++n;else if(l.test(s))o=!0;else{if(/["'\/]/.test(s))return;if(o&&!n){++i;break}}}o&&!n&&(t.fatArrowAt=i)}}var w={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function T(e,t,r,n,o,i){this.indented=e,this.column=t,this.type=r,this.prev=o,this.info=i,null!=n&&(this.align=n)}function N(e,t){for(var r=e.localVars;r;r=r.next)if(r.name==t)return!0;for(var n=e.context;n;n=n.prev)for(r=n.vars;r;r=r.next)if(r.name==t)return!0}var O={state:null,column:null,marked:null,cc:null};function S(){for(var e=arguments.length-1;0<=e;e--)O.cc.push(arguments[e])}function C(){return S.apply(null,arguments),!0}function r(r){function e(e){for(var t=e;t;t=t.next)if(t.name==r)return!0;return!1}var t=O.state;if(O.marked="def",t.context){if(e(t.localVars))return;t.localVars={name:r,next:t.localVars}}else{if(e(t.globalVars))return;c.globalVars&&(t.globalVars={name:r,next:t.globalVars})}}var t={name:"this",next:{name:"arguments"}};function G(){O.state.context={prev:O.state.context,vars:O.state.localVars},O.state.localVars=t}function k(){O.state.localVars=O.state.context.vars,O.state.context=O.state.context.prev}function A(n,o){var e=function(){var e=O.state,t=e.indented;if("stat"==e.lexical.type)t=e.lexical.indented;else for(var r=e.lexical;r&&")"==r.type&&r.align;r=r.prev)t=r.indented;e.lexical=new T(t,O.stream.column(),n,null,e.lexical,o)};return e.lex=!0,e}function L(){var e=O.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function M(r){return function e(t){return t==r?C():";"==r?S():C(e)}}function E(e,t){return"var"==e?C(A("vardef",t.length),ne,M(";"),L):"keyword a"==e?C(A("form"),j,E,L):"keyword b"==e?C(A("form"),E,L):"{"==e?C(A("}"),Q,L):";"==e?C():"if"==e?("else"==O.state.lexical.info&&O.state.cc[O.state.cc.length-1]==L&&O.state.cc.pop()(),C(A("form"),j,E,L,le)):"function"==e?C(fe):"for"==e?C(A("form"),ue,E,L):"variable"==e?C(A("stat"),q):"switch"==e?C(A("form"),j,A("}","switch"),M("{"),Q,L,L):"case"==e?C(j,M(":")):"default"==e?C(M(":")):"catch"==e?C(A("form"),G,M("("),me,M(")"),E,L,k):"class"==e?C(A("form"),ge,L):"export"==e?C(A("stat"),xe,L):"import"==e?C(A("stat"),we,L):"module"==e?C(A("form"),oe,A("}"),M("{"),Q,L,L):S(A("stat"),j,M(";"),L)}function j(e){return I(e,!1)}function P(e){return I(e,!0)}function I(e,t){if(O.state.fatArrowAt==O.stream.start){var r=t?z:U;if("("==e)return C(G,A(")"),Z(oe,")"),L,M("=>"),r,k);if("variable"==e)return S(G,oe,M("=>"),r,k)}var n,o=t?F:D;return w.hasOwnProperty(e)?C(o):"function"==e?C(fe,o):"keyword c"==e?C(t?V:R):"("==e?C(A(")"),R,Ge,M(")"),L,o):"operator"==e||"spread"==e?C(t?P:j):"["==e?C(A("]"),Se,L,o):"{"==e?$(J,"}",null,o):"quasi"==e?S(_,o):"new"==e?C((n=t,function(e){return"."==e?C(n?H:W):S(n?P:j)})):C()}function R(e){return e.match(/[;\}\)\],]/)?S():S(j)}function V(e){return e.match(/[;\}\)\],]/)?S():S(P)}function D(e,t){return","==e?C(j):F(e,t,!1)}function F(e,t,r){var n=0==r?D:F,o=0==r?j:P;return"=>"==e?C(G,r?z:U,k):"operator"==e?/\+\+|--/.test(t)?C(n):"?"==t?C(j,M(":"),o):C(o):"quasi"==e?S(_,n):";"!=e?"("==e?$(P,")","call",n):"."==e?C(Y,n):"["==e?C(A("]"),R,M("]"),L,n):void 0:void 0}function _(e,t){return"quasi"!=e?S():"${"!=t.slice(t.length-2)?C(_):C(j,B)}function B(e){if("}"==e)return O.marked="string-2",O.state.tokenize=b,C(_)}function U(e){return i(O.stream,O.state),S("{"==e?E:j)}function z(e){return i(O.stream,O.state),S("{"==e?E:P)}function W(e,t){if("target"==t)return O.marked="keyword",C(D)}function H(e,t){if("target"==t)return O.marked="keyword",C(F)}function q(e){return":"==e?C(L,E):S(D,M(";"),L)}function Y(e){if("variable"==e)return O.marked="property",C()}function J(e,t){return"variable"==e||"keyword"==O.style?(O.marked="property",C("get"==t||"set"==t?K:X)):"number"==e||"string"==e?(O.marked=s?"property":O.style+" property",C(X)):"jsonld-keyword"==e?C(X):"modifier"==e?C(J):"["==e?C(j,M("]"),X):"spread"==e?C(j):void 0}function K(e){return"variable"!=e?S(X):(O.marked="property",C(fe))}function X(e){return":"==e?C(P):"("==e?S(fe):void 0}function Z(r,n){function o(e){if(","==e){var t=O.state.lexical;return"call"==t.info&&(t.pos=(t.pos||0)+1),C(r,o)}return e==n?C():C(M(n))}return function(e){return e==n?C():S(r,o)}}function $(e,t,r){for(var n=3;n<arguments.length;n++)O.cc.push(arguments[n]);return C(A(t,r),Z(e,t),L)}function Q(e){return"}"==e?C():S(E,Q)}function ee(e){if(d&&":"==e)return C(re)}function te(e,t){if("="==t)return C(P)}function re(e){if("variable"==e)return O.marked="variable-3",C()}function ne(){return S(oe,ee,se,ae)}function oe(e,t){return"modifier"==e?C(oe):"variable"==e?(r(t),C()):"spread"==e?C(oe):"["==e?$(oe,"]"):"{"==e?$(ie,"}"):void 0}function ie(e,t){return"variable"!=e||O.stream.match(/^\s*:/,!1)?("variable"==e&&(O.marked="property"),"spread"==e?C(oe):"}"==e?S():C(M(":"),oe,se)):(r(t),C(se))}function se(e,t){if("="==t)return C(P)}function ae(e){if(","==e)return C(ne)}function le(e,t){if("keyword b"==e&&"else"==t)return C(A("form","else"),E,L)}function ue(e){if("("==e)return C(A(")"),ce,M(")"),L)}function ce(e){return"var"==e?C(ne,M(";"),he):";"==e?C(he):"variable"==e?C(pe):S(j,M(";"),he)}function pe(e,t){return"in"==t||"of"==t?(O.marked="keyword",C(j)):C(D,he)}function he(e,t){return";"==e?C(de):"in"==t||"of"==t?(O.marked="keyword",C(j)):S(j,M(";"),de)}function de(e){")"!=e&&C(j)}function fe(e,t){return"*"==t?(O.marked="keyword",C(fe)):"variable"==e?(r(t),C(fe)):"("==e?C(G,A(")"),Z(me,")"),L,E,k):void 0}function me(e){return"spread"==e?C(me):S(oe,ee,te)}function ge(e,t){if("variable"==e)return r(t),C(ye)}function ye(e,t){return"extends"==t?C(j,ye):"{"==e?C(A("}"),ve,L):void 0}function ve(e,t){return"variable"==e||"keyword"==O.style?"static"==t?(O.marked="keyword",C(ve)):(O.marked="property","get"==t||"set"==t?C(be,fe,ve):C(fe,ve)):"*"==t?(O.marked="keyword",C(ve)):";"==e?C(ve):"}"==e?C():void 0}function be(e){return"variable"!=e?S():(O.marked="property",C())}function xe(e,t){return"*"==t?(O.marked="keyword",C(Oe,M(";"))):"default"==t?(O.marked="keyword",C(j,M(";"))):S(E)}function we(e){return"string"==e?C():S(Te,Oe)}function Te(e,t){return"{"==e?$(Te,"}"):("variable"==e&&r(t),"*"==t&&(O.marked="keyword"),C(Ne))}function Ne(e,t){if("as"==t)return O.marked="keyword",C(Te)}function Oe(e,t){if("from"==t)return O.marked="keyword",C(j)}function Se(e){return"]"==e?C():S(P,Ce)}function Ce(e){return"for"==e?S(Ge,M("]")):","==e?C(Z(V,"]")):S(Z(P,"]"))}function Ge(e){return"for"==e?C(ue,Ge):"if"==e?C(j,Ge):void 0}return L.lex=!0,{startState:function(e){var t={tokenize:y,lastType:"sof",cc:[],lexical:new T((e||0)-p,0,"block",!1),localVars:c.localVars,context:c.localVars&&{vars:c.localVars},indented:e||0};return c.globalVars&&"object"==typeof c.globalVars&&(t.globalVars=c.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),i(e,t)),t.tokenize!=v&&e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==n?r:(t.lastType="operator"!=n||"++"!=o&&"--"!=o?n:"incdec",function(e,t,r,n,o){var i=e.cc;for(O.state=e,O.stream=o,O.marked=null,O.cc=i,O.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((i.length?i.pop():a?j:E)(r,n)){for(;i.length&&i[i.length-1].lex;)i.pop()();return O.marked?O.marked:"variable"==r&&N(e,n)?"variable-2":t}}(t,r,n,o,e))},indent:function(e,t){if(e.tokenize==v)return ke.Pass;if(e.tokenize!=y)return 0;var r=t&&t.charAt(0),n=e.lexical;if(!/^\s*else\b/.test(t))for(var o=e.cc.length-1;0<=o;--o){var i=e.cc[o];if(i==L)n=n.prev;else if(i!=le)break}"stat"==n.type&&"}"==r&&(n=n.prev),h&&")"==n.type&&"stat"==n.prev.type&&(n=n.prev);var s,a,l=n.type,u=r==l;return"vardef"==l?n.indented+("operator"==e.lastType||","==e.lastType?n.info+1:0):"form"==l&&"{"==r?n.indented:"form"==l?n.indented+p:"stat"==l?n.indented+(a=t,"operator"==(s=e).lastType||","==s.lastType||f.test(a.charAt(0))||/[,.]/.test(a.charAt(0))?h||p:0):"switch"!=n.info||u||0==c.doubleIndentSwitch?n.align?n.column+(u?0:1):n.indented+(u?0:p):n.indented+(/^(?:case|default)\b/.test(t)?p:2*p)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:a?null:"/*",blockCommentEnd:a?null:"*/",lineComment:a?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:a?"json":"javascript",jsonldMode:s,jsonMode:a,expressionAllowed:Ae,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=j&&t!=P||e.cc.pop()}}}),ke.registerHelper("wordChars","javascript",/[\w$]/),ke.defineMIME("text/javascript","javascript"),ke.defineMIME("text/ecmascript","javascript"),ke.defineMIME("application/javascript","javascript"),ke.defineMIME("application/x-javascript","javascript"),ke.defineMIME("application/ecmascript","javascript"),ke.defineMIME("application/json",{name:"javascript",json:!0}),ke.defineMIME("application/x-json",{name:"javascript",json:!0}),ke.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),ke.defineMIME("text/typescript",{name:"javascript",typescript:!0}),ke.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function r(e){for(var t={},r=e.split(" "),n=0;n<r.length;++n)t[r[n]]=!0;return t}e.defineMode("glsl",function(e,t){var s,i=e.indentUnit,a=t.keywords||r(y),l=t.builtins||r(v),u=t.blockKeywords||r("case do else for if switch while struct"),c=t.atoms||r("null"),p=t.hooks||{},h=t.multiLineStrings,d=/[+\-*&%=<>!?|\/]/;function f(e,t){var i,r=e.next();if(p[r]){var n=p[r](e,t);if(!1!==n)return n}if('"'==r||"'"==r)return t.tokenize=(i=r,function(e,t){for(var r,n=!1,o=!1;null!=(r=e.next());){if(r==i&&!n){o=!0;break}n=!n&&"\\"==r}return(o||!n&&!h)&&(t.tokenize=f),"string"}),t.tokenize(e,t);if(/[\[\]{}\(\),;\:\.]/.test(r))return s=r,"bracket";if(/\d/.test(r))return e.eatWhile(/[\w\.]/),"number";if("/"==r){if(e.eat("*"))return(t.tokenize=m)(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if("#"==r)return e.eatWhile(/[\S]+/),e.eatWhile(/[\s]+/),e.eatWhile(/[\S]+/),e.eatWhile(/[\s]+/),"comment";if(d.test(r))return e.eatWhile(d),"operator";e.eatWhile(/[\w\$_]/);var o=e.current();return a.propertyIsEnumerable(o)?(u.propertyIsEnumerable(o)&&(s="newstatement"),"keyword"):l.propertyIsEnumerable(o)?"builtin":c.propertyIsEnumerable(o)?"atom":"word"}function m(e,t){for(var r,n=!1;r=e.next();){if("/"==r&&n){t.tokenize=f;break}n="*"==r}return"comment"}function n(e,t,r,n,o){this.indented=e,this.column=t,this.type=r,this.align=n,this.prev=o}function o(e,t,r){return e.context=new n(e.indented,t,r,null,e.context)}function g(e){var t=e.context.type;return")"!=t&&"]"!=t&&"}"!=t||(e.indented=e.context.indented),e.context=e.context.prev}return{startState:function(e){return{tokenize:null,context:new n((e||0)-i,0,"top",!1),indented:0,startOfLine:!0}},token:function(e,t){var r=t.context;if(e.sol()&&(null==r.align&&(r.align=!1),t.indented=e.indentation(),t.startOfLine=!0),e.eatSpace())return null;s=null;var n=(t.tokenize||f)(e,t);if("comment"==n||"meta"==n)return n;if(null==r.align&&(r.align=!0),";"!=s&&":"!=s||"statement"!=r.type)if("{"==s)o(t,e.column(),"}");else if("["==s)o(t,e.column(),"]");else if("("==s)o(t,e.column(),")");else if("}"==s){for(;"statement"==r.type;)r=g(t);for("}"==r.type&&(r=g(t));"statement"==r.type;)r=g(t)}else s==r.type?g(t):("}"==r.type||"top"==r.type||"statement"==r.type&&"newstatement"==s)&&o(t,e.column(),"statement");else g(t);return t.startOfLine=!1,n},indent:function(e,t){if(e.tokenize!=f&&null!=e.tokenize)return 0;var r=t&&t.charAt(0),n=e.context,o=r==n.type;return"statement"==n.type?n.indented+("{"==r?0:i):n.align?n.column+(o?0:1):n.indented+(o?0:i)},electricChars:"{}"}});var y="attribute const uniform varying break continue do for while if else in out inout float int void bool true false lowp mediump highp precision invariant discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler2D samplerCube struct gl_FragCoord gl_FragColor",v="radians degrees sin cos tan asin acos atan pow exp log exp2 log2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not dFdx dFdy fwidth texture2D texture2DProj texture2DLod texture2DProjLod textureCube textureCubeLod require export";function t(e,t){return!!t.startOfLine&&(e.skipToEnd(),"meta")}e.defineMIME("text/x-glsl",{name:"glsl",keywords:r(y),builtins:r(v),blockKeywords:r("case do else for if switch while struct"),atoms:r("null"),hooks:{"#":t}})}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["exports"],t):"undefined"!=typeof exports?t(exports):t(e.esprima={})}(this,function(e){"use strict";var R,o,r,V,c,l,D,t,F,_,B,p,h,U,z,W,a;function d(e,t){if(!e)throw new Error("ASSERT: "+t)}function i(e){return 48<=e&&e<=57}function s(e){return 0<="0123456789abcdefABCDEF".indexOf(e)}function f(e){return 0<="01234567".indexOf(e)}function m(e){return 10===e||13===e||8232===e||8233===e}function H(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||92===e||128<=e&&t.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function u(e){return 36===e||95===e||65<=e&&e<=90||97<=e&&e<=122||48<=e&&e<=57||92===e||128<=e&&t.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function g(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function y(e){return"eval"===e||"arguments"===e}function v(e,t,r,n,o){var i;d("number"==typeof r,"Comment must have valid position"),W.lastCommentStart>=r||(W.lastCommentStart=r,i={type:e,value:t},a.range&&(i.range=[r,n]),a.loc&&(i.loc=o),a.comments.push(i),a.attachComment&&(a.leadingComments.push(i),a.trailingComments.push(i)))}function n(e){var t,r,n,o;for(t=B-e,r={start:{line:p,column:B-h-e}};B<U;)if(n=F.charCodeAt(B),++B,m(n))return a.comments&&(o=F.slice(t+e,B-1),r.end={line:p,column:B-h-1},v("Line",o,t,B-1,r)),13===n&&10===F.charCodeAt(B)&&++B,++p,void(h=B);a.comments&&(o=F.slice(t+e,B),r.end={line:p,column:B-h},v("Line",o,t,B,r))}function b(){var e,t,r,n;for(a.comments&&(e=B-2,t={start:{line:p,column:B-h-2}});B<U;)if(m(r=F.charCodeAt(B)))13===r&&10===F.charCodeAt(B+1)&&++B,++p,U<=(h=++B)&&ee();else if(42===r){if(47===F.charCodeAt(B+1))return++B,++B,void(a.comments&&(n=F.slice(e+2,B-2),t.end={line:p,column:B-h},v("Block",n,e,B,t)));++B}else++B;ee()}function q(){var e,t,r;for(t=0===B;B<U;)if(e=F.charCodeAt(B),32===(r=e)||9===r||11===r||12===r||160===r||5760<=r&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(r))++B;else if(m(e))++B,13===e&&10===F.charCodeAt(B)&&++B,++p,h=B,t=!0;else if(47===e)if(47===(e=F.charCodeAt(B+1)))++B,++B,n(2),t=!0;else{if(42!==e)break;++B,++B,b()}else if(t&&45===e){if(45!==F.charCodeAt(B+1)||62!==F.charCodeAt(B+2))break;B+=3,n(3)}else{if(60!==e)break;if("!--"!==F.slice(B+1,B+4))break;++B,++B,++B,++B,n(4)}}function x(e){var t,r,n,o=0;for(r="u"===e?4:2,t=0;t<r;++t){if(!(B<U&&s(F[B])))return"";n=F[B++],o=16*o+"0123456789abcdef".indexOf(n.toLowerCase())}return String.fromCharCode(o)}function w(){var e,t,r,n;for(t=0,"}"===(e=F[B])&&ee();B<U&&s(e=F[B++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(1114111<t||"}"!==e)&&ee(),t<=65535?String.fromCharCode(t):(r=55296+(t-65536>>10),n=56320+(t-65536&1023),String.fromCharCode(r,n))}function T(){var e,t;for(e=F.charCodeAt(B++),t=String.fromCharCode(e),92===e&&(117!==F.charCodeAt(B)&&ee(),++B,(e=x("u"))&&"\\"!==e&&H(e.charCodeAt(0))||ee(),t=e);B<U&&u(e=F.charCodeAt(B));)++B,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==F.charCodeAt(B)&&ee(),++B,(e=x("u"))&&"\\"!==e&&u(e.charCodeAt(0))||ee(),t+=e);return t}function N(){var e,t;return e=B,{type:1===(t=92===F.charCodeAt(B)?T():function(){var e,t;for(e=B++;B<U;){if(92===(t=F.charCodeAt(B)))return B=e,T();if(!u(t))break;++B}return F.slice(e,B)}()).length?R.Identifier:function(e){if(_&&g(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}(t)?R.Keyword:"null"===t?R.NullLiteral:"true"===t||"false"===t?R.BooleanLiteral:R.Identifier,value:t,lineNumber:p,lineStart:h,start:e,end:B}}function O(){var e,t,r,n,o=B,i=F.charCodeAt(B),s=F[B];switch(i){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++B,a.tokenize&&(40===i?a.openParenToken=a.tokens.length:123===i&&(a.openCurlyToken=a.tokens.length)),{type:R.Punctuator,value:String.fromCharCode(i),lineNumber:p,lineStart:h,start:o,end:B};default:if(61===(e=F.charCodeAt(B+1)))switch(i){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return B+=2,{type:R.Punctuator,value:String.fromCharCode(i)+String.fromCharCode(e),lineNumber:p,lineStart:h,start:o,end:B};case 33:case 61:return B+=2,61===F.charCodeAt(B)&&++B,{type:R.Punctuator,value:F.slice(o,B),lineNumber:p,lineStart:h,start:o,end:B}}}return">>>="===(n=F.substr(B,4))?(B+=4,{type:R.Punctuator,value:n,lineNumber:p,lineStart:h,start:o,end:B}):">>>"===(r=n.substr(0,3))||"<<="===r||">>="===r?(B+=3,{type:R.Punctuator,value:r,lineNumber:p,lineStart:h,start:o,end:B}):s===(t=r.substr(0,2))[1]&&0<="+-<>&|".indexOf(s)||"=>"===t?(B+=2,{type:R.Punctuator,value:t,lineNumber:p,lineStart:h,start:o,end:B}):0<="<>=!+-*%&|^/".indexOf(s)?(++B,{type:R.Punctuator,value:s,lineNumber:p,lineStart:h,start:o,end:B}):void ee()}function S(e,t){var r,n;for(f(e)?(n=!0,r="0"+F[B++]):(n=!1,++B,r="");B<U&&f(F[B]);)r+=F[B++];return n||0!==r.length||ee(),(H(F.charCodeAt(B))||i(F.charCodeAt(B)))&&ee(),{type:R.NumericLiteral,value:parseInt(r,8),octal:n,lineNumber:p,lineStart:h,start:t,end:B}}function C(){var e,t,r;if(d(i((r=F[B]).charCodeAt(0))||"."===r,"Numeric literal must start with a decimal digit or a decimal point"),t=B,e="","."!==r){if(e=F[B++],r=F[B],"0"===e){if("x"===r||"X"===r)return++B,function(e){for(var t="";B<U&&s(F[B]);)t+=F[B++];return 0===t.length&&ee(),H(F.charCodeAt(B))&&ee(),{type:R.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:p,lineStart:h,start:e,end:B}}(t);if("b"===r||"B"===r)return++B,function(e){var t,r;for(r="";B<U&&("0"===(t=F[B])||"1"===t);)r+=F[B++];return 0===r.length&&ee(),B<U&&(H(t=F.charCodeAt(B))||i(t))&&ee(),{type:R.NumericLiteral,value:parseInt(r,2),lineNumber:p,lineStart:h,start:e,end:B}}(t);if("o"===r||"O"===r)return S(r,t);if(f(r)&&function(){var e,t;for(e=B+1;e<U;++e){if("8"===(t=F[e])||"9"===t)return!1;if(!f(t))return!0}return!0}())return S(r,t)}for(;i(F.charCodeAt(B));)e+=F[B++];r=F[B]}if("."===r){for(e+=F[B++];i(F.charCodeAt(B));)e+=F[B++];r=F[B]}if("e"===r||"E"===r)if(e+=F[B++],"+"!==(r=F[B])&&"-"!==r||(e+=F[B++]),i(F.charCodeAt(B)))for(;i(F.charCodeAt(B));)e+=F[B++];else ee();return H(F.charCodeAt(B))&&ee(),{type:R.NumericLiteral,value:parseFloat(e),lineNumber:p,lineStart:h,start:t,end:B}}function G(){var e,t,r,n;return z=null,q(),e=B,t=function(){var e,t,r,n;for(d("/"===(e=F[B]),"Regular expression literal must start with a slash"),t=F[B++],n=r=!1;B<U;)if(t+=e=F[B++],"\\"===e)m((e=F[B++]).charCodeAt(0))&&Z(D.UnterminatedRegExp),t+=e;else if(m(e.charCodeAt(0)))Z(D.UnterminatedRegExp);else if(r)"]"===e&&(r=!1);else{if("/"===e){n=!0;break}"["===e&&(r=!0)}return n||Z(D.UnterminatedRegExp),{value:t.substr(1,t.length-2),literal:t}}(),r=function(){var e,t,r,n;for(r=t="";B<U&&u((e=F[B]).charCodeAt(0));)if(++B,"\\"===e&&B<U)if("u"===(e=F[B])){if(n=++B,e=x("u"))for(r+=e,t+="\\u";n<B;++n)t+=F[n];else B=n,r+="u",t+="\\u";te()}else t+="\\",te();else r+=e,t+=e;return{value:r,literal:t}}(),n=function(e,t){var r=e;0<=t.indexOf("u")&&(r=r.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){if(parseInt(t,16)<=1114111)return"x";Z(D.InvalidRegExp)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(r)}catch(e){Z(D.InvalidRegExp)}try{return new RegExp(e,t)}catch(e){return null}}(t.value,r.value),a.tokenize?{type:R.RegularExpression,value:n,regex:{pattern:t.value,flags:r.value},lineNumber:p,lineStart:h,start:e,end:B}:{literal:t.literal+r.literal,value:n,regex:{pattern:t.value,flags:r.value},start:e,end:B}}function k(){var e,t,r,n;return q(),t={start:{line:p,column:(e=B)-h}},r=G(),t.end={line:p,column:B-h},a.tokenize||(0<a.tokens.length&&(n=a.tokens[a.tokens.length-1]).range[0]===e&&"Punctuator"===n.type&&("/"!==n.value&&"/="!==n.value||a.tokens.pop()),a.tokens.push({type:"RegularExpression",value:r.literal,regex:r.regex,range:[e,B],loc:t})),r}function A(){var e;return q(),U<=B?{type:R.EOF,lineNumber:p,lineStart:h,start:B,end:B}:H(e=F.charCodeAt(B))?N():40===e||41===e||59===e?O():39===e||34===e?function(){var e,t,r,n,o,i,s,a,l="",u=!1;for(s=p,a=h,d("'"===(e=F[B])||'"'===e,"String literal must starts with a quote"),t=B,++B;B<U;){if((r=F[B++])===e){e="";break}if("\\"===r)if((r=F[B++])&&m(r.charCodeAt(0)))++p,"\r"===r&&"\n"===F[B]&&++B,h=B;else switch(r){case"u":case"x":"{"===F[B]?(++B,l+=w()):(i=B,(o=x(r))?l+=o:(B=i,l+=r));break;case"n":l+="\n";break;case"r":l+="\r";break;case"t":l+="\t";break;case"b":l+="\b";break;case"f":l+="\f";break;case"v":l+="\v";break;default:f(r)?(0!==(n="01234567".indexOf(r))&&(u=!0),B<U&&f(F[B])&&(u=!0,n=8*n+"01234567".indexOf(F[B++]),0<="0123".indexOf(r)&&B<U&&f(F[B])&&(n=8*n+"01234567".indexOf(F[B++]))),l+=String.fromCharCode(n)):l+=r}else{if(m(r.charCodeAt(0)))break;l+=r}}return""!==e&&ee(),{type:R.StringLiteral,value:l,octal:u,startLineNumber:s,startLineStart:a,lineNumber:p,lineStart:h,start:t,end:B}}():46===e?i(F.charCodeAt(B+1))?C():O():i(e)?C():a.tokenize&&47===e?function(){var e,t;if(!(e=a.tokens[a.tokens.length-1]))return k();if("Punctuator"===e.type){if("]"===e.value)return O();if(")"===e.value)return!(t=a.tokens[a.openParenToken-1])||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?O():k();if("}"===e.value){if(a.tokens[a.openCurlyToken-3]&&"Keyword"===a.tokens[a.openCurlyToken-3].type){if(!(t=a.tokens[a.openCurlyToken-4]))return O()}else{if(!a.tokens[a.openCurlyToken-4]||"Keyword"!==a.tokens[a.openCurlyToken-4].type)return O();if(!(t=a.tokens[a.openCurlyToken-5]))return k()}return 0<=r.indexOf(t.value)?O():k()}return k()}return"Keyword"===e.type&&"this"!==e.value?k():O()}():O()}function L(){var e,t,r,n;return q(),e={start:{line:p,column:B-h}},t=A(),e.end={line:p,column:B-h},t.type!==R.EOF&&(r=F.slice(t.start,t.end),n={type:o[t.type],value:r,range:[t.start,t.end],loc:e},t.regex&&(n.regex={pattern:t.regex.pattern,flags:t.regex.flags}),a.tokens.push(n)),t}function Y(){var e;return B=(e=z).end,p=e.lineNumber,h=e.lineStart,z=void 0!==a.tokens?L():A(),B=e.end,p=e.lineNumber,h=e.lineStart,e}function M(){var e,t,r;e=B,t=p,r=h,z=void 0!==a.tokens?L():A(),B=e,p=t,h=r}function E(){this.line=p,this.column=B-h}function j(){this.start=new E,this.end=null}function P(e){e.type===R.StringLiteral?this.start={line:e.startLineNumber,column:e.start-e.startLineStart}:this.start={line:e.lineNumber,column:e.start-e.lineStart},this.end=null}function J(){B=z.start,z.type===R.StringLiteral?(p=z.startLineNumber,h=z.startLineStart):(p=z.lineNumber,h=z.lineStart),a.range&&(this.range=[B,0]),a.loc&&(this.loc=new j)}function I(e){a.range&&(this.range=[e.start,0]),a.loc&&(this.loc=new P(e))}function K(){var e,t,r,n;return e=B,t=p,r=h,q(),n=p!==t,B=e,p=t,h=r,n}function X(e,t,r){var n=new Error("Line "+e+": "+r);return n.index=t,n.lineNumber=e,n.column=t-h+1,n.description=r,n}function Z(e){var r,t;throw r=Array.prototype.slice.call(arguments,1),t=e.replace(/%(\d)/g,function(e,t){return d(t<r.length,"Message reference must be in range"),r[t]}),X(p,B,t)}function $(e){var r,t,n;if(r=Array.prototype.slice.call(arguments,1),t=e.replace(/%(\d)/g,function(e,t){return d(t<r.length,"Message reference must be in range"),r[t]}),n=X(p,B,t),!a.errors)throw n;a.errors.push(n)}function Q(e,t){var r=D.UnexpectedToken;return e&&(r=t||(e.type===R.EOF?D.UnexpectedEOS:e.type===R.Identifier?D.UnexpectedIdentifier:e.type===R.NumericLiteral?D.UnexpectedNumber:e.type===R.StringLiteral?D.UnexpectedString:D.UnexpectedToken),e.type===R.Keyword&&(!function(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}(e.value)?_&&g(e.value)&&(r=D.StrictReservedWord):r=D.UnexpectedReserved)),r=r.replace("%0",e?e.value:"ILLEGAL"),e&&"number"==typeof e.lineNumber?X(e.lineNumber,e.start,r):X(p,B,r)}function ee(e,t){throw Q(e,t)}function te(e,t){var r=Q(e,t);if(!a.errors)throw r;a.errors.push(r)}function re(e){var t=Y();t.type===R.Punctuator&&t.value===e||ee(t)}function ne(){var e;a.errors?(e=z).type===R.Punctuator&&","===e.value?Y():e.type===R.Punctuator&&";"===e.value?(Y(),te(e)):te(e,D.UnexpectedToken):re(",")}function oe(e){var t=Y();t.type===R.Keyword&&t.value===e||ee(t)}function ie(e){return z.type===R.Punctuator&&z.value===e}function se(e){return z.type===R.Keyword&&z.value===e}function ae(){var e,t=B,r=p,n=h,o=z;if(59===F.charCodeAt(B)||ie(";"))Y();else{if(e=p,q(),p!==e)return B=t,p=r,h=n,void(z=o);z.type===R.EOF||ie("}")||ee(z)}}function le(e){return e.type===V.Identifier||e.type===V.MemberExpression}function ue(e,t){var r,n,o=new J;return r=_,n=Pe(),t&&_&&y(e[0].name)&&te(t,D.StrictParamName),_=r,o.finishFunctionExpression(null,e,[],n)}function ce(){var e,t;return e=_,_=!0,t=ue(Re().params),_=e,t}function pe(){var e,t=new J;return(e=Y()).type===R.StringLiteral||e.type===R.NumericLiteral?(_&&e.octal&&te(e,D.StrictOctalLiteral),t.finishLiteral(e)):t.finishIdentifier(e.value)}function he(){var e,t,r,n,o,i=new J;if((e=z).type===R.Identifier)return r=pe(),"get"!==e.value||ie(":")||ie("(")?"set"!==e.value||ie(":")||ie("(")?ie(":")?(Y(),n=Se(),i.finishProperty("init",r,n,!1,!1)):ie("(")?(n=ce(),i.finishProperty("init",r,n,!0,!1)):(n=r,i.finishProperty("init",r,n,!1,!0)):(t=pe(),re("("),(e=z).type!==R.Identifier?(re(")"),te(e),n=ue([])):(o=[ke()],re(")"),n=ue(o,e)),i.finishProperty("set",t,n,!1,!1)):(t=pe(),re("("),re(")"),n=ue([]),i.finishProperty("get",t,n,!1,!1));if(e.type===R.EOF||e.type===R.Punctuator)ee(e);else{if(t=pe(),ie(":"))return Y(),n=Se(),i.finishProperty("init",t,n,!1,!1);if(ie("("))return n=ce(),i.finishProperty("init",t,n,!0,!1);ee(Y())}}function de(){var e,t,r,n,o;if(ie("("))return re("("),ie(")")?(Y(),c.ArrowParameterPlaceHolder):(++W.parenthesisCount,o=Ce(),re(")"),o);if(ie("["))return function(){var e=[],t=new J;for(re("[");!ie("]");)ie(",")?(Y(),e.push(null)):(e.push(Se()),ie("]")||re(","));return Y(),t.finishArrayExpression(e)}();if(ie("{"))return function(){var e,t,r,n,o=[],i={},s=String,a=new J;for(re("{");!ie("}");)t=(e=he()).key.type===V.Identifier?e.key.name:s(e.key.value),n="init"===e.kind?l.Data:"get"===e.kind?l.Get:l.Set,r="$"+t,Object.prototype.hasOwnProperty.call(i,r)?(i[r]===l.Data?_&&n===l.Data?$(D.StrictDuplicateProperty):n!==l.Data&&$(D.AccessorDataProperty):n===l.Data?$(D.AccessorDataProperty):i[r]&n&&$(D.AccessorGetSet),i[r]|=n):i[r]=n,o.push(e),ie("}")||ne();return re("}"),a.finishObjectExpression(o)}();if(e=z.type,n=new J,e===R.Identifier)r=n.finishIdentifier(Y().value);else if(e===R.StringLiteral||e===R.NumericLiteral)_&&z.octal&&te(z,D.StrictOctalLiteral),r=n.finishLiteral(Y());else if(e===R.Keyword){if(se("function"))return function(){var e,t,r,n,o,i,s,a=null,l=[],u=[],c=new J;oe("function"),ie("(")||(e=z,a=ke(),_?y(e.value)&&te(e,D.StrictFunctionName):y(e.value)?(r=e,n=D.StrictFunctionName):g(e.value)&&(r=e,n=D.StrictReservedWord));o=Re(r),l=o.params,u=o.defaults,t=o.stricted,r=o.firstRestricted,o.message&&(n=o.message);s=_,i=Pe(),_&&r&&ee(r,n);_&&t&&te(t,n);return _=s,c.finishFunctionExpression(a,l,u,i)}();se("this")?(Y(),r=n.finishThisExpression()):ee(Y())}else e===R.BooleanLiteral?((t=Y()).value="true"===t.value,r=n.finishLiteral(t)):e===R.NullLiteral?((t=Y()).value=null,r=n.finishLiteral(t)):ie("/")||ie("/=")?(r=void 0!==a.tokens?n.finishLiteral(k()):n.finishLiteral(G()),M()):ee(Y());return r}function fe(){var e=[];if(re("("),!ie(")"))for(;B<U&&(e.push(Se()),!ie(")"));)ne();return re(")"),e}function me(){var e,t,r=new J;return e=Y(),(t=e).type!==R.Identifier&&t.type!==R.Keyword&&t.type!==R.BooleanLiteral&&t.type!==R.NullLiteral&&ee(e),r.finishIdentifier(e.value)}function ge(){return re("."),me()}function ye(){var e;return re("["),e=Ce(),re("]"),e}function ve(){var e,t,r=new J;return oe("new"),e=function(){var e,t,r;for(d(W.allowIn,"callee of new expression always allow in keyword."),r=z,e=se("new")?ve():de();;)if(ie("["))t=ye(),e=new I(r).finishMemberExpression("[",e,t);else{if(!ie("."))break;t=ge(),e=new I(r).finishMemberExpression(".",e,t)}return e}(),t=ie("(")?fe():[],r.finishNewExpression(e,t)}function be(){var e,t,r=z;return e=function(){var e,t,r,n,o=W.allowIn;for(n=z,W.allowIn=!0,e=se("new")?ve():de();;)if(ie("."))r=ge(),e=new I(n).finishMemberExpression(".",e,r);else if(ie("("))t=fe(),e=new I(n).finishCallExpression(e,t);else{if(!ie("["))break;r=ye(),e=new I(n).finishMemberExpression("[",e,r)}return W.allowIn=o,e}(),z.type===R.Punctuator&&(!ie("++")&&!ie("--")||K()||(_&&e.type===V.Identifier&&y(e.name)&&$(D.StrictLHSPostfix),le(e)||$(D.InvalidLHSInAssignment),t=Y(),e=new I(r).finishPostfixExpression(t.value,e))),e}function xe(){var e,t,r;return z.type!==R.Punctuator&&z.type!==R.Keyword?t=be():ie("++")||ie("--")?(r=z,e=Y(),t=xe(),_&&t.type===V.Identifier&&y(t.name)&&$(D.StrictLHSPrefix),le(t)||$(D.InvalidLHSInAssignment),t=new I(r).finishUnaryExpression(e.value,t)):ie("+")||ie("-")||ie("~")||ie("!")?(r=z,e=Y(),t=xe(),t=new I(r).finishUnaryExpression(e.value,t)):se("delete")||se("void")||se("typeof")?(r=z,e=Y(),t=xe(),t=new I(r).finishUnaryExpression(e.value,t),_&&"delete"===t.operator&&t.argument.type===V.Identifier&&$(D.StrictDelete)):t=be(),t}function we(e,t){var r=0;if(e.type!==R.Punctuator&&e.type!==R.Keyword)return 0;switch(e.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=t?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11}return r}function Te(){var e,t,r,n,o;return o=z,(e=function(){var e,t,r,n,o,i,s,a,l,u;if(e=z,(l=xe())===c.ArrowParameterPlaceHolder)return l;if(0===(o=we(n=z,W.allowIn)))return l;for(n.prec=o,Y(),t=[e,z],i=[l,n,s=xe()];0<(o=we(z,W.allowIn));){for(;2<i.length&&o<=i[i.length-2].prec;)s=i.pop(),a=i.pop().value,l=i.pop(),t.pop(),r=new I(t[t.length-1]).finishBinaryExpression(a,l,s),i.push(r);(n=Y()).prec=o,i.push(n),t.push(z),r=xe(),i.push(r)}for(r=i[u=i.length-1],t.pop();1<u;)r=new I(t.pop()).finishBinaryExpression(i[u-1].value,i[u-2],r),u-=2;return r}())===c.ArrowParameterPlaceHolder||ie("?")&&(Y(),t=W.allowIn,W.allowIn=!0,r=Se(),W.allowIn=t,re(":"),n=Se(),e=new I(o).finishConditionalExpression(e,r,n)),e}function Ne(e){var t,r,n,o,i,s,a;for(o=[],i=[],null,a={paramSet:{}},t=s=0,r=e.length;t<r;t+=1)if((n=e[t]).type===V.Identifier)o.push(n),i.push(null),Ie(a,n,n.name);else{if(n.type!==V.AssignmentExpression)return null;o.push(n.left),i.push(n.right),++s,Ie(a,n.left,n.left.name)}return a.message===D.StrictParamDupe&&ee(_?a.stricted:a.firstRestricted,a.message),0===s&&(i=[]),{params:o,defaults:i,rest:null,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function Oe(e,t){var r,n;return re("=>"),r=_,n=ie("{")?Pe():Se(),_&&e.firstRestricted&&ee(e.firstRestricted,e.message),_&&e.stricted&&te(e.stricted,e.message),_=r,t.finishArrowFunctionExpression(e.params,e.defaults,n,n.type!==V.BlockStatement)}function Se(){var e,t,r,n,o,i,s;return e=W.parenthesisCount,t=i=z,(r=Te())!==c.ArrowParameterPlaceHolder&&!ie("=>")||W.parenthesisCount!==e&&W.parenthesisCount!==e+1||(r.type===V.Identifier?o=Ne([r]):r.type===V.AssignmentExpression?o=Ne([r]):r.type===V.SequenceExpression?o=Ne(r.expressions):r===c.ArrowParameterPlaceHolder&&(o=Ne([])),!o)?(z.type!==R.Punctuator||"="!==(s=z.value)&&"*="!==s&&"/="!==s&&"%="!==s&&"+="!==s&&"-="!==s&&"<<="!==s&&">>="!==s&&">>>="!==s&&"&="!==s&&"^="!==s&&"|="!==s||(le(r)||$(D.InvalidLHSInAssignment),_&&r.type===V.Identifier&&y(r.name)&&te(t,D.StrictLHSAssignment),t=Y(),n=Se(),r=new I(i).finishAssignmentExpression(t.value,r,n)),r):Oe(o,new I(i))}function Ce(){var e,t,r=z;if(e=Se(),ie(",")){for(t=[e];B<U&&ie(",");)Y(),t.push(Se());e=new I(r).finishSequenceExpression(t)}return e}function Ge(){var e,t=new J;return re("{"),e=function(){for(var e,t=[];B<U&&!ie("}")&&void 0!==(e=De());)t.push(e);return t}(),re("}"),t.finishBlockStatement(e)}function ke(){var e,t=new J;return(e=Y()).type!==R.Identifier&&(_&&e.type===R.Keyword&&g(e.value)?te(e,D.StrictReservedWord):ee(e)),t.finishIdentifier(e.value)}function Ae(e){var t,r,n,o,i=[];do{if(i.push((t=e,o=n=r=void 0,n=null,o=new J,r=ke(),_&&y(r.name)&&$(D.StrictVarName),"const"===t?(re("="),n=Se()):ie("=")&&(Y(),n=Se()),o.finishVariableDeclarator(r,n))),!ie(","))break;Y()}while(B<U);return i}function Le(e){var t,r,n,o,i,s,a,l,u,c,p=W.allowIn;return t=r=n=null,oe("for"),re("("),ie(";")?Y():(se("var")||se("let")?(W.allowIn=!1,c=new J,l=Y(),u=Ae(),t=c.finishVariableDeclaration(u,l.value),W.allowIn=p,1===t.declarations.length&&se("in")&&(Y(),o=t,i=Ce(),t=null)):(W.allowIn=!1,t=Ce(),W.allowIn=p,se("in")&&(le(t)||$(D.InvalidLHSInForIn),Y(),o=t,i=Ce(),t=null)),void 0===o&&re(";")),void 0===o&&(ie(";")||(r=Ce()),re(";"),ie(")")||(n=Ce())),re(")"),a=W.inIteration,W.inIteration=!0,s=je(),W.inIteration=a,void 0===o?e.finishForStatement(t,r,n,s):e.finishForInStatement(o,i,s)}function Me(){var e,t,r=[],n=new J;for(se("default")?(Y(),e=null):(oe("case"),e=Ce()),re(":");B<U&&!(ie("}")||se("default")||se("case"));)t=je(),r.push(t);return n.finishSwitchCase(e,r)}function Ee(e){var t,r,n,o,i=[],s=null;return oe("try"),t=Ge(),se("catch")&&i.push((o=new J,oe("catch"),re("("),ie(")")&&ee(z),r=ke(),_&&y(r.name)&&$(D.StrictCatchVariable),re(")"),n=Ge(),o.finishCatchClause(r,n))),se("finally")&&(Y(),s=Ge()),0!==i.length||s||Z(D.NoCatchOrFinally),e.finishTryStatement(t,[],i,s)}function je(){var e,t,r,n,o,i,s,a,l,u,c,p,h,d,f,m,g,y,v,b,x,w,T,N,O,S,C,G,k,A,L,M,E,j,P,I=z.type;if(I===R.EOF&&ee(z),I===R.Punctuator&&"{"===z.value)return Ge();if(n=new J,I===R.Punctuator)switch(z.value){case";":return P=new J,re(";"),P.finishEmptyStatement();case"(":return E=n,j=Ce(),ae(),E.finishExpressionStatement(j)}else if(I===R.Keyword)switch(z.value){case"break":return A=n,M=null,oe("break"),59===F.charCodeAt(B)?(Y(),W.inIteration||W.inSwitch||Z(D.IllegalBreak),A.finishBreakStatement(null)):K()?(W.inIteration||W.inSwitch||Z(D.IllegalBreak),A.finishBreakStatement(null)):(z.type===R.Identifier&&(L="$"+(M=ke()).name,Object.prototype.hasOwnProperty.call(W.labelSet,L)||Z(D.UnknownLabel,M.name)),ae(),null!==M||W.inIteration||W.inSwitch||Z(D.IllegalBreak),A.finishBreakStatement(M));case"continue":return C=n,k=null,oe("continue"),59===F.charCodeAt(B)?(Y(),W.inIteration||Z(D.IllegalContinue),C.finishContinueStatement(null)):K()?(W.inIteration||Z(D.IllegalContinue),C.finishContinueStatement(null)):(z.type===R.Identifier&&(G="$"+(k=ke()).name,Object.prototype.hasOwnProperty.call(W.labelSet,G)||Z(D.UnknownLabel,k.name)),ae(),null!==k||W.inIteration||Z(D.IllegalContinue),C.finishContinueStatement(k));case"debugger":return S=n,oe("debugger"),ae(),S.finishDebuggerStatement();case"do":return w=n,oe("do"),O=W.inIteration,W.inIteration=!0,T=je(),W.inIteration=O,oe("while"),re("("),N=Ce(),re(")"),ie(";")&&Y(),w.finishDoWhileStatement(T,N);case"for":return Le(n);case"function":return Ve();case"if":return y=n,oe("if"),re("("),v=Ce(),re(")"),b=je(),se("else")?(Y(),x=je()):x=null,y.finishIfStatement(v,b,x);case"return":return m=n,g=null,oe("return"),W.inFunctionBody||$(D.IllegalReturn),32===F.charCodeAt(B)&&H(F.charCodeAt(B+1))?(g=Ce(),ae(),m.finishReturnStatement(g)):K()?m.finishReturnStatement(null):(ie(";")||ie("}")||z.type===R.EOF||(g=Ce()),ae(),m.finishReturnStatement(g));case"switch":return function(e){var t,r,n,o,i;if(oe("switch"),re("("),t=Ce(),re(")"),re("{"),r=[],ie("}"))return Y(),e.finishSwitchStatement(t,r);for(o=W.inSwitch,i=!(W.inSwitch=!0);B<U&&!ie("}");)null===(n=Me()).test&&(i&&Z(D.MultipleDefaultsInSwitch),i=!0),r.push(n);return W.inSwitch=o,re("}"),e.finishSwitchStatement(t,r)}(n);case"throw":return d=n,oe("throw"),K()&&Z(D.NewlineAfterThrow),f=Ce(),ae(),d.finishThrowStatement(f);case"try":return Ee(n);case"var":return p=n,oe("var"),h=Ae(),ae(),p.finishVariableDeclaration(h,"var");case"while":return a=n,oe("while"),re("("),l=Ce(),re(")"),c=W.inIteration,W.inIteration=!0,u=je(),W.inIteration=c,a.finishWhileStatement(l,u);case"with":return o=n,_&&(q(),$(D.StrictModeWith)),oe("with"),re("("),i=Ce(),re(")"),s=je(),o.finishWithStatement(i,s)}return(e=Ce()).type===V.Identifier&&ie(":")?(Y(),r="$"+e.name,Object.prototype.hasOwnProperty.call(W.labelSet,r)&&Z(D.Redeclaration,"Label",e.name),W.labelSet[r]=!0,t=je(),delete W.labelSet[r],n.finishLabeledStatement(e,t)):(ae(),n.finishExpressionStatement(e))}function Pe(){var e,t,r,n,o,i,s,a,l=[],u=new J;for(re("{");B<U&&z.type===R.StringLiteral&&(t=z,e=De(),l.push(e),e.expression.type===V.Literal);)"use strict"===F.slice(t.start+1,t.end-1)?(_=!0,r&&te(r,D.StrictOctalLiteral)):!r&&t.octal&&(r=t);for(n=W.labelSet,o=W.inIteration,i=W.inSwitch,s=W.inFunctionBody,a=W.parenthesizedCount,W.labelSet={},W.inIteration=!1,W.inSwitch=!1,W.inFunctionBody=!0,W.parenthesizedCount=0;B<U&&!ie("}")&&void 0!==(e=De());)l.push(e);return re("}"),W.labelSet=n,W.inIteration=o,W.inSwitch=i,W.inFunctionBody=s,W.parenthesizedCount=a,u.finishBlockStatement(l)}function Ie(e,t,r){var n="$"+r;_?(y(r)&&(e.stricted=t,e.message=D.StrictParamName),Object.prototype.hasOwnProperty.call(e.paramSet,n)&&(e.stricted=t,e.message=D.StrictParamDupe)):e.firstRestricted||(y(r)?(e.firstRestricted=t,e.message=D.StrictParamName):g(r)?(e.firstRestricted=t,e.message=D.StrictReservedWord):Object.prototype.hasOwnProperty.call(e.paramSet,n)&&(e.firstRestricted=t,e.message=D.StrictParamDupe)),e.paramSet[n]=!0}function Re(e){var t,r,n,o,i;if(t={params:[],defaultCount:0,defaults:[],firstRestricted:e},re("("),!ie(")"))for(t.paramSet={};B<U&&(r=t,i=o=n=void 0,n=z,o=ke(),Ie(r,n,n.value),ie("=")&&(Y(),i=Se(),++r.defaultCount),r.params.push(o),r.defaults.push(i),!ie(")"));)re(",");return re(")"),0===t.defaultCount&&(t.defaults=[]),{params:t.params,defaults:t.defaults,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}}function Ve(){var e,t,r,n,o,i,s,a,l,u,c=new J;return oe("function"),o=z,e=ke(),_?y(o.value)&&te(o,D.StrictFunctionName):y(o.value)?(a=o,l=D.StrictFunctionName):g(o.value)&&(a=o,l=D.StrictReservedWord),t=(s=Re(a)).params,r=s.defaults,i=s.stricted,a=s.firstRestricted,s.message&&(l=s.message),u=_,n=Pe(),_&&a&&ee(a,l),_&&i&&te(i,l),_=u,c.finishFunctionDeclaration(e,t,r,n)}function De(){if(z.type===R.Keyword)switch(z.value){case"const":case"let":return e=z.value,r=new J,oe(e),t=Ae(e),ae(),r.finishVariableDeclaration(t,e);case"function":return Ve();default:return je()}var e,t,r;if(z.type!==R.EOF)return je()}function Fe(){var e,t;return q(),M(),t=new J,_=!1,e=function(){for(var e,t,r,n=[];B<U&&(t=z).type===R.StringLiteral&&(e=De(),n.push(e),e.expression.type===V.Literal);)"use strict"===F.slice(t.start+1,t.end-1)?(_=!0,r&&te(r,D.StrictOctalLiteral)):!r&&t.octal&&(r=t);for(;B<U&&void 0!==(e=De());)n.push(e);return n}(),t.finishProgram(e)}function _e(){var e,t,r,n=[];for(e=0;e<a.tokens.length;++e)r={type:(t=a.tokens[e]).type,value:t.value},t.regex&&(r.regex={pattern:t.regex.pattern,flags:t.regex.flags}),a.range&&(r.range=t.range),a.loc&&(r.loc=t.loc),n.push(r);a.tokens=n}(o={})[(R={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9}).BooleanLiteral]="Boolean",o[R.EOF]="<end>",o[R.Identifier]="Identifier",o[R.Keyword]="Keyword",o[R.NullLiteral]="Null",o[R.NumericLiteral]="Numeric",o[R.Punctuator]="Punctuator",o[R.StringLiteral]="String",o[R.RegularExpression]="RegularExpression",r=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],V={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},c={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}},l={Data:1,Get:2,Set:4},D={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},t={NonAsciiIdentifierStart:new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),NonAsciiIdentifierPart:new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]")},I.prototype=J.prototype={processComment:function(){var e,t,r,n,o,i=a.bottomRightStack,s=i[i.length-1];if(!(this.type===V.Program&&0<this.body.length)){if(0<a.trailingComments.length){for(r=[],n=a.trailingComments.length-1;0<=n;--n)(o=a.trailingComments[n]).range[0]>=this.range[1]&&(r.unshift(o),a.trailingComments.splice(n,1));a.trailingComments=[]}else s&&s.trailingComments&&s.trailingComments[0].range[0]>=this.range[1]&&(r=s.trailingComments,delete s.trailingComments);if(s)for(;s&&s.range[0]>=this.range[0];)e=s,s=i.pop();if(e)e.leadingComments&&e.leadingComments[e.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=e.leadingComments,e.leadingComments=void 0);else if(0<a.leadingComments.length)for(t=[],n=a.leadingComments.length-1;0<=n;--n)(o=a.leadingComments[n]).range[1]<=this.range[0]&&(t.unshift(o),a.leadingComments.splice(n,1));t&&0<t.length&&(this.leadingComments=t),r&&0<r.length&&(this.trailingComments=r),i.push(this)}},finish:function(){a.range&&(this.range[1]=B),a.loc&&(this.loc.end=new E,a.source&&(this.loc.source=a.source)),a.attachComment&&this.processComment()},finishArrayExpression:function(e){return this.type=V.ArrayExpression,this.elements=e,this.finish(),this},finishArrowFunctionExpression:function(e,t,r,n){return this.type=V.ArrowFunctionExpression,this.id=null,this.params=e,this.defaults=t,this.body=r,this.rest=null,this.generator=!1,this.expression=n,this.finish(),this},finishAssignmentExpression:function(e,t,r){return this.type=V.AssignmentExpression,this.operator=e,this.left=t,this.right=r,this.finish(),this},finishBinaryExpression:function(e,t,r){return this.type="||"===e||"&&"===e?V.LogicalExpression:V.BinaryExpression,this.operator=e,this.left=t,this.right=r,this.finish(),this},finishBlockStatement:function(e){return this.type=V.BlockStatement,this.body=e,this.finish(),this},finishBreakStatement:function(e){return this.type=V.BreakStatement,this.label=e,this.finish(),this},finishCallExpression:function(e,t){return this.type=V.CallExpression,this.callee=e,this.arguments=t,this.finish(),this},finishCatchClause:function(e,t){return this.type=V.CatchClause,this.param=e,this.body=t,this.finish(),this},finishConditionalExpression:function(e,t,r){return this.type=V.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=r,this.finish(),this},finishContinueStatement:function(e){return this.type=V.ContinueStatement,this.label=e,this.finish(),this},finishDebuggerStatement:function(){return this.type=V.DebuggerStatement,this.finish(),this},finishDoWhileStatement:function(e,t){return this.type=V.DoWhileStatement,this.body=e,this.test=t,this.finish(),this},finishEmptyStatement:function(){return this.type=V.EmptyStatement,this.finish(),this},finishExpressionStatement:function(e){return this.type=V.ExpressionStatement,this.expression=e,this.finish(),this},finishForStatement:function(e,t,r,n){return this.type=V.ForStatement,this.init=e,this.test=t,this.update=r,this.body=n,this.finish(),this},finishForInStatement:function(e,t,r){return this.type=V.ForInStatement,this.left=e,this.right=t,this.body=r,this.each=!1,this.finish(),this},finishFunctionDeclaration:function(e,t,r,n){return this.type=V.FunctionDeclaration,this.id=e,this.params=t,this.defaults=r,this.body=n,this.rest=null,this.generator=!1,this.expression=!1,this.finish(),this},finishFunctionExpression:function(e,t,r,n){return this.type=V.FunctionExpression,this.id=e,this.params=t,this.defaults=r,this.body=n,this.rest=null,this.generator=!1,this.expression=!1,this.finish(),this},finishIdentifier:function(e){return this.type=V.Identifier,this.name=e,this.finish(),this},finishIfStatement:function(e,t,r){return this.type=V.IfStatement,this.test=e,this.consequent=t,this.alternate=r,this.finish(),this},finishLabeledStatement:function(e,t){return this.type=V.LabeledStatement,this.label=e,this.body=t,this.finish(),this},finishLiteral:function(e){return this.type=V.Literal,this.value=e.value,this.raw=F.slice(e.start,e.end),e.regex&&(this.regex=e.regex),this.finish(),this},finishMemberExpression:function(e,t,r){return this.type=V.MemberExpression,this.computed="["===e,this.object=t,this.property=r,this.finish(),this},finishNewExpression:function(e,t){return this.type=V.NewExpression,this.callee=e,this.arguments=t,this.finish(),this},finishObjectExpression:function(e){return this.type=V.ObjectExpression,this.properties=e,this.finish(),this},finishPostfixExpression:function(e,t){return this.type=V.UpdateExpression,this.operator=e,this.argument=t,this.prefix=!1,this.finish(),this},finishProgram:function(e){return this.type=V.Program,this.body=e,this.finish(),this},finishProperty:function(e,t,r,n,o){return this.type=V.Property,this.key=t,this.value=r,this.kind=e,this.method=n,this.shorthand=o,this.finish(),this},finishReturnStatement:function(e){return this.type=V.ReturnStatement,this.argument=e,this.finish(),this},finishSequenceExpression:function(e){return this.type=V.SequenceExpression,this.expressions=e,this.finish(),this},finishSwitchCase:function(e,t){return this.type=V.SwitchCase,this.test=e,this.consequent=t,this.finish(),this},finishSwitchStatement:function(e,t){return this.type=V.SwitchStatement,this.discriminant=e,this.cases=t,this.finish(),this},finishThisExpression:function(){return this.type=V.ThisExpression,this.finish(),this},finishThrowStatement:function(e){return this.type=V.ThrowStatement,this.argument=e,this.finish(),this},finishTryStatement:function(e,t,r,n){return this.type=V.TryStatement,this.block=e,this.guardedHandlers=t,this.handlers=r,this.finalizer=n,this.finish(),this},finishUnaryExpression:function(e,t){return this.type="++"===e||"--"===e?V.UpdateExpression:V.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0,this.finish(),this},finishVariableDeclaration:function(e,t){return this.type=V.VariableDeclaration,this.declarations=e,this.kind=t,this.finish(),this},finishVariableDeclarator:function(e,t){return this.type=V.VariableDeclarator,this.id=e,this.init=t,this.finish(),this},finishWhileStatement:function(e,t){return this.type=V.WhileStatement,this.test=e,this.body=t,this.finish(),this},finishWithStatement:function(e,t){return this.type=V.WithStatement,this.object=e,this.body=t,this.finish(),this}},e.version="2.0.0",e.tokenize=function(e,t){var r,n;r=String,"string"==typeof e||e instanceof String||(e=r(e)),p=(B=0)<(F=e).length?1:0,h=0,U=F.length,W={allowIn:!(z=null),labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},a={},(t=t||{}).tokens=!0,a.tokens=[],a.tokenize=!0,a.openParenToken=-1,a.openCurlyToken=-1,a.range="boolean"==typeof t.range&&t.range,a.loc="boolean"==typeof t.loc&&t.loc,"boolean"==typeof t.comment&&t.comment&&(a.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(a.errors=[]);try{if(M(),z.type===R.EOF)return a.tokens;for(Y();z.type!==R.EOF;)try{Y()}catch(e){if(a.errors){a.errors.push(e);break}throw e}_e(),n=a.tokens,void 0!==a.comments&&(n.comments=a.comments),void 0!==a.errors&&(n.errors=a.errors)}catch(e){throw e}finally{a={}}return n},e.parse=function(e,t){var r,n;n=String,"string"==typeof e||e instanceof String||(e=n(e)),p=(B=0)<(F=e).length?1:0,h=0,U=F.length,W={allowIn:!(z=null),labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},a={},void 0!==t&&(a.range="boolean"==typeof t.range&&t.range,a.loc="boolean"==typeof t.loc&&t.loc,a.attachComment="boolean"==typeof t.attachComment&&t.attachComment,a.loc&&null!==t.source&&void 0!==t.source&&(a.source=n(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(a.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(a.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(a.errors=[]),a.attachComment&&(a.range=!0,a.comments=[],a.bottomRightStack=[],a.trailingComments=[],a.leadingComments=[]));try{r=Fe(),void 0!==a.comments&&(r.comments=a.comments),void 0!==a.tokens&&(_e(),r.tokens=a.tokens),void 0!==a.errors&&(r.errors=a.errors)}catch(e){throw e}finally{a={}}return r},e.Syntax=function(){var e,t={};for(e in"function"==typeof Object.create&&(t=Object.create(null)),V)V.hasOwnProperty(e)&&(t[e]=V[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()});var jsonlint=function(){var e={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL OR OBJECT",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(e,t,r,n,o,i,s){var a=i.length-1;switch(o){case 1:this.$=e.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(e);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=i[a-1];case 13:this.$={};break;case 14:this.$=i[a-1];break;case 15:this.$=[i[a-2],i[a]];break;case 16:this.$={},this.$[i[a][0]]=i[a][1];break;case 17:this.$=i[a-2],i[a-2][i[a][0]]=i[a][1];break;case 18:this.$=[];break;case 19:this.$=i[a-1];break;case 20:this.$=[i[a]];break;case 21:this.$=i[a-2],i[a-2].push(i[a])}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,r=[0],n=[null],o=[],i=this.table,s="",a=0,l=0,u=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var c=this.lexer.yylloc;function p(){var e;return"number"!=typeof(e=t.lexer.lex()||1)&&(e=t.symbols_[e]||e),e}o.push(c),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var h,d,f,m,g,y,v,b,x,w,T={};;){if(f=r[r.length-1],this.defaultActions[f]?m=this.defaultActions[f]:(null==h&&(h=p()),m=i[f]&&i[f][h]),void 0===m||!m.length||!m[0]){if(!u){for(y in x=[],i[f])this.terminals_[y]&&2<y&&x.push("'"+this.terminals_[y]+"'");var N="";N=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+this.terminals_[h]+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==h?"end of input":"'"+(this.terminals_[h]||h)+"'"),this.parseError(N,{text:this.lexer.match,token:this.terminals_[h]||h,line:this.lexer.yylineno,loc:c,expected:x})}if(3==u){if(1==h)throw new Error(N||"Parsing halted.");l=this.lexer.yyleng,s=this.lexer.yytext,a=this.lexer.yylineno,c=this.lexer.yylloc,h=p()}for(;!(2..toString()in i[f]);){if(0==f)throw new Error(N||"Parsing halted.");w=1,r.length=r.length-2*w,n.length=n.length-w,o.length=o.length-w,f=r[r.length-1]}d=h,h=2,m=i[f=r[r.length-1]]&&i[f][2],u=3}if(m[0]instanceof Array&&1<m.length)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+h);switch(m[0]){case 1:r.push(h),n.push(this.lexer.yytext),o.push(this.lexer.yylloc),r.push(m[1]),h=null,d?(h=d,d=null):(l=this.lexer.yyleng,s=this.lexer.yytext,a=this.lexer.yylineno,c=this.lexer.yylloc,0<u&&u--);break;case 2:if(v=this.productions_[m[1]][1],T.$=n[n.length-v],T._$={first_line:o[o.length-(v||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(v||1)].first_column,last_column:o[o.length-1].last_column},void 0!==(g=this.performAction.call(T,s,l,a,this.yy,m[1],n,o)))return g;v&&(r=r.slice(0,-1*v*2),n=n.slice(0,-1*v),o=o.slice(0,-1*v)),r.push(this.productions_[m[1]][0]),n.push(T.$),o.push(T._$),b=i[r[r.length-2]][r[r.length-1]],r.push(b);break;case 3:return!0}}return!0}},t={EOF:1,parseError:function(e,t){if(!this.yy.parseError)throw new Error(e);this.yy.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.match+=e,this.matched+=e,e.match(/\n/)&&this.yylineno++,this._input=this._input.slice(1),e},unput:function(e){return this._input=e+this._input,this},more:function(){return this._more=!0,this},less:function(e){this._input=this.match.slice(e)+this._input},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(20<e.length?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(20<e.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,r,n,o;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),s=0;s<i.length&&(!(r=this._input.match(this.rules[i[s]]))||t&&!(r[0].length>t[0].length)||(t=r,n=s,this.options.flex));s++);return t?((o=t[0].match(/\n.*/g))&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-1:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,i[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:void this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,t,r,n){switch(r){case 0:break;case 1:return 6;case 2:return t.yytext=t.yytext.substr(1,t.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return 100;case 14:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:new\s*\S*\(\))/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],inclusive:!0}}};return e.lexer=t,e}();"undefined"!=typeof require&&"undefined"!=typeof exports&&(exports.parser=jsonlint,exports.parse=function(){return jsonlint.parse.apply(jsonlint,arguments)},exports.main=function(e){if(!e[1])throw new Error("Usage: "+e[0]+" FILE");if("undefined"!=typeof process)var t=require("fs").readFileSync(require("path").join(process.cwd(),e[1]),"utf8");else t=require("file").path(require("file").cwd()).join(e[1]).read({charset:"utf-8"});return exports.parser.parse(t)},"undefined"!=typeof module&&require.main===module&&exports.main("undefined"!=typeof process?process.argv.slice(1):require("system").args)),function(){var aa=this;function da(e){return void 0!==e}function ea(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var r=Object.prototype.toString.call(e);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function fa(e,t,r){return e.call.apply(e.bind,arguments)}function ga(t,r,e){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,n),t.apply(r,e)}}return function(){return t.apply(r,arguments)}}function ia(e,t,r){return(ia=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fa:ga).apply(null,arguments)}function ka(e,t){var r,n=e.split("."),o=aa;n[0]in o||!o.execScript||o.execScript("var "+n[0]);for(;n.length&&(r=n.shift());)!n.length&&da(t)?o[r]=t:o=o[r]?o[r]:o[r]={}}function v(e,i){function t(){}t.prototype=i.prototype,e.Ma=i.prototype,e.prototype=new t,(e.prototype.constructor=e).La=function(e,t,r){for(var n=Array(arguments.length-2),o=2;o<arguments.length;o++)n[o-2]=arguments[o];return i.prototype[t].apply(e,n)}}var la={};function z(d,e){function t(e){var t;(n=e.charCodeAt(0))<=255?(e="x",t=2):(e="u",t=4);var r=n.toString(16).toUpperCase(),n=r;for(t-=r.length,r=0;r<t;r++)n="0"+n;return"\\"+e+n}function o(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,t)+'"'}function f(e){yt<bt||(bt<yt&&(bt=yt,xt=[]),xt.push(e))}function m(){var e,t="newLine@"+yt,r=wt[t];return r?(yt=r.b,r.result):(e=yt,/^[\n]/.test(d.charAt(yt))?(r=d.charAt(yt),yt++):(r=null,0===vt&&f("[\\n]")),null!==r&&(r="\n"),null===r&&(yt=e),wt[t]={b:yt,result:r},r)}function g(){var e,t="EOF@"+yt,r=wt[t];return r?(yt=r.b,r.result):(e=yt,vt++,d.length>yt?(r=d.charAt(yt),yt++):(r=null,0===vt&&f("any character")),vt--,null===r?r="":(r=null,yt=e),wt[t]={b:yt,result:r},r)}function y(){var e,t="_@"+yt,r=wt[t];if(r)return yt=r.b,r.result;if(vt++,null===(e=m())&&(/^[\\\n]/.test(d.charAt(yt))?(e=d.charAt(yt),yt++):(e=null,0===vt&&f("[\\\\\\n]")),null===e&&(/^[\r\t\f\x0B ]/.test(d.charAt(yt))?(e=d.charAt(yt),yt++):(e=null,0===vt&&f("[\\r\\t\\f\\x0B ]")),null===e&&(e=i()))),null!==e)for(r=[];null!==e;)r.push(e),null===(e=m())&&(/^[\\\n]/.test(d.charAt(yt))?(e=d.charAt(yt),yt++):(e=null,0===vt&&f("[\\\\\\n]")),null===e&&(/^[\r\t\f\x0B ]/.test(d.charAt(yt))?(e=d.charAt(yt),yt++):(e=null,0===vt&&f("[\\r\\t\\f\\x0B ]")),null===e&&(e=i())));else r=null;return 0===--vt&&null===r&&f("whitespace"),wt[t]={b:yt,result:r},r}function n(){var e,t,r,n,o,i="noNewlineComment@"+yt,s=wt[i];if(s)return yt=s.b,s.result;if(n=yt,"/*"===d.substr(yt,2)?(s="/*",yt+=2):(s=null,0===vt&&f('"/*"')),null!==s){for(e=[],r=o=yt,vt++,"*/"===d.substr(yt,2)?(t="*/",yt+=2):(t=null,0===vt&&f('"*/"')),vt--,null===t?t="":(t=null,yt=r),null!==t?(d.length>yt?(r=d.charAt(yt),yt++):(r=null,0===vt&&f("any character")),null!==r?t=[t,r]:(t=null,yt=o)):(t=null,yt=o);null!==t;)e.push(t),r=o=yt,vt++,"*/"===d.substr(yt,2)?(t="*/",yt+=2):(t=null,0===vt&&f('"*/"')),vt--,null===t?t="":(t=null,yt=r),null!==t?(d.length>yt?(r=d.charAt(yt),yt++):(r=null,0===vt&&f("any character")),null!==r?t=[t,r]:(t=null,yt=o)):(t=null,yt=o);null!==e?("*/"===d.substr(yt,2)?(t="*/",yt+=2):(t=null,0===vt&&f('"*/"')),null!==t?s=[s,e,t]:(s=null,yt=n)):(s=null,yt=n)}else s=null,yt=n;if(null===s)if(n=yt,"//"===d.substr(yt,2)?(s="//",yt+=2):(s=null,0===vt&&f('"//"')),null!==s){for(e=[],/^[^\n]/.test(d.charAt(yt))?(t=d.charAt(yt),yt++):(t=null,0===vt&&f("[^\\n]"));null!==t;)e.push(t),/^[^\n]/.test(d.charAt(yt))?(t=d.charAt(yt),yt++):(t=null,0===vt&&f("[^\\n]"));null!==e?s=[s,e]:(s=null,yt=n)}else s=null,yt=n;return wt[i]={b:yt,result:s},s}function l(){var e,t="noNewlineWhitespace@"+yt,r=wt[t];if(r)return yt=r.b,r.result;if(/^[\r\t\f\x0B ]/.test(d.charAt(yt))?(e=d.charAt(yt),yt++):(e=null,0===vt&&f("[\\r\\t\\f\\x0B ]")),null===e&&(e=n()),null!==e)for(r=[];null!==e;)r.push(e),/^[\r\t\f\x0B ]/.test(d.charAt(yt))?(e=d.charAt(yt),yt++):(e=null,0===vt&&f("[\\r\\t\\f\\x0B ]")),null===e&&(e=n());else r=null;return wt[t]={b:yt,result:r},r}function i(){var e,t,r,n,o,i="comment@"+yt,s=wt[i];if(s)return yt=s.b,s.result;if(vt++,n=yt,"/*"===d.substr(yt,2)?(s="/*",yt+=2):(s=null,0===vt&&f('"/*"')),null!==s){for(e=[],r=o=yt,vt++,"*/"===d.substr(yt,2)?(t="*/",yt+=2):(t=null,0===vt&&f('"*/"')),vt--,null===t?t="":(t=null,yt=r),null!==t?(d.length>yt?(r=d.charAt(yt),yt++):(r=null,0===vt&&f("any character")),null!==r?t=[t,r]:(t=null,yt=o)):(t=null,yt=o);null!==t;)e.push(t),r=o=yt,vt++,"*/"===d.substr(yt,2)?(t="*/",yt+=2):(t=null,0===vt&&f('"*/"')),vt--,null===t?t="":(t=null,yt=r),null!==t?(d.length>yt?(r=d.charAt(yt),yt++):(r=null,0===vt&&f("any character")),null!==r?t=[t,r]:(t=null,yt=o)):(t=null,yt=o);null!==e?("*/"===d.substr(yt,2)?(t="*/",yt+=2):(t=null,0===vt&&f('"*/"')),null!==t?s=[s,e,t]:(s=null,yt=n)):(s=null,yt=n)}else s=null,yt=n;if(null===s)if(n=yt,"//"===d.substr(yt,2)?(s="//",yt+=2):(s=null,0===vt&&f('"//"')),null!==s){for(e=[],/^[^\n]/.test(d.charAt(yt))?(t=d.charAt(yt),yt++):(t=null,0===vt&&f("[^\\n]"));null!==t;)e.push(t),/^[^\n]/.test(d.charAt(yt))?(t=d.charAt(yt),yt++):(t=null,0===vt&&f("[^\\n]"));null!==e?(null===(t=m())&&(t=g()),null!==t?s=[s,e,t]:(s=null,yt=n)):(s=null,yt=n)}else s=null,yt=n;return 0===--vt&&null===s&&f("comment"),wt[i]={b:yt,result:s},s}function v(){var e,t,r,n="semicolon@"+yt,o=wt[n];return o?(yt=o.b,o.result):(r=yt,null!==(o=null!==(o=y())?o:"")?(59===d.charCodeAt(yt)?(e=";",yt+=1):(e=null,0===vt&&f('";"')),null!==e?null!==(t=null!==(t=y())?t:"")?o=[o,e,t]:(o=null,yt=r):(o=null,yt=r)):(o=null,yt=r),wt[n]={b:yt,result:o},o)}function b(){var e,t,r,n="comma@"+yt,o=wt[n];return o?(yt=o.b,o.result):(r=yt,null!==(o=null!==(o=y())?o:"")?(44===d.charCodeAt(yt)?(e=",",yt+=1):(e=null,0===vt&&f('","')),null!==e?null!==(t=null!==(t=y())?t:"")?o=[o,e,t]:(o=null,yt=r):(o=null,yt=r)):(o=null,yt=r),wt[n]={b:yt,result:o},o)}function x(){var e,t,r,n="left_bracket@"+yt,o=wt[n];return o?(yt=o.b,o.result):(r=yt,null!==(o=null!==(o=y())?o:"")?(91===d.charCodeAt(yt)?(e="[",yt+=1):(e=null,0===vt&&f('"["')),null!==e?null!==(t=null!==(t=y())?t:"")?o=[o,e,t]:(o=null,yt=r):(o=null,yt=r)):(o=null,yt=r),wt[n]={b:yt,result:o},o)}function w(){var e,t,r,n="right_bracket@"+yt,o=wt[n];return o?(yt=o.b,o.result):(r=yt,null!==(o=null!==(o=y())?o:"")?(93===d.charCodeAt(yt)?(e="]",yt+=1):(e=null,0===vt&&f('"]"')),null!==e?null!==(t=null!==(t=y())?t:"")?o=[o,e,t]:(o=null,yt=r):(o=null,yt=r)):(o=null,yt=r),wt[n]={b:yt,result:o},o)}function s(){var e,t,r,n="equals@"+yt,o=wt[n];return o?(yt=o.b,o.result):(r=yt,null!==(o=null!==(o=y())?o:"")?(61===d.charCodeAt(yt)?(e="=",yt+=1):(e=null,0===vt&&f('"="')),null!==e?null!==(t=null!==(t=y())?t:"")?o=[o,e,t]:(o=null,yt=r):(o=null,yt=r)):(o=null,yt=r),wt[n]={b:yt,result:o},o)}function h(){var e,t,r,n="left_paren@"+yt,o=wt[n];return o?(yt=o.b,o.result):(r=yt,null!==(o=null!==(o=y())?o:"")?(40===d.charCodeAt(yt)?(e="(",yt+=1):(e=null,0===vt&&f('"("')),null!==e?null!==(t=null!==(t=y())?t:"")?o=[o,e,t]:(o=null,yt=r):(o=null,yt=r)):(o=null,yt=r),wt[n]={b:yt,result:o},o)}function T(){var e,t,r,n="right_paren@"+yt,o=wt[n];return o?(yt=o.b,o.result):(r=yt,null!==(o=null!==(o=y())?o:"")?(41===d.charCodeAt(yt)?(e=")",yt+=1):(e=null,0===vt&&f('")"')),null!==e?null!==(t=null!==(t=y())?t:"")?o=[o,e,t]:(o=null,yt=r):(o=null,yt=r)):(o=null,yt=r),wt[n]={b:yt,result:o},o)}function p(){var e,t,r,n="left_brace@"+yt,o=wt[n];return o?(yt=o.b,o.result):(r=yt,null!==(o=null!==(o=y())?o:"")?(123===d.charCodeAt(yt)?(e="{",yt+=1):(e=null,0===vt&&f('"{"')),null!==e?null!==(t=null!==(t=y())?t:"")?o=[o,e,t]:(o=null,yt=r):(o=null,yt=r)):(o=null,yt=r),wt[n]={b:yt,result:o},o)}function N(){var e,t,r,n="right_brace@"+yt,o=wt[n];return o?(yt=o.b,o.result):(r=yt,null!==(o=null!==(o=y())?o:"")?(125===d.charCodeAt(yt)?(e="}",yt+=1):(e=null,0===vt&&f('"}"')),null!==e?null!==(t=null!==(t=y())?t:"")?o=[o,e,t]:(o=null,yt=r):(o=null,yt=r)):(o=null,yt=r),wt[n]={b:yt,result:o},o)}function u(){var e="external_statement_list@"+yt;if(n=wt[e])return yt=n.b,n.result;var t,r,n=yt;for(t=[],r=a();null!==r;)t.push(r),r=a();if(null!==t){r=new dt({type:"root",C:[]});for(var o=0;o<t.length;o++)t[o]&&(r.C=r.C.concat(t[o]));t=r}return null===t&&(yt=n),wt[e]={b:yt,result:t},t}function a(){var e,t="external_statement@"+yt,r=wt[t];return r?(yt=r.b,r.result):(e=yt,null===(r=I())&&(r=c()),null===r&&(yt=e),null===r&&(e=yt,null!==(r=y())&&(r=""),null===r&&(yt=e)),wt[t]={b:yt,result:r},r)}function c(){var e="external_declaration@"+yt,t=wt[e];return t?(yt=t.b,t.result):(null===(t=R())&&(null===(t=Z())&&(null===(t=L())&&(null===(t=O())&&(null===(t=pe())&&(t=A()))))),wt[e]={b:yt,result:t},t)}function O(){var e,t,r,n,o,i,s,a="preprocessor_operator@"+yt,l=wt[a];if(l)return yt=l.b,l.result;if(i=o=yt,35===d.charCodeAt(yt)?(l="#",yt+=1):(l=null,0===vt&&f('"#"')),null!==l)if("undef"===d.substr(yt,5)?(e="undef",yt+=5):(e=null,0===vt&&f('"undef"')),null===e&&("pragma"===d.substr(yt,6)?(e="pragma",yt+=6):(e=null,0===vt&&f('"pragma"')),null===e&&("version"===d.substr(yt,7)?(e="version",yt+=7):(e=null,0===vt&&f('"version"')),null===e&&("error"===d.substr(yt,5)?(e="error",yt+=5):(e=null,0===vt&&f('"error"')),null===e&&("extension"===d.substr(yt,9)?(e="extension",yt+=9):(e=null,0===vt&&f('"extension"')),null===e&&("line"===d.substr(yt,4)?(e="line",yt+=4):(e=null,0===vt&&f('"line"'))))))),null!==e)if(null!==(t=y())){for(s=yt,r=[],/^[^\n]/.test(d.charAt(yt))?(n=d.charAt(yt),yt++):(n=null,0===vt&&f("[^\\n]"));null!==n;)r.push(n),/^[^\n]/.test(d.charAt(yt))?(n=d.charAt(yt),yt++):(n=null,0===vt&&f("[^\\n]"));null!==r&&(r=r.join("")),null===r&&(yt=s),null!==r?(null===(n=m())&&(n=g()),null!==n?l=[l,e,t,r,n]:(l=null,yt=i)):(l=null,yt=i)}else l=null,yt=i;else l=null,yt=i;else l=null,yt=i;return null!==l&&(l=new dt({type:"preprocessor",B:"#"+l[1],value:l[3]})),null===l&&(yt=o),wt[a]={b:yt,result:l},l}function S(){var e,t,r,n,o="macro_identifier@"+yt,i=wt[o];if(i)return yt=i.b,i.result;if(n=r=yt,/^[A-Za-z_]/.test(d.charAt(yt))?(i=d.charAt(yt),yt++):(i=null,0===vt&&f("[A-Za-z_]")),null!==i){for(e=[],/^[A-Za-z_0-9]/.test(d.charAt(yt))?(t=d.charAt(yt),yt++):(t=null,0===vt&&f("[A-Za-z_0-9]"));null!==t;)e.push(t),/^[A-Za-z_0-9]/.test(d.charAt(yt))?(t=d.charAt(yt),yt++):(t=null,0===vt&&f("[A-Za-z_0-9]"));null!==e?i=[i,e]:(i=null,yt=n)}else i=null,yt=n;return null!==i&&(i=new dt({type:"identifier",name:i[0]+i[1].join("")})),null===i&&(yt=r),wt[o]={b:yt,result:i},i}function C(){var e,t,r,n,o,i,s,a,l,u="preprocessor_parameter_list@"+yt,c=wt[u];if(c)return yt=c.b,c.result;if(i=o=yt,40===d.charCodeAt(yt)?(c="(",yt+=1):(c=null,0===vt&&f('"("')),null!==c)if(null!==(e=null!==(e=S())?e:"")){for(t=[],s=yt,null!==(r=b())?null!==(n=S())?r=[r,n]:(r=null,yt=s):(r=null,yt=s);null!==r;)t.push(r),s=yt,null!==(r=b())?null!==(n=S())?r=[r,n]:(r=null,yt=s):(r=null,yt=s);null!==t?null!==(r=T())?c=[c,e,t,r]:(c=null,yt=i):(c=null,yt=i)}else c=null,yt=i;else c=null,yt=i;return null!==c&&(a=c[1],l=c[2],c=a?[a].concat(l.map(function(e){return e[1]})):[]),null===c&&(yt=o),wt[u]={b:yt,result:c},c}function G(){var e,t,r,n,o,i,s,a,l="macro_paren_parameter@"+yt,u=wt[l];if(u)return yt=u.b,u.result;if(i=o=yt,null!==(u=h())){for(a=s=yt,e=[],/^[^()]/.test(d.charAt(yt))?(t=d.charAt(yt),yt++):(t=null,0===vt&&f("[^()]"));null!==t;)e.push(t),/^[^()]/.test(d.charAt(yt))?(t=d.charAt(yt),yt++):(t=null,0===vt&&f("[^()]"));if(null!==e)if(null!==(t=null!==(t=G())?t:"")){for(r=[],/^[^()]/.test(d.charAt(yt))?(n=d.charAt(yt),yt++):(n=null,0===vt&&f("[^()]"));null!==n;)r.push(n),/^[^()]/.test(d.charAt(yt))?(n=d.charAt(yt),yt++):(n=null,0===vt&&f("[^()]"));null!==r?e=[e,t,r]:(e=null,yt=a)}else e=null,yt=a;else e=null,yt=a;null!==e&&(e=e[0].join("")+e[1]+e[2].join("")),null===e&&(yt=s),null!==e?null!==(t=T())?u=[u,e,t]:(u=null,yt=i):(u=null,yt=i)}else u=null,yt=i;return null!==u&&(u="("+u[1]+")"),null===u&&(yt=o),wt[l]={b:yt,result:u},u}function k(){var e,t,r,n="macro_call_parameter@"+yt;if(r=wt[n])return yt=r.b,r.result;if(null===(r=G())){for(t=yt,r=[],/^[^,)]/.test(d.charAt(yt))?(e=d.charAt(yt),yt++):(e=null,0===vt&&f("[^,)]"));null!==e;)r.push(e),/^[^,)]/.test(d.charAt(yt))?(e=d.charAt(yt),yt++):(e=null,0===vt&&f("[^,)]"));null!==r&&(r=r.join("")),null===r&&(yt=t)}return wt[n]={b:yt,result:r},r}function A(){var e,t,r,n,o,i,s="macro_call@"+yt,a=wt[s];return a?(yt=a.b,a.result):(i=a=yt,null!==(e=S())?null!==(t=null!==(t=y())?t:"")?null!==(r=h())?null!==(n=null!==(n=Ve())?n:"")?(41===d.charCodeAt(yt)?(o=")",yt+=1):(o=null,0===vt&&f('")"')),null!==o?e=[e,t,r,n,o]:(e=null,yt=i)):(e=null,yt=i):(e=null,yt=i):(e=null,yt=i):(e=null,yt=i),null!==e&&(t=e[3],e=new dt({type:"macro_call",oa:e[0],l:t}),t||(e.l=[])),null===e&&(yt=a),wt[s]={b:yt,result:e},e)}function L(){var e,t,r,n,o,i,s,a,l,u,c,p="preprocessor_define@"+yt,h=wt[p];if(h)return yt=h.b,h.result;if(u=l=yt,35===d.charCodeAt(yt)?(h="#",yt+=1):(h=null,0===vt&&f('"#"')),null!==h)if(null!==(e=null!==(e=y())?e:""))if("define"===d.substr(yt,6)?(t="define",yt+=6):(t=null,0===vt&&f('"define"')),null!==t)if(null!==(r=y()))if(null!==(n=S()))if(null!==(o=null!==(o=C())?o:"")){for(i=[],/^[ \t]/.test(d.charAt(yt))?(s=d.charAt(yt),yt++):(s=null,0===vt&&f("[ \\t]"));null!==s;)i.push(s),/^[ \t]/.test(d.charAt(yt))?(s=d.charAt(yt),yt++):(s=null,0===vt&&f("[ \\t]"));if(null!==i){for(c=yt,s=[],/^[^\n]/.test(d.charAt(yt))?(a=d.charAt(yt),yt++):(a=null,0===vt&&f("[^\\n]"));null!==a;)s.push(a),/^[^\n]/.test(d.charAt(yt))?(a=d.charAt(yt),yt++):(a=null,0===vt&&f("[^\\n]"));null!==s&&(s=s.join("")),null===s&&(yt=c),null!==s?(null===(a=m())&&(a=g()),null!==a?h=[h,e,t,r,n,o,i,s,a]:(h=null,yt=u)):(h=null,yt=u)}else h=null,yt=u}else h=null,yt=u;else h=null,yt=u;else h=null,yt=u;else h=null,yt=u;else h=null,yt=u;else h=null,yt=u;return null!==h&&(h=new dt({type:"preprocessor",B:"#define",identifier:h[4].name,pa:h[7],l:h[5]||null})),null===h&&(yt=l),wt[p]={b:yt,result:h},h}function M(){var e,t,r,n,o,i,s,a,l="preprocessor_if@"+yt,u=wt[l];if(u)return yt=u.b,u.result;if(s=i=yt,35===d.charCodeAt(yt)?(u="#",yt+=1):(u=null,0===vt&&f('"#"')),null!==u)if(null!==(e=null!==(e=y())?e:""))if("ifdef"===d.substr(yt,5)?(t="ifdef",yt+=5):(t=null,0===vt&&f('"ifdef"')),null===t&&("ifndef"===d.substr(yt,6)?(t="ifndef",yt+=6):(t=null,0===vt&&f('"ifndef"')),null===t&&("if"===d.substr(yt,2)?(t="if",yt+=2):(t=null,0===vt&&f('"if"')))),null!==t)if(null!==(r=y())){for(a=yt,n=[],/^[^\n]/.test(d.charAt(yt))?(o=d.charAt(yt),yt++):(o=null,0===vt&&f("[^\\n]"));null!==o;)n.push(o),/^[^\n]/.test(d.charAt(yt))?(o=d.charAt(yt),yt++):(o=null,0===vt&&f("[^\\n]"));null!==n&&(n=n.join("")),null===n&&(yt=a),null!==n?(null===(o=m())&&(o=g()),null!==o?u=[u,e,t,r,n,o]:(u=null,yt=s)):(u=null,yt=s)}else u=null,yt=s;else u=null,yt=s;else u=null,yt=s;else u=null,yt=s;return null!==u&&(u=new dt({type:"preprocessor",B:"#"+u[2],value:u[4]})),null===u&&(yt=i),wt[l]={b:yt,result:u},u}function E(){var e,t,r,n,o,i,s,a,l="preprocessor_else_if@"+yt,u=wt[l];if(u)return yt=u.b,u.result;if(s=i=yt,35===d.charCodeAt(yt)?(u="#",yt+=1):(u=null,0===vt&&f('"#"')),null!==u)if(null!==(e=null!==(e=y())?e:""))if("elif"===d.substr(yt,4)?(t="elif",yt+=4):(t=null,0===vt&&f('"elif"')),null!==t)if(null!==(r=y())){for(a=yt,n=[],/^[^\n]/.test(d.charAt(yt))?(o=d.charAt(yt),yt++):(o=null,0===vt&&f("[^\\n]"));null!==o;)n.push(o),/^[^\n]/.test(d.charAt(yt))?(o=d.charAt(yt),yt++):(o=null,0===vt&&f("[^\\n]"));null!==n&&(n=n.join("")),null===n&&(yt=a),null!==n?(null===(o=m())&&(o=g()),null!==o?u=[u,e,t,r,n,o]:(u=null,yt=s)):(u=null,yt=s)}else u=null,yt=s;else u=null,yt=s;else u=null,yt=s;else u=null,yt=s;return null!==u&&(u=new dt({type:"preprocessor",B:"#elif",value:u[4]})),null===u&&(yt=i),wt[l]={b:yt,result:u},u}function j(){var e,t,r,n,o,i,s="preprocessor_else@"+yt,a=wt[s];return a?(yt=a.b,a.result):(i=o=yt,35===d.charCodeAt(yt)?(a="#",yt+=1):(a=null,0===vt&&f('"#"')),null!==a?null!==(e=null!==(e=y())?e:"")?("else"===d.substr(yt,4)?(t="else",yt+=4):(t=null,0===vt&&f('"else"')),null!==t?null!==(r=null!==(r=l())?r:"")?null!==(n=m())?a=[a,e,t,r,n]:(a=null,yt=i):(a=null,yt=i):(a=null,yt=i)):(a=null,yt=i):(a=null,yt=i),null!==a&&(a=new dt({type:"preprocessor",B:"#else"})),null===a&&(yt=o),wt[s]={b:yt,result:a},a)}function P(){var e,t,r,n,o,i,s="preprocessor_end@"+yt,a=wt[s];return a?(yt=a.b,a.result):(i=yt,35===d.charCodeAt(yt)?(a="#",yt+=1):(a=null,0===vt&&f('"#"')),null!==a?null!==(e=null!==(e=y())?e:"")?("endif"===d.substr(yt,5)?(t="endif",yt+=5):(t=null,0===vt&&f('"endif"')),null!==t?null!==(r=null!==(r=l())?r:"")?(null===(n=m())&&(n=g()),null!==n?null!==(o=null!==(o=y())?o:"")?a=[a,e,t,r,n,o]:(a=null,yt=i):(a=null,yt=i)):(a=null,yt=i):(a=null,yt=i)):(a=null,yt=i):(a=null,yt=i),wt[s]={b:yt,result:a},a)}function I(){var e,t,r,n,o,i,s="preprocessor_external_branch@"+yt,a=wt[s];if(a)return yt=a.b,a.result;if(i=o=n=yt,null!==(a=M())?null!==(e=u())?a=[a,e]:(a=null,yt=i):(a=null,yt=i),null!==a){for(e=[],i=yt,null!==(t=E())?null!==(r=u())?t=[t,r]:(t=null,yt=i):(t=null,yt=i);null!==t;)e.push(t),i=yt,null!==(t=E())?null!==(r=u())?t=[t,r]:(t=null,yt=i):(t=null,yt=i);null!==e?(i=yt,null!==(t=j())?null!==(r=u())?t=[t,r]:(t=null,yt=i):(t=null,yt=i),null!==(t=null!==t?t:"")?null!==(r=P())?a=[a,e,t,r]:(a=null,yt=o):(a=null,yt=o)):(a=null,yt=o)}else a=null,yt=o;return null!==a&&(a=mt(a[0],a[1],a[2])),null===a&&(yt=n),wt[s]={b:yt,result:a},a}function r(){var e,t,r,n,o,i,s="preprocessor_statement_branch@"+yt,a=wt[s];if(a)return yt=a.b,a.result;if(i=o=n=yt,null!==(a=M())?null!==(e=D())?a=[a,e]:(a=null,yt=i):(a=null,yt=i),null!==a){for(e=[],i=yt,null!==(t=E())?null!==(r=D())?t=[t,r]:(t=null,yt=i):(t=null,yt=i);null!==t;)e.push(t),i=yt,null!==(t=E())?null!==(r=D())?t=[t,r]:(t=null,yt=i):(t=null,yt=i);null!==e?(i=yt,null!==(t=j())?null!==(r=D())?t=[t,r]:(t=null,yt=i):(t=null,yt=i),null!==(t=null!==t?t:"")?null!==(r=P())?a=[a,e,t,r]:(a=null,yt=o):(a=null,yt=o)):(a=null,yt=o)}else a=null,yt=o;return null!==a&&(a=mt(a[0],a[1],a[2])),null===a&&(yt=n),wt[s]={b:yt,result:a},a}function R(){var e,t,r,n="function_definition@"+yt,o=wt[n];return o?(yt=o.b,o.result):(r=t=yt,null!==(o=Q())?null!==(e=V())?o=[o,e]:(o=null,yt=r):(o=null,yt=r),null!==o&&(e=o[0],o=St=new dt({type:"function_declaration",name:e.name,ma:e.ma,l:e.l,body:o[1]})),null===o&&(yt=t),wt[n]={b:yt,result:o},o)}function V(){var e,t,r,n,o="compound_statement@"+yt,i=wt[o];return i?(yt=i.b,i.result):(n=i=yt,null!==(e=p())?null!==(t=null!==(t=D())?t:"")?null!==(r=N())?e=[e,t,r]:(e=null,yt=n):(e=null,yt=n):(e=null,yt=n),null!==e&&(e=e[1],St=new dt({type:"scope",C:[]}),e&&e.C&&(St.C=e.C),e=St),null===e&&(yt=i),wt[o]={b:yt,result:e},e)}function D(){var e,t,r,n,o="statement_list@"+yt,i=wt[o];if(i)return yt=i.b,i.result;if(n=r=yt,null!==(i=null!==(i=y())?i:"")){for(e=[],t=F();null!==t;)e.push(t),t=F();null!==e?null!==(t=null!==(t=y())?t:"")?i=[i,e,t]:(i=null,yt=n):(i=null,yt=n)}else i=null,yt=n;return null!==i&&(i={C:i[1]}),null===i&&(yt=r),wt[o]={b:yt,result:i},i}function F(){var e="statement_no_new_scope@"+yt,t=wt[e];return t?(yt=t.b,t.result):(null===(t=V())&&(null===(t=B())&&(t=r())),wt[e]={b:yt,result:t},t)}function _(){var e="statement_with_scope@"+yt,t=wt[e];return t?(yt=t.b,t.result):(null===(t=V())&&(null===(t=B())&&(t=r())),wt[e]={b:yt,result:t},t)}function B(){var e,t="simple_statement@"+yt,r=wt[t];return r?(yt=r.b,r.result):(e=yt,null===(r=X())&&(null===(r=K())&&(null===(r=U())&&(null===(r=Y())&&(null===(r=J())&&(null===(r=L())&&(null===(r=O())&&(r=A()))))))),null===r&&(yt=e),wt[t]={b:yt,result:r},r)}function U(){var e,t,r,n,o,i,s,a,l,u,c="selection_statement@"+yt,p=wt[c];return p?(yt=p.b,p.result):(l=a=yt,"if"===d.substr(yt,2)?(p="if",yt+=2):(p=null,0===vt&&f('"if"')),null!==p?null!==(e=h())?null!==(t=ct())?null!==(r=T())?null!==(n=_())?(u=yt,"else"===d.substr(yt,4)?(o="else",yt+=4):(o=null,0===vt&&f('"else"')),null!==o?null!==(i=null!==(i=y())?i:"")?null!==(s=_())?o=[o,i,s]:(o=null,yt=u):(o=null,yt=u):(o=null,yt=u),null!==(o=null!==o?o:"")?p=[p,e,t,r,n,o]:(p=null,yt=l)):(p=null,yt=l):(p=null,yt=l):(p=null,yt=l):(p=null,yt=l):(p=null,yt=l),null!==p&&(e=p[5],St=new dt({type:"if_statement",F:p[2],body:p[4]}),e&&(St.M=e[2]),p=St),null===p&&(yt=a),wt[c]={b:yt,result:p},p)}function z(){var e,t,r,n,o,i,s,a,l,u="for_loop@"+yt,c=wt[u];return c?(yt=c.b,c.result):(l=a=yt,"for"===d.substr(yt,3)?(c="for",yt+=3):(c=null,0===vt&&f('"for"')),null!==c?null!==(e=h())?(null===(t=K())&&(t=X()),null!==t?null!==(r=null!==(r=pt())?r:"")?null!==(n=v())?null!==(o=null!==(o=ct())?o:"")?null!==(i=T())?null!==(s=F())?c=[c,e,t,r,n,o,i,s]:(c=null,yt=l):(c=null,yt=l):(c=null,yt=l):(c=null,yt=l):(c=null,yt=l):(c=null,yt=l)):(c=null,yt=l):(c=null,yt=l),null!==c&&(c=new dt({type:"for_statement",H:c[2],F:c[3],Fa:c[5],body:c[7]})),null===c&&(yt=a),wt[u]={b:yt,result:c},c)}function W(){var e,t,r,n,o,i="while_statement@"+yt,s=wt[i];return s?(yt=s.b,s.result):(o=n=yt,"while"===d.substr(yt,5)?(s="while",yt+=5):(s=null,0===vt&&f('"while"')),null!==s?null!==(e=h())?null!==(t=pt())?null!==(r=T())?s=[s,e,t,r]:(s=null,yt=o):(s=null,yt=o):(s=null,yt=o):(s=null,yt=o),null!==s&&(s={F:s[2]}),null===s&&(yt=n),wt[i]={b:yt,result:s},s)}function H(){var e,t,r,n="while_loop@"+yt,o=wt[n];return o?(yt=o.b,o.result):(r=t=yt,null!==(o=W())?null!==(e=F())?o=[o,e]:(o=null,yt=r):(o=null,yt=r),null!==o&&(o=new dt({type:"while_statement",F:o[0].F,body:o[1]})),null===o&&(yt=t),wt[n]={b:yt,result:o},o)}function q(){var e,t,r,n,o="do_while@"+yt,i=wt[o];return i?(yt=i.b,i.result):(n=r=yt,"do"===d.substr(yt,2)?(i="do",yt+=2):(i=null,0===vt&&f('"do"')),null!==i?null!==(e=_())?null!==(t=W())?i=[i,e,t]:(i=null,yt=n):(i=null,yt=n):(i=null,yt=n),null!==i&&(i=new dt({type:"do_statement",F:i[2].F,body:i[1]})),null===i&&(yt=r),wt[o]={b:yt,result:i},i)}function Y(){var e="iteration_statement@"+yt,t=wt[e];return t?(yt=t.b,t.result):(null===(t=H())&&(null===(t=q())&&(t=z())),wt[e]={b:yt,result:t},t)}function J(){var e,t,r,n,o,i="jump_statement@"+yt,s=wt[i];return s?(yt=s.b,s.result):(o=n=yt,"return"===d.substr(yt,6)?(s="return",yt+=6):(s=null,0===vt&&f('"return"')),null!==s?null!==(e=null!==(e=y())?e:"")?null!==(t=ct())?null!==(r=v())?s=[s,e,t,r]:(s=null,yt=o):(s=null,yt=o):(s=null,yt=o):(s=null,yt=o),null!==s&&(s=new dt({type:"return",value:s[2]})),null===s&&(yt=n),null===s&&(o=n=yt,"continue"===d.substr(yt,8)?(s="continue",yt+=8):(s=null,0===vt&&f('"continue"')),null!==s?null!==(e=v())?s=[s,e]:(s=null,yt=o):(s=null,yt=o),null===s&&(o=yt,"break"===d.substr(yt,5)?(s="break",yt+=5):(s=null,0===vt&&f('"break"')),null!==s?null!==(e=v())?s=[s,e]:(s=null,yt=o):(s=null,yt=o),null===s&&(o=yt,"return"===d.substr(yt,6)?(s="return",yt+=6):(s=null,0===vt&&f('"return"')),null!==s?null!==(e=v())?s=[s,e]:(s=null,yt=o):(s=null,yt=o),null===s&&(r=t=o=yt,null!==(s="fs"==Ot?"":null)?("discard"===d.substr(yt,7)?(e="discard",yt+=7):(e=null,0===vt&&f('"discard"')),null!==e?s=[s,e]:(s=null,yt=r)):(s=null,yt=r),null!==s&&(s="discard"),null===s&&(yt=t),null!==s?null!==(e=v())?s=[s,e]:(s=null,yt=o):(s=null,yt=o)))),null!==s&&(s=new dt({type:s[0]})),null===s&&(yt=n)),wt[i]={b:yt,result:s},s)}function K(){var e,t,r,n="expression_statement@"+yt,o=wt[n];return o?(yt=o.b,o.result):(r=t=yt,null!==(o=null!==(o=ct())?o:"")?null!==(e=v())?o=[o,e]:(o=null,yt=r):(o=null,yt=r),null!==o&&(o=new dt({type:"expression",N:o[0]})),null===o&&(yt=t),wt[n]={b:yt,result:o},o)}function X(){var e,t,r,n,o,i,s,a,l,u,c,p="declaration@"+yt,h=wt[p];if(h)return yt=h.b,h.result;if(vt++,a=s=yt,null!==(h=Q())?null!==(e=v())?h=[h,e]:(h=null,yt=a):(h=null,yt=a),null!==h&&(h=h[0]),null===h&&(yt=s),null===h&&(a=s=yt,null!==(h=de())?null!==(e=y())?null!==(t=re())?null!==(r=v())?h=[h,e,t,r]:(h=null,yt=a):(h=null,yt=a):(h=null,yt=a):(h=null,yt=a),null!==h&&(h=new dt({type:"declarator",w:h[0],A:h[2]})),null===h&&(yt=s),null===h)){if(a=s=yt,null!==(h="vs"==Ot?"":null))if("invariant"===d.substr(yt,9)?(e="invariant",yt+=9):(e=null,0===vt&&f('"invariant"')),null!==e)if(null!==(t=y()))if(null!==(r=Te())){for(n=[],l=yt,null!==(o=b())?null!==(i=Te())?o=[o,i]:(o=null,yt=l):(o=null,yt=l);null!==o;)n.push(o),l=yt,null!==(o=b())?null!==(i=Te())?o=[o,i]:(o=null,yt=l):(o=null,yt=l);null!==n?null!==(o=v())?h=[h,e,t,r,n,o]:(h=null,yt=a):(h=null,yt=a)}else h=null,yt=a;else h=null,yt=a;else h=null,yt=a;else h=null,yt=a;null!==h&&(u=h[3],c=h[4],h=new dt({type:"invariant",Ea:[u].concat(c.map(function(e){return e[1]}))})),null===h&&(yt=s),null===h&&(a=s=yt,"precision"===d.substr(yt,9)?(h="precision",yt+=9):(h=null,0===vt&&f('"precision"')),null!==h?null!==(e=y())?null!==(t=ye())?null!==(r=y())?null!==(n=we())?null!==(o=v())?h=[h,e,t,r,n,o]:(h=null,yt=a):(h=null,yt=a):(h=null,yt=a):(h=null,yt=a):(h=null,yt=a):(h=null,yt=a),null!==h&&(h=new dt({type:"precision",precision:h[2],typeName:h[4]})),null===h&&(yt=s))}return 0===--vt&&null===h&&f("declaration"),wt[p]={b:yt,result:h},h}function Z(){var e,t,r,n,o,i,s="global_declaration@"+yt;return(i=wt[s])?(yt=i.b,i.result):(null===(i=X())&&(o=n=yt,null!==(i=ge())?null!==(e=y())?null!==(t=re())?null!==(r=v())?i=[i,e,t,r]:(i=null,yt=o):(i=null,yt=o):(i=null,yt=o):(i=null,yt=o),null!==i&&(i=new dt({type:"declarator",w:i[0],A:i[2]})),null===i&&(yt=n),null===i&&(o=n=yt,null!==(i=me())?null!==(e=y())?null!==(t=oe())?null!==(r=v())?i=[i,e,t,r]:(i=null,yt=o):(i=null,yt=o):(i=null,yt=o):(i=null,yt=o),null!==i&&(i=new dt({type:"declarator",w:i[0],A:i[2]})),null===i&&(yt=n))),wt[s]={b:yt,result:i},i)}function $(){var e,t,r,n,o,i,s,a,l="function_prototype_parameter_list@"+yt,u=wt[l];if(u)return yt=u.b,u.result;if("void"===d.substr(yt,4)?(u="void",yt+=4):(u=null,0===vt&&f('"void"')),null===u){if(o=n=yt,null!==(u=te())){for(e=[],i=yt,null!==(t=b())?null!==(r=te())?t=[t,r]:(t=null,yt=i):(t=null,yt=i);null!==t;)e.push(t),i=yt,null!==(t=b())?null!==(r=te())?t=[t,r]:(t=null,yt=i):(t=null,yt=i);null!==e?u=[u,e]:(u=null,yt=o)}else u=null,yt=o;null!==u&&(s=u[0],a=u[1],u=[s].concat(a.map(function(e){return e[1]}))),null===u&&(yt=n)}return wt[l]={b:yt,result:u},u}function Q(){var e,t,r,n,o,i,s,a="function_prototype@"+yt,l=wt[a];return l?(yt=l.b,l.result):(s=i=yt,null===(l=xe())&&(l=he()),null!==l?null!==(e=y())?null!==(t=Te())?null!==(r=h())?null!==(n=null!==(n=$())?n:"")?null!==(o=T())?l=[l,e,t,r,n,o]:(l=null,yt=s):(l=null,yt=s):(l=null,yt=s):(l=null,yt=s):(l=null,yt=s):(l=null,yt=s),null!==l&&(e=l[4],St=new dt({type:"function_prototype",name:l[2].name,ma:l[0],l:e}),"void"!=e&&e||(St.l=[]),l=St),null===l&&(yt=i),wt[a]={b:yt,result:l},l)}function ee(){var e="parameter_qualifier@"+yt,t=wt[e];return t?(yt=t.b,t.result):("inout"===d.substr(yt,5)?(t="inout",yt+=5):(t=null,0===vt&&f('"inout"')),null===t&&("in"===d.substr(yt,2)?(t="in",yt+=2):(t=null,0===vt&&f('"in"')),null===t&&("out"===d.substr(yt,3)?(t="out",yt+=3):(t=null,0===vt&&f('"out"')))),wt[e]={b:yt,result:t},t)}function te(){var e,t,r,n,o,i,s,a,l,u,c,p="parameter_declaration@"+yt,h=wt[p];return h?(yt=h.b,h.result):(c=u=h=yt,null!==(e=ve())?null!==(t=y())?e=[e,t]:(e=null,yt=c):(e=null,yt=c),null!==(e=null!==e?e:"")?(c=yt,null!==(t=ee())?null!==(r=y())?t=[t,r]:(t=null,yt=c):(t=null,yt=c),null!==(t=null!==t?t:"")?(c=yt,null!==(r=ye())?null!==(n=y())?r=[r,n]:(r=null,yt=c):(r=null,yt=c),null!==(r=null!==r?r:"")?null!==(n=we())?null!==(o=y())?null!==(i=Te())?(c=yt,null!==(s=x())?null!==(a=ut())?null!==(l=w())?s=[s,a,l]:(s=null,yt=c):(s=null,yt=c):(s=null,yt=c),null!==(s=null!==s?s:"")?e=[e,t,r,n,o,i,s]:(e=null,yt=u)):(e=null,yt=u):(e=null,yt=u):(e=null,yt=u):(e=null,yt=u)):(e=null,yt=u)):(e=null,yt=u),null!==e&&(t=e[0],r=e[1],n=e[2],o=e[6],e=new dt({type:"parameter",Ka:e[3],name:e[5].name}),t&&(e.qa=t[0]),r&&(e.la=r[0]),n&&(e.precision=n[0]),o&&(e.$=o[1]),e=e.qa&&e.la&&"in"!=e.la?null:e),null===e&&(yt=h),wt[p]={b:yt,result:e},e)}function re(){var e,t,r,n,o,i,s,a,l="init_declarator_list@"+yt,u=wt[l];if(u)return yt=u.b,u.result;if(o=n=yt,null!==(u=ue())){for(e=[],i=yt,null!==(t=b())?null!==(r=ue())?t=[t,r]:(t=null,yt=i):(t=null,yt=i);null!==t;)e.push(t),i=yt,null!==(t=b())?null!==(r=ue())?t=[t,r]:(t=null,yt=i):(t=null,yt=i);null!==e?u=[u,e]:(u=null,yt=o)}else u=null,yt=o;return null!==u&&(s=u[0],a=u[1],u=[s].concat(a.map(function(e){return e[1]}))),null===u&&(yt=n),wt[l]={b:yt,result:u},u}function ne(){var e,t,r,n,o,i,s,a,l="declarator_list@"+yt,u=wt[l];if(u)return yt=u.b,u.result;if(o=n=yt,null!==(u=le())){for(e=[],i=yt,null!==(t=b())?null!==(r=le())?t=[t,r]:(t=null,yt=i):(t=null,yt=i);null!==t;)e.push(t),i=yt,null!==(t=b())?null!==(r=le())?t=[t,r]:(t=null,yt=i):(t=null,yt=i);null!==e?u=[u,e]:(u=null,yt=o)}else u=null,yt=o;return null!==u&&(s=u[0],a=u[1],u=[s].concat(a.map(function(e){return e[1]}))),null===u&&(yt=n),wt[l]={b:yt,result:u},u}function oe(){var e,t,r,n,o,i,s,a,l="declarator_list_no_array@"+yt,u=wt[l];if(u)return yt=u.b,u.result;if(o=n=yt,null!==(u=se())){for(e=[],i=yt,null!==(t=b())?null!==(r=se())?t=[t,r]:(t=null,yt=i):(t=null,yt=i);null!==t;)e.push(t),i=yt,null!==(t=b())?null!==(r=se())?t=[t,r]:(t=null,yt=i):(t=null,yt=i);null!==e?u=[u,e]:(u=null,yt=o)}else u=null,yt=o;return null!==u&&(s=u[0],a=u[1],u=[s].concat(a.map(function(e){return e[1]}))),null===u&&(yt=n),wt[l]={b:yt,result:u},u}function ie(){var e,t,r,n,o,i,s,a,l="declarator_list_arrays_have_size@"+yt,u=wt[l];if(u)return yt=u.b,u.result;if(o=n=yt,null!==(u=ae())){for(e=[],i=yt,null!==(t=b())?null!==(r=ae())?t=[t,r]:(t=null,yt=i):(t=null,yt=i);null!==t;)e.push(t),i=yt,null!==(t=b())?null!==(r=ae())?t=[t,r]:(t=null,yt=i):(t=null,yt=i);null!==e?u=[u,e]:(u=null,yt=o)}else u=null,yt=o;return null!==u&&(s=u[0],a=u[1],u=[s].concat(a.map(function(e){return e[1]}))),null===u&&(yt=n),wt[l]={b:yt,result:u},u}function se(){var e,t="declarator_no_array@"+yt,r=wt[t];return r?(yt=r.b,r.result):(e=yt,null!==(r=Te())&&(r=new dt({type:"declarator_item",name:r})),null===r&&(yt=e),wt[t]={b:yt,result:r},r)}function ae(){var e,t,r,n,o,i="declarator_array_with_size@"+yt,s=wt[i];return s?(yt=s.b,s.result):(o=n=yt,null!==(s=Te())?null!==(e=x())?null!==(t=ut())?null!==(r=w())?s=[s,e,t,r]:(s=null,yt=o):(s=null,yt=o):(s=null,yt=o):(s=null,yt=o),null!==s&&(s=new dt({type:"declarator_item",name:s[0],$:s[2],isArray:!0})),null===s&&(yt=n),null===s&&(s=se()),wt[i]={b:yt,result:s},s)}function le(){var e,t,r,n,o="declarator@"+yt,i=wt[o];return i?(yt=i.b,i.result):(n=r=yt,null!==(i=Te())?null!==(e=x())?null!==(t=w())?i=[i,e,t]:(i=null,yt=n):(i=null,yt=n):(i=null,yt=n),null!==i&&(i=new dt({type:"declarator_item",name:i[0],isArray:!0})),null===i&&(yt=r),null===i&&(i=ae()),wt[o]={b:yt,result:i},i)}function ue(){var e,t,r,n,o="init_declarator@"+yt,i=wt[o];return i?(yt=i.b,i.result):(n=r=yt,null!==(i=Te())?null!==(e=s())?null!==(t=ut())?i=[i,e,t]:(i=null,yt=n):(i=null,yt=n):(i=null,yt=n),null!==i&&(i=new dt({type:"declarator_item",name:i[0],H:i[2]})),null===i&&(yt=r),null===i&&(i=le()),wt[o]={b:yt,result:i},i)}function ce(){var e,t,r,n,o,i,s="member_list@"+yt,a=wt[s];if(a)return yt=a.b,a.result;if(i=o=yt,null!==(e=de())?null!==(t=y())?null!==(r=ie())?null!==(n=v())?e=[e,t,r,n]:(e=null,yt=i):(e=null,yt=i):(e=null,yt=i):(e=null,yt=i),null!==e)for(a=[];null!==e;)a.push(e),i=yt,null!==(e=de())?null!==(t=y())?null!==(r=ie())?null!==(n=v())?e=[e,t,r,n]:(e=null,yt=i):(e=null,yt=i):(e=null,yt=i):(e=null,yt=i);else a=null;return null!==a&&(a=a.map(function(e){return new dt({type:"declarator",w:e[0],A:e[2]})})),null===a&&(yt=o),wt[s]={b:yt,result:a},a}function pe(){var e,t,r,n,o,i,s,a,l,u="struct_definition@"+yt,c=wt[u];return c?(yt=c.b,c.result):(o=l=c=yt,null===(e=be())&&(e=fe()),null!==e?null!==(t=y())?e=[e,t]:(e=null,yt=o):(e=null,yt=o),null!==(e=null!==e?e:"")?("struct"===d.substr(yt,6)?(t="struct",yt+=6):(t=null,0===vt&&f('"struct"')),null!==t?(o=yt,null!==(r=y())?null!==(n=Te())?r=[r,n]:(r=null,yt=o):(r=null,yt=o),null!==(r=null!==r?r:"")?null!==(n=p())?null!==(o=ce())?null!==(i=N())?null!==(s=null!==(s=ne())?s:"")?null!==(a=v())?e=[e,t,r,n,o,i,s,a]:(e=null,yt=l):(e=null,yt=l):(e=null,yt=l):(e=null,yt=l):(e=null,yt=l):(e=null,yt=l)):(e=null,yt=l)):(e=null,yt=l),null!==e&&(t=e[0],r=e[2],n=e[6],e=new dt({type:"struct_definition",Ia:e[4]}),t&&(e.qualifier=t[0]),r&&(e.name=r[1].name,Tt[e.name]=e),n&&(e.A=n)),null===e&&(yt=c),wt[u]={b:yt,result:e},e)}function he(){var e,t,r,n,o="precision_type@"+yt,i=wt[o];return i?(yt=i.b,i.result):(n=r=i=yt,null!==(e=ye())?null!==(t=y())?e=[e,t]:(e=null,yt=n):(e=null,yt=n),null!==(e=null!==e?e:"")?null!==(t=we())?e=[e,t]:(e=null,yt=r):(e=null,yt=r),null!==e&&(t=e[0],e=new dt({type:"type",name:e[1]}),t&&(e.precision=t[0])),null===e&&(yt=i),wt[o]={b:yt,result:e},e)}function de(){var e,t,r,n,o="locally_specified_type@"+yt,i=wt[o];return i?(yt=i.b,i.result):(vt++,n=r=i=yt,null!==(e=ve())?null!==(t=y())?e=[e,t]:(e=null,yt=n):(e=null,yt=n),null!==(e=null!==e?e:"")?null!==(t=he())?e=[e,t]:(e=null,yt=r):(e=null,yt=r),null!==e&&(t=e[0],e=e[1],t&&(e.qualifier=t[0])),null===e&&(yt=i),0===--vt&&null===e&&f("locally specified type"),wt[o]={b:yt,result:e},e)}function fe(){var e,t,r,n="attribute_qualifier@"+yt,o=wt[n];return o?(yt=o.b,o.result):(r=t=yt,null!==(o="vs"==Ot?"":null)?("attribute"===d.substr(yt,9)?(e="attribute",yt+=9):(e=null,0===vt&&f('"attribute"')),null!==e?o=[o,e]:(o=null,yt=r)):(o=null,yt=r),null!==o&&(o="attribute"),null===o&&(yt=t),wt[n]={b:yt,result:o},o)}function me(){var e,t,r,n,o="attribute_type@"+yt,i=wt[o];return i?(yt=i.b,i.result):(vt++,n=r=yt,null!==(i=fe())?null!==(e=y())?null!==(t=he())?i=[i,e,t]:(i=null,yt=n):(i=null,yt=n):(i=null,yt=n),null!==i&&((e=i[2]).qualifier=i[0],i=e),null===i&&(yt=r),0===--vt&&null===i&&f("locally specified type"),wt[o]={b:yt,result:i},i)}function ge(){var e,t,r,n,o="fully_specified_type@"+yt,i=wt[o];return i?(yt=i.b,i.result):(vt++,n=r=i=yt,null!==(e=be())?null!==(t=y())?e=[e,t]:(e=null,yt=n):(e=null,yt=n),null!==(e=null!==e?e:"")?null!==(t=he())?e=[e,t]:(e=null,yt=r):(e=null,yt=r),null!==e&&(t=e[0],e=e[1],t&&(e.qualifier=t[0])),null===e&&(yt=i),0===--vt&&null===e&&f("fully specified type"),wt[o]={b:yt,result:e},e)}function ye(){var e="precision_qualifier@"+yt,t=wt[e];return t?(yt=t.b,t.result):(vt++,"highp"===d.substr(yt,5)?(t="highp",yt+=5):(t=null,0===vt&&f('"highp"')),null===t&&("mediump"===d.substr(yt,7)?(t="mediump",yt+=7):(t=null,0===vt&&f('"mediump"')),null===t&&("lowp"===d.substr(yt,4)?(t="lowp",yt+=4):(t=null,0===vt&&f('"lowp"')))),0===--vt&&null===t&&f("precision qualifier"),wt[e]={b:yt,result:t},t)}function ve(){var e="const_qualifier@"+yt,t=wt[e];return t?(yt=t.b,t.result):("const"===d.substr(yt,5)?(t="const",yt+=5):(t=null,0===vt&&f('"const"')),wt[e]={b:yt,result:t},t)}function be(){var e,t,r,n,o="type_qualifier@"+yt,i=wt[o];return i?(yt=i.b,i.result):(vt++,null===(i=ve())&&("varying"===d.substr(yt,7)?(i="varying",yt+=7):(i=null,0===vt&&f('"varying"')),null===i&&(n=r=yt,"invariant"===d.substr(yt,9)?(i="invariant",yt+=9):(i=null,0===vt&&f('"invariant"')),null!==i?null!==(e=y())?("varying"===d.substr(yt,7)?(t="varying",yt+=7):(t=null,0===vt&&f('"varying"')),null!==t?i=[i,e,t]:(i=null,yt=n)):(i=null,yt=n):(i=null,yt=n),null!==i&&(i="invariant varying"),null===i&&(yt=r),null===i&&("uniform"===d.substr(yt,7)?(i="uniform",yt+=7):(i=null,0===vt&&f('"uniform"'))))),0===--vt&&null===i&&f("type qualifier"),wt[o]={b:yt,result:i},i)}function xe(){var e,t="void_type@"+yt,r=wt[t];return r?(yt=r.b,r.result):(vt++,e=yt,"void"===d.substr(yt,4)?(r="void",yt+=4):(r=null,0===vt&&f('"void"')),null!==r&&(r=new dt({type:"type",name:"void"})),null===r&&(yt=e),0===--vt&&null===r&&f("void"),wt[t]={b:yt,result:r},r)}function we(){var e,t="type_name@"+yt,r=wt[t];return r?(yt=r.b,r.result):(vt++,"float"===d.substr(yt,5)?(r="float",yt+=5):(r=null,0===vt&&f('"float"')),null===r&&("int"===d.substr(yt,3)?(r="int",yt+=3):(r=null,0===vt&&f('"int"')),null===r&&("bool"===d.substr(yt,4)?(r="bool",yt+=4):(r=null,0===vt&&f('"bool"')),null===r&&("sampler2D"===d.substr(yt,9)?(r="sampler2D",yt+=9):(r=null,0===vt&&f('"sampler2D"')),null===r&&("samplerCube"===d.substr(yt,11)?(r="samplerCube",yt+=11):(r=null,0===vt&&f('"samplerCube"')),null===r&&(null===(r=Oe())&&(null===(r=Se())&&(e=yt,null!==(r=Te())&&(r=r.name in Tt?r.name:null),null===r&&(yt=e)))))))),0===--vt&&null===r&&f("type name"),wt[t]={b:yt,result:r},r)}function Te(){var e,t,r,n,o,i="identifier@"+yt,s=wt[i];if(s)return yt=s.b,s.result;if(vt++,t=o=n=yt,vt++,r=yt,null!==(s=Ne())?(/^[^A-Za-z_0-9]/.test(d.charAt(yt))?(e=d.charAt(yt),yt++):(e=null,0===vt&&f("[^A-Za-z_0-9]")),null!==e?s=[s,e]:(s=null,yt=r)):(s=null,yt=r),vt--,null===s?s="":(s=null,yt=t),null!==s)if(/^[A-Za-z_]/.test(d.charAt(yt))?(e=d.charAt(yt),yt++):(e=null,0===vt&&f("[A-Za-z_]")),null!==e){for(t=[],/^[A-Za-z_0-9]/.test(d.charAt(yt))?(r=d.charAt(yt),yt++):(r=null,0===vt&&f("[A-Za-z_0-9]"));null!==r;)t.push(r),/^[A-Za-z_0-9]/.test(d.charAt(yt))?(r=d.charAt(yt),yt++):(r=null,0===vt&&f("[A-Za-z_0-9]"));null!==t?s=[s,e,t]:(s=null,yt=o)}else s=null,yt=o;else s=null,yt=o;return null!==s&&(s=new dt({type:"identifier",name:s[1]+s[2].join("")})),null===s&&(yt=n),0===--vt&&null===s&&f("identifier"),wt[i]={b:yt,result:s},s}function Ne(){var e="keyword@"+yt,t=wt[e];return t?(yt=t.b,t.result):(vt++,"attribute"===d.substr(yt,9)?(t="attribute",yt+=9):(t=null,0===vt&&f('"attribute"')),null===t&&("const"===d.substr(yt,5)?(t="const",yt+=5):(t=null,0===vt&&f('"const"')),null===t&&("bool"===d.substr(yt,4)?(t="bool",yt+=4):(t=null,0===vt&&f('"bool"')),null===t&&("float"===d.substr(yt,5)?(t="float",yt+=5):(t=null,0===vt&&f('"float"')),null===t&&("int"===d.substr(yt,3)?(t="int",yt+=3):(t=null,0===vt&&f('"int"')),null===t&&("break"===d.substr(yt,5)?(t="break",yt+=5):(t=null,0===vt&&f('"break"')),null===t&&("continue"===d.substr(yt,8)?(t="continue",yt+=8):(t=null,0===vt&&f('"continue"')),null===t&&("do"===d.substr(yt,2)?(t="do",yt+=2):(t=null,0===vt&&f('"do"')),null===t&&("else"===d.substr(yt,4)?(t="else",yt+=4):(t=null,0===vt&&f('"else"')),null===t&&("for"===d.substr(yt,3)?(t="for",yt+=3):(t=null,0===vt&&f('"for"')),null===t&&("if"===d.substr(yt,2)?(t="if",yt+=2):(t=null,0===vt&&f('"if"')),null===t&&("discard"===d.substr(yt,7)?(t="discard",yt+=7):(t=null,0===vt&&f('"discard"')),null===t&&("return"===d.substr(yt,6)?(t="return",yt+=6):(t=null,0===vt&&f('"return"')),null===t&&(null===(t=Oe())&&(null===(t=Se())&&("in"===d.substr(yt,2)?(t="in",yt+=2):(t=null,0===vt&&f('"in"')),null===t&&("out"===d.substr(yt,3)?(t="out",yt+=3):(t=null,0===vt&&f('"out"')),null===t&&("inout"===d.substr(yt,5)?(t="inout",yt+=5):(t=null,0===vt&&f('"inout"')),null===t&&("uniform"===d.substr(yt,7)?(t="uniform",yt+=7):(t=null,0===vt&&f('"uniform"')),null===t&&("varying"===d.substr(yt,7)?(t="varying",yt+=7):(t=null,0===vt&&f('"varying"')),null===t&&("sampler2D"===d.substr(yt,9)?(t="sampler2D",yt+=9):(t=null,0===vt&&f('"sampler2D"')),null===t&&("samplerCube"===d.substr(yt,11)?(t="samplerCube",yt+=11):(t=null,0===vt&&f('"samplerCube"')),null===t&&("struct"===d.substr(yt,6)?(t="struct",yt+=6):(t=null,0===vt&&f('"struct"')),null===t&&("void"===d.substr(yt,4)?(t="void",yt+=4):(t=null,0===vt&&f('"void"')),null===t&&("while"===d.substr(yt,5)?(t="while",yt+=5):(t=null,0===vt&&f('"while"')),null===t&&("highp"===d.substr(yt,5)?(t="highp",yt+=5):(t=null,0===vt&&f('"highp"')),null===t&&("mediump"===d.substr(yt,7)?(t="mediump",yt+=7):(t=null,0===vt&&f('"mediump"')),null===t&&("lowp"===d.substr(yt,4)?(t="lowp",yt+=4):(t=null,0===vt&&f('"lowp"')),null===t&&("true"===d.substr(yt,4)?(t="true",yt+=4):(t=null,0===vt&&f('"true"')),null===t&&("false"===d.substr(yt,5)?(t="false",yt+=5):(t=null,0===vt&&f('"false"'))))))))))))))))))))))))))))))),0===--vt&&null===t&&f("keyword"),wt[e]={b:yt,result:t},t)}function Oe(){var e,t,r,n,o="vector@"+yt,i=wt[o];return i?(yt=i.b,i.result):(n=r=yt,/^[bi]/.test(d.charAt(yt))?(i=d.charAt(yt),yt++):(i=null,0===vt&&f("[bi]")),null!==(i=null!==i?i:"")?("vec"===d.substr(yt,3)?(e="vec",yt+=3):(e=null,0===vt&&f('"vec"')),null!==e?(/^[234]/.test(d.charAt(yt))?(t=d.charAt(yt),yt++):(t=null,0===vt&&f("[234]")),null!==t?i=[i,e,t]:(i=null,yt=n)):(i=null,yt=n)):(i=null,yt=n),null!==i&&(i=i.join("")),null===i&&(yt=r),wt[o]={b:yt,result:i},i)}function Se(){var e,t,r,n="matrix@"+yt,o=wt[n];return o?(yt=o.b,o.result):(r=t=yt,"mat"===d.substr(yt,3)?(o="mat",yt+=3):(o=null,0===vt&&f('"mat"')),null!==o?(/^[234]/.test(d.charAt(yt))?(e=d.charAt(yt),yt++):(e=null,0===vt&&f("[234]")),null!==e?o=[o,e]:(o=null,yt=r)):(o=null,yt=r),null!==o&&(o=o.join("")),null===o&&(yt=t),wt[n]={b:yt,result:o},o)}function Ce(){var e,t,r,n,o="single_underscore_identifier@"+yt,i=wt[o];if(i)return yt=i.b,i.result;for(n=yt,i=[],/^[A-Za-z0-9]/.test(d.charAt(yt))?(e=d.charAt(yt),yt++):(e=null,0===vt&&f("[A-Za-z0-9]"));null!==e;)i.push(e),/^[A-Za-z0-9]/.test(d.charAt(yt))?(e=d.charAt(yt),yt++):(e=null,0===vt&&f("[A-Za-z0-9]"));if(null!==i)if(95===d.charCodeAt(yt)?(e="_",yt+=1):(e=null,0===vt&&f('"_"')),null!==e){if(/^[A-Za-z0-9]/.test(d.charAt(yt))?(r=d.charAt(yt),yt++):(r=null,0===vt&&f("[A-Za-z0-9]")),null!==r)for(t=[];null!==r;)t.push(r),/^[A-Za-z0-9]/.test(d.charAt(yt))?(r=d.charAt(yt),yt++):(r=null,0===vt&&f("[A-Za-z0-9]"));else t=null;null!==t?i=[i,e,t]:(i=null,yt=n)}else i=null,yt=n;else i=null,yt=n;return wt[o]={b:yt,result:i},i}function Ge(){var e,t,r,n,o,i="int_constant@"+yt,s=wt[i];if(s)return yt=s.b,s.result;if(o=n=yt,/^[1-9]/.test(d.charAt(yt))?(s=d.charAt(yt),yt++):(s=null,0===vt&&f("[1-9]")),null!==s){for(e=[],/^[0-9]/.test(d.charAt(yt))?(t=d.charAt(yt),yt++):(t=null,0===vt&&f("[0-9]"));null!==t;)e.push(t),/^[0-9]/.test(d.charAt(yt))?(t=d.charAt(yt),yt++):(t=null,0===vt&&f("[0-9]"));null!==e?s=[s,e]:(s=null,yt=o)}else s=null,yt=o;if(null!==s&&(s=new dt({type:"int",value:parseInt([s[0]].concat(s[1]).join(""),10)})),null===s&&(yt=n),null===s){if(o=n=yt,48===d.charCodeAt(yt)?(s="0",yt+=1):(s=null,0===vt&&f('"0"')),null!==s)if(/^[Xx]/.test(d.charAt(yt))?(e=d.charAt(yt),yt++):(e=null,0===vt&&f("[Xx]")),null!==e){if(/^[0-9A-Fa-f]/.test(d.charAt(yt))?(r=d.charAt(yt),yt++):(r=null,0===vt&&f("[0-9A-Fa-f]")),null!==r)for(t=[];null!==r;)t.push(r),/^[0-9A-Fa-f]/.test(d.charAt(yt))?(r=d.charAt(yt),yt++):(r=null,0===vt&&f("[0-9A-Fa-f]"));else t=null;null!==t?s=[s,e,t]:(s=null,yt=o)}else s=null,yt=o;else s=null,yt=o;if(null!==s&&(s=new dt({type:"int",value:parseInt(s[2].join(""),16)})),null===s&&(yt=n),null===s){if(o=n=yt,48===d.charCodeAt(yt)?(s="0",yt+=1):(s=null,0===vt&&f('"0"')),null!==s){if(/^[0-7]/.test(d.charAt(yt))?(t=d.charAt(yt),yt++):(t=null,0===vt&&f("[0-7]")),null!==t)for(e=[];null!==t;)e.push(t),/^[0-7]/.test(d.charAt(yt))?(t=d.charAt(yt),yt++):(t=null,0===vt&&f("[0-7]"));else e=null;null!==e?s=[s,e]:(s=null,yt=o)}else s=null,yt=o;null!==s&&(s=new dt({type:"int",value:parseInt(s[1].join(""),8)})),null===s&&(yt=n),null===s&&(n=yt,48===d.charCodeAt(yt)?(s="0",yt+=1):(s=null,0===vt&&f('"0"')),null!==s&&(s=new dt({type:"int",value:0})),null===s&&(yt=n))}}return wt[i]={b:yt,result:s},s}function ke(){var e,t,r,n,o,i="float_constant@"+yt,s=wt[i];if(s)return yt=s.b,s.result;for(o=s=yt,e=[],/^[0-9]/.test(d.charAt(yt))?(t=d.charAt(yt),yt++):(t=null,0===vt&&f("[0-9]"));null!==t;)e.push(t),/^[0-9]/.test(d.charAt(yt))?(t=d.charAt(yt),yt++):(t=null,0===vt&&f("[0-9]"));if(null!==e)if(46===d.charCodeAt(yt)?(t=".",yt+=1):(t=null,0===vt&&f('"."')),null!==t){if(/^[0-9]/.test(d.charAt(yt))?(n=d.charAt(yt),yt++):(n=null,0===vt&&f("[0-9]")),null!==n)for(r=[];null!==n;)r.push(n),/^[0-9]/.test(d.charAt(yt))?(n=d.charAt(yt),yt++):(n=null,0===vt&&f("[0-9]"));else r=null;null!==r?null!==(n=null!==(n=Ae())?n:"")?e=[e,t,r,n]:(e=null,yt=o):(e=null,yt=o)}else e=null,yt=o;else e=null,yt=o;if(null===e){if(o=yt,/^[0-9]/.test(d.charAt(yt))?(t=d.charAt(yt),yt++):(t=null,0===vt&&f("[0-9]")),null!==t)for(e=[];null!==t;)e.push(t),/^[0-9]/.test(d.charAt(yt))?(t=d.charAt(yt),yt++):(t=null,0===vt&&f("[0-9]"));else e=null;if(null!==e)if(46===d.charCodeAt(yt)?(t=".",yt+=1):(t=null,0===vt&&f('"."')),null!==t){for(r=[],/^[0-9]/.test(d.charAt(yt))?(n=d.charAt(yt),yt++):(n=null,0===vt&&f("[0-9]"));null!==n;)r.push(n),/^[0-9]/.test(d.charAt(yt))?(n=d.charAt(yt),yt++):(n=null,0===vt&&f("[0-9]"));null!==r?null!==(n=null!==(n=Ae())?n:"")?e=[e,t,r,n]:(e=null,yt=o):(e=null,yt=o)}else e=null,yt=o;else e=null,yt=o}if(null!==e&&(e[0]=e[0].join(""),e[2]=e[2].join(""),e=new dt({type:"float",value:parseFloat(e.join(""))})),null===e&&(yt=s),null===e){if(o=s=yt,/^[0-9]/.test(d.charAt(yt))?(t=d.charAt(yt),yt++):(t=null,0===vt&&f("[0-9]")),null!==t)for(e=[];null!==t;)e.push(t),/^[0-9]/.test(d.charAt(yt))?(t=d.charAt(yt),yt++):(t=null,0===vt&&f("[0-9]"));else e=null;null!==e?null!==(t=Ae())?e=[e,t]:(e=null,yt=o):(e=null,yt=o),null!==e&&(e=new dt({type:"float",value:parseFloat(e[0].join("")+e[1])})),null===e&&(yt=s)}return wt[i]={b:yt,result:e},e}function Ae(){var e,t,r,n,o,i="float_exponent@"+yt,s=wt[i];if(s)return yt=s.b,s.result;if(o=n=yt,/^[Ee]/.test(d.charAt(yt))?(s=d.charAt(yt),yt++):(s=null,0===vt&&f("[Ee]")),null!==s)if(/^[+\-]/.test(d.charAt(yt))?(e=d.charAt(yt),yt++):(e=null,0===vt&&f("[+\\-]")),null!==(e=null!==e?e:"")){if(/^[0-9]/.test(d.charAt(yt))?(r=d.charAt(yt),yt++):(r=null,0===vt&&f("[0-9]")),null!==r)for(t=[];null!==r;)t.push(r),/^[0-9]/.test(d.charAt(yt))?(r=d.charAt(yt),yt++):(r=null,0===vt&&f("[0-9]"));else t=null;null!==t?s=[s,e,t]:(s=null,yt=o)}else s=null,yt=o;else s=null,yt=o;return null!==s&&(s=["e",s[1]].concat(s[2]).join("")),null===s&&(yt=n),wt[i]={b:yt,result:s},s}function Le(){var e,t,r,n,o="paren_expression@"+yt,i=wt[o];return i?(yt=i.b,i.result):(n=r=yt,null!==(i=h())?null!==(e=ct())?null!==(t=T())?i=[i,e,t]:(i=null,yt=n):(i=null,yt=n):(i=null,yt=n),null!==i&&(i=i[1]),null===i&&(yt=r),wt[o]={b:yt,result:i},i)}function Me(){var e,t="bool_constant@"+yt,r=wt[t];return r?(yt=r.b,r.result):(e=yt,"true"===d.substr(yt,4)?(r="true",yt+=4):(r=null,0===vt&&f('"true"')),null===r&&("false"===d.substr(yt,5)?(r="false",yt+=5):(r=null,0===vt&&f('"false"'))),null!==r&&(r=new dt({type:"bool",value:"true"==r})),null===r&&(yt=e),wt[t]={b:yt,result:r},r)}function Ee(){var e="primary_expression@"+yt,t=wt[e];return t?(yt=t.b,t.result):(null===(t=De())&&(null===(t=Te())&&(null===(t=ke())&&(null===(t=Ge())&&(null===(t=Me())&&(t=Le()))))),wt[e]={b:yt,result:t},t)}function je(){var e,t,r,n,o="index_accessor@"+yt,i=wt[o];return i?(yt=i.b,i.result):(n=r=yt,null!==(i=x())?null!==(e=ct())?null!==(t=w())?i=[i,e,t]:(i=null,yt=n):(i=null,yt=n):(i=null,yt=n),null!==i&&(i=new dt({type:"accessor",index:i[1]})),null===i&&(yt=r),wt[o]={b:yt,result:i},i)}function Pe(){var e,t,r,n="field_selector@"+yt,o=wt[n];return o?(yt=o.b,o.result):(r=t=yt,46===d.charCodeAt(yt)?(o=".",yt+=1):(o=null,0===vt&&f('"."')),null!==o?null!==(e=Te())?o=[o,e]:(o=null,yt=r):(o=null,yt=r),null!==o&&(o=new dt({type:"field_selector",selection:o[1].name})),null===o&&(yt=t),wt[n]={b:yt,result:o},o)}function Ie(){var e,t,r,n,o="postfix_expression@"+yt,i=wt[o];if(i)return yt=i.b,i.result;if(n=i=yt,null!==(e=Ee())){for(t=[],null===(r=Pe())&&(r=je());null!==r;)t.push(r),null===(r=Pe())&&(r=je());null!==t?e=[e,t]:(e=null,yt=n)}else e=null,yt=n;if(null!==e)for(t=e[1],e=e[0],r=0;r<t.length;r++)e=new dt({type:"postfix",j:t[r],N:e});return null===e&&(yt=i),wt[o]={b:yt,result:e},e}function Re(){var e,t,r,n,o,i,s="postfix_expression_no_repeat@"+yt,a=wt[s];if(a)return yt=a.b,a.result;if(i=a=yt,null!==(e=Ie()))if(null!==(t=null!==(t=y())?t:""))if("++"===d.substr(yt,2)?(r="++",yt+=2):(r=null,0===vt&&f('"++"')),null===r&&("--"===d.substr(yt,2)?(r="--",yt+=2):(r=null,0===vt&&f('"--"'))),null!==(r=null!==r?r:"")){for(n=[],null===(o=Pe())&&(o=je());null!==o;)n.push(o),null===(o=Pe())&&(o=je());null!==n?e=[e,t,r,n]:(e=null,yt=i)}else e=null,yt=i;else e=null,yt=i;else e=null,yt=i;if(null!==e)for(r=e[2],t=e[3],e=e[0],r&&(e=new dt({type:"postfix",j:new dt({id:Nt++,type:"operator",j:r}),N:e})),r=0;r<t.length;r++)e=new dt({type:"postfix",j:t[r],N:e});return null===e&&(yt=a),wt[s]={b:yt,result:e},e}function Ve(){var e,t,r,n,o,i,s,a,l="parameter_list@"+yt,u=wt[l];if(u)return yt=u.b,u.result;if(n=yt,"void"===d.substr(yt,4)?(u="void",yt+=4):(u=null,0===vt&&f('"void"')),null!==u&&(u=[]),null===u&&(yt=n),null===u){if(o=n=yt,null!==(u=ct())){for(e=[],i=yt,null!==(t=b())?null!==(r=ct())?t=[t,r]:(t=null,yt=i):(t=null,yt=i);null!==t;)e.push(t),i=yt,null!==(t=b())?null!==(r=ct())?t=[t,r]:(t=null,yt=i):(t=null,yt=i);null!==e?u=[u,e]:(u=null,yt=o)}else u=null,yt=o;null!==u&&(s=u[0],a=u[1],u=[s].concat(a.map(function(e){return e[1]}))),null===u&&(yt=n)}return wt[l]={b:yt,result:u},u}function De(){var e,t,r,n,o,i="function_call@"+yt,s=wt[i];return s?(yt=s.b,s.result):(o=s=yt,null!==(e=Fe())?null!==(t=h())?null!==(r=null!==(r=Ve())?r:"")?null!==(n=T())?e=[e,t,r,n]:(e=null,yt=o):(e=null,yt=o):(e=null,yt=o):(e=null,yt=o),null!==e&&(t=e[2],e=new dt({type:"function_call",I:e[0],l:t}),t||(e.l=[])),null===e&&(yt=s),wt[i]={b:yt,result:e},e)}function Fe(){var e,t="function_identifier@"+yt,r=wt[t];return r?(yt=r.b,r.result):(e=yt,null!==(r=Te())&&(r=r.name),null===r&&(yt=e),null===r&&(r=we()),wt[t]={b:yt,result:r},r)}function _e(){var e,t,r,n,o="unary_expression@"+yt,i=wt[o];return i?(yt=i.b,i.result):(n=r=yt,"++"===d.substr(yt,2)?(i="++",yt+=2):(i=null,0===vt&&f('"++"')),null===i&&("--"===d.substr(yt,2)?(i="--",yt+=2):(i=null,0===vt&&f('"--"')),null===i&&(33===d.charCodeAt(yt)?(i="!",yt+=1):(i=null,0===vt&&f('"!"')),null===i&&(126===d.charCodeAt(yt)?(i="~",yt+=1):(i=null,0===vt&&f('"~"')),null===i&&(43===d.charCodeAt(yt)?(i="+",yt+=1):(i=null,0===vt&&f('"+"')),null===i&&(45===d.charCodeAt(yt)?(i="-",yt+=1):(i=null,0===vt&&f('"-"'))))))),null!==(i=null!==i?i:"")?null!==(e=null!==(e=y())?e:"")?null!==(t=Re())?i=[i,e,t]:(i=null,yt=n):(i=null,yt=n):(i=null,yt=n),null!==i&&(e=i[0],St=i[2],e&&(St=new dt({type:"unary",N:St,j:new dt({type:"operator",j:e})})),i=St),null===i&&(yt=r),wt[o]={b:yt,result:i},i)}function Be(){var e,t,r,n,o="multiplicative_operator@"+yt,i=wt[o];return i?(yt=i.b,i.result):(r=t=yt,42===d.charCodeAt(yt)?(i="*",yt+=1):(i=null,0===vt&&f('"*"')),null===i&&(47===d.charCodeAt(yt)?(i="/",yt+=1):(i=null,0===vt&&f('"/"')),null===i&&(37===d.charCodeAt(yt)?(i="%",yt+=1):(i=null,0===vt&&f('"%"')))),null!==i?(n=yt,vt++,61===d.charCodeAt(yt)?(e="=",yt+=1):(e=null,0===vt&&f('"="')),vt--,null===e?e="":(e=null,yt=n),null!==e?i=[i,e]:(i=null,yt=r)):(i=null,yt=r),null!==i&&(i=new dt({type:"operator",j:i[0]})),null===i&&(yt=t),wt[o]={b:yt,result:i},i)}function Ue(){var e,t,r,n,o,i,s,a,l="multiplicative_expression@"+yt,u=wt[l];if(u)return yt=u.b,u.result;if(s=i=yt,null!==(u=_e())){for(e=[],a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=Be())?null!==(n=null!==(n=y())?n:"")?null!==(o=_e())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==t;)e.push(t),a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=Be())?null!==(n=null!==(n=y())?n:"")?null!==(o=_e())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==e?u=[u,e]:(u=null,yt=s)}else u=null,yt=s;return null!==u&&(u=ft(u[0],u[1])),null===u&&(yt=i),wt[l]={b:yt,result:u},u}function ze(){var e,t,r,n,o="additive_operator@"+yt,i=wt[o];return i?(yt=i.b,i.result):(r=t=yt,43===d.charCodeAt(yt)?(i="+",yt+=1):(i=null,0===vt&&f('"+"')),null!==i?(n=yt,vt++,43===d.charCodeAt(yt)?(e="+",yt+=1):(e=null,0===vt&&f('"+"')),null===e&&(61===d.charCodeAt(yt)?(e="=",yt+=1):(e=null,0===vt&&f('"="'))),vt--,null===e?e="":(e=null,yt=n),null!==e?i=[i,e]:(i=null,yt=r)):(i=null,yt=r),null!==i&&(i=new dt({type:"operator",j:"+"})),null===i&&(yt=t),null===i&&(r=t=yt,45===d.charCodeAt(yt)?(i="-",yt+=1):(i=null,0===vt&&f('"-"')),null!==i?(n=yt,vt++,45===d.charCodeAt(yt)?(e="-",yt+=1):(e=null,0===vt&&f('"-"')),null===e&&(61===d.charCodeAt(yt)?(e="=",yt+=1):(e=null,0===vt&&f('"="'))),vt--,null===e?e="":(e=null,yt=n),null!==e?i=[i,e]:(i=null,yt=r)):(i=null,yt=r),null!==i&&(i=new dt({type:"operator",j:"-"})),null===i&&(yt=t)),wt[o]={b:yt,result:i},i)}function We(){var e,t,r,n,o,i,s,a,l="additive_expression@"+yt,u=wt[l];if(u)return yt=u.b,u.result;if(s=i=yt,null!==(u=Ue())){for(e=[],a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=ze())?null!==(n=null!==(n=y())?n:"")?null!==(o=Ue())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==t;)e.push(t),a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=ze())?null!==(n=null!==(n=y())?n:"")?null!==(o=Ue())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==e?u=[u,e]:(u=null,yt=s)}else u=null,yt=s;return null!==u&&(u=ft(u[0],u[1])),null===u&&(yt=i),wt[l]={b:yt,result:u},u}function He(){var e,t,r,n,o="shift_operator@"+yt,i=wt[o];return i?(yt=i.b,i.result):(r=t=yt,"<<"===d.substr(yt,2)?(i="<<",yt+=2):(i=null,0===vt&&f('"<<"')),null===i&&(">>"===d.substr(yt,2)?(i=">>",yt+=2):(i=null,0===vt&&f('">>"'))),null!==i?(n=yt,vt++,61===d.charCodeAt(yt)?(e="=",yt+=1):(e=null,0===vt&&f('"="')),vt--,null===e?e="":(e=null,yt=n),null!==e?i=[i,e]:(i=null,yt=r)):(i=null,yt=r),null!==i&&(i=new dt({type:"operator",j:i[0]})),null===i&&(yt=t),wt[o]={b:yt,result:i},i)}function qe(){var e,t,r,n,o,i,s,a,l="shift_expression@"+yt,u=wt[l];if(u)return yt=u.b,u.result;if(s=i=yt,null!==(u=We())){for(e=[],a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=He())?null!==(n=null!==(n=y())?n:"")?null!==(o=We())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==t;)e.push(t),a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=He())?null!==(n=null!==(n=y())?n:"")?null!==(o=We())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==e?u=[u,e]:(u=null,yt=s)}else u=null,yt=s;return null!==u&&(u=ft(u[0],u[1])),null===u&&(yt=i),wt[l]={b:yt,result:u},u}function Ye(){var e,t,r,n,o="relational_operator@"+yt,i=wt[o];return i?(yt=i.b,i.result):(n=r=yt,60===d.charCodeAt(yt)?(i="<",yt+=1):(i=null,0===vt&&f('"<"')),null!==i?(t=yt,vt++,60===d.charCodeAt(yt)?(e="<",yt+=1):(e=null,0===vt&&f('"<"')),vt--,null===e?e="":(e=null,yt=t),null!==e?(61===d.charCodeAt(yt)?(t="=",yt+=1):(t=null,0===vt&&f('"="')),null!==(t=null!==t?t:"")?i=[i,e,t]:(i=null,yt=n)):(i=null,yt=n)):(i=null,yt=n),null!==i&&(i=new dt({type:"operator",j:"<"+i[2]})),null===i&&(yt=r),null===i&&(n=r=yt,62===d.charCodeAt(yt)?(i=">",yt+=1):(i=null,0===vt&&f('">"')),null!==i?(t=yt,vt++,62===d.charCodeAt(yt)?(e=">",yt+=1):(e=null,0===vt&&f('">"')),vt--,null===e?e="":(e=null,yt=t),null!==e?(61===d.charCodeAt(yt)?(t="=",yt+=1):(t=null,0===vt&&f('"="')),null!==(t=null!==t?t:"")?i=[i,e,t]:(i=null,yt=n)):(i=null,yt=n)):(i=null,yt=n),null!==i&&(i=new dt({type:"operator",j:">"+i[2]})),null===i&&(yt=r)),wt[o]={b:yt,result:i},i)}function Je(){var e,t,r,n,o,i,s,a,l="relational_expression@"+yt,u=wt[l];if(u)return yt=u.b,u.result;if(s=i=yt,null!==(u=qe())){for(e=[],a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=Ye())?null!==(n=null!==(n=y())?n:"")?null!==(o=qe())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==t;)e.push(t),a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=Ye())?null!==(n=null!==(n=y())?n:"")?null!==(o=qe())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==e?u=[u,e]:(u=null,yt=s)}else u=null,yt=s;return null!==u&&(u=ft(u[0],u[1])),null===u&&(yt=i),wt[l]={b:yt,result:u},u}function Ke(){var e,t="equality_operator@"+yt,r=wt[t];return r?(yt=r.b,r.result):(e=yt,"=="===d.substr(yt,2)?(r="==",yt+=2):(r=null,0===vt&&f('"=="')),null===r&&("!="===d.substr(yt,2)?(r="!=",yt+=2):(r=null,0===vt&&f('"!="'))),null!==r&&(r=new dt({type:"operator",j:r})),null===r&&(yt=e),wt[t]={b:yt,result:r},r)}function Xe(){var e,t,r,n,o,i,s,a,l="equality_expression@"+yt,u=wt[l];if(u)return yt=u.b,u.result;if(s=i=yt,null!==(u=Je())){for(e=[],a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=Ke())?null!==(n=null!==(n=y())?n:"")?null!==(o=Je())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==t;)e.push(t),a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=Ke())?null!==(n=null!==(n=y())?n:"")?null!==(o=Je())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==e?u=[u,e]:(u=null,yt=s)}else u=null,yt=s;return null!==u&&(u=ft(u[0],u[1])),null===u&&(yt=i),wt[l]={b:yt,result:u},u}function Ze(){var e,t,r,n,o="bitwise_and_operator@"+yt,i=wt[o];return i?(yt=i.b,i.result):(r=t=yt,38===d.charCodeAt(yt)?(i="&",yt+=1):(i=null,0===vt&&f('"&"')),null!==i?(n=yt,vt++,61===d.charCodeAt(yt)?(e="=",yt+=1):(e=null,0===vt&&f('"="')),null===e&&(38===d.charCodeAt(yt)?(e="&",yt+=1):(e=null,0===vt&&f('"&"'))),vt--,null===e?e="":(e=null,yt=n),null!==e?i=[i,e]:(i=null,yt=r)):(i=null,yt=r),null!==i&&(i=new dt({type:"operator",j:"&"})),null===i&&(yt=t),wt[o]={b:yt,result:i},i)}function $e(){var e,t,r,n,o,i,s,a,l="bitwise_and_expression@"+yt,u=wt[l];if(u)return yt=u.b,u.result;if(s=i=yt,null!==(u=Xe())){for(e=[],a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=Ze())?null!==(n=null!==(n=y())?n:"")?null!==(o=Xe())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==t;)e.push(t),a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=Ze())?null!==(n=null!==(n=y())?n:"")?null!==(o=Xe())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==e?u=[u,e]:(u=null,yt=s)}else u=null,yt=s;return null!==u&&(u=ft(u[0],u[1])),null===u&&(yt=i),wt[l]={b:yt,result:u},u}function Qe(){var e,t,r,n,o="bitwise_xor_operator@"+yt,i=wt[o];return i?(yt=i.b,i.result):(r=t=yt,94===d.charCodeAt(yt)?(i="^",yt+=1):(i=null,0===vt&&f('"^"')),null!==i?(n=yt,vt++,61===d.charCodeAt(yt)?(e="=",yt+=1):(e=null,0===vt&&f('"="')),null===e&&(94===d.charCodeAt(yt)?(e="^",yt+=1):(e=null,0===vt&&f('"^"'))),vt--,null===e?e="":(e=null,yt=n),null!==e?i=[i,e]:(i=null,yt=r)):(i=null,yt=r),null!==i&&(i=new dt({type:"operator",j:"^"})),null===i&&(yt=t),wt[o]={b:yt,result:i},i)}function et(){var e,t,r,n,o,i,s,a,l="bitwise_xor_expression@"+yt,u=wt[l];if(u)return yt=u.b,u.result;if(s=i=yt,null!==(u=$e())){for(e=[],a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=Qe())?null!==(n=null!==(n=y())?n:"")?null!==(o=$e())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==t;)e.push(t),a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=Qe())?null!==(n=null!==(n=y())?n:"")?null!==(o=$e())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==e?u=[u,e]:(u=null,yt=s)}else u=null,yt=s;return null!==u&&(u=ft(u[0],u[1])),null===u&&(yt=i),wt[l]={b:yt,result:u},u}function tt(){var e,t,r,n,o="bitwise_or_operator@"+yt,i=wt[o];return i?(yt=i.b,i.result):(r=t=yt,124===d.charCodeAt(yt)?(i="|",yt+=1):(i=null,0===vt&&f('"|"')),null!==i?(n=yt,vt++,61===d.charCodeAt(yt)?(e="=",yt+=1):(e=null,0===vt&&f('"="')),null===e&&(124===d.charCodeAt(yt)?(e="|",yt+=1):(e=null,0===vt&&f('"|"'))),vt--,null===e?e="":(e=null,yt=n),null!==e?i=[i,e]:(i=null,yt=r)):(i=null,yt=r),null!==i&&(i=new dt({type:"operator",j:"|"})),null===i&&(yt=t),wt[o]={b:yt,result:i},i)}function rt(){var e,t,r,n,o,i,s,a,l="bitwise_or_expression@"+yt,u=wt[l];if(u)return yt=u.b,u.result;if(s=i=yt,null!==(u=et())){for(e=[],a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=tt())?null!==(n=null!==(n=y())?n:"")?null!==(o=et())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==t;)e.push(t),a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=tt())?null!==(n=null!==(n=y())?n:"")?null!==(o=et())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==e?u=[u,e]:(u=null,yt=s)}else u=null,yt=s;return null!==u&&(u=ft(u[0],u[1])),null===u&&(yt=i),wt[l]={b:yt,result:u},u}function nt(){var e,t="logical_and_operator@"+yt,r=wt[t];return r?(yt=r.b,r.result):(e=yt,"&&"===d.substr(yt,2)?(r="&&",yt+=2):(r=null,0===vt&&f('"&&"')),null!==r&&(r=new dt({type:"operator",j:"&&"})),null===r&&(yt=e),wt[t]={b:yt,result:r},r)}function ot(){var e,t,r,n,o,i,s,a,l="logical_and_expression@"+yt,u=wt[l];if(u)return yt=u.b,u.result;if(s=i=yt,null!==(u=rt())){for(e=[],a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=nt())?null!==(n=null!==(n=y())?n:"")?null!==(o=rt())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==t;)e.push(t),a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=nt())?null!==(n=null!==(n=y())?n:"")?null!==(o=rt())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==e?u=[u,e]:(u=null,yt=s)}else u=null,yt=s;return null!==u&&(u=ft(u[0],u[1])),null===u&&(yt=i),wt[l]={b:yt,result:u},u}function it(){var e,t="logical_xor_operator@"+yt,r=wt[t];return r?(yt=r.b,r.result):(e=yt,"^^"===d.substr(yt,2)?(r="^^",yt+=2):(r=null,0===vt&&f('"^^"')),null!==r&&(r=new dt({type:"operator",j:"^^"})),null===r&&(yt=e),wt[t]={b:yt,result:r},r)}function st(){var e,t,r,n,o,i,s,a,l="logical_xor_expression@"+yt,u=wt[l];if(u)return yt=u.b,u.result;if(s=i=yt,null!==(u=ot())){for(e=[],a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=it())?null!==(n=null!==(n=y())?n:"")?null!==(o=ot())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==t;)e.push(t),a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=it())?null!==(n=null!==(n=y())?n:"")?null!==(o=ot())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==e?u=[u,e]:(u=null,yt=s)}else u=null,yt=s;return null!==u&&(u=ft(u[0],u[1])),null===u&&(yt=i),wt[l]={b:yt,result:u},u}function at(){var e,t="logical_or_operator@"+yt,r=wt[t];return r?(yt=r.b,r.result):(e=yt,"||"===d.substr(yt,2)?(r="||",yt+=2):(r=null,0===vt&&f('"||"')),null!==r&&(r=new dt({type:"operator",j:"||"})),null===r&&(yt=e),wt[t]={b:yt,result:r},r)}function lt(){var e,t,r,n,o,i,s,a,l="logical_or_expression@"+yt,u=wt[l];if(u)return yt=u.b,u.result;if(s=i=yt,null!==(u=st())){for(e=[],a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=at())?null!==(n=null!==(n=y())?n:"")?null!==(o=st())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==t;)e.push(t),a=yt,null!==(t=null!==(t=y())?t:"")?null!==(r=at())?null!==(n=null!==(n=y())?n:"")?null!==(o=st())?t=[t,r,n,o]:(t=null,yt=a):(t=null,yt=a):(t=null,yt=a):(t=null,yt=a);null!==e?u=[u,e]:(u=null,yt=s)}else u=null,yt=s;return null!==u&&(u=ft(u[0],u[1])),null===u&&(yt=i),wt[l]={b:yt,result:u},u}function ut(){var e,t,r,n,o,i,s,a,l,u,c,p="conditional_expression@"+yt,h=wt[p];return h?(yt=h.b,h.result):(u=h=yt,null!==(e=lt())?(c=yt,null!==(t=null!==(t=y())?t:"")?(63===d.charCodeAt(yt)?(r="?",yt+=1):(r=null,0===vt&&f('"?"')),null!==r?null!==(n=null!==(n=y())?n:"")?null!==(o=ct())?null!==(i=null!==(i=y())?i:"")?(58===d.charCodeAt(yt)?(s=":",yt+=1):(s=null,0===vt&&f('":"')),null!==s?null!==(a=null!==(a=y())?a:"")?null!==(l=ct())?t=[t,r,n,o,i,s,a,l]:(t=null,yt=c):(t=null,yt=c):(t=null,yt=c)):(t=null,yt=c):(t=null,yt=c):(t=null,yt=c):(t=null,yt=c)):(t=null,yt=c),null!==(t=null!==t?t:"")?e=[e,t]:(e=null,yt=u)):(e=null,yt=u),null!==e&&(t=e[0],e=e[1],St=t,e&&(St=new dt({type:"ternary",F:t,Ha:e[3],Ga:e[7]})),e=St),null===e&&(yt=h),wt[p]={b:yt,result:e},e)}function ct(){var e,t,r,n,o,i,s="assignment_expression@"+yt,a=wt[s];return a?(yt=a.b,a.result):(i=o=yt,null!==(a=ut())?null!==(e=null!==(e=y())?e:"")?(61===d.charCodeAt(yt)?(t="=",yt+=1):(t=null,0===vt&&f('"="')),null===t&&("*="===d.substr(yt,2)?(t="*=",yt+=2):(t=null,0===vt&&f('"*="')),null===t&&("/="===d.substr(yt,2)?(t="/=",yt+=2):(t=null,0===vt&&f('"/="')),null===t&&("%="===d.substr(yt,2)?(t="%=",yt+=2):(t=null,0===vt&&f('"%="')),null===t&&("+="===d.substr(yt,2)?(t="+=",yt+=2):(t=null,0===vt&&f('"+="')),null===t&&("-="===d.substr(yt,2)?(t="-=",yt+=2):(t=null,0===vt&&f('"-="')),null===t&&("<<="===d.substr(yt,3)?(t="<<=",yt+=3):(t=null,0===vt&&f('"<<="')),null===t&&(">>="===d.substr(yt,3)?(t=">>=",yt+=3):(t=null,0===vt&&f('">>="')),null===t&&("&="===d.substr(yt,2)?(t="&=",yt+=2):(t=null,0===vt&&f('"&="')),null===t&&("^="===d.substr(yt,2)?(t="^=",yt+=2):(t=null,0===vt&&f('"^="')),null===t&&("|="===d.substr(yt,2)?(t="|=",yt+=2):(t=null,0===vt&&f('"|="')))))))))))),null!==t?null!==(r=null!==(r=y())?r:"")?null!==(n=ct())?a=[a,e,t,r,n]:(a=null,yt=i):(a=null,yt=i):(a=null,yt=i)):(a=null,yt=i):(a=null,yt=i),null!==a&&(e=a[0],t=a[4],a=new dt({type:"binary",j:new dt({type:"operator",j:a[2]}),left:e,right:t})),null===a&&(yt=o),null===a&&(a=ut()),wt[s]={b:yt,result:a},a)}function pt(){var e,t,r,n,o,i,s,a="condition@"+yt,l=wt[a];return l?(yt=l.b,l.result):(s=yt,null!==(l=de())?null!==(e=y())?null!==(t=Te())?null!==(r=null!==(r=y())?r:"")?(61===d.charCodeAt(yt)?(n="=",yt+=1):(n=null,0===vt&&f('"="')),null!==n?null!==(o=null!==(o=y())?o:"")?null!==(i=ct())?l=[l,e,t,r,n,o,i]:(l=null,yt=s):(l=null,yt=s):(l=null,yt=s)):(l=null,yt=s):(l=null,yt=s):(l=null,yt=s):(l=null,yt=s),null===l&&(l=ct()),wt[a]={b:yt,result:l},l)}function ht(){for(var e=1,t=1,r=!1,n=0;n<Math.max(yt,bt);n++){var o=d.charAt(n);"\n"===o?(r||e++,r=!(t=1)):"\r"===o||"\u2028"===o||"\u2029"===o?(e++,t=1,r=!0):(t++,r=!1)}return{ka:e,Da:t}}function dt(e){for(var t in this.id=Nt++,this.ka=ht().ka,e)e.hasOwnProperty(t)&&(this[t]=e[t])}function ft(e,t){for(var r=e,n=0;n<t.length;n++)r=new dt({type:"binary",j:t[n][1],left:r,right:t[n][3]});return r}function mt(e,t,r){r&&(t=t.concat([r])),(r=e[0]).ia=e[1].C,e=r;for(var n=0;n<t.length;n++)e.M=t[n][0],e.M.ia=t[n][1].C,e=e.M;return r}var gt={EOF:g,_:y,additive_expression:We,additive_operator:ze,assignment_expression:ct,attribute_qualifier:fe,attribute_type:me,bitwise_and_expression:$e,bitwise_and_operator:Ze,bitwise_or_expression:rt,bitwise_or_operator:tt,bitwise_xor_expression:et,bitwise_xor_operator:Qe,bool_constant:Me,comma:b,comment:i,compound_statement:V,condition:pt,conditional_expression:ut,const_qualifier:ve,declaration:X,declarator:le,declarator_array_with_size:ae,declarator_list:ne,declarator_list_arrays_have_size:ie,declarator_list_no_array:oe,declarator_no_array:se,do_while:q,equality_expression:Xe,equality_operator:Ke,equals:s,expression_statement:K,external_declaration:c,external_statement:a,external_statement_list:u,field_selector:Pe,float_constant:ke,float_exponent:Ae,for_loop:z,fragment_start:function(){var e,t,r,n="fragment_start@"+yt,o=wt[n];return o?(yt=o.b,o.result):(r=t=yt,Ot="fs",null!==(o="")?null!==(e=u())?o=[o,e]:(o=null,yt=r):(o=null,yt=r),null!==o&&(o=o[1]),null===o&&(yt=t),wt[n]={b:yt,result:o},o)},fully_specified_type:ge,function_call:De,function_definition:R,function_identifier:Fe,function_prototype:Q,function_prototype_parameter_list:$,global_declaration:Z,identifier:Te,index_accessor:je,init_declarator:ue,init_declarator_list:re,int_constant:Ge,iteration_statement:Y,jump_statement:J,keyword:Ne,left_brace:p,left_bracket:x,left_paren:h,locally_specified_type:de,logical_and_expression:ot,logical_and_operator:nt,logical_or_expression:lt,logical_or_operator:at,logical_xor_expression:st,logical_xor_operator:it,macro_call:A,macro_call_line:function(){var e,t,r,n,o="macro_call_line@"+yt,i=wt[o];if(i)return yt=i.b,i.result;if(n=r=yt,null!==(i=null!==(i=A())?i:"")){for(e=[],/^[^\n]/.test(d.charAt(yt))?(t=d.charAt(yt),yt++):(t=null,0===vt&&f("[^\\n]"));null!==t;)e.push(t),/^[^\n]/.test(d.charAt(yt))?(t=d.charAt(yt),yt++):(t=null,0===vt&&f("[^\\n]"));null!==e?i=[i,e]:(i=null,yt=n)}else i=null,yt=n;return null!==i&&(i={aa:i[0],Ja:i[1].join("")}),null===i&&(yt=r),wt[o]={b:yt,result:i},i},macro_call_parameter:k,macro_call_parameter_list:function(){var e,t,r,n,o,i,s,a,l="macro_call_parameter_list@"+yt,u=wt[l];if(u)return yt=u.b,u.result;if(o=n=yt,null!==(u=k())){for(e=[],i=yt,null!==(t=b())?null!==(r=k())?t=[t,r]:(t=null,yt=i):(t=null,yt=i);null!==t;)e.push(t),i=yt,null!==(t=b())?null!==(r=k())?t=[t,r]:(t=null,yt=i):(t=null,yt=i);null!==e?u=[u,e]:(u=null,yt=o)}else u=null,yt=o;return null!==u&&(s=u[0],a=u[1],u=[s].concat(a.map(function(e){return e[1]}))),null===u&&(yt=n),wt[l]={b:yt,result:u},u},macro_identifier:S,macro_paren_parameter:G,matrix:Se,member_list:ce,multiplicative_expression:Ue,multiplicative_operator:Be,newLine:m,noNewlineComment:n,noNewlineWhitespace:l,parameter_declaration:te,parameter_list:Ve,parameter_qualifier:ee,paren_expression:Le,postfix_expression:Ie,postfix_expression_no_repeat:Re,precision_qualifier:ye,precision_type:he,preprocessor_define:L,preprocessor_else:j,preprocessor_else_if:E,preprocessor_end:P,preprocessor_external_branch:I,preprocessor_if:M,preprocessor_operator:O,preprocessor_parameter_list:C,preprocessor_statement_branch:r,primary_expression:Ee,relational_expression:Je,relational_operator:Ye,reserved:function(){var e,t,r,n,o="reserved@"+yt,i=wt[o];if(i)return yt=i.b,i.result;for(vt++,n=yt,i=[],e=Ce();null!==e;)i.push(e),e=Ce();if(null!==i)if("__"===d.substr(yt,2)?(e="__",yt+=2):(e=null,0===vt&&f('"__"')),null!==e){for(t=[],/^[A-Za-z_0-9]/.test(d.charAt(yt))?(r=d.charAt(yt),yt++):(r=null,0===vt&&f("[A-Za-z_0-9]"));null!==r;)t.push(r),/^[A-Za-z_0-9]/.test(d.charAt(yt))?(r=d.charAt(yt),yt++):(r=null,0===vt&&f("[A-Za-z_0-9]"));null!==t?i=[i,e,t]:(i=null,yt=n)}else i=null,yt=n;else i=null,yt=n;return 0===--vt&&null===i&&f("reserved name"),wt[o]={b:yt,result:i},i},right_brace:N,right_bracket:w,right_paren:T,selection_statement:U,semicolon:v,shift_expression:qe,shift_operator:He,simple_statement:B,single_underscore_identifier:Ce,statement_list:D,statement_no_new_scope:F,statement_with_scope:_,struct_definition:pe,type_name:we,type_qualifier:be,unary_expression:_e,vector:Oe,vertex_start:function(){var e,t,r,n="vertex_start@"+yt,o=wt[n];return o?(yt=o.b,o.result):(r=t=yt,Ot="vs",null!==(o="")?null!==(e=u())?o=[o,e]:(o=null,yt=r):(o=null,yt=r),null!==o&&(o=o[1]),null===o&&(yt=t),wt[n]={b:yt,result:o},o)},void_type:xe,while_loop:H,while_statement:W};if(void 0!==e){if(void 0===gt[e])throw Error("Invalid rule name: "+o(e)+".")}else e="external_statement_list";var yt=0,vt=0,bt=0,xt=[],wt={},Tt={},Nt=0,Ot="vs",St=gt[e]();if(null===St||yt!==d.length){var Ct=ht();throw new la.SyntaxError(function(){var e;e:{(e=xt).sort();for(var t=null,r=[],n=0;n<e.length;n++)e[n]!==t&&(r.push(e[n]),t=e[n]);switch(r.length){case 0:e="end of input";break e;case 1:e=r[0];break e;default:e=r.slice(0,r.length-1).join(", ")+" or "+r[r.length-1]}}return"Expected "+e+" but "+(t=(t=Math.max(yt,bt))<d.length?o(d.charAt(t)):"end of input")+" found."}(),Ct.ka,Ct.Da)}return St}function ma(e){return e.split(/_/g).map(function(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}).join("")}la.SyntaxError=function(e,t,r){this.name="SyntaxError",this.message=e,this.line=t,this.column=r},la.SyntaxError.prototype=Error.prototype,["varying mediump vec4 gl_FragCoord;","varying bool gl_FrontFacing;","varying mediump vec2 gl_PointCoord;"].map(function(e){return z(e,"global_declaration")});var qa=Array.prototype,D=qa.forEach?function(e,t,r){qa.forEach.call(e,t,r)}:function(e,t,r){for(var n=e.length,o="string"==typeof e?e.split(""):e,i=0;i<n;i++)i in o&&t.call(r,o[i],i,e)};function ra(e,t,r){for(var n="string"==typeof e?e.split(""):e,o=e.length-1;0<=o;--o)o in n&&t.call(r,n[o],o,e)}var sa=qa.every?function(e,t,r){return qa.every.call(e,t,r)}:function(e,t,r){for(var n=e.length,o="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in o&&!t.call(r,o[i],i,e))return!1;return!0};function Ha(e){var t=e.length;if(0<t){for(var r=Array(t),n=0;n<t;n++)r[n]=e[n];return r}return[]}function Ia(){}function E(e,t){if(t&&t.type){var r=e.i(t);r&&r.apply(e,[t]),(r=e.m(t))?r.apply(e,[t]):Ja(e,t),(r=e.u(t))&&r.apply(e,[t])}}function Ka(e,t){D(t,function(e){E(this,e)},e)}function Ja(e,t){for(var r in t){var n=t[r];if("array"==ea(n))Ka(e,n);else{var o=typeof n;("object"==o&&null!=n||"function"==o)&&n.type&&E(e,n)}}}function F(e,t){this.c=e||"\n",this.h=!!t,this.a="",this.f=0}function G(e,t,r){this.a=e,this.c=t||0,this.f=r||2}Ia.prototype.i=function(e){return this["beforeVisit"+ma(e.type)]},Ia.prototype.u=function(e){return this["afterVisit"+ma(e.type)]},Ia.prototype.m=function(e){return this["visit"+ma(e.type)]},v(F,Ia),ka("glslunit.Generator",F);var La={function_call:new G(0,2),identifier:new G(0,2),float:new G(0,2),int:new G(0,2),bool:new G(0,2),postfix:new G(1,0,1),unary:new G(2,1,1),"*":new G(3,0),"/":new G(3),"%":new G(3),"+":new G(4,0),"-":new G(4),"<<":new G(5),">>":new G(5),"<":new G(6),">":new G(6),"<=":new G(6),">=":new G(6),"==":new G(7),"!=":new G(7),"&":new G(8,0),"^":new G(9,0),"|":new G(10,0),"&&":new G(11,0),"^^":new G(12,0),"||":new G(13,0),ternary:new G(14,1,3),"=":new G(15),"-=":new G(15),"+=":new G(15),"*=":new G(15),"/=":new G(15),"%=":new G(15),"<<=":new G(15),">>=":new G(15),"&=":new G(15),"^=":new G(15),"|=":new G(15)};function I(e,t,r){return E(t=new F(t,r),e),t.a}function Ma(e,t,r){return t?e+t+r:""}function Na(e,t,r){for(var n=0;n<t.length;n++)0!=n&&(e.a+=r),E(e,t[n])}function ib(e){e.h&&(e.a+=e.c+Array(e.f+1).join("  "))}function jb(e){e.h&&"  "==e.a.slice(-2)&&(e.a=e.a.slice(0,-2))}function kb(e,t){E(e,t.ma),e.a+=" "+t.name+"(",Na(e,t.l,","),e.a+=")"}function lb(e,t){e.a+="while(",E(e,t.F),e.a+=")"}function nb(e){function t(e){return e.toLowerCase().replace(/^0*|\+/g,"").replace(/(?:(\.[1-9]+)|\.)0*e/g,"$1e")}if(0==e)return"0.";var r=t(""+e);return e=t(e.toExponential()),-1==r.indexOf(".")&&-1==r.indexOf("e")&&(r+="."),r.length<=e.length?r:e}function mb(e,t,r,n){var o=La["binary"==t.type?t.j.j:t.type];r=La["binary"==r.type?r.j.j:r.type];var i;(i=o.a>r.a||o.a==r.a&&!(0==r.c&&0==n||1==r.c&&n==r.f-1))&&(e.a+="("),E(e,t),i&&(e.a+=")")}function J(e,t){this.U=e||null,this.o=!!t,this.D={},this.h=[],this.a=[],this.v={},this.c=[]}function Xb(e){var r={};return ra(e.h.concat([e.a]),function(e){D(e,function(t){"declarator"==t.type?D(t.A,function(e){da(r[e.name.name])||(r[e.name.name]=t)},this):"parameter"==t.type&&(r[t.name]=t)},this)},e),r}function Yb(e){var t=new J;return E(t,e),t.v}function Zb(e,t){var r=new J(t,!0);return E(r,e),r.D}function $b(e){this.c=[],this.a=[],this.f=e}function ac(e,t){var r=new $b(t);return E(r,e),r.c}function K(){this.a={},this.a[bc]=[],this.c=bc}F.prototype.za=function(e){this.a+=Ma("",e.qualifier," "),this.a+="struct",this.a+=Ma(" ",e.name,""),this.a+="{",this.f++,Na(this,e.Ia,""),this.f--,jb(this),this.a+="}",e.A&&Na(this,e.A,","),this.a+=";",ib(this)},F.prototype.visitStructDefinition=F.prototype.za,F.prototype.ya=function(e){this.a+="{",this.f++,ib(this),Na(this,e.C,""),this.f--,jb(this),this.a+="}",ib(this)},F.prototype.visitScope=F.prototype.ya,F.prototype.va=function(e){this.a+="precision "+e.precision+" "+e.typeName+";",ib(this)},F.prototype.visitPrecision=F.prototype.va,F.prototype.ha=function(e){this.a+="invariant ",Na(this,e.Ea,","),this.a+=";",ib(this)},F.prototype.visitInvariant=F.prototype.ha,F.prototype.ta=function(e){this.a+=Ma("",e.qa," "),this.a+=Ma("",e.la," "),this.a+=Ma("",e.precision," "),this.a+=e.Ka+" "+e.name,e.$&&(this.a+="[",E(this,e.$),this.a+="]")},F.prototype.visitParameter=F.prototype.ta,F.prototype.da=function(e){kb(this,e),this.a+=";",ib(this)},F.prototype.visitFunctionPrototype=F.prototype.da,F.prototype.ca=function(e){kb(this,e),E(this,e.body)},F.prototype.visitFunctionDeclaration=F.prototype.ca,F.prototype.wa=function(e){var t=this.a.slice(-1*this.c.length);t&&t!=this.c&&(this.a+=this.c),this.a+=e.B,"#define"==e.B?(this.a+=" "+e.identifier,e.l&&(this.a+="(",Na(this,e.l,","),this.a+=")"),this.a+=Ma(" ",e.pa,"")):this.a+=Ma(" ",e.value,""),this.a+=this.c,e.ia&&(Na(this,e.ia,""),e.M&&E(this,e.M),"#if"==e.B.slice(0,3)&&((t=this.a.slice(-1*this.c.length))!=this.c&&(this.a+=this.c),this.a+="#endif"+this.c))},F.prototype.visitPreprocessor=F.prototype.wa,F.prototype.U=function(e){this.a+="do","scope"!=e.body.type&&(this.a+=" "),E(this,e.body),lb(this,e)},F.prototype.visitDoStatement=F.prototype.U,F.prototype.Ca=function(e){lb(this,e),E(this,e.body)},F.prototype.visitWhileStatement=F.prototype.Ca,F.prototype.ba=function(e){this.a+="for(",E(this,e.H),E(this,e.F),this.a+=";",E(this,e.Fa),this.a+=")",E(this,e.body)},F.prototype.visitForStatement=F.prototype.ba,F.prototype.fa=function(e){this.a+="if(",E(this,e.F),this.a+=")",E(this,e.body),e.M&&(this.a+="else","scope"!=e.M.type&&(this.a+=" "),E(this,e.M))},F.prototype.visitIfStatement=F.prototype.fa,F.prototype.S=function(e){E(this,e.name),e.isArray&&(this.a+="[",e.$&&E(this,e.$),this.a+="]"),e.H&&(this.a+="=",E(this,e.H))},F.prototype.visitDeclaratorItem=F.prototype.S,F.prototype.K=function(e){E(this,e.w),this.a+=" ",Na(this,e.A,","),this.a+=";",ib(this)},F.prototype.visitDeclarator=F.prototype.K,F.prototype.Ba=function(e){this.a+=Ma("",e.qualifier," "),this.a+=Ma("",e.precision," "),this.a+=e.name},F.prototype.visitType=F.prototype.Ba,F.prototype.X=function(e){E(this,e.N),this.a+=";",ib(this)},F.prototype.visitExpression=F.prototype.X,F.prototype.g=function(e){this.a+=e.type,e.value&&(this.a+=" ",E(this,e.value)),this.a+=";",ib(this)},F.prototype.visitJump=F.prototype.g,F.prototype.xa=F.prototype.g,F.prototype.visitReturn=F.prototype.xa,F.prototype.W=F.prototype.g,F.prototype.visitBreak=F.prototype.W,F.prototype.T=F.prototype.g,F.prototype.visitDiscard=F.prototype.T,F.prototype.J=F.prototype.g,F.prototype.visitContinue=F.prototype.J,F.prototype.ra=function(e){this.a.slice(-1)==e.j.j&&(this.a+=" "),E(this,e.j),mb(this,e.N,e,0)},F.prototype.visitUnary=F.prototype.ra,F.prototype.ua=function(e){mb(this,e.N,e,0),E(this,e.j)},F.prototype.visitPostfix=F.prototype.ua,F.prototype.sa=function(e){this.a+=e.j},F.prototype.visitOperator=F.prototype.sa,F.prototype.Y=function(e){this.a+="."+e.selection},F.prototype.visitFieldSelector=F.prototype.Y,F.prototype.D=function(e){this.a+="[",E(this,e.index),this.a+="]"},F.prototype.visitAccessor=F.prototype.D,F.prototype.v=function(e){this.a+=e.I+"(",Na(this,e.l,","),this.a+=")"},F.prototype.visitFunctionCall=F.prototype.v,F.prototype.ea=function(e){this.a+=e.name},F.prototype.visitIdentifier=F.prototype.ea,F.prototype.Z=function(e){this.a+=nb(e.value)},F.prototype.visitFloat=F.prototype.Z,F.prototype.o=function(e){this.a+=e.value},F.prototype.visitValue=F.prototype.o,F.prototype.ga=function(e){var t=e.value;e=t.toString(10),t=(t<0?"-":"")+"0x"+Math.abs(t).toString(16).toLowerCase(),this.a+=e.length<=t.length?e:t},F.prototype.visitInt=F.prototype.ga,F.prototype.P=F.prototype.o,F.prototype.visitBool=F.prototype.P,F.prototype.O=function(e){mb(this,e.left,e,0),E(this,e.j),mb(this,e.right,e,1)},F.prototype.visitBinary=F.prototype.O,F.prototype.Aa=function(e){mb(this,e.F,e,0),this.a+="?",mb(this,e.Ha,e,1),this.a+=":",mb(this,e.Ga,e,2)},F.prototype.visitTernary=F.prototype.Aa,v(J,Ia),ka("glslunit.VariableScopeVisitor",J),J.prototype.g=function(){this.h.push(this.a),this.a=[],[].push.apply(this.a,this.c),this.c=[]},J.prototype.beforeVisitScope=J.prototype.g,J.prototype.f=function(e){this.v[e.id]=this.a,e==this.U&&(this.D=Xb(this)),this.a=this.h.pop()},J.prototype.afterVisitScope=J.prototype.f,J.prototype.K=J.prototype.g,J.prototype.beforeVisitRoot=J.prototype.K,J.prototype.O=function(e){this.o||this.f(e)},J.prototype.afterVisitPreprocessor=J.prototype.O,J.prototype.J=function(){this.o||this.g()},J.prototype.beforeVisitPreprocessor=J.prototype.J,J.prototype.P=J.prototype.f,J.prototype.afterVisitRoot=J.prototype.P,J.prototype.W=function(e){this.a.push(e)},J.prototype.beforeVisitDeclarator=J.prototype.W,J.prototype.T=function(e){this.c=e.l},J.prototype.beforeVisitFunctionDeclaration=J.prototype.T,J.prototype.S=function(){this.c=[]},J.prototype.afterVisitFunctionDeclaration=J.prototype.S,J.getScopeToDeclarationMap=Yb,v($b,Ia),$b.prototype.g=function(e){this.f(e,this.a.slice(0,-1))&&this.c.push(e),Ja(this,e)},$b.prototype.i=function(){return ia(Array.prototype.push,this.a)},$b.prototype.u=function(){return ia(Array.prototype.pop,this.a)},$b.prototype.m=function(){return this.g},v(K,Ia);var bc="#";function Oc(e){e=ac(e,function(e,t){return"declarator"==e.type&&"struct_definition"==t.slice(-1)[0].type});var t=[];return D(e,function(e){t[e.id]=!0}),t}function M(e){var t,r={};for(t in e)r[t]=e[t];return r}function N(){this.c=[]}K.prototype.g=function(e){e.name in this.a||(this.a[e.name]=[]),this.c=e.name},K.prototype.beforeVisitFunctionDeclaration=K.prototype.g,K.prototype.f=function(){this.c=bc},K.prototype.afterVisitFunctionDeclaration=K.prototype.f,K.prototype.h=function(e){this.a[this.c].push(e.I),Ja(this,e)},K.prototype.visitFunctionCall=K.prototype.h;var Pc=-1;function O(e){return(e=M(e)).id=Pc--,e}function Qc(e,t,r,n){var o=e[r+ma(t.type)];return ia(function(r){D(this.c,function(e){var t=n(e).apply(e,[r]);t&&t.apply(e,[r])}),o&&o.apply(this,[r])},e)}function P(e,t){var r=!1;(o=e.P(t))&&o.apply(e,[t]);var n,o=O(t);for(n in t){var i=t[n];if("array"==ea(i)){o[n]=[];for(var s=0;s<i.length;s++){var a=i[s],l=P(e,a);l!=a&&(r=!0),null!=l&&Array.prototype.push.apply(o[n],"array"==ea(l)?l:[l])}}else i&&i.type&&((l=P(e,i))!=i&&(r=!0,null!=l?o[n]=l:delete o[n]))}return o=r?o:t,(n=e.W(t))&&(o=n.apply(e,[o,t])),(r=e.O(t))&&r.apply(e,[t,o]),o}function Rc(e,t,r,n,o){this.c=[],this.u=o,this.i=e,this.a=t,this.h=r,this.f=n}function Sc(){this.s=this.a="",this.c=[]}function Tc(){this.f=this.s="",this.c=this.a=this.g=0}function Uc(){this.type=this.a=this.s=""}function R(){this.i=[],this.f=[],this.h={},this.L={},this.R={},this.g=[],this.a={},this.c={},this.u={}}function Vc(e){D(e.f,function(e){""==e.s&&(e.s=e.a)});var t,r={};for(t in e.L){var n=e.L[t];r[n.s]=n}for(var o in t={},e.R)t[(n=e.R[o]).s]=n;Wc(e,e.c,r,t),Wc(e,e.a,r,t)}function Wc(e,t,s,a){t=ac(t,function(e){return"declarator"==e.type&&("attribute"==e.w.qualifier||"uniform"==e.w.qualifier)}),D(t,function(i){D(i.A,function(e){e=e.name.name;var t=i.w.name;if("attribute"==i.w.qualifier){var r=s[e];if(!r){(r=new Tc).s=e,r.f=e;var n=I(i),o="".search(n);t=parseInt(t.slice(3,4),10);r.g=isNaN(t)?1:t,r.a=o,r.c=n.length,this.L[e]=r}}else(r=a[e])||((r=new Uc).s=e,r.a=e,r.type=t,this.R[e]=r)},this)},e)}function T(){this.c=[],this.a=[]}N.prototype.W=function(e){return this["transform"+ma(e.type)]},N.prototype.P=function(e){return Qc(this,e,"beforeTransform",function(e){return e.i})},N.prototype.O=function(e){return Qc(this,e,"afterTransform",function(e){return e.u})},v(Rc,N),ka("glslunit.SpliceTransformer",Rc),Rc.prototype.g=function(e){if(e==this.i){if("array"==ea((e=O(e))[this.a])){var t=this.u.map(O);return e[this.a]=Ha(e[this.a]),[].splice.apply(e[this.a],[this.h,this.f].concat(t)),e}throw this.a+" wasn't an array."}return e},Rc.prototype.W=function(){return this.g},Sc.prototype.clone=function(){var e=M(this);return e.c=Ha(this.c),e},R.prototype.clone=function(){var e=M(this);return e.L=M(this.L),e.R=M(this.R),e.h=M(this.h),e.i=Ha(this.i),e.u=M(this.u),e.f=this.f.map(function(e){return M(e)}),e.g=this.g.map(function(e){return e.clone()}),e},R.prototype.P=function(e){return I(this.c,e||"\\n",!1)},R.prototype.getVertexSource=R.prototype.P,R.prototype.o=function(e){return I(this.a,e||"\\n",!1)},R.prototype.getFragmentSource=R.prototype.o,R.prototype.v=function(e){return"".replace(/\n/g,e||"\\n").replace(/'/g,"\\'")},R.prototype.getOriginalFragmentSource=R.prototype.v,R.prototype.D=function(e){return"".replace(/\n/g,e||"\\n").replace(/'/g,"\\'")},R.prototype.getOriginalVertexSource=R.prototype.D,R.prototype.m=function(){var e,t=[];for(e in this.L)t.push(this.L[e]);return 0<t.length&&(t[t.length-1].last=!0),t},R.prototype.getAttributes=R.prototype.m,R.prototype.O=function(){var e,t=[];for(e in this.R)t.push(this.R[e]);return 0<t.length&&(t[t.length-1].last=!0),t},R.prototype.getUniforms=R.prototype.O,v(T,N);var Xc={vec2:2,vec3:3,vec4:4,bvec2:2,bvec3:3,bvec4:4,ivec2:2,ivec3:3,ivec4:4,mat2:4,mat3:9,mat4:16,float:1,int:1,bool:1};function Yc(e){return"function_call"==(e=e.a.slice(-2)[0]).type&&e.I in Xc}function U(){this.c=[]}function Zc(e,t){var r=e[t],n=e;return r&&"scope"==r.type&&1==r.C.length&&((n=O(e))[t]=r.C[0]),n}function V(){this.c=[],this.a={}}function $c(e,t,r){t in e.a&&!e.a[t]&&(e.a[t]=!0,D(r[t],function(e){$c(this,e,r)},e))}function W(e){this.c=[],this.J={},this.h=null,this.a=[],this.o=[],this.v=[],this.i=e}function ad(e,t,r){var n=I(t.w),o=null;return 0<e.a.length&&(o=e.a.slice(-1)[0][n]),null!=t&&(e.i||"attribute"!=t.w.qualifier)&&"const"!=t.w.qualifier&&(!o||1<o.length)&&!(t.id in e.o)&&!(t.id in e.v)&&!(r&&!sa(t.A,function(e){return!da(e.H)}))}function bd(e){this.a={},this.i=e,this.f={},this.c={},D(cd,function(e){this.a[e]=[]},this)}T.prototype.P=function(){return ia(Array.prototype.push,this.a)},T.prototype.O=function(){return ia(Array.prototype.pop,this.a)},T.prototype.i=function(e){if(Yc(this)&&Math.abs(e.value)<65536&&e.value==Math.round(e.value)){var t=O(e);return t.type="int",t.value=Number(e.value),t}return e},T.prototype.o=T.prototype.i,T.prototype.transformFloat=T.prototype.o,T.prototype.m=T.prototype.i,T.prototype.transformBool=T.prototype.m,T.prototype.h=function(e){if(n=Xc[e.I]){if(Yc(this)&&e.l.length==n)return e.l;if(e.l&&1<e.l.length){var t=I(e.l[0]),r=!1;if("mat"==e.I.slice(0,3)){if(e.l.length==n){for(var n=!0,o=parseInt(e.I.slice(-1),10),i=0;i<o&&n;i++)for(var s=0;s<o&&n;s++)n=I(e.l[i*o+s])==(i==s?t:"0");n&&(r=!0)}}else sa(e.l,function(e){return I(e)==t})&&(r=!0);if(r)return(r=O(e)).l=[e.l[0]],r}}return e},T.prototype.transformFunctionCall=T.prototype.h,T.prototype.f=function(){return"ConstructorMinifier"},T.prototype.g=function(){return[]},T.prototype.u=function(e,t){var r=new T;return t.c=P(new T,t.c),t.a=P(r,t.a),[]},v(U,N),U.prototype.h=function(e){return Zc(e=Zc(e,"body"),"elseBody")},U.prototype.transformIfStatement=U.prototype.h,U.prototype.m=function(e){return Zc(e,"body")},U.prototype.transformWhileStatement=U.prototype.m,U.prototype.a=function(e){return Zc(e,"body")},U.prototype.transformDoStatement=U.prototype.a,U.prototype.i=function(e){return Zc(e,"body")},U.prototype.transformForStatement=U.prototype.i,U.prototype.f=function(){return"BraceReducer"},U.prototype.g=function(){return[]},U.prototype.u=function(e,t){var r=new U;return t.c=P(new U,t.c),t.a=P(r,t.a),[]},v(V,N),V.prototype.h=function(e){var t=new K;for(var r in E(t,e),e=t.a,this.a={},e)this.a[r]=!1;$c(this,"main",e),$c(this,bc,e)},V.prototype.beforeTransformRoot=V.prototype.h,V.prototype.i=function(e){return this.a[e.name]?e:null},V.prototype.transformFunctionDeclaration=V.prototype.i,V.prototype.m=V.prototype.i,V.prototype.transformFunctionPrototype=V.prototype.m,V.prototype.f=function(){return"DeadFunctionRemover"},V.prototype.g=function(){return[]},V.prototype.u=function(e,t){var r=new V;return t.c=P(new V,t.c),t.a=P(r,t.a),[]},v(W,N),W.prototype.X=function(t){var e=ac(t,function(e){return"for_statement"==e.type});D(e,function(e){this.o[e.H.id]=!0},this),this.v=Oc(t);var n;e=Yb(t);for(n in e){var o={};D(e[+n],function(e){if("declarator"==e.type&&ad(this,e,n==t.id)){var r=I(e.w);o[r]||(o[r]=[]),D(e.A,function(e){var t=e;t.H&&delete(t=O(e)).H,o[r].push(t)},this)}},this),this.J[+n]=o}this.m(t)},W.prototype.beforeTransformRoot=W.prototype.X,W.prototype.U=function(e){this.h=e},W.prototype.beforeTransformDeclarator=W.prototype.U,W.prototype.T=function(){this.h=null},W.prototype.afterTransformDeclarator=W.prototype.T,W.prototype.m=function(e){this.a.push(this.J[e.id])},W.prototype.beforeTransformScope=W.prototype.m,W.prototype.S=W.prototype.m,W.prototype.beforeTransformPreprocessor=W.prototype.S,W.prototype.D=function(){this.a.pop()},W.prototype.afterTransformScope=W.prototype.D,W.prototype.K=W.prototype.D,W.prototype.afterTransformPreprocessor=W.prototype.K,W.prototype.Z=function(e){return ad(this,this.h,1==this.a.length)?e.H?{id:Pc--,type:"expression",N:{id:Pc--,type:"binary",j:{id:Pc--,type:"operator",j:"="},left:e.name,right:e.H}}:null:e},W.prototype.transformDeclaratorItem=W.prototype.Z,W.prototype.Y=function(e){if(!ad(this,e,1==this.a.length))return e;var t=[],r=I(e.w),n=this.a.slice(-1)[0],o=n[r];return o&&((t=O(e)).A=o,t=[t],delete n[r]),e.A&&0!=e.A.length&&Array.prototype.push.apply(t,e.A),t},W.prototype.transformDeclarator=W.prototype.Y,W.prototype.f=function(){return"DeclarationConsolidation"},W.prototype.g=function(){return[]},W.prototype.u=function(e,t){var r=new W(this.i);return t.c=P(new W(this.i),t.c),t.a=P(r,t.a),[]};var cd=[0,1];function dd(e,t){e.c[t.f()]=t,e.a[1].push(t)}function ed(e){return D(cd,function(e){D(this.a[e],function(e){fd(this,e,[])},this)},e),e.i}function fd(e,t,r){var n=t.f(),o=r.concat(n);if(-1!=r.indexOf(n))throw"Circular dependcy in compiler steps.  "+o.join("->");n in e.f||(D(t.g(),function(e){e in this.c&&fd(this,this.c[e],o)},e),e.f[n]=t.u(e.f,e.i))}function gd(){this.c={},this.g={},this.f=this.a=0}function hd(e){var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[e%52];for(e=Math.floor(e/52);0<e;)t+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890"[--e%62],e=Math.floor(e/62);return t}function id(e){return"_"+hd(e)}function jd(e,t){if(e.c[t])return e.c[t];for(var r=null;!r||r in e.g;)r=hd(e.a++);return e.g[r]=!0,e.c[t]=r}function kd(e,t){return e.c[t]||t}function Y(e){this.c=[],this.K=[],this.a=new gd,this.h=null,this.m=0,this.D=e,this.J=[]}function ld(e,t){if(!t)return!1;var r=t.w.qualifier;return(e.D||"uniform"!=r&&"attribute"!=r)&&!(t.id in e.J)}function Z(){this.c=[],this.a=new gd}gd.prototype.clone=function(){var e=new gd;return e.c=M(this.c),e.g=M(this.g),e.a=this.a,e.f=this.f,e},v(Y,N),Y.prototype.ea=function(e){this.J=Oc(e);var t=[];for(var r in e=Zb(e,e)){var n=e[r];ld(this,n)&&("varying"==(n=n.w.qualifier)||"uniform"==n?jd(this.a,r):t.push(r))}this.v(),D(t,function(e){jd(this.a,e)},this)},Y.prototype.beforeTransformRoot=Y.prototype.ea,Y.prototype.ba=function(e){this.h=e},Y.prototype.beforeTransformDeclarator=Y.prototype.ba,Y.prototype.Y=function(){this.h=null},Y.prototype.afterTransformDeclarator=Y.prototype.Y,Y.prototype.ha=function(e){var t=O(e);return t.name=jd(this.a,e.name),t},Y.prototype.transformParameter=Y.prototype.ha,Y.prototype.v=function(){this.K.push(this.a),this.a=this.a.clone()},Y.prototype.o=function(){this.m=Math.max(this.m,this.a.a),this.a=this.K.pop()},Y.prototype.fa=Y.prototype.v,Y.prototype.beforeTransformScope=Y.prototype.fa,Y.prototype.Z=Y.prototype.o,Y.prototype.afterTransformScope=Y.prototype.Z,Y.prototype.U=Y.prototype.o,Y.prototype.afterTransformRoot=Y.prototype.U,Y.prototype.ca=Y.prototype.v,Y.prototype.beforeTransformFunctionDeclaration=Y.prototype.ca,Y.prototype.S=Y.prototype.o,Y.prototype.afterTransformFunctionDeclaration=Y.prototype.S,Y.prototype.da=Y.prototype.v,Y.prototype.beforeTransformFunctionPrototype=Y.prototype.da,Y.prototype.T=Y.prototype.o,Y.prototype.afterTransformFunctionPrototype=Y.prototype.T,Y.prototype.X=function(e){var t,r=e.name.name;return this.h&&(t=this.h.w.qualifier),ld(this,this.h)&&(r=jd(this.a,e.name.name)),this.i&&this.h&&("attribute"==t?this.i.L[e.name.name].s=r:"uniform"==t&&(this.i.R[e.name.name].s=r)),e},Y.prototype.beforeTransformDeclaratorItem=Y.prototype.X,Y.prototype.ga=function(e){var t=kd(this.a,e.name);return e.name!=t&&((e=O(e)).name=t),e},Y.prototype.transformIdentifier=Y.prototype.ga,Y.prototype.f=function(){return"VariableMinifier"},Y.prototype.g=function(){return[]},Y.prototype.u=function(e,t){var r=new Y(this.D);(r.i=t).c=P(r,t.c);var n=new Y(this.D);return n.i=t,n.a=r.a,t.a=P(n,t.a),{vertexMaxId:r.m,fragmentMaxId:n.m}},v(Z,N);var md={main:!0};function od(e,t,r,n){this.c=e,this.a=t,this.i=r,this.h=n}function pd(e){this.c=[],this.f=!1,this.g=e,this.a=!0}function qd(e,t){e.a&&(e.a=0==ac(t,ia(function(e,t){if("function_call"==e.type||"operator"==e.type||"int"==e.type||"binary"==e.type||"unary"==e.type)return!1;if("identifier"==e.type){var r=this.g[e.name];return(r=da(r)&&r.a)&&(this.f=!0),!(r||0<t.length&&"function_call"==t.slice(-1)[0].type)}return!0},e)).length)}function rd(c,f){var k=z(c,"condition"),n=new pd(f),k=P(n,k),g="";if(n.a&&(g=sd(I(k),f),k=z(g,"condition"),qd(n,k)),g={ja:n.a,G:n.f,value:0,na:g},n.a&&!n.f)try{g.value=Number(eval(I(k)))}catch(e){g.ja=!1}return g}Z.prototype.i=function(e){e.name in md||jd(this.a,e.name)},Z.prototype.beforeTransformFunctionDeclaration=Z.prototype.i,Z.prototype.h=function(e){var t=kd(this.a,e.name);return t!=e.name&&((e=O(e)).name=t),e},Z.prototype.transformFunctionDeclaration=Z.prototype.h,Z.prototype.o=function(e){var t=kd(this.a,e.I);return t!=e.I&&((e=O(e)).I=t),e},Z.prototype.transformFunctionCall=Z.prototype.o,Z.prototype.m=Z.prototype.i,Z.prototype.beforeTransformFunctionPrototype=Z.prototype.m,Z.prototype.v=Z.prototype.h,Z.prototype.transformFunctionPrototype=Z.prototype.v,Z.prototype.f=function(){return"Function Minifier"},Z.prototype.g=function(){return["VariableMinifier"]},Z.prototype.u=function(e,t){var r=0,n=0;"VariableMinifier"in e&&(r=e.VariableMinifier.vertexMaxId,n=e.VariableMinifier.fragmentMaxId);var o=new Z;return o.a.a=r,r=new Z,t.c=P(o,t.c),r.a.a=n,t.a=P(r,t.a),[]},v(pd,N);var td=/([\.=;,\(\)\[\]{}\+\-:?!\|&<>\/\*]|[ \t\n]+)/g,ud=/[A-Za-z_][A-Za-z_0-9]*/g;function vd(e,t){this.name=e.identifier,this.arguments=e.l?e.l.map(function(e){return e.name}):null,this.c=e.pa.split(td).filter(function(e){return 0<e.length}),this.a=t||null}function wd(e,t,r){if(e in r)return e;var n=t[e],o=e;if(da(n))if(n.a)o=n.a.s||n.name;else if(!n.arguments){var i=M(r);i[e]=!0,o=n.c.map(function(e){return wd(e,t,i)}).join("")}return o}function xd(e,t,r,n){for(var o in e){var i,s=t[e[o]];if(da(s)&&s.arguments)if((i=z(i=e.slice(o).join(""),"macro_call_line")).aa&&i.aa.l.length==s.arguments.length&&!(i.aa.oa.name in n)){var a=i.aa,l=M(n);l[i.aa.oa.name]=!0;a=a.l.map(function(e){return sd(I(e),t,r,l)});var u,c={};for(u in s.arguments)c[s.arguments[u]]=a[u];return s=sd(s.c.join(""),t,c,l),i=sd(i.Ja,t,r,n),sd(e.slice(0,o).join("")+s+i,t,r,n)}}return e.join("")}function sd(e,t,r,n){r=r||{},n=n||{};var o,i=M(t);for(o in r)i[o]=new vd(z("#define "+o+" "+r[o],"preprocessor_define"));return xd(e=e.split(td).filter(function(e){return 0<e.length}).map(function(e){return wd(e,i,{})}),t,r,n)}function yd(e,t,r){this.status=e,this.V=t,this.G=r}function zd(e,t,r){var s={};D(t,function(e){var t=z("#define "+e.a,"preprocessor_define");s[e.a]=new vd(t,e),e.s&&(t=z("#define "+e.s,"preprocessor_define"),s[e.s]=new vd(t,e))}),e=I(e);var a=[new yd(1,!0,!1)],l=0,u=[];return D(e.split(/\n/g),function(e){var t=a.slice(-1)[0],r=0==t.status;if(0!=e.search("#define")||r)if(0!=e.search("#undef")||r)if(0==e.search("#if")){if(e=z(t=e,"preprocessor_if"),r)a.push(new yd(0,!1,!1)),t=!1;else{var n=!1,o=!1;if("#ifdef"==e.B||"#ifndef"==e.B){var i=e.value.match(ud)[0];if(!da(i))throw"Invalid "+e.B+": "+t;da(i=s[i])&&i.a?(n=!0,t=e.B+" "+(i.a.s||i.name)):o=da(i)==("#ifndef"==e.B)}else{if(!(o=rd(e.value,s)).ja)throw"Invalid "+e.B+": "+t;t="#if "+o.na,n=o.G,o=0==o.value}n?a.push(new yd(2,!1,!0)):a.push(new yd(o?0:1,!o,!1)),n&&u.push(t),t=n}l+=t&&!r}else if(0==e.search("#else"))r=!1,0!=a.slice(-2,-1)[0].status&&(t.G&&!t.V?(r=!0,n=1,o=t.V,t=!0):0!=t.status||t.V?(o=!(n=0),t=t.G):(n=1,t=!(o=!0)),a[a.length-1]=new yd(n,o,t)),r&&u.push(e);else if(0==e.search("#elif")){if(r=e,e=!1,0!=a.slice(-2,-1)[0].status){if(!(n=rd((o=z(r,"preprocessor_else_if")).value,s)).ja)throw"Invalid "+o.B+": "+r;r="#elif "+n.na,o=0==n.value,t.G&&!t.V?(t=!0,n.G?o=!(n=2):o?(n=0,o=!1):(r="#else",n=1,o=!0)):t.V?(n=0,o=t.V,t=t.G):n.G?(r=r.replace(/^#elif/,"#if"),e=t=!(o=!(n=2))):(n=o?0:1,o=!o,t=t.G),a[a.length-1]=new yd(n,o,t),t&&0!=n&&u.push(r)}l+=e}else 0==e.search("#endif")?(a.pop(),t.G&&(l--,u.push(e))):r||(t=sd(e,s),u.push(t));else{if(0<l)throw"Definitions can not be changed inside of Modes: "+e;t=z(e,"preprocessor_operator"),delete s[t.value]}else{if(0<l)throw"Definitions can not be changed inside of Modes: "+e;t=new vd(t=z(e,"preprocessor_define")),s[t.name]=t}}),z(u.join("\n"),r)}function Ad(e,t){var r="statements";for(r in e)if(e[r]===e.C)break;return P(new Rc(e,r,0,0,t.C),e)}od.prototype.f=function(){return"Preprocessor"},od.prototype.g=function(){return["VariableMinifier"]},od.prototype.u=function(e,t){var r=this.a,n=new gd;if(this.h)for(var o in t.g){var i=id(n.f++);t.g[o].s=i}if(this.i)for(o in t.f)i=id(n.f++),r.push(t.f[o].a+" "+i),t.f[o].s=i;return n=this.c.map(function(e){var t=new Sc;return t.a=e,t}).concat(t.g),r=z(r.map(function(e){return"#define "+e}).join("\n")),t.c=zd(Ad(t.c,r),n,"vertex_start"),t.a=zd(Ad(t.a,r),n,"fragment_start"),[]};var Bd={};ka("glslprep.SyntaxError",la.SyntaxError),ka("glslprep.Shader",Bd),Bd.VERTEX=0,Bd.FRAGMENT=1,ka("glslprep.parseGlsl",function(e,t){return z(e,0===t?"vertex_start":"fragment_start")}),ka("glslprep.minifyGlsl",function(e,t){var r=new R;if(r.c=z(e[0],"vertex_start"),r.a=z(e[1],"fragment_start"),Vc(r),r=new bd(r),null!=t){var n,o=["GL_ES 1"],i=[];for(n in t){var s=t[n];null!=s?o.push(n+" "+s):i.push(n)}dd(r,new od(i,o,!1,!1))}return dd(r,new V),dd(r,new W(!0)),dd(r,new Y(!1)),dd(r,new Z),dd(r,new U),dd(r,new T),r=ed(r),e[0]=I(r.c),e[1]=I(r.a),e})}(),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(p){function h(e,t,r){var n;return(n=e.getWrapperElement().appendChild(document.createElement("div"))).className=r?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof t?n.innerHTML=t:n.appendChild(t),n}function d(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}p.defineExtension("openDialog",function(e,t,r){r||(r={}),d(this,null);var n=h(this,e,r.bottom),o=!1,i=this;function s(e){if("string"==typeof e)l.value=e;else{if(o)return;o=!0,n.parentNode.removeChild(n),i.focus(),r.onClose&&r.onClose(n)}}var a,l=n.getElementsByTagName("input")[0];return l?(r.value&&(l.value=r.value,!1!==r.selectValueOnOpen&&l.select()),r.onInput&&p.on(l,"input",function(e){r.onInput(e,l.value,s)}),r.onKeyUp&&p.on(l,"keyup",function(e){r.onKeyUp(e,l.value,s)}),p.on(l,"keydown",function(e){r&&r.onKeyDown&&r.onKeyDown(e,l.value,s)||((27==e.keyCode||!1!==r.closeOnEnter&&13==e.keyCode)&&(l.blur(),p.e_stop(e),s()),13==e.keyCode&&t(l.value,e))}),!1!==r.closeOnBlur&&p.on(l,"blur",s),l.focus()):(a=n.getElementsByTagName("button")[0])&&(p.on(a,"click",function(){s(),i.focus()}),!1!==r.closeOnBlur&&p.on(a,"blur",s),a.focus()),s}),p.defineExtension("openConfirm",function(e,t,r){d(this,null);var n=h(this,e,r&&r.bottom),o=n.getElementsByTagName("button"),i=!1,s=this,a=1;function l(){i||(i=!0,n.parentNode.removeChild(n),s.focus())}o[0].focus();for(var u=0;u<o.length;++u){var c=o[u];!function(t){p.on(c,"click",function(e){p.e_preventDefault(e),l(),t&&t(s)})}(t[u]),p.on(c,"blur",function(){--a,setTimeout(function(){a<=0&&l()},200)}),p.on(c,"focus",function(){++a})}}),p.defineExtension("openNotification",function(e,t){d(this,s);var r,n=h(this,e,t&&t.bottom),o=!1,i=t&&void 0!==t.duration?t.duration:5e3;function s(){o||(o=!0,clearTimeout(r),n.parentNode.removeChild(n))}return p.on(n,"click",function(e){p.e_preventDefault(e),s()}),i&&(r=setTimeout(s,i)),s})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(T){"use strict";var N="CodeMirror-hint-active";function r(e,t){this.cm=e,this.options=this.buildOptions(t),this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor(),this.startLen=this.cm.getLine(this.startPos.line).length;var r=this;e.on("cursorActivity",this.activityFunc=function(){r.cursorActivity()})}T.showHint=function(e,t,r){if(!t)return e.showHint(r);r&&r.async&&(t.async=!0);var n={hint:t};if(r)for(var o in r)n[o]=r[o];return e.showHint(n)},T.defineExtension("showHint",function(e){if(!(1<this.listSelections().length||this.somethingSelected())){this.state.completionActive&&this.state.completionActive.close();var t=this.state.completionActive=new r(this,e);t.options.hint&&(T.signal(this,"startCompletion",this),t.update(!0))}});var n=window.requestAnimationFrame||function(e){return setTimeout(e,1e3/60)},o=window.cancelAnimationFrame||clearTimeout;function O(e){return"string"==typeof e?e:e.text}function S(e,t){for(;t&&t!=e;){if("LI"===t.nodeName.toUpperCase()&&t.parentNode==e)return t;t=t.parentNode}}function i(o,e){this.completion=o,this.data=e,this.picked=!1;var r=this,i=o.cm,s=this.hints=document.createElement("ul");s.className="CodeMirror-hints",this.selectedHint=e.selectedHint||0;for(var t=e.list,n=0;n<t.length;++n){var a=s.appendChild(document.createElement("li")),l=t[n],u="CodeMirror-hint"+(n!=this.selectedHint?"":" "+N);null!=l.className&&(u=l.className+" "+u),a.className=u,l.render?l.render(a,e,l):a.appendChild(document.createTextNode(l.displayText||O(l))),a.hintId=n}var c=i.cursorCoords(o.options.alignWithWord?e.from:null),p=c.left,h=c.bottom,d=!0;s.style.left=p+"px",s.style.top=h+"px";var f=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),m=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(o.options.container||document.body).appendChild(s);var g=s.getBoundingClientRect();if(0<g.bottom-m){var y=g.bottom-g.top;if(0<c.top-(c.bottom-g.top)-y)s.style.top=(h=c.top-y)+"px",d=!1;else if(m<y){s.style.height=m-5+"px",s.style.top=(h=c.bottom-g.top)+"px";var v=i.getCursor();e.from.ch!=v.ch&&(c=i.cursorCoords(v),s.style.left=(p=c.left)+"px",g=s.getBoundingClientRect())}}var b,x=g.right-f;(0<x&&(g.right-g.left>f&&(s.style.width=f-5+"px",x-=g.right-g.left-f),s.style.left=(p=c.left-x)+"px"),i.addKeyMap(this.keyMap=function(e,n){var o={Up:function(){n.moveFocus(-1)},Down:function(){n.moveFocus(1)},PageUp:function(){n.moveFocus(1-n.menuSize(),!0)},PageDown:function(){n.moveFocus(n.menuSize()-1,!0)},Home:function(){n.setFocus(0)},End:function(){n.setFocus(n.length-1)},Enter:n.pick,Tab:n.pick,Esc:n.close},t=e.options.customKeys,i=t?{}:o;function r(e,t){var r;r="string"!=typeof t?function(e){return t(e,n)}:o.hasOwnProperty(t)?o[t]:t,i[e]=r}if(t)for(var s in t)t.hasOwnProperty(s)&&r(s,t[s]);var a=e.options.extraKeys;if(a)for(var s in a)a.hasOwnProperty(s)&&r(s,a[s]);return i}(o,{moveFocus:function(e,t){r.changeActive(r.selectedHint+e,t)},setFocus:function(e){r.changeActive(e)},menuSize:function(){return r.screenAmount()},length:t.length,close:function(){o.close()},pick:function(){r.pick()},data:e})),o.options.closeOnUnfocus)&&(i.on("blur",this.onBlur=function(){b=setTimeout(function(){o.close()},100)}),i.on("focus",this.onFocus=function(){clearTimeout(b)}));var w=i.getScrollInfo();return i.on("scroll",this.onScroll=function(){var e=i.getScrollInfo(),t=i.getWrapperElement().getBoundingClientRect(),r=h+w.top-e.top,n=r-(window.pageYOffset||(document.documentElement||document.body).scrollTop);if(d||(n+=s.offsetHeight),n<=t.top||n>=t.bottom)return o.close();s.style.top=r+"px",s.style.left=p+w.left-e.left+"px"}),T.on(s,"dblclick",function(e){var t=S(s,e.target||e.srcElement);t&&null!=t.hintId&&(r.changeActive(t.hintId),r.pick())}),T.on(s,"click",function(e){var t=S(s,e.target||e.srcElement);t&&null!=t.hintId&&(r.changeActive(t.hintId),o.options.completeOnSingleClick&&r.pick())}),T.on(s,"mousedown",function(){setTimeout(function(){i.focus()},20)}),T.signal(e,"select",t[0],s.firstChild),!0}r.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&T.signal(this.data,"close"),this.widget&&this.widget.close(),T.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(e,t){var r=e.list[t];r.hint?r.hint(this.cm,e,r):this.cm.replaceRange(O(r),r.from||e.from,r.to||e.to,"complete"),T.signal(e,"pick",r),this.close()},cursorActivity:function(){this.debounce&&(o(this.debounce),this.debounce=0);var e=this.cm.getCursor(),t=this.cm.getLine(e.line);if(e.line!=this.startPos.line||t.length-e.ch!=this.startLen-this.startPos.ch||e.ch<this.startPos.ch||this.cm.somethingSelected()||e.ch&&this.options.closeCharacters.test(t.charAt(e.ch-1)))this.close();else{var r=this;this.debounce=n(function(){r.update()}),this.widget&&this.widget.disable()}},update:function(t){if(null!=this.tick)if(this.data&&T.signal(this.data,"update"),this.options.hint.async){var r=++this.tick,n=this;this.options.hint(this.cm,function(e){n.tick==r&&n.finishUpdate(e,t)},this.options)}else this.finishUpdate(this.options.hint(this.cm,this.options),t)},finishUpdate:function(e,t){this.data=e;var r=this.widget&&this.widget.picked||t&&this.options.completeSingle;this.widget&&this.widget.close(),e&&e.list.length&&(r&&1==e.list.length?this.pick(e,0):(this.widget=new i(this,e),T.signal(e,"shown")))},buildOptions:function(e){var t=this.cm.options.hintOptions,r={};for(var n in s)r[n]=s[n];if(t)for(var n in t)void 0!==t[n]&&(r[n]=t[n]);if(e)for(var n in e)void 0!==e[n]&&(r[n]=e[n]);return r}},i.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var e=this.completion.cm;this.completion.options.closeOnUnfocus&&(e.off("blur",this.onBlur),e.off("focus",this.onFocus)),e.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var e=this;this.keyMap={Enter:function(){e.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(e,t){if(e>=this.data.list.length?e=t?this.data.list.length-1:0:e<0&&(e=t?0:this.data.list.length-1),this.selectedHint!=e){var r=this.hints.childNodes[this.selectedHint];r.className=r.className.replace(" "+N,""),(r=this.hints.childNodes[this.selectedHint=e]).className+=" "+N,r.offsetTop<this.hints.scrollTop?this.hints.scrollTop=r.offsetTop-3:r.offsetTop+r.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=r.offsetTop+r.offsetHeight-this.hints.clientHeight+3),T.signal(this.data,"select",this.data.list[this.selectedHint],r)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},T.registerHelper("hint","auto",function(e,t){var r,n=e.getHelpers(e.getCursor(),"hint");if(n.length)for(var o=0;o<n.length;o++){var i=n[o](e,t);if(i&&i.list.length)return i}else if(r=e.getHelper(e.getCursor(),"hintWords")){if(r)return T.hint.fromList(e,{words:r})}else if(T.hint.anyword)return T.hint.anyword(e,t)}),T.registerHelper("hint","fromList",function(e,t){for(var r=e.getCursor(),n=e.getTokenAt(r),o=[],i=0;i<t.words.length;i++){var s=t.words[i];s.slice(0,n.string.length)==n.string&&o.push(s)}if(o.length)return{list:o,from:T.Pos(r.line,n.start),to:T.Pos(r.line,n.end)}}),T.commands.autocomplete=T.showHint;var s={hint:T.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!1,container:null,customKeys:null,extraKeys:null};T.defineOption("hintOptions",null)}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(y){"use strict";y.TernServer=function(e){var r=this;this.options=e||{};var t=this.options.plugins||(this.options.plugins={});t.doc_comment||(t.doc_comment=!0),this.options.useWorker?this.server=new i(this):this.server=new tern.Server({getFile:function(e,t){return s(r,e,t)},async:!0,defs:this.options.defs||[],plugins:t}),this.docs=Object.create(null),this.trackChange=function(e,t){!function(e,t,r){var n=u(e,t),o=e.cachedArgHints;o&&o.doc==t&&x(o.start,r.to)<=0&&(e.cachedArgHints=null);var i=n.changed;null==i&&(n.changed=i={from:r.from.line,to:r.from.line});var s=r.from.line+(r.text.length-1);r.from.line<i.to&&(i.to=i.to-(r.to.line-s));s>=i.to&&(i.to=s+1);i.from>r.from.line&&(i.from=r.from.line);t.lineCount()>c&&100<r.to-i.from&&setTimeout(function(){n.changed&&100<n.changed.to-n.changed.from&&a(e,n)},200)}(r,e,t)},this.cachedArgHints=null,this.activeArgHints=null,this.jumpStack=[],this.getHint=function(e,t){return h=e,d=t,void(p=r).request(h,{type:"completions",types:!0,docs:!0,urls:!0,caseInsensitive:p.options.caseInsensitive},function(e,t){if(e)return N(p,h,e);var r=[],n="",o=t.start,i=t.end;'["'==h.getRange(v(o.line,o.ch-2),o)&&'"]'!=h.getRange(i,v(i.line,i.ch+2))&&(n='"]');for(var s=0;s<t.completions.length;++s){var a=t.completions[s],l=m(a.type);t.guess&&(l+=" "+f+"guess"),r.push({text:a.name+n,displayText:a.name,className:l,data:a})}var u={from:o,to:i,list:r},c=null;y.on(u,"close",function(){T(c)}),y.on(u,"update",function(){T(c)}),y.on(u,"select",function(e,t){T(c);var r=p.options.completionTip?p.options.completionTip(e.data):e.data.doc;r&&((c=w(t.parentNode.getBoundingClientRect().right+window.pageXOffset,t.getBoundingClientRect().top+window.pageYOffset,r)).className+=" "+f+"hint-doc")}),d(u)});var p,h,d},this.getHint.async=!0},y.TernServer.prototype={addDoc:function(e,t){var r={doc:t,name:e,changed:null};return this.server.addFile(e,S(this,r)),y.on(t,"change",this.trackChange),this.docs[e]=r},delDoc:function(e){var t=r(this,e);t&&(y.off(t.doc,"change",this.trackChange),delete this.docs[t.name],this.server.delFile(t.name))},hideDoc:function(e){O(this);var t=r(this,e);t&&t.changed&&a(this,t)},complete:function(e){e.showHint({hint:this.getHint})},showType:function(e,t,r){n(this,e,t,"type",r)},showDocs:function(e,t,r){n(this,e,t,"documentation",r)},updateArgHints:function(e){!function(r,n){if(O(r),n.somethingSelected())return;var e=n.getTokenAt(n.getCursor()).state,t=y.innerMode(n.getMode(),e);if("javascript"!=t.mode.name)return;var o=t.state.lexical;if("call"!=o.info)return;for(var i,s=o.pos||0,a=n.getOption("tabSize"),l=n.getCursor().line,u=Math.max(0,l-9),c=!1;u<=l;--l){for(var p=n.getLine(l),h=0,d=0;;){var f=p.indexOf("\t",d);if(-1==f)break;h+=a-(f+h)%a-1,d=f+1}if(i=o.column-h,"("==p.charAt(i)){c=!0;break}}if(!c)return;var m=v(l,i),g=r.cachedArgHints;if(g&&g.doc==n.getDoc()&&0==x(m,g.start))return b(r,n,s);r.request(n,{type:"type",preferFunction:!0,end:m},function(e,t){!e&&t.type&&/^fn\(/.test(t.type)&&(r.cachedArgHints={start:d,type:function(o){var e=[],i=3;function t(e){for(var t=0,r=i;;){var n=o.charAt(i);if(e.test(n)&&!t)return o.slice(r,i);/[{\[\(]/.test(n)?++t:/[}\]\)]/.test(n)&&--t,++i}}if(")"!=o.charAt(i))for(;;){var r=o.slice(i).match(/^([^, \(\[\{]+): /);if(r&&(i+=r[0].length,r=r[1]),e.push({name:r,type:t(/[\),]/)}),")"==o.charAt(i))break;i+=2}var n=o.slice(i).match(/^\) -> (.*)$/);return{args:e,rettype:n&&n[1]}}(t.type),name:t.exprName||t.name||"fn",guess:t.guess,doc:n.getDoc()},b(r,n,s))})}(this,e)},jumpToDef:function(e){!function(i,s){function t(e){var t={type:"definition",variable:e||null},o=u(i,s.getDoc());i.server.request(h(i,o,t),function(e,t){if(e)return N(i,s,e);if(t.file||!t.url){if(t.file){var r,n=i.docs[t.file];if(n&&(r=function(e,t){for(var r=t.context.slice(0,t.contextOffset).split("\n"),n=t.start.line-(r.length-1),o=v(n,(1==r.length?t.start.ch:e.getLine(n).length)-r[0].length),i=e.getLine(n).slice(o.ch),s=n+1;s<e.lineCount()&&i.length<t.context.length;++s)i+="\n"+e.getLine(s);if(i.slice(0,t.context.length)==t.context)return t;var a,l=e.getSearchCursor(t.context,0,!1),u=1/0;for(;l.findNext();){var c=l.from(),p=1e4*Math.abs(c.line-o.line);p||(p=Math.abs(c.ch-o.ch)),p<u&&(a=c,u=p)}if(!a)return null;1==r.length?a.ch+=r[0].length:a=v(a.line+(r.length-1),r[r.length-1].length);if(t.start.line==t.end.line)var h=v(a.line,a.ch+(t.end.ch-t.start.ch));else var h=v(a.line+(t.end.line-t.start.line),t.end.ch);return{start:a,end:h}}(n.doc,t)))return i.jumpStack.push({file:o.name,start:s.getCursor("from"),end:s.getCursor("to")}),void l(i,o,n,r.start,r.end)}N(i,s,"Could not find a definition.")}else window.open(t.url)})}e=s,r=e.getCursor("end"),n=e.getTokenAt(r),n.start<r.ch&&("comment"==n.type||"string"==n.type)||!/[\w)\]]/.test(e.getLine(r.line).slice(Math.max(r.ch-1,0),r.ch+1))?o(s,"Jump to variable",function(e){e&&t(e)}):t();var e,r,n}(this,e)},jumpBack:function(e){!function(e,t){var r=e.jumpStack.pop(),n=r&&e.docs[r.file];if(!n)return;l(e,u(e,t.getDoc()),n,r.start,r.end)}(this,e)},rename:function(e){!function(r,n){var e=n.getTokenAt(n.getCursor());if(!/\w/.test(e.string))return N(r,n,"Not at a variable");o(n,"New name for "+e.string,function(e){r.request(n,{type:"rename",newName:e,fullDocs:!0},function(e,t){if(e)return N(r,n,e);!function(e,t){for(var r=Object.create(null),n=0;n<t.length;++n){var o=t[n];(r[o.file]||(r[o.file]=[])).push(o)}for(var i in r){var s=e.docs[i],a=r[i];if(s){a.sort(function(e,t){return x(t.start,e.start)});for(var l="*rename"+ ++p,n=0;n<a.length;++n){var o=a[n];s.doc.replaceRange(o.text,o.start,o.end,l)}}}}(r,t.changes)})})}(this,e)},selectName:function(e){var s,a,l;l=u(s=this,(a=e).doc).name,s.request(a,{type:"refs"},function(e,t){if(e)return N(s,a,e);for(var r=[],n=0,o=0;o<t.refs.length;o++){var i=t.refs[o];i.file==l&&(r.push({anchor:i.start,head:i.end}),0<=x(n,i.start)&&x(n,i.end)<=0&&(n=r.length-1))}a.setSelections(r,n)})},request:function(e,r,n,t){var o=this,i=u(this,e.getDoc()),s=h(this,i,r,t);this.server.request(s,function(e,t){!e&&o.options.responseFilter&&(t=o.options.responseFilter(i,r,s,e,t)),n(e,t)})},destroy:function(){this.worker&&(this.worker.terminate(),this.worker=null)}};var v=y.Pos,f="CodeMirror-Tern-",c=250;function s(e,t,r){var n=e.docs[t];n?r(S(e,n)):e.options.getFile?e.options.getFile(t,r):r(null)}function u(e,t,r){for(var n in e.docs){var o=e.docs[n];if(o.doc==t)return o}if(!r)for(var i=0;;++i)if(n="[doc"+(i||"")+"]",!e.docs[n]){r=n;break}return e.addDoc(r,t)}function r(e,t){return"string"==typeof t?e.docs[t]:(t instanceof y&&(t=t.getDoc()),t instanceof y.Doc?u(e,t):void 0)}function a(e,t){e.server.request({files:[{type:"full",name:t.name,text:S(e,t)}]},function(e){e?window.console.error(e):t.changed=null})}function m(e){var t;return t="?"==e?"unknown":"number"==e||"string"==e||"bool"==e?e:/^fn\(/.test(e)?"fn":/^\[/.test(e)?"array":"object",f+"completion "+f+"completion-"+t}function n(o,i,e,t,s){o.request(i,t,function(e,t){if(e)return N(o,i,e);if(o.options.typeTip)var r=o.options.typeTip(t);else{r=d("span",null,d("strong",null,t.type||"not found"));if(t.doc&&r.appendChild(document.createTextNode("  "+t.doc)),t.url){r.appendChild(document.createTextNode(" "));var n=r.appendChild(d("a",null,"[docs]"));n.href=t.url,n.target="_blank"}}g(i,r),s&&s()},e)}function b(e,t,r){O(e);for(var n=e.cachedArgHints,o=n.type,i=d("span",n.guess?f+"fhint-guess":null,d("span",f+"fname",n.name),"("),s=0;s<o.args.length;++s){s&&i.appendChild(document.createTextNode(", "));var a=o.args[s];i.appendChild(d("span",f+"farg"+(s==r?" "+f+"farg-current":""),a.name||"?")),"?"!=a.type&&(i.appendChild(document.createTextNode(":")),i.appendChild(d("span",f+"type",a.type)))}i.appendChild(document.createTextNode(o.rettype?") ->":")")),o.rettype&&i.appendChild(d("span",f+"type",o.rettype));var l=t.cursorCoords(null,"page");e.activeArgHints=w(l.right+1,l.bottom,i)}function l(e,t,r,n,o){r.doc.setSelection(n,o),t!=r&&e.options.switchToDoc&&(O(e),e.options.switchToDoc(r.name,r.doc))}var p=0;function h(e,t,r,n){var o=[],i=0,s=!r.fullDocs;s||delete r.fullDocs,"string"==typeof r&&(r={type:r}),r.lineCharPositions=!0,null==r.end&&(r.end=n||t.doc.getCursor("end"),t.doc.somethingSelected()&&(r.start=t.doc.getCursor("start")));var a=r.start||r.end;if(t.changed)if(t.doc.lineCount()>c&&!1!==s&&t.changed.to-t.changed.from<100&&t.changed.from<=a.line&&t.changed.to>r.end.line){o.push(function(e,t,r){for(var n,o=e.doc,i=null,s=null,a=t.line-1,l=Math.max(0,a-50);l<=a;--a){var u=o.getLine(a),c=u.search(/\bfunction\b/);if(!(c<0)){var p=y.countColumn(u,null,4);null!=i&&i<=p||(i=p,s=a)}}null==s&&(s=l);var h=Math.min(o.lastLine(),r.line+20);if(null==i||i==y.countColumn(o.getLine(t.line),null,4))n=h;else for(n=r.line+1;n<h;++n){var p=y.countColumn(o.getLine(n),null,4);if(p<=i)break}var d=v(s,0);return{type:"part",name:e.name,offsetLines:d.line,text:o.getRange(d,v(n,0))}}(t,a,r.end)),r.file="#0";i=o[0].offsetLines;null!=r.start&&(r.start=v(r.start.line- -i,r.start.ch)),r.end=v(r.end.line-i,r.end.ch)}else o.push({type:"full",name:t.name,text:S(e,t)}),r.file=t.name,t.changed=null;else r.file=t.name;for(var l in e.docs){var u=e.docs[l];u.changed&&u!=t&&(o.push({type:"full",name:u.name,text:S(e,u)}),u.changed=null)}return{query:r,files:o}}var x=y.cmpPos;function d(e,t){var r=document.createElement(e);t&&(r.className=t);for(var n=2;n<arguments.length;++n){var o=arguments[n];"string"==typeof o&&(o=document.createTextNode(o)),r.appendChild(o)}return r}function o(e,t,r){e.openDialog?e.openDialog(t+": <input type=text>",r):r(prompt(t,""))}function g(t,e){t.state.ternTooltip&&T(t.state.ternTooltip);var r=t.cursorCoords(),n=t.state.ternTooltip=w(r.right+1,r.bottom,e);function o(){var e;(t.state.ternTooltip=null,n.parentNode)&&(t.off("cursorActivity",o),t.off("blur",o),t.off("scroll",o),(e=n).style.opacity="0",setTimeout(function(){T(e)},1100))}var i=!1,s=!1;y.on(n,"mousemove",function(){i=!0}),y.on(n,"mouseout",function(e){y.contains(n,e.relatedTarget||e.toElement)||(s?o():i=!1)}),setTimeout(function(){s=!0,i||o()},1700),t.on("cursorActivity",o),t.on("blur",o),t.on("scroll",o)}function w(e,t,r){var n=d("div",f+"tooltip",r);return n.style.left=e+"px",n.style.top=t+"px",document.body.appendChild(n),n}function T(e){var t=e&&e.parentNode;t&&t.removeChild(e)}function N(e,t,r){e.options.showError?e.options.showError(t,r):g(t,String(r))}function O(e){e.activeArgHints&&(T(e.activeArgHints),e.activeArgHints=null)}function S(e,t){var r=t.doc.getValue();return e.options.fileFilter&&(r=e.options.fileFilter(r,t.name,t.doc)),r}function i(t){var r=t.worker=new Worker(t.options.workerScript);r.postMessage({type:"init",defs:t.options.defs,plugins:t.options.plugins,scripts:t.options.workerDeps});var n=0,o={};function i(e,t){t&&(e.id=++n,o[n]=t),r.postMessage(e)}r.onmessage=function(e){var r=e.data;"getFile"==r.type?s(t,r.name,function(e,t){i({type:"getFile",err:String(e),text:t,id:r.id})}):"debug"==r.type?window.console.log(r.message):r.id&&o[r.id]&&(o[r.id](r.err,r.body),delete o[r.id])},r.onerror=function(e){for(var t in o)o[t](e);o={}},this.addFile=function(e,t){i({type:"add",name:e,text:t})},this.delFile=function(e){i({type:"del",name:e})},this.request=function(e,t){i({type:"req",body:e},t)}}}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).acorn=e()}}(function(){return function i(s,a,l){function u(r,e){if(!a[r]){if(!s[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(c)return c(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var o=a[r]={exports:{}};s[r][0].call(o.exports,function(e){var t=s[r][1][e];return u(t||e)},o,o.exports,i,s,a,l)}return a[r].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,r){"use strict";r.parse=function(e,t){var r=h(t,e),n=r.options.locations?[r.pos,r.curPosition()]:r.pos;return r.nextToken(),r.parseTopLevel(r.options.program||r.startNodeAt(n))},r.parseExpressionAt=function(e,t,r){var n=h(r,e);return n.nextToken(),n.parseExpression()},r.tokenizer=function(e,t){return h(t,e)},Object.defineProperty(r,"__esModule",{value:!0});var n=e("./state"),o=n.Parser,i=e("./options"),s=i.getOptions;e("./parseutil"),e("./statement"),e("./lval"),e("./expression"),r.Parser=n.Parser,r.plugins=n.plugins,r.defaultOptions=i.defaultOptions;var a=e("./location");r.SourceLocation=a.SourceLocation,r.getLineInfo=a.getLineInfo,r.Node=e("./node").Node;var l=e("./tokentype");r.TokenType=l.TokenType,r.tokTypes=l.types;var u=e("./tokencontext");r.TokContext=u.TokContext,r.tokContexts=u.types;var c=e("./identifier");r.isIdentifierChar=c.isIdentifierChar,r.isIdentifierStart=c.isIdentifierStart,r.Token=e("./tokenize").Token;var p=e("./whitespace");r.isNewLine=p.isNewLine,r.lineBreak=p.lineBreak,r.lineBreakG=p.lineBreakG;function h(e,t){return new o(s(e),String(t))}r.version="1.0.1"},{"./expression":2,"./identifier":3,"./location":4,"./lval":5,"./node":6,"./options":7,"./parseutil":8,"./state":9,"./statement":10,"./tokencontext":11,"./tokenize":12,"./tokentype":13,"./whitespace":15}],2:[function(e,t,r){"use strict";var c=e("./tokentype").types,n=e("./state").Parser,l=e("./identifier").reservedWords,a=e("./util").has,o=n.prototype;o.checkPropClash=function(e,t){if(!(6<=this.options.ecmaVersion)){var r=e.key,n=void 0;switch(r.type){case"Identifier":n=r.name;break;case"Literal":n=String(r.value);break;default:return}var o=e.kind||"init",i=void 0;if(a(t,n)){i=t[n];var s="init"!==o;(!this.strict&&!s||!i[o])&&s^i.init||this.raise(r.start,"Redefinition of property")}else i=t[n]={init:!1,get:!1,set:!1};i[o]=!0}},o.parseExpression=function(e,t){var r=this.markPosition(),n=this.parseMaybeAssign(e,t);if(this.type===c.comma){var o=this.startNodeAt(r);for(o.expressions=[n];this.eat(c.comma);)o.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(o,"SequenceExpression")}return n},o.parseMaybeAssign=function(e,t){if(this.type==c._yield&&this.inGenerator)return this.parseYield();var r=void 0;t?r=!1:(t={start:0},r=!0);var n=this.markPosition(),o=this.parseMaybeConditional(e,t);if(this.type.isAssign){var i=this.startNodeAt(n);return i.operator=this.value,i.left=this.type===c.eq?this.toAssignable(o):o,t.start=0,this.checkLVal(o),this.next(),i.right=this.parseMaybeAssign(e),this.finishNode(i,"AssignmentExpression")}return r&&t.start&&this.unexpected(t.start),o},o.parseMaybeConditional=function(e,t){var r=this.markPosition(),n=this.parseExprOps(e,t);if(t&&t.start)return n;if(this.eat(c.question)){var o=this.startNodeAt(r);return o.test=n,o.consequent=this.parseMaybeAssign(),this.expect(c.colon),o.alternate=this.parseMaybeAssign(e),this.finishNode(o,"ConditionalExpression")}return n},o.parseExprOps=function(e,t){var r=this.markPosition(),n=this.parseMaybeUnary(t);return t&&t.start?n:this.parseExprOp(n,r,-1,e)},o.parseExprOp=function(e,t,r,n){var o=this.type.binop;if(null!=o&&(!n||this.type!==c._in)&&r<o){var i=this.startNodeAt(t);i.left=e,i.operator=this.value;var s=this.type;this.next();var a=this.markPosition();return i.right=this.parseExprOp(this.parseMaybeUnary(),a,o,n),this.finishNode(i,s===c.logicalOR||s===c.logicalAND?"LogicalExpression":"BinaryExpression"),this.parseExprOp(i,t,r,n)}return e},o.parseMaybeUnary=function(e){if(this.type.prefix){var t=this.startNode(),r=this.type===c.incDec;return t.operator=this.value,t.prefix=!0,this.next(),t.argument=this.parseMaybeUnary(),e&&e.start&&this.unexpected(e.start),r?this.checkLVal(t.argument):this.strict&&"delete"===t.operator&&"Identifier"===t.argument.type&&this.raise(t.start,"Deleting local variable in strict mode"),this.finishNode(t,r?"UpdateExpression":"UnaryExpression")}var n=this.markPosition(),o=this.parseExprSubscripts(e);if(e&&e.start)return o;for(;this.type.postfix&&!this.canInsertSemicolon();){(t=this.startNodeAt(n)).operator=this.value,t.prefix=!1,t.argument=o,this.checkLVal(o),this.next(),o=this.finishNode(t,"UpdateExpression")}return o},o.parseExprSubscripts=function(e){var t=this.markPosition(),r=this.parseExprAtom(e);return e&&e.start?r:this.parseSubscripts(r,t)},o.parseSubscripts=function(e,t,r){var n;return this.eat(c.dot)?((n=this.startNodeAt(t)).object=e,n.property=this.parseIdent(!0),n.computed=!1,this.parseSubscripts(this.finishNode(n,"MemberExpression"),t,r)):this.eat(c.bracketL)?((n=this.startNodeAt(t)).object=e,n.property=this.parseExpression(),n.computed=!0,this.expect(c.bracketR),this.parseSubscripts(this.finishNode(n,"MemberExpression"),t,r)):!r&&this.eat(c.parenL)?((n=this.startNodeAt(t)).callee=e,n.arguments=this.parseExprList(c.parenR,!1),this.parseSubscripts(this.finishNode(n,"CallExpression"),t,r)):this.type===c.backQuote?((n=this.startNodeAt(t)).tag=e,n.quasi=this.parseTemplate(),this.parseSubscripts(this.finishNode(n,"TaggedTemplateExpression"),t,r)):e},o.parseExprAtom=function(e){var t=void 0;switch(this.type){case c._this:case c._super:var r=this.type===c._this?"ThisExpression":"Super";return t=this.startNode(),this.next(),this.finishNode(t,r);case c._yield:this.inGenerator&&unexpected();case c.name:var n=this.markPosition(),o=this.parseIdent(this.type!==c.name);return!this.canInsertSemicolon()&&this.eat(c.arrow)?this.parseArrowExpression(this.startNodeAt(n),[o]):o;case c.regexp:var i=this.value;return(t=this.parseLiteral(i.value)).regex={pattern:i.pattern,flags:i.flags},t;case c.num:case c.string:return this.parseLiteral(this.value);case c._null:case c._true:case c._false:return(t=this.startNode()).value=this.type===c._null?null:this.type===c._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case c.parenL:return this.parseParenAndDistinguishExpression();case c.bracketL:return t=this.startNode(),this.next(),7<=this.options.ecmaVersion&&this.type===c._for?this.parseComprehension(t,!1):(t.elements=this.parseExprList(c.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression"));case c.braceL:return this.parseObj(!1,e);case c._function:return t=this.startNode(),this.next(),this.parseFunction(t,!1);case c._class:return this.parseClass(this.startNode(),!1);case c._new:return this.parseNew();case c.backQuote:return this.parseTemplate();default:this.unexpected()}},o.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(t,"Literal")},o.parseParenExpression=function(){this.expect(c.parenL);var e=this.parseExpression();return this.expect(c.parenR),e},o.parseParenAndDistinguishExpression=function(){var e=this.markPosition(),t=void 0;if(6<=this.options.ecmaVersion){if(this.next(),7<=this.options.ecmaVersion&&this.type===c._for)return this.parseComprehension(this.startNodeAt(e),!0);for(var r=this.markPosition(),n=[],o=!0,i={start:0},s=void 0,a=void 0;this.type!==c.parenR;){if(o?o=!1:this.expect(c.comma),this.type===c.ellipsis){s=this.start,n.push(this.parseRest());break}this.type!==c.parenL||a||(a=this.start),n.push(this.parseMaybeAssign(!1,i))}var l=this.markPosition();if(this.expect(c.parenR),!this.canInsertSemicolon()&&this.eat(c.arrow))return a&&this.unexpected(a),this.parseArrowExpression(this.startNodeAt(e),n);n.length||this.unexpected(this.lastTokStart),s&&this.unexpected(s),i.start&&this.unexpected(i.start),1<n.length?((t=this.startNodeAt(r)).expressions=n,this.finishNodeAt(t,"SequenceExpression",l)):t=n[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var u=this.startNodeAt(e);return u.expression=t,this.finishNode(u,"ParenthesizedExpression")}return t};var i=[];o.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(c.dot))return e.meta=t,e.property=this.parseIdent(!0),"target"!==e.property.name&&this.raise(e.property.start,"The only valid meta property for new is new.target"),this.finishNode(e,"MetaProperty");var r=this.markPosition();return e.callee=this.parseSubscripts(this.parseExprAtom(),r,!0),this.eat(c.parenL)?e.arguments=this.parseExprList(c.parenR,!1):e.arguments=i,this.finishNode(e,"NewExpression")},o.parseTemplateElement=function(){var e=this.startNode();return e.value={raw:this.input.slice(this.start,this.end),cooked:this.value},this.next(),e.tail=this.type===c.backQuote,this.finishNode(e,"TemplateElement")},o.parseTemplate=function(){var e=this.startNode();this.next(),e.expressions=[];var t=this.parseTemplateElement();for(e.quasis=[t];!t.tail;)this.expect(c.dollarBraceL),e.expressions.push(this.parseExpression()),this.expect(c.braceR),e.quasis.push(t=this.parseTemplateElement());return this.next(),this.finishNode(e,"TemplateLiteral")},o.parseObj=function(e,t){var r=this.startNode(),n=!0,o={};for(r.properties=[],this.next();!this.eat(c.braceR);){if(n)n=!1;else if(this.expect(c.comma),this.afterTrailingComma(c.braceR))break;var i=this.startNode(),s=void 0,a=void 0;6<=this.options.ecmaVersion&&(i.method=!1,i.shorthand=!1,(e||t)&&(a=this.markPosition()),e||(s=this.eat(c.star))),this.parsePropertyName(i),this.eat(c.colon)?(i.value=e?this.parseMaybeDefault():this.parseMaybeAssign(!1,t),i.kind="init"):6<=this.options.ecmaVersion&&this.type===c.parenL?(e&&this.unexpected(),i.kind="init",i.method=!0,i.value=this.parseMethod(s)):5<=this.options.ecmaVersion&&!i.computed&&"Identifier"===i.key.type&&("get"===i.key.name||"set"===i.key.name)&&this.type!=c.comma&&this.type!=c.braceR?((s||e)&&this.unexpected(),i.kind=i.key.name,this.parsePropertyName(i),i.value=this.parseMethod(!1)):6<=this.options.ecmaVersion&&!i.computed&&"Identifier"===i.key.type?(i.kind="init",e?((this.isKeyword(i.key.name)||this.strict&&(l.strictBind(i.key.name)||l.strict(i.key.name))||!this.options.allowReserved&&this.isReservedWord(i.key.name))&&this.raise(i.key.start,"Binding "+i.key.name),i.value=this.parseMaybeDefault(a,i.key)):this.type===c.eq&&t?(t.start||(t.start=this.start),i.value=this.parseMaybeDefault(a,i.key)):i.value=i.key,i.shorthand=!0):this.unexpected(),this.checkPropClash(i,o),r.properties.push(this.finishNode(i,"Property"))}return this.finishNode(r,e?"ObjectPattern":"ObjectExpression")},o.parsePropertyName=function(e){if(6<=this.options.ecmaVersion){if(this.eat(c.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),void this.expect(c.bracketR);e.computed=!1}e.key=this.type===c.num||this.type===c.string?this.parseExprAtom():this.parseIdent(!0)},o.initFunction=function(e){e.id=null,6<=this.options.ecmaVersion&&(e.generator=!1,e.expression=!1)},o.parseMethod=function(e){var t=this.startNode();this.initFunction(t),this.expect(c.parenL),t.params=this.parseBindingList(c.parenR,!1,!1);var r=void 0;return 6<=this.options.ecmaVersion?(t.generator=e,r=!0):r=!1,this.parseFunctionBody(t,r),this.finishNode(t,"FunctionExpression")},o.parseArrowExpression=function(e,t){return this.initFunction(e),e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0),this.finishNode(e,"ArrowFunctionExpression")},o.parseFunctionBody=function(e,t){var r=t&&this.type!==c.braceL;if(r)e.body=this.parseMaybeAssign(),e.expression=!0;else{var n=this.inFunction,o=this.inGenerator,i=this.labels;this.inFunction=!0,this.inGenerator=e.generator,this.labels=[],e.body=this.parseBlock(!0),e.expression=!1,this.inFunction=n,this.inGenerator=o,this.labels=i}if(this.strict||!r&&e.body.body.length&&this.isUseStrict(e.body.body[0])){var s={},a=this.strict;this.strict=!0,e.id&&this.checkLVal(e.id,!0);for(var l=0;l<e.params.length;l++)this.checkLVal(e.params[l],!0,s);this.strict=a}},o.parseExprList=function(e,t,r,n){for(var o=[],i=!0;!this.eat(e);){if(i)i=!1;else if(this.expect(c.comma),t&&this.afterTrailingComma(e))break;r&&this.type===c.comma?o.push(null):this.type===c.ellipsis?o.push(this.parseSpread(n)):o.push(this.parseMaybeAssign(!1,n))}return o},o.parseIdent=function(e){var t=this.startNode();return e&&"never"==this.options.allowReserved&&(e=!1),this.type===c.name?(!e&&(!this.options.allowReserved&&this.isReservedWord(this.value)||this.strict&&l.strict(this.value)&&(6<=this.options.ecmaVersion||-1==this.input.slice(this.start,this.end).indexOf("\\")))&&this.raise(this.start,"The keyword '"+this.value+"' is reserved"),t.name=this.value):e&&this.type.keyword?t.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(t,"Identifier")},o.parseYield=function(){var e=this.startNode();return this.next(),this.type==c.semi||this.canInsertSemicolon()||this.type!=c.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(c.star),e.argument=this.parseMaybeAssign()),this.finishNode(e,"YieldExpression")},o.parseComprehension=function(e,t){for(e.blocks=[];this.type===c._for;){var r=this.startNode();this.next(),this.expect(c.parenL),r.left=this.parseBindingAtom(),this.checkLVal(r.left,!0),this.expectContextual("of"),r.right=this.parseExpression(),this.expect(c.parenR),e.blocks.push(this.finishNode(r,"ComprehensionBlock"))}return e.filter=this.eat(c._if)?this.parseParenExpression():null,e.body=this.parseExpression(),this.expect(t?c.parenR:c.bracketR),e.generator=t,this.finishNode(e,"ComprehensionExpression")}},{"./identifier":3,"./state":9,"./tokentype":13,"./util":14}],3:[function(e,t,r){"use strict";function n(e){e=e.split(" ");var r="",t=[];e:for(var n=0;n<e.length;++n){for(var o=0;o<t.length;++o)if(t[o][0].length==e[n].length){t[o].push(e[n]);continue e}t.push([e[n]])}function i(e){if(1==e.length)return r+="return str === "+JSON.stringify(e[0])+";";r+="switch(str){";for(var t=0;t<e.length;++t)r+="case "+JSON.stringify(e[t])+":";r+="return true}return false;"}if(3<t.length){t.sort(function(e,t){return t.length-e.length}),r+="switch(str.length){";for(n=0;n<t.length;++n){var s=t[n];r+="case "+s[0].length+":",i(s)}r+="}"}else i(e);return new Function("str",r)}r.isIdentifierStart=function(e,t){if(e<65)return 36===e;if(e<91)return!0;if(e<97)return 95===e;if(e<123)return!0;if(e<=65535)return 170<=e&&u.test(String.fromCharCode(e));if(!1===t)return!1;return d(e,p)},r.isIdentifierChar=function(e,t){if(e<48)return 36===e;if(e<58)return!0;if(e<65)return!1;if(e<91)return!0;if(e<97)return 95===e;if(e<123)return!0;if(e<=65535)return 170<=e&&c.test(String.fromCharCode(e));if(!1===t)return!1;return d(e,p)||d(e,h)},Object.defineProperty(r,"__esModule",{value:!0});var o={3:n("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),5:n("class enum extends super const export import"),6:n("enum await"),strict:n("implements interface let package private protected public static yield"),strictBind:n("eval arguments")};r.reservedWords=o;var i="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",s={5:n(i),6:n(i+" let const class extends export import yield super")};r.keywords=s;var a="-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",l="-------------------------------------------------------------------------------------------------------------------------------------------------",u=new RegExp("["+a+"]"),c=new RegExp("["+a+l+"]");a=l=null;var p=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,17,26,6,37,11,29,3,35,5,7,2,4,43,157,99,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,98,21,11,25,71,55,7,1,65,0,16,3,2,2,2,26,45,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,955,52,76,44,33,24,27,35,42,34,4,0,13,47,15,3,22,0,38,17,2,24,133,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,32,4,287,47,21,1,2,0,185,46,82,47,21,0,60,42,502,63,32,0,449,56,1288,920,104,110,2962,1070,13266,568,8,30,114,29,19,47,17,3,32,20,6,18,881,68,12,0,67,12,16481,1,3071,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,1340,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,16355,541],h=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,1306,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,52,0,13,2,49,13,16,9,83,11,168,11,6,9,8,2,57,0,2,6,3,1,3,2,10,0,11,1,3,6,4,4,316,19,13,9,214,6,3,8,112,16,16,9,82,12,9,9,535,9,20855,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,4305,6,792618,239];function d(e,t){for(var r=65536,n=0;n<t.length;n+=2){if(e<(r+=t[n]))return!1;if(e<=(r+=t[n+1]))return!0}}},{}],4:[function(e,t,r){"use strict";var n=function(){function n(e,t){for(var r in t){var n=t[r];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(e,t)}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};r.getLineInfo=l,Object.defineProperty(r,"__esModule",{value:!0});var i=e("./state").Parser,s=e("./whitespace").lineBreakG,a=r.Position=function(){function r(e,t){o(this,r),this.line=e,this.column=t}return n(r,{offset:{value:function(e){return new r(this.line,this.column+e)}}}),r}();r.SourceLocation=function e(t,r,n){o(this,e),this.start=r,this.end=n,null!==t.sourceFile&&(this.source=t.sourceFile)};function l(e,t){for(var r=1,n=0;;){s.lastIndex=n;var o=s.exec(e);if(!(o&&o.index<t))return new a(r,t-n);++r,n=o.index+o[0].length}}var u=i.prototype;u.raise=function(e,t){var r=l(this.input,e);t+=" ("+r.line+":"+r.column+")";var n=new SyntaxError(t);throw n.pos=e,n.loc=r,n.raisedAt=this.pos,n},u.curPosition=function(){return new a(this.curLine,this.pos-this.lineStart)},u.markPosition=function(){return this.options.locations?[this.start,this.startLoc]:this.start}},{"./state":9,"./whitespace":15}],5:[function(e,t,r){"use strict";var i=e("./tokentype").types,n=e("./state").Parser,s=e("./identifier").reservedWords,a=e("./util").has,o=n.prototype;o.toAssignable=function(e,t){if(6<=this.options.ecmaVersion&&e)switch(e.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":break;case"ObjectExpression":e.type="ObjectPattern";for(var r=0;r<e.properties.length;r++){var n=e.properties[r];"init"!==n.kind&&this.raise(n.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(n.value,t)}break;case"ArrayExpression":e.type="ArrayPattern",this.toAssignableList(e.elements,t);break;case"AssignmentExpression":"="===e.operator?e.type="AssignmentPattern":this.raise(e.left.end,"Only '=' operator can be used for specifying default value.");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}return e},o.toAssignableList=function(e,t){var r=e.length;if(r){var n=e[r-1];if(n&&"RestElement"==n.type)--r;else if(n&&"SpreadElement"==n.type){n.type="RestElement";var o=n.argument;this.toAssignable(o,t),"Identifier"!==o.type&&"MemberExpression"!==o.type&&"ArrayPattern"!==o.type&&this.unexpected(o.start),--r}}for(var i=0;i<r;i++){var s=e[i];s&&this.toAssignable(s,t)}return e},o.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(e),this.finishNode(t,"SpreadElement")},o.parseRest=function(){var e=this.startNode();return this.next(),e.argument=this.type===i.name||this.type===i.bracketL?this.parseBindingAtom():this.unexpected(),this.finishNode(e,"RestElement")},o.parseBindingAtom=function(){if(this.options.ecmaVersion<6)return this.parseIdent();switch(this.type){case i.name:return this.parseIdent();case i.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(i.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case i.braceL:return this.parseObj(!0);default:this.unexpected()}},o.parseBindingList=function(e,t,r){for(var n=[],o=!0;!this.eat(e);)if(o?o=!1:this.expect(i.comma),t&&this.type===i.comma)n.push(null);else{if(r&&this.afterTrailingComma(e))break;if(this.type===i.ellipsis){n.push(this.parseRest()),this.expect(e);break}n.push(this.parseMaybeDefault())}return n},o.parseMaybeDefault=function(e,t){if(e=e||this.markPosition(),t=t||this.parseBindingAtom(),!this.eat(i.eq))return t;var r=this.startNodeAt(e);return r.operator="=",r.left=t,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},o.checkLVal=function(e,t,r){switch(e.type){case"Identifier":this.strict&&(s.strictBind(e.name)||s.strict(e.name))&&this.raise(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(a(r,e.name)&&this.raise(e.start,"Argument name clash in strict mode"),r[e.name]=!0);break;case"MemberExpression":t&&this.raise(e.start,(t?"Binding":"Assigning to")+" member expression");break;case"ObjectPattern":for(var n=0;n<e.properties.length;n++)this.checkLVal(e.properties[n].value,t,r);break;case"ArrayPattern":for(n=0;n<e.elements.length;n++){var o=e.elements[n];o&&this.checkLVal(o,t,r)}break;case"AssignmentPattern":this.checkLVal(e.left,t,r);break;case"RestElement":this.checkLVal(e.argument,t,r);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}}},{"./identifier":3,"./state":9,"./tokentype":13,"./util":14}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./state").Parser,o=e("./location").SourceLocation,i=n.prototype,s=r.Node=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};i.startNode=function(){var e=new s;return e.start=this.start,this.options.locations&&(e.loc=new o(this,this.startLoc)),this.options.directSourceFile&&(e.sourceFile=this.options.directSourceFile),this.options.ranges&&(e.range=[this.start,0]),e},i.startNodeAt=function(e){var t=new s,r=e;return this.options.locations&&(t.loc=new o(this,r[1]),r=e[0]),t.start=r,this.options.directSourceFile&&(t.sourceFile=this.options.directSourceFile),this.options.ranges&&(t.range=[r,0]),t},i.finishNode=function(e,t){return e.type=t,e.end=this.lastTokEnd,this.options.locations&&(e.loc.end=this.lastTokEndLoc),this.options.ranges&&(e.range[1]=this.lastTokEnd),e},i.finishNodeAt=function(e,t,r){return this.options.locations&&(e.loc.end=r[1],r=r[0]),e.type=t,e.end=r,this.options.ranges&&(e.range[1]=r),e}},{"./location":4,"./state":9}],7:[function(e,t,r){"use strict";r.getOptions=function(e){var t={};for(var r in s)t[r]=e&&o(e,r)?e[r]:s[r];i(t.onToken)&&(n=t.onToken,t.onToken=function(e){return n.push(e)});var n;i(t.onComment)&&(t.onComment=(a=t,l=t.onComment,function(e,t,r,n,o,i){var s={type:e?"Block":"Line",value:t,start:r,end:n};a.locations&&(s.loc=new u(this,o,i)),a.ranges&&(s.range=[r,n]),l.push(s)}));var a,l;return t},Object.defineProperty(r,"__esModule",{value:!0});var n=e("./util"),o=n.has,i=n.isArray,u=e("./location").SourceLocation,s={ecmaVersion:5,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:!0,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}};r.defaultOptions=s},{"./location":4,"./util":14}],8:[function(e,t,r){"use strict";var n=e("./tokentype").types,o=e("./state").Parser,i=e("./whitespace").lineBreak,s=o.prototype;s.isUseStrict=function(e){return 5<=this.options.ecmaVersion&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"use strict"===e.expression.value},s.eat=function(e){return this.type===e&&(this.next(),!0)},s.isContextual=function(e){return this.type===n.name&&this.value===e},s.eatContextual=function(e){return this.value===e&&this.eat(n.name)},s.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},s.canInsertSemicolon=function(){return this.type===n.eof||this.type===n.braceR||i.test(this.input.slice(this.lastTokEnd,this.start))},s.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},s.semicolon=function(){this.eat(n.semi)||this.insertSemicolon()||this.unexpected()},s.afterTrailingComma=function(e){if(this.type==e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),this.next(),!0},s.expect=function(e){this.eat(e)||this.unexpected()},s.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")}},{"./state":9,"./tokentype":13,"./whitespace":15}],9:[function(e,t,n){"use strict";n.Parser=u,Object.defineProperty(n,"__esModule",{value:!0});var r=e("./identifier"),o=r.reservedWords,i=r.keywords,s=e("./tokentype"),a=s.types,l=s.lineBreak;function u(e,t,r){this.options=e,this.loadPlugins(this.options.plugins),this.sourceFile=this.options.sourceFile||null,this.isKeyword=i[6<=this.options.ecmaVersion?6:5],this.isReservedWord=o[this.options.ecmaVersion],this.input=t,r?(this.pos=r,this.lineStart=Math.max(0,this.input.lastIndexOf("\n",r)),this.curLine=this.input.slice(0,this.lineStart).split(l).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=a.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=null,this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.strict=this.inModule="module"===this.options.sourceType,this.inFunction=this.inGenerator=!1,this.labels=[],0===this.pos&&this.options.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2)}u.prototype.extend=function(e,t){this[e]=t(this[e])};n.plugins={},u.prototype.loadPlugins=function(e){for(var t in e){var r=n.plugins[t];if(!r)throw new Error("Plugin '"+t+"' not found");r(this,e[t])}}},{"./identifier":3,"./tokentype":13}],10:[function(e,t,r){"use strict";var s=e("./tokentype").types,n=e("./state").Parser,o=e("./whitespace").lineBreak,i=n.prototype;i.parseTopLevel=function(e){var t=!0;for(e.body||(e.body=[]);this.type!==s.eof;){var r=this.parseStatement(!0,!0);e.body.push(r),t&&this.isUseStrict(r)&&this.setStrict(!0),t=!1}return this.next(),6<=this.options.ecmaVersion&&(e.sourceType=this.options.sourceType),this.finishNode(e,"Program")};var a={kind:"loop"},l={kind:"switch"};i.parseStatement=function(e,t){var r=this.type,n=this.startNode();switch(r){case s._break:case s._continue:return this.parseBreakContinueStatement(n,r.keyword);case s._debugger:return this.parseDebuggerStatement(n);case s._do:return this.parseDoStatement(n);case s._for:return this.parseForStatement(n);case s._function:return!e&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(n);case s._class:return e||this.unexpected(),this.parseClass(n,!0);case s._if:return this.parseIfStatement(n);case s._return:return this.parseReturnStatement(n);case s._switch:return this.parseSwitchStatement(n);case s._throw:return this.parseThrowStatement(n);case s._try:return this.parseTryStatement(n);case s._let:case s._const:e||this.unexpected();case s._var:return this.parseVarStatement(n,r);case s._while:return this.parseWhileStatement(n);case s._with:return this.parseWithStatement(n);case s.braceL:return this.parseBlock();case s.semi:return this.parseEmptyStatement(n);case s._export:case s._import:return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===s._import?this.parseImport(n):this.parseExport(n);default:var o=this.value,i=this.parseExpression();return r===s.name&&"Identifier"===i.type&&this.eat(s.colon)?this.parseLabeledStatement(n,o,i):this.parseExpressionStatement(n,i)}},i.parseBreakContinueStatement=function(e,t){var r="break"==t;this.next(),this.eat(s.semi)||this.insertSemicolon()?e.label=null:this.type!==s.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var n=0;n<this.labels.length;++n){var o=this.labels[n];if(null==e.label||o.name===e.label.name){if(null!=o.kind&&(r||"loop"===o.kind))break;if(e.label&&r)break}}return n===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,r?"BreakStatement":"ContinueStatement")},i.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},i.parseDoStatement=function(e){return this.next(),this.labels.push(a),e.body=this.parseStatement(!1),this.labels.pop(),this.expect(s._while),e.test=this.parseParenExpression(),6<=this.options.ecmaVersion?this.eat(s.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},i.parseForStatement=function(e){if(this.next(),this.labels.push(a),this.expect(s.parenL),this.type===s.semi)return this.parseFor(e,null);if(this.type===s._var||this.type===s._let||this.type===s._const){var t=this.startNode(),r=this.type;return this.next(),this.parseVar(t,!0,r),this.finishNode(t,"VariableDeclaration"),!(this.type===s._in||6<=this.options.ecmaVersion&&this.isContextual("of"))||1!==t.declarations.length||r!==s._var&&t.declarations[0].init?this.parseFor(e,t):this.parseForIn(e,t)}var n={start:0},o=this.parseExpression(!0,n);return this.type===s._in||6<=this.options.ecmaVersion&&this.isContextual("of")?(this.toAssignable(o),this.checkLVal(o),this.parseForIn(e,o)):(n.start&&this.unexpected(n.start),this.parseFor(e,o))},i.parseFunctionStatement=function(e){return this.next(),this.parseFunction(e,!0)},i.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement(!1),e.alternate=this.eat(s._else)?this.parseStatement(!1):null,this.finishNode(e,"IfStatement")},i.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(s.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},i.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(s.braceL),this.labels.push(l);for(var t,r;this.type!=s.braceR;)if(this.type===s._case||this.type===s._default){var n=this.type===s._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),n?t.test=this.parseExpression():(r&&this.raise(this.lastTokStart,"Multiple default clauses"),r=!0,t.test=null),this.expect(s.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(!0));return t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},i.parseThrowStatement=function(e){return this.next(),o.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var u=[];i.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===s._catch){var t=this.startNode();this.next(),this.expect(s.parenL),t.param=this.parseBindingAtom(),this.checkLVal(t.param,!0),this.expect(s.parenR),t.guard=null,t.body=this.parseBlock(),e.handler=this.finishNode(t,"CatchClause")}return e.guardedHandlers=u,e.finalizer=this.eat(s._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},i.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},i.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(a),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,"WhileStatement")},i.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement(!1),this.finishNode(e,"WithStatement")},i.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},i.parseLabeledStatement=function(e,t,r){for(var n=0;n<this.labels.length;++n)this.labels[n].name===t&&this.raise(r.start,"Label '"+t+"' is already declared");var o=this.type.isLoop?"loop":this.type===s._switch?"switch":null;return this.labels.push({name:t,kind:o}),e.body=this.parseStatement(!0),this.labels.pop(),e.label=r,this.finishNode(e,"LabeledStatement")},i.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},i.parseBlock=function(e){var t=this.startNode(),r=!0,n=void 0;for(t.body=[],this.expect(s.braceL);!this.eat(s.braceR);){var o=this.parseStatement(!0);t.body.push(o),r&&e&&this.isUseStrict(o)&&(n=this.strict,this.setStrict(this.strict=!0)),r=!1}return!1===n&&this.setStrict(!1),this.finishNode(t,"BlockStatement")},i.parseFor=function(e,t){return e.init=t,this.expect(s.semi),e.test=this.type===s.semi?null:this.parseExpression(),this.expect(s.semi),e.update=this.type===s.parenR?null:this.parseExpression(),this.expect(s.parenR),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,"ForStatement")},i.parseForIn=function(e,t){var r=this.type===s._in?"ForInStatement":"ForOfStatement";return this.next(),e.left=t,e.right=this.parseExpression(),this.expect(s.parenR),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,r)},i.parseVar=function(e,t,r){for(e.declarations=[],e.kind=r.keyword;;){var n=this.startNode();if(n.id=this.parseBindingAtom(),this.checkLVal(n.id,!0),this.eat(s.eq)?n.init=this.parseMaybeAssign(t):r!==s._const||this.type===s._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"==n.id.type||t&&(this.type===s._in||this.isContextual("of"))?n.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(n,"VariableDeclarator")),!this.eat(s.comma))break}return e},i.parseFunction=function(e,t,r){return this.initFunction(e),6<=this.options.ecmaVersion&&(e.generator=this.eat(s.star)),(t||this.type===s.name)&&(e.id=this.parseIdent()),this.expect(s.parenL),e.params=this.parseBindingList(s.parenR,!1,!1),this.parseFunctionBody(e,r),this.finishNode(e,t?"FunctionDeclaration":"FunctionExpression")},i.parseClass=function(e,t){this.next(),e.id=this.type===s.name?this.parseIdent():t?this.unexpected():null,e.superClass=this.eat(s._extends)?this.parseExprSubscripts():null;var r=this.startNode();for(r.body=[],this.expect(s.braceL);!this.eat(s.braceR);)if(!this.eat(s.semi)){var n=this.startNode(),o=this.eat(s.star);this.parsePropertyName(n),this.type===s.parenL||n.computed||"Identifier"!==n.key.type||"static"!==n.key.name?n.static=!1:(o&&this.unexpected(),n.static=!0,o=this.eat(s.star),this.parsePropertyName(n)),n.kind="method",n.computed||o||("Identifier"===n.key.type?this.type===s.parenL||"get"!==n.key.name&&"set"!==n.key.name?n.static||"constructor"!==n.key.name||(n.kind="constructor"):(n.kind=n.key.name,this.parsePropertyName(n)):n.static||"Literal"!==n.key.type||"constructor"!==n.key.value||(n.kind="constructor")),n.value=this.parseMethod(o),r.body.push(this.finishNode(n,"MethodDefinition"))}return e.body=this.finishNode(r,"ClassBody"),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},i.parseExport=function(e){if(this.next(),this.eat(s.star))return this.expectContextual("from"),e.source=this.type===s.string?this.parseExprAtom():this.unexpected(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(s._default)){var t=this.parseMaybeAssign(),r=!0;return"FunctionExpression"!=t.type&&"ClassExpression"!=t.type||(r=!1,t.id&&(t.type="FunctionExpression"==t.type?"FunctionDeclaration":"ClassDeclaration")),e.declaration=t,r&&this.semicolon(),this.finishNode(e,"ExportDefaultDeclaration")}return this.type.keyword?(e.declaration=this.parseStatement(!0),e.specifiers=[],e.source=null):(e.declaration=null,e.specifiers=this.parseExportSpecifiers(),this.eatContextual("from")?e.source=this.type===s.string?this.parseExprAtom():this.unexpected():e.source=null,this.semicolon()),this.finishNode(e,"ExportNamedDeclaration")},i.parseExportSpecifiers=function(){var e=[],t=!0;for(this.expect(s.braceL);!this.eat(s.braceR);){if(t)t=!1;else if(this.expect(s.comma),this.afterTrailingComma(s.braceR))break;var r=this.startNode();r.local=this.parseIdent(this.type===s._default),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,e.push(this.finishNode(r,"ExportSpecifier"))}return e},i.parseImport=function(e){return this.next(),this.type===s.string?(e.specifiers=u,e.source=this.parseExprAtom(),e.kind=""):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===s.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},i.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===s.name&&((r=this.startNode()).local=this.parseIdent(),this.checkLVal(r.local,!0),e.push(this.finishNode(r,"ImportDefaultSpecifier")),!this.eat(s.comma)))return e;if(this.type===s.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,!0),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(s.braceL);!this.eat(s.braceR);){if(t)t=!1;else if(this.expect(s.comma),this.afterTrailingComma(s.braceR))break;(r=this.startNode()).imported=this.parseIdent(!0),r.local=this.eatContextual("as")?this.parseIdent():r.imported,this.checkLVal(r.local,!0),e.push(this.finishNode(r,"ImportSpecifier"))}return e}},{"./state":9,"./tokentype":13,"./whitespace":15}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./state").Parser,o=e("./tokentype").types,i=e("./whitespace").lineBreak,s=r.TokContext=function e(t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.token=t,this.isExpr=r,this.preserveSpace=n,this.override=o},a={b_stat:new s("{",!1),b_expr:new s("{",!0),b_tmpl:new s("${",!0),p_stat:new s("(",!1),p_expr:new s("(",!0),q_tmpl:new s("`",!0,!0,function(e){return e.readTmplToken()}),f_expr:new s("function",!0)};r.types=a;var l=n.prototype;l.initialContext=function(){return[a.b_stat]},l.braceIsBlock=function(e){var t=void 0;return e===o.colon&&"{"==(t=this.curContext()).token?!t.isExpr:e===o._return?i.test(this.input.slice(this.lastTokEnd,this.start)):e===o._else||e===o.semi||e===o.eof||(e==o.braceL?this.curContext()===a.b_stat:!this.exprAllowed)},l.updateContext=function(e){var t=void 0,r=this.type;r.keyword&&e==o.dot?this.exprAllowed=!1:(t=r.updateContext)?t.call(this,e):this.exprAllowed=r.beforeExpr},o.parenR.updateContext=o.braceR.updateContext=function(){if(1!=this.context.length){var e=this.context.pop();e===a.b_stat&&this.curContext()===a.f_expr?(this.context.pop(),this.exprAllowed=!1):this.exprAllowed=e===a.b_tmpl||!e.isExpr}else this.exprAllowed=!0},o.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?a.b_stat:a.b_expr),this.exprAllowed=!0},o.dollarBraceL.updateContext=function(){this.context.push(a.b_tmpl),this.exprAllowed=!0},o.parenL.updateContext=function(e){var t=e===o._if||e===o._for||e===o._with||e===o._while;this.context.push(t?a.p_stat:a.p_expr),this.exprAllowed=!0},o.incDec.updateContext=function(){},o._function.updateContext=function(){this.curContext()!==a.b_stat&&this.context.push(a.f_expr),this.exprAllowed=!1},o.backQuote.updateContext=function(){this.curContext()===a.q_tmpl?this.context.pop():this.context.push(a.q_tmpl),this.exprAllowed=!1}},{"./state":9,"./tokentype":13,"./whitespace":15}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./identifier"),a=n.isIdentifierStart,l=n.isIdentifierChar,o=e("./tokentype"),u=o.types,i=o.keywords,s=e("./state").Parser,c=e("./location").SourceLocation,p=e("./whitespace"),h=p.lineBreak,d=p.lineBreakG,f=p.isNewLine,m=p.nonASCIIwhitespace,g=r.Token=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new c(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},y=s.prototype;y.next=function(){this.options.onToken&&this.options.onToken(new g(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},y.getToken=function(){return this.next(),new g(this)},"undefined"!=typeof Symbol&&(y[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===u.eof,value:e}}}}),y.setStrict=function(e){if(this.strict=e,this.type===u.num||this.type===u.string){if(this.pos=this.start,this.options.locations)for(;this.pos<this.lineStart;)this.lineStart=this.input.lastIndexOf("\n",this.lineStart-2)+1,--this.curLine;this.nextToken()}},y.curContext=function(){return this.context[this.context.length-1]},y.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(u.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},y.readToken=function(e){return a(e,6<=this.options.ecmaVersion)||92===e?this.readWord():this.getTokenFromCode(e)},y.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||57344<=e?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888},y.skipBlockComment=function(){var e=this.options.onComment&&this.options.locations&&this.curPosition(),t=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations){d.lastIndex=t;for(var n=void 0;(n=d.exec(this.input))&&n.index<this.pos;)++this.curLine,this.lineStart=n.index+n[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,r),t,this.pos,e,this.options.locations&&this.curPosition())},y.skipLineComment=function(e){for(var t=this.pos,r=this.options.onComment&&this.options.locations&&this.curPosition(),n=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&10!==n&&13!==n&&8232!==n&&8233!==n;)++this.pos,n=this.input.charCodeAt(this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,r,this.options.locations&&this.curPosition())},y.skipSpace=function(){for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);if(32===e)++this.pos;else if(13===e){++this.pos,10===(t=this.input.charCodeAt(this.pos))&&++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos)}else if(10===e||8232===e||8233===e)++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);else if(8<e&&e<14)++this.pos;else if(47===e){var t;if(42===(t=this.input.charCodeAt(this.pos+1)))this.skipBlockComment();else{if(47!==t)break;this.skipLineComment(2)}}else if(160===e)++this.pos;else{if(!(5760<=e&&m.test(String.fromCharCode(e))))break;++this.pos}}},y.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var r=this.type;this.type=e,this.value=t,this.updateContext(r)},y.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(48<=e&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return 6<=this.options.ecmaVersion&&46===e&&46===t?(this.pos+=3,this.finishToken(u.ellipsis)):(++this.pos,this.finishToken(u.dot))},y.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(u.assign,2):this.finishOp(u.slash,1)},y.readToken_mult_modulo=function(e){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(u.assign,2):this.finishOp(42===e?u.star:u.modulo,1)},y.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?u.logicalOR:u.logicalAND,2):61===t?this.finishOp(u.assign,2):this.finishOp(124===e?u.bitwiseOR:u.bitwiseAND,1)},y.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(u.assign,2):this.finishOp(u.bitwiseXOR,1)},y.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45==t&&62==this.input.charCodeAt(this.pos+2)&&h.test(this.input.slice(this.lastTokEnd,this.pos))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(u.incDec,2):61===t?this.finishOp(u.assign,2):this.finishOp(u.plusMin,1)},y.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),r=1;return t===e?(r=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+r)?this.finishOp(u.assign,r+1):this.finishOp(u.bitShift,r)):33==t&&60==e&&45==this.input.charCodeAt(this.pos+2)&&45==this.input.charCodeAt(this.pos+3)?(this.inModule&&unexpected(),this.skipLineComment(4),this.skipSpace(),this.nextToken()):(61===t&&(r=61===this.input.charCodeAt(this.pos+2)?3:2),this.finishOp(u.relational,r))},y.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(u.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(u.arrow)):this.finishOp(61===e?u.eq:u.prefix,1)},y.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(u.parenL);case 41:return++this.pos,this.finishToken(u.parenR);case 59:return++this.pos,this.finishToken(u.semi);case 44:return++this.pos,this.finishToken(u.comma);case 91:return++this.pos,this.finishToken(u.bracketL);case 93:return++this.pos,this.finishToken(u.bracketR);case 123:return++this.pos,this.finishToken(u.braceL);case 125:return++this.pos,this.finishToken(u.braceR);case 58:return++this.pos,this.finishToken(u.colon);case 63:return++this.pos,this.finishToken(u.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(u.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(u.prefix,1)}this.raise(this.pos,"Unexpected character '"+x(e)+"'")};var v,b=!(y.finishOp=function(e,t){var r=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,r)});try{new RegExp("","u"),b=!0}catch(e){}function x(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}y.readRegexp=function(){for(var e=void 0,t=void 0,r=this.pos;;){this.pos>=this.input.length&&this.raise(r,"Unterminated regular expression");var n=this.input.charAt(this.pos);if(h.test(n)&&this.raise(r,"Unterminated regular expression"),e)e=!1;else{if("["===n)t=!0;else if("]"===n&&t)t=!1;else if("/"===n&&!t)break;e="\\"===n}++this.pos}var o=this.input.slice(r,this.pos);++this.pos;var i=this.readWord1(),s=o;if(i){var a=/^[gmsiy]*$/;6<=this.options.ecmaVersion&&(a=/^[gmsiyu]*$/),a.test(i)||this.raise(r,"Invalid regular expression flag"),0<=i.indexOf("u")&&!b&&(s=s.replace(/\\u([a-fA-F0-9]{4})|\\u\{([0-9a-fA-F]+)\}|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"))}try{new RegExp(s)}catch(e){e instanceof SyntaxError&&this.raise(r,"Error parsing regular expression: "+e.message),this.raise(e)}var l=void 0;try{l=new RegExp(o,i)}catch(e){l=null}return this.finishToken(u.regexp,{pattern:o,flags:i,value:l})},y.readInt=function(e,t){for(var r=this.pos,n=0,o=0,i=null==t?1/0:t;o<i;++o){var s=this.input.charCodeAt(this.pos),a=void 0;if(e<=(a=97<=s?s-97+10:65<=s?s-65+10:48<=s&&s<=57?s-48:1/0))break;++this.pos,n=n*e+a}return this.pos===r||null!=t&&this.pos-r!==t?null:n},y.readRadixNumber=function(e){this.pos+=2;var t=this.readInt(e);return null==t&&this.raise(this.start+2,"Expected number in radix "+e),a(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(u.num,t)},y.readNumber=function(e){var t=this.pos,r=!1,n=48===this.input.charCodeAt(this.pos);e||null!==this.readInt(10)||this.raise(t,"Invalid number"),46===this.input.charCodeAt(this.pos)&&(++this.pos,this.readInt(10),r=!0);var o=this.input.charCodeAt(this.pos);69!==o&&101!==o||(43!==(o=this.input.charCodeAt(++this.pos))&&45!==o||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number"),r=!0),a(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var i=this.input.slice(t,this.pos),s=void 0;return r?s=parseFloat(i):n&&1!==i.length?/[89]/.test(i)||this.strict?this.raise(t,"Invalid number"):s=parseInt(i,8):s=parseInt(i,10),this.finishToken(u.num,s)},y.readCodePoint=function(){var e=void 0;return 123===this.input.charCodeAt(this.pos)?(this.options.ecmaVersion<6&&this.unexpected(),++this.pos,e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,1114111<e&&this.unexpected()):e=this.readHexChar(4),e},y.readString=function(e){for(var t="",r=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var n=this.input.charCodeAt(this.pos);if(n===e)break;92===n?(t+=this.input.slice(r,this.pos),t+=this.readEscapedChar(),r=this.pos):(f(n)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(r,this.pos++),this.finishToken(u.string,t)},y.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var r=this.input.charCodeAt(this.pos);if(96===r||36===r&&123===this.input.charCodeAt(this.pos+1))return this.pos===this.start&&this.type===u.template?36===r?(this.pos+=2,this.finishToken(u.dollarBraceL)):(++this.pos,this.finishToken(u.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(u.template,e));92===r?(e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(),t=this.pos):f(r)?(e+=this.input.slice(t,this.pos),++this.pos,13===r&&10===this.input.charCodeAt(this.pos)?(++this.pos,e+="\n"):e+=String.fromCharCode(r),this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos):++this.pos}},y.readEscapedChar=function(){var e=this.input.charCodeAt(++this.pos),t=/^[0-7]+/.exec(this.input.slice(this.pos,this.pos+3));for(t&&(t=t[0]);t&&255<parseInt(t,8);)t=t.slice(0,-1);if("0"===t&&(t=null),++this.pos,t)return this.strict&&this.raise(this.pos-2,"Octal literal in strict mode"),this.pos+=t.length-1,String.fromCharCode(parseInt(t,8));switch(e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return x(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 48:return"\0";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:return String.fromCharCode(e)}},y.readHexChar=function(e){var t=this.readInt(16,e);return null===t&&this.raise(this.start,"Bad character escape sequence"),t},y.readWord1=function(){for(var e="",t=!(v=!1),r=this.pos,n=6<=this.options.ecmaVersion;this.pos<this.input.length;){var o=this.fullCharCodeAtPos();if(l(o,n))this.pos+=o<=65535?1:2;else{if(92!==o)break;v=!0,e+=this.input.slice(r,this.pos);var i=this.pos;117!=this.input.charCodeAt(++this.pos)&&this.raise(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var s=this.readCodePoint();(t?a:l)(s,n)||this.raise(i,"Invalid Unicode escape"),e+=x(s),r=this.pos}t=!1}return e+this.input.slice(r,this.pos)},y.readWord=function(){var e=this.readWord1(),t=u.name;return(6<=this.options.ecmaVersion||!v)&&this.isKeyword(e)&&(t=i[e]),this.finishToken(t,e)}},{"./identifier":3,"./location":4,"./state":9,"./tokentype":13,"./whitespace":15}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=r.TokenType=function e(t){var r=void 0===arguments[1]?{}:arguments[1];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.label=t,this.keyword=r.keyword,this.beforeExpr=!!r.beforeExpr,this.startsExpr=!!r.startsExpr,this.isLoop=!!r.isLoop,this.isAssign=!!r.isAssign,this.prefix=!!r.prefix,this.postfix=!!r.postfix,this.binop=r.binop||null,this.updateContext=null};function o(e,t){return new n(e,{beforeExpr:!0,binop:t})}var i={beforeExpr:!0},s={startsExpr:!0},a={num:new n("num",s),regexp:new n("regexp",s),string:new n("string",s),name:new n("name",s),eof:new n("eof"),bracketL:new n("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new n("]"),braceL:new n("{",{beforeExpr:!0,startsExpr:!0}),braceR:new n("}"),parenL:new n("(",{beforeExpr:!0,startsExpr:!0}),parenR:new n(")"),comma:new n(",",i),semi:new n(";",i),colon:new n(":",i),dot:new n("."),question:new n("?",i),arrow:new n("=>",i),template:new n("template"),ellipsis:new n("...",i),backQuote:new n("`",s),dollarBraceL:new n("${",{beforeExpr:!0,startsExpr:!0}),eq:new n("=",{beforeExpr:!0,isAssign:!0}),assign:new n("_=",{beforeExpr:!0,isAssign:!0}),incDec:new n("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new n("prefix",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:o("||",1),logicalAND:o("&&",2),bitwiseOR:o("|",3),bitwiseXOR:o("^",4),bitwiseAND:o("&",5),equality:o("==/!=",6),relational:o("</>",7),bitShift:o("<</>>",8),plusMin:new n("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:o("%",10),star:o("*",10),slash:o("/",10)};r.types=a;var l={};function u(e){var t=void 0===arguments[1]?{}:arguments[1];t.keyword=e,l[e]=a["_"+e]=new n(e,t)}r.keywords=l,u("break"),u("case",i),u("catch"),u("continue"),u("debugger"),u("default"),u("do",{isLoop:!0}),u("else",i),u("finally"),u("for",{isLoop:!0}),u("function"),u("if"),u("return",i),u("switch"),u("throw",i),u("try"),u("var"),u("let"),u("const"),u("while",{isLoop:!0}),u("with"),u("new",{beforeExpr:!0,startsExpr:!0}),u("this",s),u("super",s),u("class"),u("extends",i),u("export"),u("import"),u("yield",{beforeExpr:!0,startsExpr:!0}),u("null",s),u("true",s),u("false",s),u("in",{beforeExpr:!0,binop:7}),u("instanceof",{beforeExpr:!0,binop:7}),u("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),u("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),u("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},{}],14:[function(e,t,r){"use strict";r.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},r.has=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Object.defineProperty(r,"__esModule",{value:!0})},{}],15:[function(e,t,r){"use strict";r.isNewLine=function(e){return 10===e||13===e||8232===e||8233==e},Object.defineProperty(r,"__esModule",{value:!0});var n=/\r\n?|\n|\u2028|\u2029/;r.lineBreak=n;var o=new RegExp(n.source,"g");r.lineBreakG=o;r.nonASCIIwhitespace=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/},{}]},{},[1])(1)}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;((t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).acorn||(t.acorn={})).loose=e()}}(function(){return function i(s,a,l){function u(r,e){if(!a[r]){if(!s[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(c)return c(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var o=a[r]={exports:{}};s[r][0].call(o.exports,function(e){var t=s[r][1][e];return u(t||e)},o,o.exports,i,s,a,l)}return a[r].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,r){"use strict";r.parse_dammit=a,Object.defineProperty(r,"__esModule",{value:!0});var n,o=(n=e(".."))&&n.__esModule?n:{default:n},i=e("./state"),s=i.LooseParser;function a(e,t){var r=new s(e,t);return r.next(),r.parseTopLevel()}e("./tokenize"),e("./parseutil"),e("./statement"),e("./expression"),r.LooseParser=i.LooseParser,o.defaultOptions.tabSize=4,o.parse_dammit=a,o.LooseParser=s},{"..":2,"./expression":3,"./parseutil":4,"./state":5,"./statement":6,"./tokenize":7}],2:[function(e,t,r){"use strict";t.exports="undefined"!=typeof window?window.acorn:e("./acorn")},{}],3:[function(e,t,r){"use strict";var n=e("./state").LooseParser,l=e("./parseutil").isDummy,u=e("..").tokTypes,o=n.prototype;o.checkLVal=function(e){if(!e)return e;switch(e.type){case"Identifier":case"MemberExpression":case"ObjectPattern":case"ArrayPattern":case"RestElement":case"AssignmentPattern":return e;default:return this.dummyIdent()}},o.parseExpression=function(e){var t=this.storeCurrentPos(),r=this.parseMaybeAssign(e);if(this.tok.type===u.comma){var n=this.startNodeAt(t);for(n.expressions=[r];this.eat(u.comma);)n.expressions.push(this.parseMaybeAssign(e));return this.finishNode(n,"SequenceExpression")}return r},o.parseParenExpression=function(){this.pushCx(),this.expect(u.parenL);var e=this.parseExpression();return this.popCx(),this.expect(u.parenR),e},o.parseMaybeAssign=function(e){var t=this.storeCurrentPos(),r=this.parseMaybeConditional(e);if(this.tok.type.isAssign){var n=this.startNodeAt(t);return n.operator=this.tok.value,n.left=this.tok.type===u.eq?this.toAssignable(r):this.checkLVal(r),this.next(),n.right=this.parseMaybeAssign(e),this.finishNode(n,"AssignmentExpression")}return r},o.parseMaybeConditional=function(e){var t=this.storeCurrentPos(),r=this.parseExprOps(e);if(this.eat(u.question)){var n=this.startNodeAt(t);return n.test=r,n.consequent=this.parseMaybeAssign(),n.alternate=this.expect(u.colon)?this.parseMaybeAssign(e):this.dummyIdent(),this.finishNode(n,"ConditionalExpression")}return r},o.parseExprOps=function(e){var t=this.storeCurrentPos(),r=this.curIndent,n=this.curLineStart;return this.parseExprOp(this.parseMaybeUnary(e),t,-1,e,r,n)},o.parseExprOp=function(e,t,r,n,o,i){if(this.curLineStart!=i&&this.curIndent<o&&this.tokenStartsLine())return e;var s=this.tok.type.binop;if(null!=s&&(!n||this.tok.type!==u._in)&&r<s){var a=this.startNodeAt(t);if(a.left=e,a.operator=this.tok.value,this.next(),this.curLineStart!=i&&this.curIndent<o&&this.tokenStartsLine())a.right=this.dummyIdent();else{var l=this.storeCurrentPos();a.right=this.parseExprOp(this.parseMaybeUnary(n),l,s,n,o,i)}return this.finishNode(a,/&&|\|\|/.test(a.operator)?"LogicalExpression":"BinaryExpression"),this.parseExprOp(a,t,r,n,o,i)}return e},o.parseMaybeUnary=function(e){if(this.tok.type.prefix){var t=this.startNode(),r=this.tok.type===u.incDec;return t.operator=this.tok.value,t.prefix=!0,this.next(),t.argument=this.parseMaybeUnary(e),r&&(t.argument=this.checkLVal(t.argument)),this.finishNode(t,r?"UpdateExpression":"UnaryExpression")}if(this.tok.type===u.ellipsis){t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(e),this.finishNode(t,"SpreadElement")}for(var n=this.storeCurrentPos(),o=this.parseExprSubscripts();this.tok.type.postfix&&!this.canInsertSemicolon();){(t=this.startNodeAt(n)).operator=this.tok.value,t.prefix=!1,t.argument=this.checkLVal(o),this.next(),o=this.finishNode(t,"UpdateExpression")}return o},o.parseExprSubscripts=function(){var e=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),e,!1,this.curIndent,this.curLineStart)},o.parseSubscripts=function(e,t,r,n,o){for(;;){if(this.curLineStart!=o&&this.curIndent<=n&&this.tokenStartsLine()){if(this.tok.type!=u.dot||this.curIndent!=n)return e;--n}if(this.eat(u.dot))(i=this.startNodeAt(t)).object=e,this.curLineStart!=o&&this.curIndent<=n&&this.tokenStartsLine()?i.property=this.dummyIdent():i.property=this.parsePropertyAccessor()||this.dummyIdent(),i.computed=!1,e=this.finishNode(i,"MemberExpression");else if(this.tok.type==u.bracketL){this.pushCx(),this.next(),(i=this.startNodeAt(t)).object=e,i.property=this.parseExpression(),i.computed=!0,this.popCx(),this.expect(u.bracketR),e=this.finishNode(i,"MemberExpression")}else if(r||this.tok.type!=u.parenL){if(this.tok.type!=u.backQuote)return e;(i=this.startNodeAt(t)).tag=e,i.quasi=this.parseTemplate(),e=this.finishNode(i,"TaggedTemplateExpression")}else{var i;this.pushCx(),(i=this.startNodeAt(t)).callee=e,i.arguments=this.parseExprList(u.parenR),e=this.finishNode(i,"CallExpression")}}},o.parseExprAtom=function(){var e=void 0;switch(this.tok.type){case u._this:case u._super:var t=this.tok.type===u._this?"ThisExpression":"Super";return e=this.startNode(),this.next(),this.finishNode(e,t);case u.name:var r=this.storeCurrentPos(),n=this.parseIdent();return this.eat(u.arrow)?this.parseArrowExpression(this.startNodeAt(r),[n]):n;case u.regexp:e=this.startNode();var o=this.tok.value;return e.regex={pattern:o.pattern,flags:o.flags},e.value=o.value,e.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(e,"Literal");case u.num:case u.string:return(e=this.startNode()).value=this.tok.value,e.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(e,"Literal");case u._null:case u._true:case u._false:return(e=this.startNode()).value=this.tok.type===u._null?null:this.tok.type===u._true,e.raw=this.tok.type.keyword,this.next(),this.finishNode(e,"Literal");case u.parenL:var i=this.storeCurrentPos();this.next();var s=this.parseExpression();if(this.expect(u.parenR),this.eat(u.arrow))return this.parseArrowExpression(this.startNodeAt(i),s.expressions||(l(s)?[]:[s]));if(this.options.preserveParens){var a=this.startNodeAt(i);a.expression=s,s=this.finishNode(a,"ParenthesizedExpression")}return s;case u.bracketL:return e=this.startNode(),this.pushCx(),e.elements=this.parseExprList(u.bracketR,!0),this.finishNode(e,"ArrayExpression");case u.braceL:return this.parseObj();case u._class:return this.parseClass();case u._function:return e=this.startNode(),this.next(),this.parseFunction(e,!1);case u._new:return this.parseNew();case u._yield:return e=this.startNode(),this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!=u.star&&!this.tok.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(u.star),e.argument=this.parseMaybeAssign()),this.finishNode(e,"YieldExpression");case u.backQuote:return this.parseTemplate();default:return this.dummyIdent()}},o.parseNew=function(){var e=this.startNode(),t=this.curIndent,r=this.curLineStart,n=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(u.dot))return e.meta=n,e.property=this.parseIdent(!0),this.finishNode(e,"MetaProperty");var o=this.storeCurrentPos();return e.callee=this.parseSubscripts(this.parseExprAtom(),o,!0,t,r),this.tok.type==u.parenL?(this.pushCx(),e.arguments=this.parseExprList(u.parenR)):e.arguments=[],this.finishNode(e,"NewExpression")},o.parseTemplateElement=function(){var e=this.startNode();return e.value={raw:this.input.slice(this.tok.start,this.tok.end),cooked:this.tok.value},this.next(),e.tail=this.tok.type===u.backQuote,this.finishNode(e,"TemplateElement")},o.parseTemplate=function(){var e=this.startNode();this.next(),e.expressions=[];var t=this.parseTemplateElement();for(e.quasis=[t];!t.tail;)this.next(),e.expressions.push(this.parseExpression()),this.expect(u.braceR)?t=this.parseTemplateElement():((t=this.startNode()).value={cooked:"",raw:""},t.tail=!0),e.quasis.push(t);return this.expect(u.backQuote),this.finishNode(e,"TemplateLiteral")},o.parseObj=function(){var e=this.startNode();e.properties=[],this.pushCx();var t=this.curIndent+1,r=this.curLineStart;for(this.eat(u.braceL),this.curIndent+1<t&&(t=this.curIndent,r=this.curLineStart);!this.closes(u.braceR,t,r);){var n=this.startNode(),o=void 0,i=void 0;if(6<=this.options.ecmaVersion&&(i=this.storeCurrentPos(),n.method=!1,n.shorthand=!1,o=this.eat(u.star)),this.parsePropertyName(n),l(n.key))l(this.parseMaybeAssign())&&this.next(),this.eat(u.comma);else{if(this.eat(u.colon))n.kind="init",n.value=this.parseMaybeAssign();else if(6<=this.options.ecmaVersion&&(this.tok.type===u.parenL||this.tok.type===u.braceL))n.kind="init",n.method=!0,n.value=this.parseMethod(o);else if(5<=this.options.ecmaVersion&&"Identifier"===n.key.type&&!n.computed&&("get"===n.key.name||"set"===n.key.name)&&this.tok.type!=u.comma&&this.tok.type!=u.braceR)n.kind=n.key.name,this.parsePropertyName(n),n.value=this.parseMethod(!1);else{if(n.kind="init",6<=this.options.ecmaVersion)if(this.eat(u.eq)){var s=this.startNodeAt(i);s.operator="=",s.left=n.key,s.right=this.parseMaybeAssign(),n.value=this.finishNode(s,"AssignmentExpression")}else n.value=n.key;else n.value=this.dummyIdent();n.shorthand=!0}e.properties.push(this.finishNode(n,"Property")),this.eat(u.comma)}}return this.popCx(),this.eat(u.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),this.finishNode(e,"ObjectExpression")},o.parsePropertyName=function(e){if(6<=this.options.ecmaVersion){if(this.eat(u.bracketL))return e.computed=!0,e.key=this.parseExpression(),void this.expect(u.bracketR);e.computed=!1}var t=this.tok.type===u.num||this.tok.type===u.string?this.parseExprAtom():this.parseIdent();e.key=t||this.dummyIdent()},o.parsePropertyAccessor=function(){if(this.tok.type===u.name||this.tok.type.keyword)return this.parseIdent()},o.parseIdent=function(){var e=this.tok.type===u.name?this.tok.value:this.tok.type.keyword;if(!e)return this.dummyIdent();var t=this.startNode();return this.next(),t.name=e,this.finishNode(t,"Identifier")},o.initFunction=function(e){e.id=null,e.params=[],6<=this.options.ecmaVersion&&(e.generator=!1,e.expression=!1)},o.toAssignable=function(e){if(6<=this.options.ecmaVersion&&e)switch(e.type){case"ObjectExpression":e.type="ObjectPattern";for(var t=e.properties,r=0;r<t.length;r++)this.toAssignable(t[r].value);break;case"ArrayExpression":e.type="ArrayPattern",this.toAssignableList(e.elements);break;case"SpreadElement":e.type="RestElement",e.argument=this.toAssignable(e.argument);break;case"AssignmentExpression":e.type="AssignmentPattern"}return this.checkLVal(e)},o.toAssignableList=function(e){for(var t=0;t<e.length;t++)this.toAssignable(e[t]);return e},o.parseFunctionParams=function(e){return this.pushCx(),e=this.parseExprList(u.parenR),this.toAssignableList(e)},o.parseMethod=function(e){var t=this.startNode();return this.initFunction(t),t.params=this.parseFunctionParams(),t.generator=e||!1,t.expression=6<=this.options.ecmaVersion&&this.tok.type!==u.braceL,t.body=t.expression?this.parseMaybeAssign():this.parseBlock(),this.finishNode(t,"FunctionExpression")},o.parseArrowExpression=function(e,t){return this.initFunction(e),e.params=this.toAssignableList(t),e.expression=this.tok.type!==u.braceL,e.body=e.expression?this.parseMaybeAssign():this.parseBlock(),this.finishNode(e,"ArrowFunctionExpression")},o.parseExprList=function(e,t){var r=this.curIndent,n=this.curLineStart,o=[];for(this.next();!this.closes(e,r+1,n);)if(this.eat(u.comma))o.push(t?null:this.dummyIdent());else{var i=this.parseMaybeAssign();if(l(i)){if(this.closes(e,r,n))break;this.next()}else o.push(i);this.eat(u.comma)}return this.popCx(),this.eat(e)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),o}},{"..":2,"./parseutil":4,"./state":5}],4:[function(e,t,r){"use strict";r.isDummy=function(e){return""==e.name},Object.defineProperty(r,"__esModule",{value:!0});var n=e("./state").LooseParser,o=e(".."),i=o.Node,s=o.SourceLocation,a=o.lineBreak,l=o.isNewLine,u=o.tokTypes,c=n.prototype;c.startNode=function(){var e=new i;return e.start=this.tok.start,this.options.locations&&(e.loc=new s(this.toks,this.tok.loc.start)),this.options.directSourceFile&&(e.sourceFile=this.options.directSourceFile),this.options.ranges&&(e.range=[this.tok.start,0]),e},c.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:this.tok.start},c.startNodeAt=function(e){var t=new i;return this.options.locations?(t.start=e[0],t.loc=new s(this.toks,e[1]),e=e[0]):t.start=e,this.options.directSourceFile&&(t.sourceFile=this.options.directSourceFile),this.options.ranges&&(t.range=[e,0]),t},c.finishNode=function(e,t){return e.type=t,e.end=this.last.end,this.options.locations&&(e.loc.end=this.last.loc.end),this.options.ranges&&(e.range[1]=this.last.end),e},c.dummyIdent=function(){var e=this.startNode();return e.name="",this.finishNode(e,"Identifier")},c.eat=function(e){return this.tok.type===e&&(this.next(),!0)},c.isContextual=function(e){return this.tok.type===u.name&&this.tok.value===e},c.eatContextual=function(e){return this.tok.value===e&&this.eat(u.name)},c.canInsertSemicolon=function(){return this.tok.type===u.eof||this.tok.type===u.braceR||a.test(this.input.slice(this.last.end,this.tok.start))},c.semicolon=function(){return this.eat(u.semi)},c.expect=function(e){if(this.eat(e))return!0;for(var t=1;t<=2;t++)if(this.lookAhead(t).type==e){for(var r=0;r<t;r++)this.next();return!0}},c.pushCx=function(){this.context.push(this.curIndent)},c.popCx=function(){this.curIndent=this.context.pop()},c.lineEnd=function(e){for(;e<this.input.length&&!l(this.input.charCodeAt(e));)++e;return e},c.indentationAfter=function(e){for(var t=0;;++e){var r=this.input.charCodeAt(e);if(32===r)++t;else{if(9!==r)return t;t+=this.options.tabSize}}},c.closes=function(e,t,r,n){return this.tok.type===e||this.tok.type===u.eof||r!=this.curLineStart&&this.curIndent<t&&this.tokenStartsLine()&&(!n||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<t)},c.tokenStartsLine=function(){for(var e=this.tok.start-1;e>=this.curLineStart;--e){var t=this.input.charCodeAt(e);if(9!==t&&32!==t)return!1}return!0}},{"..":2,"./state":5}],5:[function(e,t,r){"use strict";r.LooseParser=function(e,t){if(this.toks=o(e,t),this.options=this.toks.options,this.input=this.toks.input,this.tok=this.last={type:s.eof,start:0,end:0},this.options.locations){var r=this.toks.curPosition();this.tok.loc=new i(this.toks,r,r)}this.ahead=[],this.context=[],this.curIndent=0,this.curLineStart=0,this.nextLineStart=this.lineEnd(this.curLineStart)+1},Object.defineProperty(r,"__esModule",{value:!0});var n=e(".."),o=n.tokenizer,i=n.SourceLocation,s=n.tokTypes},{"..":2}],6:[function(e,t,r){"use strict";var n=e("./state").LooseParser,p=e("./parseutil").isDummy,o=e(".."),i=o.getLineInfo,h=o.tokTypes,s=n.prototype;s.parseTopLevel=function(){var e=this.startNodeAt(this.options.locations?[0,i(this.input,0)]:0);for(e.body=[];this.tok.type!==h.eof;)e.body.push(this.parseStatement());return this.last=this.tok,6<=this.options.ecmaVersion&&(e.sourceType=this.options.sourceType),this.finishNode(e,"Program")},s.parseStatement=function(){var e=this.tok.type,t=this.startNode();switch(e){case h._break:case h._continue:this.next();var r=e===h._break;return this.semicolon()||this.canInsertSemicolon()?t.label=null:(t.label=this.tok.type===h.name?this.parseIdent():null,this.semicolon()),this.finishNode(t,r?"BreakStatement":"ContinueStatement");case h._debugger:return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement");case h._do:return this.next(),t.body=this.parseStatement(),t.test=this.eat(h._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(t,"DoWhileStatement");case h._for:if(this.next(),this.pushCx(),this.expect(h.parenL),this.tok.type===h.semi)return this.parseFor(t,null);if(this.tok.type===h._var||this.tok.type===h._let||this.tok.type===h._const){var n=this.parseVar(!0);return 1!==n.declarations.length||this.tok.type!==h._in&&!this.isContextual("of")?this.parseFor(t,n):this.parseForIn(t,n)}var o=this.parseExpression(!0);return this.tok.type===h._in||this.isContextual("of")?this.parseForIn(t,this.toAssignable(o)):this.parseFor(t,o);case h._function:return this.next(),this.parseFunction(t,!0);case h._if:return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement(),t.alternate=this.eat(h._else)?this.parseStatement():null,this.finishNode(t,"IfStatement");case h._return:return this.next(),this.eat(h.semi)||this.canInsertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement");case h._switch:var i=this.curIndent,s=this.curLineStart;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.pushCx(),this.expect(h.braceL);for(var a=void 0;!this.closes(h.braceR,i,s,!0);)if(this.tok.type===h._case||this.tok.type===h._default){var l=this.tok.type===h._case;a&&this.finishNode(a,"SwitchCase"),t.cases.push(a=this.startNode()),a.consequent=[],this.next(),a.test=l?this.parseExpression():null,this.expect(h.colon)}else a||(t.cases.push(a=this.startNode()),a.consequent=[],a.test=null),a.consequent.push(this.parseStatement());return a&&this.finishNode(a,"SwitchCase"),this.popCx(),this.eat(h.braceR),this.finishNode(t,"SwitchStatement");case h._throw:return this.next(),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement");case h._try:if(this.next(),t.block=this.parseBlock(),t.handler=null,this.tok.type===h._catch){var u=this.startNode();this.next(),this.expect(h.parenL),u.param=this.toAssignable(this.parseExprAtom()),this.expect(h.parenR),u.guard=null,u.body=this.parseBlock(),t.handler=this.finishNode(u,"CatchClause")}return t.finalizer=this.eat(h._finally)?this.parseBlock():null,t.handler||t.finalizer?this.finishNode(t,"TryStatement"):t.block;case h._var:case h._let:case h._const:return this.parseVar();case h._while:return this.next(),t.test=this.parseParenExpression(),t.body=this.parseStatement(),this.finishNode(t,"WhileStatement");case h._with:return this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement(),this.finishNode(t,"WithStatement");case h.braceL:return this.parseBlock();case h.semi:return this.next(),this.finishNode(t,"EmptyStatement");case h._class:return this.parseClass(!0);case h._import:return this.parseImport();case h._export:return this.parseExport();default:var c=this.parseExpression();return p(c)?(this.next(),this.tok.type===h.eof?this.finishNode(t,"EmptyStatement"):this.parseStatement()):e===h.name&&"Identifier"===c.type&&this.eat(h.colon)?(t.body=this.parseStatement(),t.label=c,this.finishNode(t,"LabeledStatement")):(t.expression=c,this.semicolon(),this.finishNode(t,"ExpressionStatement"))}},s.parseBlock=function(){var e=this.startNode();this.pushCx(),this.expect(h.braceL);var t=this.curIndent,r=this.curLineStart;for(e.body=[];!this.closes(h.braceR,t,r,!0);)e.body.push(this.parseStatement());return this.popCx(),this.eat(h.braceR),this.finishNode(e,"BlockStatement")},s.parseFor=function(e,t){return e.init=t,e.test=e.update=null,this.eat(h.semi)&&this.tok.type!==h.semi&&(e.test=this.parseExpression()),this.eat(h.semi)&&this.tok.type!==h.parenR&&(e.update=this.parseExpression()),this.popCx(),this.expect(h.parenR),e.body=this.parseStatement(),this.finishNode(e,"ForStatement")},s.parseForIn=function(e,t){var r=this.tok.type===h._in?"ForInStatement":"ForOfStatement";return this.next(),e.left=t,e.right=this.parseExpression(),this.popCx(),this.expect(h.parenR),e.body=this.parseStatement(),this.finishNode(e,r)},s.parseVar=function(e){var t=this.startNode();t.kind=this.tok.type.keyword,this.next(),t.declarations=[];do{var r;(r=this.startNode()).id=6<=this.options.ecmaVersion?this.toAssignable(this.parseExprAtom()):this.parseIdent(),r.init=this.eat(h.eq)?this.parseMaybeAssign(e):null,t.declarations.push(this.finishNode(r,"VariableDeclarator"))}while(this.eat(h.comma));t.declarations.length||((r=this.startNode()).id=this.dummyIdent(),t.declarations.push(this.finishNode(r,"VariableDeclarator")));return e||this.semicolon(),this.finishNode(t,"VariableDeclaration")},s.parseClass=function(e){var t=this.startNode();this.next(),this.tok.type===h.name?t.id=this.parseIdent():t.id=e?this.dummyIdent():null,t.superClass=this.eat(h._extends)?this.parseExpression():null,t.body=this.startNode(),t.body.body=[],this.pushCx();var r=this.curIndent+1,n=this.curLineStart;for(this.eat(h.braceL),this.curIndent+1<r&&(r=this.curIndent,n=this.curLineStart);!this.closes(h.braceR,r,n);)if(!this.semicolon()){var o=this.startNode(),i=void 0;6<=this.options.ecmaVersion&&(o.static=!1,i=this.eat(h.star)),this.parsePropertyName(o),p(o.key)?(p(this.parseMaybeAssign())&&this.next(),this.eat(h.comma)):("Identifier"!==o.key.type||o.computed||"static"!==o.key.name||this.tok.type==h.parenL||this.tok.type==h.braceL?o.static=!1:(o.static=!0,i=this.eat(h.star),this.parsePropertyName(o)),5<=this.options.ecmaVersion&&"Identifier"===o.key.type&&!o.computed&&("get"===o.key.name||"set"===o.key.name)&&this.tok.type!==h.parenL&&this.tok.type!==h.braceL?(o.kind=o.key.name,this.parsePropertyName(o),o.value=this.parseMethod(!1)):(o.computed||o.static||i||!("Identifier"===o.key.type&&"constructor"===o.key.name||"Literal"===o.key.type&&"constructor"===o.key.value)?o.kind="method":o.kind="constructor",o.value=this.parseMethod(i)),t.body.body.push(this.finishNode(o,"MethodDefinition")))}return this.popCx(),this.eat(h.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),this.semicolon(),this.finishNode(t.body,"ClassBody"),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},s.parseFunction=function(e,t){return this.initFunction(e),6<=this.options.ecmaVersion&&(e.generator=this.eat(h.star)),this.tok.type===h.name?e.id=this.parseIdent():t&&(e.id=this.dummyIdent()),e.params=this.parseFunctionParams(),e.body=this.parseBlock(),this.finishNode(e,t?"FunctionDeclaration":"FunctionExpression")},s.parseExport=function(){var e=this.startNode();if(this.next(),this.eat(h.star))return e.source=this.eatContextual("from")?this.parseExprAtom():null,this.finishNode(e,"ExportAllDeclaration");if(this.eat(h._default)){var t=this.parseMaybeAssign();if(t.id)switch(t.type){case"FunctionExpression":t.type="FunctionDeclaration";break;case"ClassExpression":t.type="ClassDeclaration"}return e.declaration=t,this.semicolon(),this.finishNode(e,"ExportDefaultDeclaration")}return this.tok.type.keyword?(e.declaration=this.parseStatement(),e.specifiers=[],e.source=null):(e.declaration=null,e.specifiers=this.parseExportSpecifierList(),e.source=this.eatContextual("from")?this.parseExprAtom():null,this.semicolon()),this.finishNode(e,"ExportNamedDeclaration")},s.parseImport=function(){var e=this.startNode();if(this.next(),this.tok.type===h.string)e.specifiers=[],e.source=this.parseExprAtom(),e.kind="";else{var t=void 0;this.tok.type===h.name&&"from"!==this.tok.value&&((t=this.startNode()).local=this.parseIdent(),this.finishNode(t,"ImportDefaultSpecifier"),this.eat(h.comma)),e.specifiers=this.parseImportSpecifierList(),e.source=this.eatContextual("from")?this.parseExprAtom():null,t&&e.specifiers.unshift(t)}return this.semicolon(),this.finishNode(e,"ImportDeclaration")},s.parseImportSpecifierList=function(){var e=[];if(this.tok.type===h.star){var t=this.startNode();this.next(),this.eatContextual("as")&&(t.local=this.parseIdent()),e.push(this.finishNode(t,"ImportNamespaceSpecifier"))}else{var r=this.curIndent,n=this.curLineStart,o=this.nextLineStart;for(this.pushCx(),this.eat(h.braceL),this.curLineStart>o&&(o=this.curLineStart);!this.closes(h.braceR,r+(this.curLineStart<=o?1:0),n);){t=this.startNode();if(this.eat(h.star))this.eatContextual("as")&&(t.local=this.parseIdent()),this.finishNode(t,"ImportNamespaceSpecifier");else{if(this.isContextual("from"))break;t.imported=this.parseIdent(),t.local=this.eatContextual("as")?this.parseIdent():t.imported,this.finishNode(t,"ImportSpecifier")}e.push(t),this.eat(h.comma)}this.eat(h.braceR),this.popCx()}return e},s.parseExportSpecifierList=function(){var e=[],t=this.curIndent,r=this.curLineStart,n=this.nextLineStart;for(this.pushCx(),this.eat(h.braceL),this.curLineStart>n&&(n=this.curLineStart);!this.closes(h.braceR,t+(this.curLineStart<=n?1:0),r)&&!this.isContextual("from");){var o=this.startNode();o.local=this.parseIdent(),o.exported=this.eatContextual("as")?this.parseIdent():o.local,this.finishNode(o,"ExportSpecifier"),e.push(o),this.eat(h.comma)}return this.eat(h.braceR),this.popCx(),e}},{"..":2,"./parseutil":4,"./state":5}],7:[function(e,t,r){"use strict";var n=e(".."),a=n.tokTypes,l=n.Token,u=n.isNewLine,c=n.SourceLocation,p=n.getLineInfo,o=n.lineBreakG,i=e("./state").LooseParser.prototype;i.next=function(){if(this.last=this.tok,this.ahead.length?this.tok=this.ahead.shift():this.tok=this.readToken(),this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)this.curLineStart=this.nextLineStart,this.nextLineStart=this.lineEnd(this.curLineStart)+1;this.curIndent=this.indentationAfter(this.curLineStart)}},i.readToken=function(){for(;;)try{return this.toks.next(),this.toks.type===a.dot&&"."===this.input.substr(this.toks.end,1)&&6<=this.options.ecmaVersion&&(this.toks.end++,this.toks.type=a.ellipsis),new l(this.toks)}catch(e){if(!(e instanceof SyntaxError))throw e;var t=e.message,r=e.raisedAt,n=!0;if(/unterminated/i.test(t))if(r=this.lineEnd(e.pos+1),/string/.test(t))n={start:e.pos,end:r,type:a.string,value:this.input.slice(e.pos+1,r)};else if(/regular expr/i.test(t)){var o=this.input.slice(e.pos,r);try{o=new RegExp(o)}catch(e){}n={start:e.pos,end:r,type:a.regexp,value:o}}else n=!!/template/.test(t)&&{start:e.pos,end:r,type:a.template,value:this.input.slice(e.pos,r)};else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number/i.test(t))for(;r<this.input.length&&!((s=this.input.charCodeAt(r))<14&&8<s||32===s||160===s||u(s));)++r;else if(/character escape|expected hexadecimal/i.test(t))for(;r<this.input.length;){var i=this.input.charCodeAt(r++);if(34===i||39===i||u(i))break}else if(/unexpected character/i.test(t))r++,n=!1;else{if(!/regular expression/i.test(t))throw e;n=!0}if(this.resetTo(r),!0===n&&(n={start:r,end:r,type:a.name,value:""}),n)return this.options.locations&&(n.loc=new c(this.toks,p(this.input,n.start),p(this.input,n.end))),n}var s},i.resetTo=function(e){this.toks.pos=e;var t=this.input.charAt(e-1);if(this.toks.exprAllowed=!t||/[\[\{\(,;:?\/*=+\-~!|&%^<>]/.test(t)||/[enwfd]/.test(t)&&/\b(keywords|case|else|return|throw|new|in|(instance|type)of|delete|void)$/.test(this.input.slice(e-10,e)),this.options.locations){this.toks.curLine=1,this.toks.lineStart=o.lastIndex=0;for(var r=void 0;(r=o.exec(this.input))&&r.index<e;)++this.toks.curLine,this.toks.lineStart=r.index+r[0].length}},i.lookAhead=function(e){for(;e>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[e-1]}},{"..":2,"./state":5}]},{},[1])(1)}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;((t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).acorn||(t.acorn={})).walk=e()}}(function(){return function i(s,a,l){function u(r,e){if(!a[r]){if(!s[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(c)return c(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var o=a[r]={exports:{}};s[r][0].call(o.exports,function(e){var t=s[r][1][e];return u(t||e)},o,o.exports,i,s,a,l)}return a[r].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,u){"use strict";function r(t){return"string"==typeof t?function(e){return e==t}:t||function(){return!0}}u.simple=function(e,s,a,t){a||(a=u.base);!function e(t,r,n){var o=n||t.type,i=s[o];a[o](t,r,e),i&&i(t,r)}(e,t)},u.ancestor=function(e,s,a,t){a||(a=u.base);t||(t=[]);!function e(t,r,n){var o=n||t.type,i=s[o];t!=r[r.length-1]&&(r=r.slice()).push(t),a[o](t,r,e),i&&i(t,r)}(e,t)},u.recursive=function(e,t,r,n){var o=r?u.make(r,n):n;!function e(t,r,n){o[n||t.type](t,r,e)}(e,t)},u.findNodeAt=function(e,i,s,a,l,t){a=r(a),l||(l=u.base);try{!function e(t,r,n){var o=n||t.type;if((null==i||t.start<=i)&&(null==s||t.end>=s)&&l[o](t,r,e),a(o,t)&&(null==i||t.start==i)&&(null==s||t.end==s))throw new c(t,r)}(e,t)}catch(e){if(e instanceof c)return e;throw e}},u.findNodeAround=function(e,i,s,a,t){s=r(s),a||(a=u.base);try{!function e(t,r,n){var o=n||t.type;if(!(t.start>i||t.end<i)&&(a[o](t,r,e),s(o,t)))throw new c(t,r)}(e,t)}catch(e){if(e instanceof c)return e;throw e}},u.findNodeAfter=function(e,i,s,a,t){s=r(s),a||(a=u.base);try{!function e(t,r,n){if(!(t.end<i)){var o=n||t.type;if(t.start>=i&&s(o,t))throw new c(t,r);a[o](t,r,e)}}(e,t)}catch(e){if(e instanceof c)return e;throw e}},u.findNodeBefore=function(e,i,s,a,t){s=r(s),a||(a=u.base);var l=void 0;return function e(t,r,n){if(!(t.start>i)){var o=n||t.type;t.end<=i&&(!l||l.node.end<t.end)&&s(o,t)&&(l=new c(t,r)),a[o](t,r,e)}}(e,t),l},u.make=function(e,t){t||(t=u.base);var r={};for(var n in t)r[n]=t[n];for(var n in e)r[n]=e[n];return r},Object.defineProperty(u,"__esModule",{value:!0});var c=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.state=r};function n(e,t,r){r(e,t)}function o(e,t,r){}var i={};(u.base=i).Program=i.BlockStatement=function(e,t,r){for(var n=0;n<e.body.length;++n)r(e.body[n],t,"Statement")},i.Statement=n,i.EmptyStatement=o,i.ExpressionStatement=i.ParenthesizedExpression=function(e,t,r){return r(e.expression,t,"Expression")},i.IfStatement=function(e,t,r){r(e.test,t,"Expression"),r(e.consequent,t,"Statement"),e.alternate&&r(e.alternate,t,"Statement")},i.LabeledStatement=function(e,t,r){return r(e.body,t,"Statement")},i.BreakStatement=i.ContinueStatement=o,i.WithStatement=function(e,t,r){r(e.object,t,"Expression"),r(e.body,t,"Statement")},i.SwitchStatement=function(e,t,r){r(e.discriminant,t,"Expression");for(var n=0;n<e.cases.length;++n){var o=e.cases[n];o.test&&r(o.test,t,"Expression");for(var i=0;i<o.consequent.length;++i)r(o.consequent[i],t,"Statement")}},i.ReturnStatement=i.YieldExpression=function(e,t,r){e.argument&&r(e.argument,t,"Expression")},i.ThrowStatement=i.SpreadElement=i.RestElement=function(e,t,r){return r(e.argument,t,"Expression")},i.TryStatement=function(e,t,r){r(e.block,t,"Statement"),e.handler&&r(e.handler.body,t,"ScopeBody"),e.finalizer&&r(e.finalizer,t,"Statement")},i.WhileStatement=i.DoWhileStatement=function(e,t,r){r(e.test,t,"Expression"),r(e.body,t,"Statement")},i.ForStatement=function(e,t,r){e.init&&r(e.init,t,"ForInit"),e.test&&r(e.test,t,"Expression"),e.update&&r(e.update,t,"Expression"),r(e.body,t,"Statement")},i.ForInStatement=i.ForOfStatement=function(e,t,r){r(e.left,t,"ForInit"),r(e.right,t,"Expression"),r(e.body,t,"Statement")},i.ForInit=function(e,t,r){"VariableDeclaration"==e.type?r(e,t):r(e,t,"Expression")},i.DebuggerStatement=o,i.FunctionDeclaration=function(e,t,r){return r(e,t,"Function")},i.VariableDeclaration=function(e,t,r){for(var n=0;n<e.declarations.length;++n){var o=e.declarations[n];o.init&&r(o.init,t,"Expression")}},i.Function=function(e,t,r){return r(e.body,t,"ScopeBody")},i.ScopeBody=function(e,t,r){return r(e,t,"Statement")},i.Expression=n,i.ThisExpression=i.Super=i.MetaProperty=o,i.ArrayExpression=i.ArrayPattern=function(e,t,r){for(var n=0;n<e.elements.length;++n){var o=e.elements[n];o&&r(o,t,"Expression")}},i.ObjectExpression=i.ObjectPattern=function(e,t,r){for(var n=0;n<e.properties.length;++n)r(e.properties[n],t)},i.FunctionExpression=i.ArrowFunctionExpression=i.FunctionDeclaration,i.SequenceExpression=i.TemplateLiteral=function(e,t,r){for(var n=0;n<e.expressions.length;++n)r(e.expressions[n],t,"Expression")},i.UnaryExpression=i.UpdateExpression=function(e,t,r){r(e.argument,t,"Expression")},i.BinaryExpression=i.AssignmentExpression=i.AssignmentPattern=i.LogicalExpression=function(e,t,r){r(e.left,t,"Expression"),r(e.right,t,"Expression")},i.ConditionalExpression=function(e,t,r){r(e.test,t,"Expression"),r(e.consequent,t,"Expression"),r(e.alternate,t,"Expression")},i.NewExpression=i.CallExpression=function(e,t,r){if(r(e.callee,t,"Expression"),e.arguments)for(var n=0;n<e.arguments.length;++n)r(e.arguments[n],t,"Expression")},i.MemberExpression=function(e,t,r){r(e.object,t,"Expression"),e.computed&&r(e.property,t,"Expression")},i.ExportDeclaration=function(e,t,r){return r(e.declaration,t)},i.ImportDeclaration=function(e,t,r){for(var n=0;n<e.specifiers.length;n++)r(e.specifiers[n],t)},i.ImportSpecifier=i.ImportBatchSpecifier=i.Identifier=i.Literal=o,i.TaggedTemplateExpression=function(e,t,r){r(e.tag,t,"Expression"),r(e.quasi,t)},i.ClassDeclaration=i.ClassExpression=function(e,t,r){e.superClass&&r(e.superClass,t,"Expression");for(var n=0;n<e.body.body.length;n++)r(e.body.body[n],t)},i.MethodDefinition=i.Property=function(e,t,r){e.computed&&r(e.key,t,"Expression"),r(e.value,t,"Expression")},i.ComprehensionExpression=function(e,t,r){for(var n=0;n<e.blocks.length;n++)r(e.blocks[n].right,t,"Expression");r(e.body,t,"Expression")}},{}]},{},[1])(1)}),function(){Object.create=Object.create||function(){if(!({__proto__:null}instanceof Object))return function(e){return{__proto__:e}};function t(){}var e=document.body.appendChild(document.createElement("iframe"));e.src="javascript:";var r=e.contentWindow.Object.prototype;return delete r.hasOwnProperty,delete r.isPrototypeOf,delete r.propertyIsEnumerable,delete r.valueOf,delete r.toString,delete r.toLocaleString,delete r.constructor,function(e){return t.prototype=e||r,new t}}();var e=Array.prototype;e.some=e.some||function(e){for(var t=0;t<this.length;++t)if(e(this[t],t))return!0},e.forEach=e.forEach||function(e){for(var t=0;t<this.length;++t)e(this[t],t)},e.indexOf=e.indexOf||function(e,t){for(var r=t||0;r<this.length;++r)if(this[r]===e)return r;return-1},e.lastIndexOf=e.lastIndexOf||function(e,t){for(var r=null==t?this.length-1:t;0<=r;++r)if(this[r]===e)return r;return-1},e.map=e.map||function(e){for(var t=[],r=0;r<this.length;++r)t.push(e(this[r],r));return t},Array.isArray=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},String.prototype.trim=String.prototype.trim||function(){for(var e=0,t=this.length;/\s/.test(this.charAt(e));)++e;for(;/\s/.test(this.charAt(t-1));)--t;return this.slice(e,t)},window.JSON||function(){var y,v,b=void 0,x=!0,w=null,T={}.toString,e="function"==typeof define&&define.c,i=!e&&"object"==typeof exports&&exports;i||e?"object"==typeof JSON&&JSON?e?i=JSON:(i.stringify=JSON.stringify,i.parse=JSON.parse):e&&(i=this.JSON={}):i=this.JSON||(this.JSON={});var o,N,O,S,a,l,u,s,c,p,h,d,f,C,r,G,m=new Date(-0xc782b5b800cec);try{m=-109252==m.getUTCFullYear()&&0===m.getUTCMonth()&&1==m.getUTCDate()&&10==m.getUTCHours()&&37==m.getUTCMinutes()&&6==m.getUTCSeconds()&&708==m.getUTCMilliseconds()}catch(e){}function t(e){var t,r,n,o="json"==e;if(o||"json-stringify"==e||"json-parse"==e){if("json-stringify"==e||o){if(t="function"==typeof i.stringify&&m){(n=function(){return 1}).toJSON=n;try{t="0"===i.stringify(0)&&"0"===i.stringify(new Number)&&'""'==i.stringify(new String)&&i.stringify(T)===b&&i.stringify(b)===b&&i.stringify()===b&&"1"===i.stringify(n)&&"[1]"==i.stringify([n])&&"[null]"==i.stringify([b])&&"null"==i.stringify(w)&&"[null,null,null]"==i.stringify([b,T,w])&&'{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==i.stringify({A:[n,x,!1,w,"\0\b\n\f\r\t"]})&&"1"===i.stringify(w,n)&&"[\n 1,\n 2\n]"==i.stringify([1,2],w,1)&&'"-271821-04-20T00:00:00.000Z"'==i.stringify(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==i.stringify(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==i.stringify(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==i.stringify(new Date(-1))}catch(e){t=!1}}if(!o)return t}if("json-parse"==e||o){if("function"==typeof i.parse)try{if(0===i.parse("0")&&!i.parse(!1)&&(r=5==(n=i.parse('{"A":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}')).a.length&&1==n.a[0])){try{r=!i.parse('"\t"')}catch(e){}if(r)try{r=1!=i.parse("01")}catch(e){}}}catch(e){r=!1}if(!o)return r}return t&&r}}t("json")||(m||(C=Math.floor,r=[0,31,59,90,120,151,181,212,243,273,304,334],G=function(e,t){return r[t]+365*(e-1970)+C((e-1969+(t=+(1<t)))/4)-C((e-1901+t)/100)+C((e-1601+t)/400)}),(y={}.hasOwnProperty)||(y=function(e){var r,t={};return(t.__proto__=w,t.__proto__={toString:1},t).toString!=T?y=function(e){var t=this.__proto__;e=e in(this.__proto__=w,this);return this.__proto__=t,e}:(r=t.constructor,y=function(e){var t=(this.constructor||r).prototype;return e in this&&!(e in t&&this[e]===t[e])}),t=w,y.call(this,e)}),v=function(e,t){var r,o,n,i=0;for(n in(r=function(){this.valueOf=0}).prototype.valueOf=0,o=new r)y.call(o,n)&&i++;r=o=w,i?i=2==i?function(e,t){var r,n={},o="[object Function]"==T.call(e);for(r in e)(!o||"prototype"!=r)&&!y.call(n,r)&&(n[r]=1)&&y.call(e,r)&&t(r)}:function(e,t){var r,n,o="[object Function]"==T.call(e);for(r in e)(!o||"prototype"!=r)&&y.call(e,r)&&!(n="constructor"===r)&&t(r);(n||y.call(e,r="constructor"))&&t(r)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],i=function(e,t){var r,n="[object Function]"==T.call(e);for(r in e)(!n||"prototype"!=r)&&y.call(e,r)&&t(r);for(n=o.length;r=o[--n];y.call(e,r)&&t(r));}),i(e,t)},t("json-stringify")||(o={"\\":"\\\\",'"':'\\"',"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},N=function(e,t){return("000000"+(t||0)).slice(-e)},O=function(e){for(var t,r='"',n=0;t=e.charAt(n);n++)r+=-1<'\\"\b\f\n\r\t'.indexOf(t)?o[t]:o[t]=t<" "?"\\u00"+N(2,t.charCodeAt(0).toString(16)):t;return r+'"'},S=function(e,t,r,n,o,i,s){var a,l,u,c,p,h,d,f,m,g=t[e];if("object"==typeof g&&g)if("[object Date]"!=(a=T.call(g))||y.call(g,"toJSON"))"function"==typeof g.toJSON&&("[object Number]"!=a&&"[object String]"!=a&&"[object Array]"!=a||y.call(g,"toJSON"))&&(g=g.toJSON(e));else if(-1/0<g&&g<1/0){if(G){for(u=C(g/864e5),a=C(u/365.2425)+1970-1;G(a+1,0)<=u;a++);for(l=C((u-G(a,0))/30.42);G(a,l+1)<=u;l++);u=1+u-G(a,l),p=C((c=(g%864e5+864e5)%864e5)/36e5)%24,h=C(c/6e4)%60,d=C(c/1e3)%60,c%=1e3}else a=g.getUTCFullYear(),l=g.getUTCMonth(),u=g.getUTCDate(),p=g.getUTCHours(),h=g.getUTCMinutes(),d=g.getUTCSeconds(),c=g.getUTCMilliseconds();g=(a<=0||1e4<=a?(a<0?"-":"+")+N(6,a<0?-a:a):N(4,a))+"-"+N(2,l+1)+"-"+N(2,u)+"T"+N(2,p)+":"+N(2,h)+":"+N(2,d)+"."+N(3,c)+"Z"}else g=w;if(r&&(g=r.call(t,e,g)),g===w)return"null";if("[object Boolean]"==(a=T.call(g)))return""+g;if("[object Number]"==a)return-1/0<g&&g<1/0?""+g:"null";if("[object String]"==a)return O(g);if("object"==typeof g){for(e=s.length;e--;)if(s[e]===g)throw TypeError();if(s.push(g),f=[],t=i,i+=o,"[object Array]"==a){for(l=0,e=g.length;l<e;m||(m=x),l++)a=S(l,g,r,n,o,i,s),f.push(a===b?"null":a);e=m?o?"[\n"+i+f.join(",\n"+i)+"\n"+t+"]":"["+f.join(",")+"]":"[]"}else v(n||g,function(e){var t=S(e,g,r,n,o,i,s);t!==b&&f.push(O(e)+":"+(o?" ":"")+t),m||(m=x)}),e=m?o?"{\n"+i+f.join(",\n"+i)+"\n"+t+"}":"{"+f.join(",")+"}":"{}";return s.pop(),e}},i.stringify=function(e,t,r){var n,o,i,s,a,l;if("function"==typeof t||"object"==typeof t&&t)if("[object Function]"==T.call(t))o=t;else if("[object Array]"==T.call(t))for(i={},s=0,a=t.length;s<a;l=t[s++],("[object String]"==T.call(l)||"[object Number]"==T.call(l))&&(i[l]=1));if(r)if("[object Number]"==T.call(r)){if(0<(r-=r%1))for(n="",10<r&&(r=10);n.length<r;n+=" ");}else"[object String]"==T.call(r)&&(n=r.length<=10?r:r.slice(0,10));return S("",((l={})[""]=e,l),o,i,n,"",[])}),t("json-parse")||(a=String.fromCharCode,l={"\\":"\\",'"':'"',"/":"/",b:"\b",t:"\t",n:"\n",f:"\f",r:"\r"},u=function(){throw d=f=w,SyntaxError()},s=function(){for(var e,t,r,n,o,i=f,s=i.length;d<s;)if(e=i.charAt(d),-1<"\t\r\n ".indexOf(e))d++;else{if(-1<"{}[]:,".indexOf(e))return d++,e;if('"'==e){for(t="@",d++;d<s;)if((e=i.charAt(d))<" ")u();else if("\\"==e)if(e=i.charAt(++d),-1<'\\"/btnfr'.indexOf(e))t+=l[e],d++;else if("u"==e){for(r=++d,n=d+4;d<n;d++)"0"<=(e=i.charAt(d))&&e<="9"||"a"<=e&&e<="f"||"A"<=e&&e<="F"||u();t+=a("0x"+i.slice(r,d))}else u();else{if('"'==e)break;t+=e,d++}if('"'==i.charAt(d))return d++,t}else{if(r=d,"-"==e&&(o=x,e=i.charAt(++d)),"0"<=e&&e<="9"){for("0"==e&&("0"<=(e=i.charAt(d+1))&&e<="9")&&u();d<s&&("0"<=(e=i.charAt(d))&&e<="9");d++);if("."==i.charAt(d)){for(n=++d;n<s&&("0"<=(e=i.charAt(n))&&e<="9");n++);n==d&&u(),d=n}if("e"==(e=i.charAt(d))||"E"==e){for(("+"==(e=i.charAt(++d))||"-"==e)&&d++,n=d;n<s&&("0"<=(e=i.charAt(n))&&e<="9");n++);n==d&&u(),d=n}return+i.slice(r,d)}if(o&&u(),"true"==i.slice(d,d+4))return d+=4,x;if("false"==i.slice(d,d+5))return d+=5,!1;if("null"==i.slice(d,d+4))return d+=4,w}u()}return"$"},c=function(e){var t,r;if("$"==e&&u(),"string"==typeof e){if("@"==e.charAt(0))return e.slice(1);if("["==e){for(t=[];"]"!=(e=s());r||(r=x))r&&(","==e?"]"==(e=s())&&u():u()),","==e&&u(),t.push(c(e));return t}if("{"==e){for(t={};"}"!=(e=s());r||(r=x))r&&(","==e?"}"==(e=s())&&u():u()),(","==e||"string"!=typeof e||"@"!=e.charAt(0)||":"!=s())&&u(),t[e.slice(1)]=c(s());return t}u()}return e},h=function(e,t,r){(r=p(e,t,r))===b?delete e[t]:e[t]=r},p=function(e,t,r){var n,o=e[t];if("object"==typeof o&&o)if("[object Array]"==T.call(o))for(n=o.length;n--;)h(o,n,r);else v(o,function(e){h(o,e,r)});return r.call(e,t,o)},i.parse=function(e,t){var r,n;return d=0,f=e,r=c(s()),"$"!=s()&&u(),d=f=w,t&&"[object Function]"==T.call(t)?p(((n={})[""]=r,n),"",t):r})),e&&define(function(){return i})}()}(),function(e,t){"object"==typeof exports&&"object"==typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e.tern||(e.tern={})).signal={})}(this,function(e){function t(e,t){var r=this._handlers||(this._handlers=Object.create(null));(r[e]||(r[e]=[])).push(t)}function r(e,t){var r=this._handlers&&this._handlers[e];if(r)for(var n=0;n<r.length;++n)if(r[n]==t){r.splice(n,1);break}}function n(e,t,r,n,o){var i=this._handlers&&this._handlers[e];if(i)for(var s=0;s<i.length;++s)i[s].call(this,t,r,n,o)}e.mixin=function(e){return e.on=t,e.off=r,e.signal=n,e}}),function(e,t){"object"==typeof exports&&"object"==typeof module?t(exports,require("./infer"),require("./signal"),require("acorn"),require("acorn/dist/walk")):"function"==typeof define&&define.amd?define(["exports","./infer","./signal","acorn/dist/acorn","acorn/dist/walk"],t):t(e.tern||(e.tern={}),tern,tern.signal,acorn,acorn.walk)}(this,function(e,G,t,k,T){"use strict";var i=Object.create(null);e.registerPlugin=function(e,t){i[e]=t};var s=e.defaultOptions={debug:!1,async:!1,getFile:function(e,t){this.async&&t(null,null)},defs:[],plugins:{},fetchTimeout:1e3,dependencyBudget:2e4,reuseInstances:!0,stripCRs:!1},u={completions:{takesFile:!0,run:function(u,c,t){if(null==c.end)throw A("missing .query.end field");if(u.passes.completion)for(var e=0;e<u.passes.completion.length;e++){var r=u.passes.completion[e](t,c);if(r)return r}var n=L(t,c.end),o=n,i=t.text;for(;n&&k.isIdentifierChar(i.charCodeAt(n-1));)--n;if(!1!==c.expandWordForward)for(;o<i.length&&k.isIdentifierChar(i.charCodeAt(o));)++o;var p,h=i.slice(n,o),d=[];c.caseInsensitive&&(h=h.toLowerCase());var s,a,l,f=c.types||c.depths||c.docs||c.urls||c.origins;function m(e,t,r,n){if((!y&&!1===c.omitObjectPrototype||t!=u.cx.protos.Object||h)&&!(!1!==c.filter&&h&&0!==(c.caseInsensitive?e.toLowerCase():e).indexOf(h)||p&&p.props[e])){for(var o=0;o<d.length;++o){var i=d[o];if((f?i.name:i)==e)return}var s=f?{name:e}:e;if(d.push(s),t&&(c.types||c.docs||c.urls||c.origins)){var a=t.props[e];G.resetGuessing();var l=a.getType();s.guess=G.didGuess(),c.types&&(s.type=G.toString(a)),c.docs&&E(s,"doc",a.doc||l&&l.doc),c.urls&&E(s,"url",a.url||l&&l.url),c.origins&&E(s,"origin",a.origin||l&&l.origin)}c.depths&&(s.depth=r),f&&n&&n(s)}}var g,y,v=G.findExpressionAround(t.ast,null,n,t.scope);if(v)if("MemberExpression"==v.node.type&&v.node.object.end<n)g=v;else if(w=v.node,T=n,N=o,"Literal"==w.type&&"string"==typeof w.value&&w.start==T-1&&w.end<=N+1){var b=G.parentNode(v.node,t.ast);"MemberExpression"==b.type&&b.property==v.node&&(g={node:b,state:v.state})}else if("ObjectExpression"==v.node.type){var x=P(v.node,o);x?(y=v,C=l=x.key.name):h||/:\s*$/.test(t.text.slice(0,n))||(y=v,C=l=!0)}var w,T,N;if(y)a=G.typeFromContext(t.ast,y),p=y.node.objType;else if(g)C="Literal"==(C=g.node.property).type?C.value.slice(1):C.name,g.node=g.node.object,a=G.expressionType(g);else if("."==i.charAt(n-1)){for(var O=n-1;O&&("."==i.charAt(O-1)||k.isIdentifierChar(i.charCodeAt(O-1)));)O--;var S=i.slice(O,n-1);S&&(a=G.def.parsePath(S,t.scope).getObjType(),C=h)}if(null!=C){if(u.cx.completingProperty=C,a&&G.forAllPropertiesOf(a,m),!d.length&&!1!==c.guess&&a&&a.guessProperties&&a.guessProperties(function(e,t,r){e!=C&&""!=e&&m(e,t,r)}),!d.length&&2<=h.length&&!1!==c.guess)for(var C in u.cx.props)m(C,u.cx.props[C][0],0);s="memberCompletion"}else G.forAllLocalsAt(t.ast,n,t.scope,m),c.includeKeywords&&I.forEach(function(e){m(e,null,0,function(e){e.isKeyword=!0})}),s="variableCompletion";u.passes[s]&&u.passes[s].forEach(function(e){e(t,n,o,m)});!1!==c.sort&&d.sort(j);return u.cx.completingProperty=null,{start:M(c,t,n),end:M(c,t,o),isProperty:!!C,isObjectKey:!!l,completions:d}}},properties:{run:function(e,t){var r=t.prefix,n=[];for(var o in e.cx.props)"<i>"==o||r&&0!==o.indexOf(r)||n.push(o);!1!==t.sort&&n.sort(j);return{completions:n}}},type:{takesFile:!0,run:function(e,t,r){var n,o=b(r,t),i=O(e,t,r,o),s=i;i=t.preferFunction&&i.getFunctionType()||i.getType();o&&("Identifier"==o.node.type?n=o.node.name:"MemberExpression"!=o.node.type||o.node.computed||(n=o.node.property.name));if(null!=t.depth&&"number"!=typeof t.depth)throw A(".query.depth must be a number");var a={guess:G.didGuess(),type:G.toString(s,t.depth),name:i&&i.name,exprName:n};i&&S(i,a);!a.doc&&s.doc&&(a.doc=s.doc);return v(a)}},documentation:{takesFile:!0,run:function(e,t,r){var n=b(r,t),o=O(e,t,r,n),i={url:o.url,doc:o.doc,type:G.toString(o)},s=o.getType();s&&S(s,i);return v(i)}},definition:{takesFile:!0,run:function(e,t,r){var n=b(r,t),o=O(e,t,r,n);if(G.didGuess())return{};var i=C(o),s={url:o.url,doc:o.doc,origin:o.origin};if(o.types)for(var a=o.types.length-1;0<=a;--a){var l=o.types[a];S(l,s),i||(i=C(l))}if(i&&i.node){var u=i.node.sourceFile||e.findFile(i.origin),c=M(t,u,i.node.start),p=M(t,u,i.node.end);s.start=c,s.end=p,s.file=i.origin;var h=Math.max(0,i.node.start-50);s.contextOffset=i.node.start-h,s.context=u.text.slice(h,h+50)}else i&&(s.file=i.origin,R(e,t,i,s));return v(s)}},refs:{takesFile:!0,fullFile:!0,run:function(e,t,r){var n=x(r,t,!0);{if(n&&"Identifier"==n.node.type)return V(e,t,r,n);if(n&&"MemberExpression"==n.node.type&&!n.node.computed){var o=n.node.property;return n.node=n.node.object,D(e,t,n,o)}if(n&&"ObjectExpression"==n.node.type)for(var i=L(r,t.end),s=0;s<n.node.properties.length;++s){var a=n.node.properties[s].key;if(a.start<=i&&a.end>=i)return D(e,t,n,a)}}throw A("Not at a variable or property name.")}},rename:{takesFile:!0,fullFile:!0,run:function(e,t,r){if("string"!=typeof t.newName)throw A(".query.newName should be a string");var n=x(r,t);if(!n||"Identifier"!=n.node.type)throw A("Not at a variable.");var o=V(e,t,r,n,t.newName),i=o.refs;delete o.refs,o.files=e.files.map(function(e){return e.name});for(var s=o.changes=[],a=0;a<i.length;++a){var l=i[a];l.text=t.newName,s.push(l)}return o}},files:{run:function(e){return{files:e.files.map(function(e){return e.name})}}}};function a(e,t){this.name=e,this.parent=t,this.scope=this.text=this.ast=this.lineOffsets=null}function l(e,t,r){e.text=r.options.stripCRs?t.replace(/\r\n/g,"\n"):t,G.withContext(r.cx,function(){e.ast=G.parse(e.text,r.passes,{directSourceFile:e,allowReturnOutsideFunction:!0})}),e.lineOffsets=null}function c(e,t){return G.withContext(e.cx,function(){t.scope=e.cx.topScope,e.signal("beforeLoad",t),G.analyze(t.ast,t.name,t.scope,e.passes),e.signal("afterLoad",t)}),t}function p(r,e,t,n){var o=r.findFile(e);if(o)return null!=n&&(o.scope&&(r.needsPurge.push(e),o.scope=null),l(o,n,r)),void(f(r,o.parent)>f(r,t)&&(o.parent=t,o.excluded&&(o.excluded=null)));var i=new a(e,t);r.files.push(i),r.fileMap[e]=i,null!=n?l(i,n,r):r.options.async?(r.startAsyncAction(),r.options.getFile(e,function(e,t){l(i,t||"",r),r.finishAsyncAction(e)})):l(i,r.options.getFile(e)||"",r)}function h(e,t,r){var n=function(){e.off("everythingFetched",n),clearTimeout(o),d(e,t,r)};e.on("everythingFetched",n);var o=setTimeout(n,e.options.fetchTimeout)}function d(r,e,t){if(r.pending)return h(r,e,t);var n=r.fetchError;if(n)return r.fetchError=null,t(n);0<r.needsPurge.length&&G.withContext(r.cx,function(){G.purge(r.needsPurge),r.needsPurge.length=0});for(var o=!0,i=0;i<r.files.length;){for(var s=[];i<r.files.length;++i){null==(l=r.files[i]).text?o=!1:null!=l.scope||l.excluded||s.push(l)}s.sort(function(e,t){return f(r,e.parent)-f(r,t.parent)});for(var a=0;a<s.length;a++){var l;if((l=s[a]).parent&&!m(r,l))l.excluded=!0;else if(e){var u=+new Date;G.withTimeout(e[0],function(){c(r,l)}),e[0]-=+new Date-u}else c(r,l)}}o?t():h(r,e,t)}function N(e){for(var t=0;e;++t,e=e.prev);return t}function A(e){var t=new Error(e);return t.name="TernError",t}function f(e,t){for(var r=0;t;)t=e.findFile(t).parent,++r;return r}function m(e,t){var r,n,o=function(e,t){for(;;){var r=e.findFile(t.parent);if(!r.parent)break;t=r}return t.name}(e,t),i=(r=t.ast,n=0,T.simple(r,{Expression:function(){++n}}),n),s=e.budgets[o];return null==s&&(s=e.budgets[o]=e.options.dependencyBudget),!(s<i)&&(e.budgets[o]=s-i,!0)}function o(e){return"number"==typeof e||"object"==typeof e&&"number"==typeof e.line&&"number"==typeof e.ch}e.defineQueryType=function(e,t){u[e]=t},a.prototype.asLineChar=function(e){return y(this,e)},(e.Server=function(e){for(var t in this.cx=null,this.options=e||{},s)e.hasOwnProperty(t)||(e[t]=s[t]);for(var r in this.handlers=Object.create(null),this.files=[],this.fileMap=Object.create(null),this.needsPurge=[],this.budgets=Object.create(null),this.uses=0,this.pending=0,this.asyncError=null,this.passes=Object.create(null),this.defs=e.defs.slice(0),e.plugins)if(e.plugins.hasOwnProperty(r)&&r in i){var n=i[r](this,e.plugins[r]);if(n&&n.defs&&(n.loadFirst?this.defs.unshift(n.defs):this.defs.push(n.defs)),n&&n.passes)for(var o in n.passes)n.passes.hasOwnProperty(o)&&(this.passes[o]||(this.passes[o]=[])).push(n.passes[o])}this.reset()}).prototype=t.mixin({addFile:function(e,t,r){!r||r in this.fileMap||(r=null),p(this,e,r,t)},delFile:function(e){var t=this.findFile(e);t&&(this.needsPurge.push(t.name),this.files.splice(this.files.indexOf(t),1),delete this.fileMap[e])},reset:function(){this.signal("reset"),this.cx=new G.Context(this.defs,this),this.uses=0,this.budgets=Object.create(null);for(var e=0;e<this.files.length;++e){this.files[e].scope=null}},request:function(e,r){var t=function(e){if(e.query){if("string"!=typeof e.query.type)return".query.type must be a string";if(e.query.start&&!o(e.query.start))return".query.start must be a position";if(e.query.end&&!o(e.query.end))return".query.end must be a position"}if(e.files){if(!Array.isArray(e.files))return"Files property must be an array";for(var t=0;t<e.files.length;++t){var r=e.files[t];if("object"!=typeof r)return".files[n] must be objects";if("string"!=typeof r.name)return".files[n].name must be a string";if("delete"!=r.type){if("string"!=typeof r.text)return".files[n].text must be a string";if("part"==r.type){if(!o(r.offset)&&"number"!=typeof r.offsetLines)return".files[n].offset must be a position"}else if("full"!=r.type)return'.files[n].type must be "full" or "part"'}}}}(e);if(t)return r(t);var n=this;!function(n,e,o){if(e.query&&!u.hasOwnProperty(e.query.type))return o("No query type '"+e.query.type+"' defined");var i=e.query;i||o(null,{});var s=e.files||[];s.length&&++n.uses;for(var t=0;t<s.length;++t){var r=s[t];"delete"==r.type?n.delFile(r.name):p(n,r.name,null,"full"==r.type?r.text:null)}var a="number"==typeof e.timeout?[e.timeout]:null;if(!i)return d(n,a,function(){});var l=u[i.type];if(l.takesFile){if("string"!=typeof i.file)return o(".query.file must be a string");/^#/.test(i.file)||p(n,i.file,null)}d(n,a,function(e){if(e)return o(e);var t=l.takesFile&&function(f,e,t){var r=t.match(/^#(\d+)$/);if(!r)return f.findFile(t);var m=e[r[1]];if(!m||"delete"==m.type)throw A("Reference to unknown file "+t);if("full"==m.type)return f.findFile(m.name);var g=m.backing=f.findFile(m.name),n=m.offset;m.offsetLines&&(n={line:m.offsetLines,ch:0});m.offset=n=L(g,null==m.offsetLines?m.offset:{line:m.offsetLines,ch:0},!0);var y,v,b=(o=m.text,i=o.indexOf("\n"),i<0?o:o.slice(0,i)),x=function(e,t,r){var n=Math.max(0,r-500),o=null;if(!/^\s*$/.test(e))for(;;){var i=t.indexOf(e,n);if(i<0||r+500<i)break;(null==o||Math.abs(o-r)>Math.abs(i-r))&&(o=i),n=i+e.length}return o}(b,g.text,n),w=null==x?Math.max(0,g.text.lastIndexOf("\n",n)):x;var o,i;return G.withContext(f.cx,function(){G.purge(m.name,w,w+m.text.length);var e,t=m.text;if(e=t.match(/(?:"([^"]*)"|([\w$]+))\s*:\s*function\b/)){var r=T.findNodeAround(m.backing.ast,w,"ObjectExpression");r&&r.node.objType&&(y={type:r.node.objType,prop:e[2]||e[1]})}if(x&&(e=b.match(/^(.*?)\bfunction\b/))){for(var n=e[1].length,o="",i=0;i<n;++i)o+=" ";t=o+t.slice(n),v=!0}var s=G.scopeAt(g.ast,w,g.scope),a=G.scopeAt(g.ast,w+t.length,g.scope),l=m.scope=N(s)<N(a)?a:s;m.ast=G.parse(t,f.passes,{directSourceFile:m,allowReturnOutsideFunction:!0}),G.analyze(m.ast,m.name,l,f.passes);e:if(y||v){var u=G.scopeAt(m.ast,b.length,s);if(!u.fnType)break e;if(y)y.type.getProp(y.prop).addType(u.fnType);else if(v){var c=G.scopeAt(g.ast,w+b.length,g.scope);if(c==s||!c.fnType)break e;var p=c.fnType,h=u.fnType;if(!h||h.name!=p.name&&p.name)break e;i=0;for(var d=Math.min(p.args.length,h.args.length);i<d;++i)p.args[i].propagate(h.args[i]);p.self.propagate(h.self),h.retval.propagate(p.retval)}}}),m}(n,s,i.file);if(l.fullFile&&"part"==t.type)return o("Can't run a "+i.type+" query on a file fragment");function r(){var e;try{e=l.run(n,i,t)}catch(e){return n.options.debug&&"TernError"!=e.name&&console.error(e.stack),o(e)}o(null,e)}G.withContext(n.cx,a?function(){G.withTimeout(a[0],r)}:r)})}(this,e,function(e,t){r(e,t),40<n.uses&&(n.reset(),d(n,null,function(){}))})},findFile:function(e){return this.fileMap[e]},flush:function(t){var r=this.cx;d(this,null,function(e){if(e)return t(e);G.withContext(r,t)})},startAsyncAction:function(){++this.pending},finishAsyncAction:function(e){e&&(this.asyncError=e),0==--this.pending&&this.signal("everythingFetched")}});var g=25;var L=e.resolvePos=function(e,t,r){if("number"!=typeof t){var n=function(e,t){var r=e.text,n=e.lineOffsets||(e.lineOffsets=[0]),o=0,i=0,s=Math.min(Math.floor(t/g),n.length-1);for(o=n[s],i=s*g;i<t;){if(++i,0===(o=r.indexOf("\n",o)+1))return null;i%g==0&&n.push(o)}return o}(e,t.line);if(null==n){if(!r)throw A("File doesn't contain a line "+t.line);t=e.text.length}else t=n+t.ch}if(t>e.text.length){if(!r)throw A("Position "+t+" is outside of file.");t=e.text.length}return t};function y(e,t){if(!e)return{line:0,ch:0};for(var r,n,o=e.lineOffsets||(e.lineOffsets=[0]),i=e.text,s=o.length-1;0<=s;--s)o[s]<=t&&(r=s*g,n=o[s]);for(;;){var a=i.indexOf("\n",n);if(t<=a||a<0)break;n=a+1,++r}return{line:r,ch:t-n}}var M=e.outputPos=function(e,t,r){if(e.lineCharPositions){var n=y(t,r);return"part"==t.type&&(n.line+=null!=t.offsetLines?t.offsetLines:y(t.backing,t.offset).line),n}return r+("part"==t.type?t.offset:0)};function v(e){for(var t in e)null==e[t]&&delete e[t];return e}function E(e,t,r){null!=r&&(e[t]=r)}function j(e,t){"string"!=typeof e&&(e=e.name,t=t.name);var r=/^[A-Z]/.test(e);return r==/^[A-Z]/.test(t)?e<t?-1:e==t?0:1:r?1:-1}function P(e,t){for(var r=0;r<e.properties.length;r++){var n=e.properties[r];if(n.key.start<=t&&n.key.end>=t)return n}}var I="break do instanceof typeof case else new var catch finally return void continue for switch while debugger function this with default if throw delete in try".split(" ");var b=e.findQueryExpr=function(e,t,r){if(null==t.end)throw A("missing .query.end field");if(t.variable){var n=G.scopeAt(e.ast,L(e,t.end),e.scope);return{node:{type:"Identifier",name:t.variable,start:t.end,end:t.end+1},state:n}}var o=t.start&&L(e,t.start),i=L(e,t.end),s=G.findExpressionAt(e.ast,o,i,e.scope);return s||((s=G.findExpressionAround(e.ast,o,i,e.scope))&&("ObjectExpression"==s.node.type||r||(null==o?i:o)-s.node.start<20||s.node.end-i<20)?s:null)};function x(e,t,r){var n=b(e,t,r);if(n)return n;throw A("No expression at the given position.")}function w(e){return e&&(e=e.getType())&&e instanceof G.Obj?e:null}function O(e,t,r,n){var o,i;if(n&&(G.resetGuessing(),o=G.expressionType(n)),e.passes.typeAt){var s=L(r,t.end);e.passes.typeAt.forEach(function(e){o=e(r,s,n,o)})}if(!o)throw A("No type found at the given position.");if("ObjectExpression"==n.node.type&&null!=t.end&&(i=P(n.node,L(r,t.end)))){var a=i.key.name,l=w(G.typeFromContext(r.ast,n));if(l&&l.hasProp(a))o=l.hasProp(a);else{var u=w(o);u&&u.hasProp(a)&&(o=u.hasProp(a))}}return o}function S(e,t){t.url||(t.url=e.url),t.doc||(t.doc=e.doc),t.origin||(t.origin=e.origin);var r,n=G.cx().protos;!t.url&&!t.doc&&e.proto&&(r=e.proto.hasCtor)&&e.proto!=n.Object&&e.proto!=n.Function&&e.proto!=n.Array&&(t.url=r.url,t.doc=r.doc)}var C=e.getSpan=function(e){if(e.origin){if(e.originNode){var t=e.originNode;return/^Function/.test(t.type)&&t.id&&(t=t.id),{origin:e.origin,node:t}}return e.span?{origin:e.origin,span:e.span}:void 0}},R=e.storeSpan=function(e,t,r,n){if(n.origin=r.origin,r.span){var o=/^(\d+)\[(\d+):(\d+)\]-(\d+)\[(\d+):(\d+)\]$/.exec(r.span);n.start=t.lineCharPositions?{line:Number(o[2]),ch:Number(o[3])}:Number(o[1]),n.end=t.lineCharPositions?{line:Number(o[5]),ch:Number(o[6])}:Number(o[4])}else{var i=e.findFile(r.origin);n.start=M(t,i,r.node.start),n.end=M(t,i,r.node.end)}};function V(e,i,t,r,s){for(var a=r.node.name,l=r.state;l&&!(a in l.props);l=l.prev);if(!l)throw A("Could not find a definition for "+a+" "+!!e.cx.topScope.props.x);var n,u=[];function o(o){return function(e,t){if(s)for(var r=t;r!=l;r=r.prev){var n=r.hasProp(s);if(n)throw A("Renaming `"+a+"` to `"+s+"` would make a variable at line "+(y(o,e.start).line+1)+" point to the definition at line "+(y(o,n.name.start).line+1))}u.push({file:o.name,start:M(i,o,e.start),end:M(i,o,e.end)})}}if(l.originNode){if(n="local",s){for(var c=l.prev;c&&!(s in c.props);c=c.prev);c&&G.findRefs(l.originNode,l,s,c,function(e){throw A("Renaming `"+a+"` to `"+s+"` would shadow the definition used at line "+(y(t,e.start).line+1))})}G.findRefs(l.originNode,l,a,l,o(t))}else{n="global";for(var p=0;p<e.files.length;++p){var h=e.files[p];G.findRefs(h.ast,h.scope,a,l,o(h))}}return{refs:u,type:n,name:a}}function D(e,r,t,n){var o=G.expressionType(t).getObjType();if(!o)throw A("Couldn't determine type of base object.");var i=[];function s(t){return function(e){i.push({file:t.name,start:M(r,t,e.start),end:M(r,t,e.end)})}}for(var a=0;a<e.files.length;++a){var l=e.files[a];G.findPropRefs(l.ast,l.scope,o,n.name,s(l))}return{refs:i,name:n.name}}e.version="0.11.1"}),function(e){"object"==typeof exports&&"object"==typeof module?exports.init=e:"function"==typeof define&&define.amd?define({init:e}):tern.def={init:e}}(function(e,y){"use strict";function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var d=e.TypeParser=function(e,t,r,n){this.pos=t||0,this.spec=e,this.base=r,this.forceNew=n};function v(e,t,r){return e.call?e(t,r):e}function o(e,t){if("!ret"==t){if(e.retval)return e.retval;var r=new y.AVal;return e.propagate(new y.IsCallee(y.ANull,[],null,r)),r}return e.getProp(t)}function h(e,t,r,n){var i=new d(e,null,r,n).parseType(!1,t,!0);if(/^fn\(/.test(e))for(var o=0;o<i.args.length;++o)!function(n){var o=i.args[n];o instanceof y.Fn&&o.args&&o.args.length&&f(i,function(e,t){var r=t[n];r&&r.propagate(new y.IsCallee(y.cx().topScope,o.args,null,y.ANull))})}(o);return i}function f(e,i,s){var a=e.computeRet,l=e.retval;e.computeRet=function(e,t,r){var n=i(e,t,r),o=a?a(e,t,r):l;return s?n:o}}d.prototype={eat:function(e){if(1==e.length?this.spec.charAt(this.pos)==e:this.spec.indexOf(e,this.pos)==this.pos)return this.pos+=e.length,!0},word:function(e){var t,r="";for(e=e||/[\w$]/;(t=this.spec.charAt(this.pos))&&e.test(t);)r+=t,++this.pos;return r},error:function(){throw new Error("Unrecognized type spec: "+this.spec+" (at "+this.pos+")")},parseFnType:function(e,t,r){var n,o,i,s,a,l,u=[],c=[],p=!1;if(!this.eat(")"))for(var h=0;;++h){var d,f=this.spec.indexOf(": ",this.pos);-1!=f&&(d=this.spec.slice(this.pos,f),/^[$\w?]+$/.test(d)?this.pos=f+2:d=null),c.push(d);var m=this.parseType(e);if(m.call&&(p=!0),u.push(m),!this.eat(", ")){this.eat(")")||this.error();break}}if(this.eat(" -> ")){var g=this.pos;(n=this.parseType(!0)).call&&(r?(o=n,n=y.ANull,i=g):p=!0)}else n=y.ANull;return p?(a=u,l=n,function(e,t){for(var r=[],n=0;n<a.length;n++)r.push(v(a[n],e,t));return new y.Fn(name,y.ANull,r,v(l,e,t))}):(r&&(s=this.base)?y.Fn.call(this.base,t,y.ANull,u,c,n):s=new y.Fn(t,y.ANull,u,c,n),o&&(s.computeRet=o),null!=i&&(s.computeRetSource=this.spec.slice(i,this.pos)),s)},parseType:function(e,t,r){var n=this.parseTypeMaybeProp(e,t,r);if(!this.eat("|"))return n;for(var o,i=[n],s=n.call;;){var a=this.parseTypeMaybeProp(e,t,r);if(i.push(a),a.call&&(s=!0),!this.eat("|"))break}if(s)return o=i,function(e,t){for(var r=new y.AVal,n=0;n<o.length;n++)v(o[n],e,t).propagate(r);return r};for(var l=new y.AVal,u=0;u<i.length;u++)i[u].propagate(l);return l},parseTypeMaybeProp:function(e,t,r){for(var n=this.parseTypeInner(e,t,r);e&&this.eat(".");)n=this.extendWithProp(n);return n},extendWithProp:function(r){var n=this.word(/[\w<>$!]/)||this.error();return r.apply?function(e,t){return o(r(e,t),n)}:o(r,n)},parseTypeInner:function(e,t,r){if(this.eat("fn("))return this.parseFnType(e,t,r);if(this.eat("[")){var n=this.parseType(e);return this.eat("]")||this.error(),n.call?(l=n,function(e,t){return new y.Arr(l(e,t))}):r&&this.base?(y.Arr.call(this.base,n),this.base):new y.Arr(n)}if(this.eat("+")){var o=this.word(/[\w$<>\.!]/),i=u(o+".prototype");return i instanceof y.Obj||(i=u(o)),i instanceof y.Obj?e&&this.eat("[")?this.parsePoly(i):r&&this.forceNew?new y.Obj(i):y.getInstance(i):i}if(e&&this.eat("!")){var s=this.word(/\d/);if(s)return s=Number(s),function(e,t){return t[s]||y.ANull};if(this.eat("this"))return function(e){return e};if(this.eat("custom:")){var a=this.word(/[\w$]/);return w[a]||function(){return y.ANull}}return this.fromWord("!"+this.word(/[\w$<>\.!]/))}return this.eat("?")?y.ANull:this.fromWord(this.word(/[\w$<>\.!`]/));var l},fromWord:function(e){var t=y.cx();switch(e){case"number":return t.num;case"string":return t.str;case"bool":return t.bool;case"<top>":return t.topScope}return t.localDefs&&e in t.localDefs?t.localDefs[e]:u(e)},parsePoly:function(n){var e,o="<i>";(e=this.spec.slice(this.pos).match(/^\s*(\w+)\s*=\s*/))&&(o=e[1],this.pos+=e[0].length);var i=this.parseType(!0);if(this.eat("]")||this.error(),i.call)return function(e,t){var r=y.getInstance(n);return i(e,t).propagate(r.defProp(o)),r};var t=y.getInstance(n);return i.propagate(t.defProp(o)),t}};var m,g=e.parseEffect=function(e,t){var r;if(0==e.indexOf("propagate ")){var n=(s=new d(e,10)).parseType(!0);s.eat(" ")||s.error();var o=s.parseType(!0);f(t,function(e,t){v(n,e,t).propagate(v(o,e,t))})}else if(0==e.indexOf("call ")){var a=5==e.indexOf("and return ",5),l=(s=new d(e,a?16:5)).parseType(!0),u=null,c=[];for(s.eat(" this=")&&(u=s.parseType(!0));s.eat(" ");)c.push(s.parseType(!0));f(t,function(e,t){for(var r=v(l,e,t),n=u?v(u,e,t):y.ANull,o=[],i=0;i<c.length;++i)o.push(v(c[i],e,t));var s=a?new y.AVal:y.ANull;return r.propagate(new y.IsCallee(n,o,null,s)),s},a)}else if(r=e.match(/^custom (\S+)\s*(.*)/)){var i=w[r[1]];i&&f(t,r[2]?i(r[2]):i)}else{if(0!=e.indexOf("copy "))throw new Error("Unknown effect type: "+e);var s,p=(s=new d(e,5)).parseType(!0);s.eat(" ");var h=s.parseType(!0);f(t,function(e,t){var r=v(p,e,t),n=v(h,e,t);r.forAllProps(function(e,t,r){r&&"<i>"!=e&&n.propagate(new y.PropHasSubset(e,t))})})}},u=e.parsePath=function(e,t){var r=y.cx(),n=r.paths[e],o=e;if(null!=n)return n;r.paths[e]=y.ANull;var i=t||m||r.topScope;if(r.localDefs)for(var s in r.localDefs)if(0==e.indexOf(s)){if(e==s)return r.paths[e]=r.localDefs[e];if("."==e.charAt(s.length)){i=r.localDefs[s],e=e.slice(s.length+1);break}}for(var a=e.split("."),l=0;l<a.length&&i!=y.ANull;++l){var u=a[l];if("!"==u.charAt(0))if("!proto"==u)i=i instanceof y.Obj&&i.proto||y.ANull;else{var c=i.getFunctionType();if(c)if("!ret"==u)i=c.retval&&c.retval.getType(!1)||y.ANull;else{var p=c.args&&c.args[Number(u.slice(1))];i=p&&p.getType(!1)||y.ANull}else i=y.ANull}else if(i instanceof y.Obj){var h="prototype"==u&&i instanceof y.Fn?i.getProp(u):i.props[u];i=!h||h.isEmpty()?y.ANull:h.types[0]}}return r.paths[o]=i==y.ANull?null:i,i};function a(e){var t=Object.create(e.prototype);return t.props=Object.create(null),t.isShell=!0,t}function b(e){if(!e["!type"]||/^(fn\(|\[)/.test(e["!type"]))return!1;for(var t in e)if("!type"!=t&&"!doc"!=t&&"!url"!=t&&"!span"!=t&&"!data"!=t)return!1;return!0}function l(e,t,r){if(!e){var n=t["!type"];if(n)if(/^fn\(/.test(n))e=a(y.Fn);else{if("["!=n.charAt(0))throw new Error("Invalid !type spec: "+n);e=a(y.Arr)}else e=t["!stdProto"]?y.cx().protos[t["!stdProto"]]:a(y.Obj);e.name=r}for(var o in t)if(p(t,o)&&33!=o.charCodeAt(0)){var i=t[o];if("string"==typeof i||b(i))continue;var s=e.defProp(o);l(s.getObjType(),i,r?r+"."+o:o).propagate(s)}return e}function x(e,t,r){if(e.isShell){delete e.isShell;var n=t["!type"];if(n)h(n,r,e);else{var o=t["!proto"]&&h(t["!proto"]);y.Obj.call(e,!(o instanceof y.Obj)||o,r)}}var i=t["!effects"];if(i&&e instanceof y.Fn)for(var s=0;s<i.length;++s)g(i[s],e);for(var a in function(e,t){e["!doc"]&&(t.doc=e["!doc"]);e["!url"]&&(t.url=e["!url"]);e["!span"]&&(t.span=e["!span"]);e["!data"]&&(t.metaData=e["!data"])}(t,e),t)if(p(t,a)&&33!=a.charCodeAt(0)){var l=t[a],u=e.defProp(a),c=r?r+"."+a:a;if("string"==typeof l)u.isEmpty()&&h(l,c).propagate(u);else{if(b(l)){if(!u.isEmpty())continue;h(l["!type"],c,null,!0).propagate(u)}else x(u.getObjType(),l,c);l["!doc"]&&(u.doc=l["!doc"]),l["!url"]&&(u.url=l["!url"]),l["!span"]&&(u.span=l["!span"])}}return e}function s(e,t){var r=y.cx().parent,n=r&&r.passes&&r.passes[e];if(n)for(var o=0;o<n.length;o++)n[o](t)}e.load=function(e,t){t||(t=y.cx().topScope);var r=m;m=t;try{!function(e,t){var r=y.cx();y.addOrigin(r.curOrigin=e["!name"]||"env#"+r.origins.length),r.localDefs=r.definitions[r.curOrigin]=Object.create(null),s("preLoadDef",e),l(t,e);var n=e["!define"];if(n){for(var o in n){var i=n[o];r.localDefs[o]="string"==typeof i?u(i):l(null,i,o)}for(var o in n)"string"!=typeof(i=n[o])&&x(r.localDefs[o],n[o],o)}x(t,e),s("postLoadDef",e),r.curOrigin=r.localDefs=null}(e,t)}finally{m=r}},e.parse=function(e,t,r){var n=y.cx();t&&(n.origin=t,n.localDefs=n.definitions[t]);try{return"string"==typeof e?h(e,r):x(l(null,e,r),e,r)}finally{t&&(n.origin=n.localDefs=null)}};var w=Object.create(null);y.registerFunction=function(e,t){w[e]=t};var i=y.constraint("created, target, spec",{addType:function(e){if(e instanceof y.Obj&&this.created++<5){var t=new y.Obj(e),r=this.spec;if(r instanceof y.AVal&&(r=r.getObjType(!1)),r instanceof y.Obj)for(var n in r.props){var o=r.props[n].types[0],i=t.defProp(n);if(o&&o instanceof y.Obj&&o.props.value){var s=o.props.value.getType(!1);s&&i.addType(s)}}this.target.addType(t)}}});y.registerFunction("Object_create",function(e,t,r){if(r&&r.length&&"Literal"==r[0].type&&null==r[0].value)return new y.Obj;var n=new y.AVal;return t[0]&&t[0].propagate(new i(0,n,t[1])),n});var c=y.constraint("target",{addType:function(e){e instanceof y.Obj&&(e.hasProp("value")?e.getProp("value").propagate(this.target):e.hasProp("get")&&e.getProp("get").propagate(new y.IsCallee(y.ANull,[],null,this.target)))}});y.registerFunction("Object_defineProperty",function(e,t,r){if(r&&3<=r.length&&"Literal"==r[1].type&&"string"==typeof r[1].value){var n=t[0],o=new y.AVal;n.propagate(new y.PropHasSubset(r[1].value,o,r[1])),t[2].propagate(new c(o))}return y.ANull}),y.registerFunction("Object_defineProperties",function(e,t,o){if(2<=t.length){var i=t[0];t[1].forAllProps(function(e,t,r){if(r){var n=new y.AVal;i.propagate(new y.PropHasSubset(e,n,o&&o[1])),t.propagate(new c(n))}})}return y.ANull});var n=y.constraint("self, args, target",{addType:function(e){if(e instanceof y.Fn){this.target.addType(new y.Fn(e.name,y.ANull,e.args.slice(this.args.length),e.argNames.slice(this.args.length),e.retval)),this.self.propagate(e.self);for(var t=0;t<Math.min(e.args.length,this.args.length);++t)this.args[t].propagate(e.args[t])}}});return y.registerFunction("Function_bind",function(e,t){if(!t.length)return y.ANull;var r=new y.AVal;return e.propagate(new n(t[0],t.slice(1),r)),r}),y.registerFunction("Array_ctor",function(e,t){var r=new y.Arr;if(1!=t.length||!t[0].hasType(y.cx().num))for(var n=r.getProp("<i>"),o=0;o<t.length;++o)t[o].propagate(n);return r}),y.registerFunction("Promise_ctor",function(e,t,r){if(t.length<1)return y.ANull;var n=new y.Obj(y.cx().definitions.ecma6["Promise.prototype"]),o=n.defProp("value",r&&r[0]),i=new y.AVal;i.propagate(o);var s=new y.Fn("execute",y.ANull,[i],["value"],y.ANull),a=y.cx().definitions.ecma6.promiseReject;return t[0].propagate(new y.IsCallee(y.ANull,[s,a],null,y.ANull)),n}),e}),function(e){"object"==typeof exports&&"object"==typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(tern.comment||(tern.comment={}))}(function(r){function u(e){return e<14&&8<e||32===e||160===e}function c(e,t){for(;0<t;--t){var r=e.charCodeAt(t-1);if(10==r)break;if(!u(r))return!1}return!0}r.commentsBefore=function(e,t){var r,n=null,o=0;e:for(;0<t;){var i=e.charCodeAt(t-1);if(10==i)for(var s=--t,a=!1;0<s;--s){if(47==(i=e.charCodeAt(s-1))&&47==e.charCodeAt(s-2)){if(!c(e,s-2))break e;var l=e.slice(s,t);!o&&r?n[0]=l+"\n"+n[0]:(n||(n=[])).unshift(l),r=!0,o=0,t=s-2;break}if(10==i){if(!a&&1<++o)break e;break}a||u(i)||(a=!0)}else if(47==i&&42==e.charCodeAt(t-2)){for(s=t-2;1<s;--s)if(42==e.charCodeAt(s-1)&&47==e.charCodeAt(s-2)){if(!c(e,s-2))break e;(n||(n=[])).unshift(e.slice(s,t-2)),r=!1,o=0;break}t=s-2}else{if(!u(i))break;--t}}return n},r.commentAfter=function(e,t){for(;t<e.length;){var r=e.charCodeAt(t);if(47==r){var n,o=e.charCodeAt(t+1);if(47==o)n=e.indexOf("\n",t+2);else{if(42!=o)return;n=e.indexOf("*/",t+2)}return e.slice(t+2,n<0?e.length:n)}u(r)&&++t}},r.ensureCommentsBefore=function(e,t){return t.hasOwnProperty("commentsBefore")?t.commentsBefore:t.commentsBefore=r.commentsBefore(e,t.start)}}),function(e,t){"object"==typeof exports&&"object"==typeof module?t(exports,require("acorn"),require("acorn/dist/acorn_loose"),require("acorn/dist/walk"),require("./def"),require("./signal")):"function"==typeof define&&define.amd?define(["exports","acorn/dist/acorn","acorn/dist/acorn_loose","acorn/dist/walk","./def","./signal"],t):t(e.tern||(e.tern={}),acorn,acorn,acorn.walk,tern.def,tern.signal)}(this,function(s,o,i,h,a,e){"use strict";var l=s.toString=function(e,t,r){return!e||e==r||t&&t<-3?"?":e.toString(t,r)},d=s.ANull=e.mixin({addType:function(){},propagate:function(){},getProp:function(){return d},forAllProps:function(){},hasType:function(){return!1},isEmpty:function(){return!0},getFunctionType:function(){},getObjType:function(){},getType:function(){},gatherProperties:function(){},propagatesTo:function(){},typeHint:function(){},propHint:function(){},toString:function(){return"?"}});function t(e,t){var r=Object.create(e);if(t)for(var n in t)r[n]=t[n];return r}var f=s.AVal=function(){this.types=[],this.forward=null,this.maxWeight=0};function u(e,t,r){var n=e.getType(!1),o=t.getType(!1);return!n||!o||c(n,o,r)}function c(e,r,n){if(!e||5<=n)return r;if(!e||e==r)return e;if(!r)return e;if(e.constructor!=r.constructor)return!1;if(e.constructor!=j){if(e.constructor==M){var t=0,o=0,i=0;for(var s in e.props)t++,s in r.props&&u(e.props[s],r.props[s],n+1)&&i++;for(var s in r.props)o++;return!(t&&o&&i<Math.max(t,o)/2)&&(o<t?e:r)}return e.constructor==E&&(!!(e.args.length==r.args.length&&e.args.every(function(e,t){return u(e,r.args[t],n+1)})&&u(e.retval,r.retval,n+1)&&u(e.self,r.self,n+1))&&e)}var a=e.getProp("<i>").getType(!1);if(!a)return r;var l=r.getProp("<i>").getType(!1);return!l||c(a,l,n+1)?r:void 0}f.prototype=t(d,{addType:function(r,n){if(n=n||100,this.maxWeight<n){if(this.maxWeight=n,1==this.types.length&&this.types[0]==r)return;this.types.length=0}else if(this.maxWeight>n||-1<this.types.indexOf(r))return;this.signal("addType",r),this.types.push(r);var o=this.forward;o&&F(function(e){for(var t=0;t<o.length;++t)e(r,o[t],n)})},propagate:function(r,n){if(!(r==d||r instanceof A&&this.forward&&2<this.forward.length)){n&&100!=n&&(r=new k(r,n)),(this.forward||(this.forward=[])).push(r);var o=this.types;o.length&&F(function(e){for(var t=0;t<o.length;++t)e(o[t],r,n)})}},getProp:function(e){if("__proto__"==e||""==e)return d;var t=(this.props||(this.props=Object.create(null)))[e];return t||(t=this.props[e]=new f,this.propagate(new g(e,t))),t},forAllProps:function(e){this.propagate(new v(e))},hasType:function(e){return-1<this.types.indexOf(e)},isEmpty:function(){return 0===this.types.length},getFunctionType:function(){for(var e=this.types.length-1;0<=e;--e)if(this.types[e]instanceof E)return this.types[e]},getObjType:function(){for(var e=null,t=this.types.length-1;0<=t;--t){var r=this.types[t];if(r instanceof M){if(r.name)return r;e||(e=r)}}return e},getType:function(e){return 0===this.types.length&&!1!==e?this.makeupType():1===this.types.length?this.types[0]:p(this.types)},toString:function(t,r){if(0==this.types.length)return l(this.makeupType(),t,r);if(1==this.types.length)return l(this.types[0],t,r);var e=n(this.types);return 2<e.length?"?":e.map(function(e){return l(e,t,r)}).join("|")},computedPropType:function(){if(!this.propertyOf)return null;if(this.propertyOf.hasProp("<i>")){var e=this.propertyOf.getProp("<i>");return e==this?null:e.getType()}if(this.propertyOf.maybeProps&&this.propertyOf.maybeProps["<i>"]==this){for(var t in this.propertyOf.props){var r=this.propertyOf.props[t];if(!r.isEmpty())return r}return null}},makeupType:function(){var e=this.computedPropType();if(e)return e;if(!this.forward)return null;for(var t=this.forward.length-1;0<=t;--t){var r=this.forward[t].typeHint();if(r&&!r.isEmpty())return le=!0,r}var n=Object.create(null),o=null;for(t=0;t<this.forward.length;++t){(l=this.forward[t].propHint())&&"length"!=l&&"<i>"!=l&&""!=l&&l!=R.completingProperty&&(n[l]=!0,o=l)}if(!o)return null;var i=P(o);if(i){var s=[];e:for(t=0;t<i.length;++t){var a=i[t];for(var l in n)if(!a.hasProp(l))continue e;a.hasCtor&&(a=T(a)),s.push(a)}var u=p(s);if(u)return le=!0,u}},typeHint:function(){return this.types.length?this.getType():null},propagatesTo:function(){return this},gatherProperties:function(e,t){for(var r=0;r<this.types.length;++r)this.types[r].gatherProperties(e,t)},guessProperties:function(e){if(this.forward)for(var t=0;t<this.forward.length;++t){var r=this.forward[t].propHint();r&&e(r,null,0)}var n=this.makeupType();n&&n.gatherProperties(e)}});var n=s.simplifyTypes=function(e){var t=[];e:for(var r=0;r<e.length;++r){for(var n=e[r],o=0;o<t.length;o++){var i=c(n,t[o],0);if(i){t[o]=i;continue e}}t.push(n)}return t};function p(e){for(var t=0,r=0,n=0,o=null,i=0;i<e.length;++i){if((l=e[i])instanceof j)++t;else if(l instanceof E)++r;else if(l instanceof M)++n;else if(l instanceof L){if(o&&l.name!=o.name)return null;o=l}}if(1<(t&&1)+(r&&1)+(n&&1)+(o&&1))return null;if(o)return o;var s=0,a=null;for(i=0;i<e.length;++i){var l=e[i],u=0;if(t)u=l.getProp("<i>").isEmpty()?1:2;else if(r){u=1;for(var c=0;c<l.args.length;++c)l.args[c].isEmpty()||++u;l.retval.isEmpty()||++u}else n&&(u=l.name?100:2);s<=u&&(s=u,a=l)}return a}function m(){}m.prototype=t(d,{init:function(){this.origin=R.curOrigin}});var r=s.constraint=function(e,t){var r="this.init();";e=e?e.split(", "):[];for(var n=0;n<e.length;++n)r+="this."+e[n]+" = "+e[n]+";";var o=Function.apply(null,e.concat([r]));for(var i in o.prototype=Object.create(m.prototype),t)t.hasOwnProperty(i)&&(o.prototype[i]=t[i]);return o},g=r("prop, target",{addType:function(e,t){e.getProp&&e.getProp(this.prop).propagate(this.target,t)},propHint:function(){return this.prop},propagatesTo:function(){if("<i>"==this.prop||!/[^\w_]/.test(this.prop))return{target:this.target,pathExt:"."+this.prop}}}),y=s.PropHasSubset=r("prop, type, originNode",{addType:function(e,t){if(e instanceof M){var r=e.defProp(this.prop,this.originNode);r.origin||(r.origin=this.origin),this.type.propagate(r,t)}},propHint:function(){return this.prop}}),v=r("c",{addType:function(e){e instanceof M&&e.forAllProps(this.c)}});var b=s.IsCallee=r("self, args, argNodes, retval",{init:function(){m.prototype.init.call(this),this.disabled=R.disabledComputing},addType:function(e,t){if(e instanceof E){for(var r=0;r<this.args.length;++r)r<e.args.length&&this.args[r].propagate(e.args[r],t),e.arguments&&this.args[r].propagate(e.arguments,t);this.self.propagate(e.self,this.self==R.topScope?90:t);var n=e.computeRet;if(n)for(var o=this.disabled;o;o=o.prev)(o.fn==e||e.originNode&&o.fn.originNode==e.originNode)&&(n=null);n?n(this.self,this.args,this.argNodes).propagate(this.retval,t):e.retval.propagate(this.retval,t)}},typeHint:function(){for(var e=[],t=0;t<this.args.length;++t)e.push("?");return new E(null,this.self,this.args,e,d)},propagatesTo:function(){return{target:this.retval,pathExt:".!ret"}}}),x=r("propName, args, argNodes, retval",{init:function(){m.prototype.init.call(this),this.disabled=R.disabledComputing},addType:function(e,t){var r=new b(e,this.args,this.argNodes,this.retval);r.disabled=this.disabled,e.getProp(this.propName).propagate(r,t)},propHint:function(){return this.propName}}),w=s.IsCtor=r("target, noReuse",{addType:function(e,t){e instanceof E&&(R.parent&&!R.parent.options.reuseInstances&&(this.noReuse=!0),e.getProp("prototype").propagate(new N(!this.noReuse&&e,this.target),t))}}),T=s.getInstance=function(e,t){if(!1===t)return new M(e);t||(t=e.hasCtor),e.instances||(e.instances=[]);for(var r=0;r<e.instances.length;++r){var n=e.instances[r];if(n.ctor==t)return n.instance}var o=new M(e,t&&t.name);return o.origin=e.origin,e.instances.push({ctor:t,instance:o}),o},N=s.IsProto=r("ctor, target",{addType:function(e,t){e instanceof M&&(8<(this.count=(this.count||0)+1)||(e==R.protos.Array?this.target.addType(new j):this.target.addType(T(e,this.ctor))))}}),O=r("fn",{addType:function(e,t){if(e instanceof M&&!e.hasCtor){e.hasCtor=this.fn;var n=new G(e,this.fn);n.addType(this.fn),e.forAllProps(function(e,t,r){r&&t.propagate(n)})}}}),S=r("other, target",{addType:function(e,t){e==R.str?this.target.addType(R.str,t):e==R.num&&this.other.hasType(R.num)&&this.target.addType(R.num,t)},typeHint:function(){return this.other}}),C=s.IfObj=r("target",{addType:function(e,t){e instanceof M&&this.target.addType(e,t)},propagatesTo:function(){return this.target}}),G=r("obj, ctor",{addType:function(e){e instanceof E&&e.self&&e.self.isEmpty()&&e.self.addType(T(this.obj,this.ctor),2)}}),k=r("inner, weight",{addType:function(e,t){this.inner.addType(e,Math.min(t,this.weight))},propagatesTo:function(){return this.inner.propagatesTo()},typeHint:function(){return this.inner.typeHint()},propHint:function(){return this.inner.propHint()}}),A=s.Type=function(){};A.prototype=t(d,{constructor:A,propagate:function(e,t){e.addType(this,t)},hasType:function(e){return e==this},isEmpty:function(){return!1},typeHint:function(){return this},getType:function(){return this}});var L=s.Prim=function(e,t){this.name=t,this.proto=e};L.prototype=t(A.prototype,{constructor:L,toString:function(){return this.name},getProp:function(e){return this.proto.hasProp(e)||d},gatherProperties:function(e,t){this.proto&&this.proto.gatherProperties(e,t)}});var M=s.Obj=function(e,t){if(this.props||(this.props=Object.create(null)),this.proto=!0===e?R.protos.Object:e,e&&!t&&e.name&&!(this instanceof E)){var r=/^(.*)\.prototype$/.exec(this.proto.name);r&&(t=r[1])}this.name=t,this.maybeProps=null,this.origin=R.curOrigin};M.prototype=t(A.prototype,{constructor:M,toString:function(e){if(null==e&&(e=0),e<=0&&this.name)return this.name;var t=[],r=!1;for(var n in this.props)if("<i>"!=n){if(5<t.length){r=!0;break}e?t.push(n+": "+l(this.props[n],e-1,this)):t.push(n)}return t.sort(),r&&t.push("..."),"{"+t.join(", ")+"}"},hasProp:function(e,t){var r=this.props[e];if(!1!==t)for(var n=this.proto;n&&!r;n=n.proto)r=n.props[e];return r},defProp:function(e,t){var r=this.hasProp(e,!1);if(r)return t&&!r.originNode&&(r.originNode=t),r;if("__proto__"==e||""==e)return d;var n=this.maybeProps&&this.maybeProps[e];return n?(delete this.maybeProps[e],this.maybeUnregProtoPropHandler()):(n=new f).propertyOf=this,(this.props[e]=n).originNode=t,n.origin=R.curOrigin,this.broadcastProp(e,n,!0),n},getProp:function(e){var t=this.hasProp(e,!0)||this.maybeProps&&this.maybeProps[e];if(t)return t;if("__proto__"==e||""==e)return d;var r=this.ensureMaybeProps()[e]=new f;return r.propertyOf=this,r},broadcastProp:function(e,t,r){var n,o;if(r&&(this.signal("addProp",e,t),this instanceof _||(n=e,o=this,(R.props[n]||(R.props[n]=[])).push(o))),this.onNewProp)for(var i=0;i<this.onNewProp.length;++i){var s=this.onNewProp[i];s.onProtoProp?s.onProtoProp(e,t,r):s(e,t,r)}},onProtoProp:function(e,t,r){var n=this.maybeProps&&this.maybeProps[e];n&&(delete this.maybeProps[e],this.maybeUnregProtoPropHandler(),this.proto.getProp(e).propagate(n)),this.broadcastProp(e,t,!1)},ensureMaybeProps:function(){return this.maybeProps||(this.proto&&this.proto.forAllProps(this),this.maybeProps=Object.create(null)),this.maybeProps},removeProp:function(e){var t=this.props[e];delete this.props[e],(this.ensureMaybeProps()[e]=t).types.length=0},forAllProps:function(e){this.onNewProp||(this.onNewProp=[],this.proto&&this.proto.forAllProps(this)),this.onNewProp.push(e);for(var t=this;t;t=t.proto)for(var r in t.props)e.onProtoProp?e.onProtoProp(r,t.props[r],t==this):e(r,t.props[r],t==this)},maybeUnregProtoPropHandler:function(){if(this.maybeProps){for(var e in this.maybeProps)return;this.maybeProps=null}!this.proto||this.onNewProp&&this.onNewProp.length||this.proto.unregPropHandler(this)},unregPropHandler:function(e){for(var t=0;t<this.onNewProp.length;++t)if(this.onNewProp[t]==e){this.onNewProp.splice(t,1);break}this.maybeUnregProtoPropHandler()},gatherProperties:function(e,t){for(var r in this.props)"<i>"!=r&&e(r,this,t);this.proto&&this.proto.gatherProperties(e,t+1)},getObjType:function(){return this}});var E=s.Fn=function(e,t,r,n,o){M.call(this,R.protos.Function,e),this.self=t,this.args=r,this.argNames=n,this.retval=o};E.prototype=t(M.prototype,{constructor:E,toString:function(e){null==e&&(e=0);for(var t="fn(",r=0;r<this.args.length;++r){r&&(t+=", ");var n=this.argNames[r];n&&"?"!=n&&(t+=n+": "),t+=-3<e?l(this.args[r],e-1,this):"?"}return t+=")",this.retval.isEmpty()||(t+=" -> "+(-3<e?l(this.retval,e-1,this):"?")),t},getProp:function(e){if("prototype"==e){var t=this.hasProp(e,!1);if(!t){t=this.defProp(e);var r=new M(!0,this.name&&this.name+".prototype");r.origin=this.origin,t.addType(r,10)}return t}return M.prototype.getProp.call(this,e)},defProp:function(e,t){if("prototype"==e){var r=this.hasProp(e,!1);return r||((r=M.prototype.defProp.call(this,e,t)).origin=this.origin,r.propagate(new O(this)),r)}return M.prototype.defProp.call(this,e,t)},getFunctionType:function(){return this}});var j=s.Arr=function(e){M.call(this,R.protos.Array);var t=this.defProp("<i>");e&&e.propagate(t)};function P(e){return R.props[e]}j.prototype=t(M.prototype,{constructor:j,toString:function(e){return null==e&&(e=0),"["+(-3<e?l(this.getProp("<i>"),e-1,this):"?")+"]"}}),s.Context=function(t,e){this.parent=e,this.props=Object.create(null),this.protos=Object.create(null),this.origins=[],this.curOrigin="ecma5",this.paths=Object.create(null),this.definitions=Object.create(null),this.purgeGen=0,this.workList=null,this.disabledComputing=null,s.withContext(this,function(){if(R.protos.Object=new M(null,"Object.prototype"),R.topScope=new _,R.topScope.name="<top>",R.protos.Array=new M(!0,"Array.prototype"),R.protos.Function=new M(!0,"Function.prototype"),R.protos.RegExp=new M(!0,"RegExp.prototype"),R.protos.String=new M(!0,"String.prototype"),R.protos.Number=new M(!0,"Number.prototype"),R.protos.Boolean=new M(!0,"Boolean.prototype"),R.str=new L(R.protos.String,"string"),R.bool=new L(R.protos.Boolean,"bool"),R.num=new L(R.protos.Number,"number"),R.curOrigin=null,t)for(var e=0;e<t.length;++e)a.load(t[e])})};var I,R=null;s.cx=function(){return R},s.withContext=function(e,t){var r=R;R=e;try{return t()}finally{R=r}},s.TimedOut=function(){this.message="Timed out",this.stack=(new Error).stack},s.TimedOut.prototype=Object.create(Error.prototype),s.TimedOut.prototype.name="infer.TimedOut",s.withTimeout=function(e,t){var r=+new Date+e,n=I;if(n&&n<r)return t();I=r;try{return t()}finally{I=n}},s.addOrigin=function(e){R.origins.indexOf(e)<0&&R.origins.push(e)};var V=20,D=1e-4;function F(e){if(R.workList)return e(R.workList);var n=[],o=0,t=R.workList=function(e,t,r){o<V-D*n.length&&n.push(e,t,r,o)};try{for(var r=e(t),i=0;i<n.length;i+=4){if(I&&+new Date>=I)throw new s.TimedOut;o=n[i+3]+1,n[i+1].addType(n[i],n[i+2])}return r}finally{R.workList=null}}var _=s.Scope=function(e){M.call(this,e||!0),this.prev=e};function B(e,t){e.fnType&&(e.fnType.instantiateScore=(e.fnType.instantiateScore||0)+t)}_.prototype=t(M.prototype,{constructor:_,defVar:function(e,t){for(var r=this;;r=r.proto){var n=r.props[e];if(n)return n;if(!r.prev)return r.defProp(e,t)}}});var U={};function z(e,t){var r=t.fnType.instantiateScore;if(!R.disabledComputing&&r&&t.fnType.args.length&&function(e,t){try{return h.simple(e,{Expression:function(){if(--t<=0)throw U}}),!0}catch(e){if(e==U)return!1;throw e}}(e,5*r))return B(t.prev,r/2),function(u,c){for(var p=c.fnType,e=0;e<p.args.length;++e)p.args[e]=new f;p.self=new f,p.computeRet=function(a,l){return function(e,t){R.disabledComputing={fn:e,prev:R.disabledComputing};try{return t()}finally{R.disabledComputing=R.disabledComputing.prev}}(p,function(){var e=R.curOrigin;R.curOrigin=p.origin;var t=new _(c.prev);for(var r in t.originNode=c.originNode,c.props)for(var n=t.defProp(r,c.props[r].originNode),o=0;o<l.length;++o)p.argNames[o]==r&&o<l.length&&l[o].propagate(n);for(var i=p.argNames.length!=l.length?p.argNames.slice(0,l.length):p.argNames;i.length<l.length;)i.push("?");if(t.fnType=new E(p.name,a,l,i,d),t.fnType.originNode=p.originNode,p.arguments){var s=t.fnType.arguments=new f;t.defProp("arguments").addType(new j(s));for(var o=0;o<l.length;++o)l[o].propagate(s)}return u.body.scope=t,h.recursive(u.body,t,null,q),h.recursive(u.body,t,null,te),R.curOrigin=e,t.fnType.retval})}}(e,t),!0;t.fnType.instantiateScore=null}function W(e){var t=e.fnType,l=t.retval;if(l!=d){var r,n;!l.isEmpty()&&(r=l.getType())instanceof j&&(l=n=r.getProp("<i>"));for(var o=u(t.self,"!this",0),i=0;!o&&i<t.args.length;++i)o=u(t.args[i],"!"+i,0);if(o){n&&(o="["+o+"]");var s=new a.TypeParser(o).parseType(!0);return t.computeRet=s.apply?s:function(){return s},t.computeRetSource=o,!0}}function u(e,t,r){if(!(3<r)&&e.forward)for(var n=0;n<e.forward.length;++n){var o=e.forward[n].propagatesTo();if(o){var i,s=t;if(o instanceof f)i=o;else{if(!(o.target instanceof f))continue;s+=o.pathExt,i=o.target}if(i==l)return s;var a=u(i,s,r+1);if(a)return a}}}}function H(e,t){return e.defProp(t.name,t)}var q=h.make({Function:function(e,t,r){var n=e.body.scope=new _(t);n.originNode=e;for(var o=[],i=[],s=0;s<e.params.length;++s){var a=e.params[s];i.push(a.name),o.push(H(n,a))}(n.fnType=new E(e.id&&e.id.name,new f,o,i,d),(n.fnType.originNode=e).id)&&H("FunctionDeclaration"==e.type?t:n,e.id);r(e.body,n,"ScopeBody")},TryStatement:function(e,t,r){if(r(e.block,t,"Statement"),e.handler){var n=H(t,e.handler.param);r(e.handler.body,t,"ScopeBody");var o=R.definitions.ecma5;o&&n.isEmpty()&&T(o["Error.prototype"]).propagate(n,5)}e.finalizer&&r(e.finalizer,t,"Statement")},VariableDeclaration:function(e,t,r){for(var n=0;n<e.declarations.length;++n){var o=e.declarations[n];H(t,o.id),o.init&&r(o.init,t,"Expression")}}});function Y(e,t,r){var n=e.property;return e.computed?"Literal"==n.type&&"string"==typeof n.value?n.value:(r&&ee(n,t,r,d),"<i>"):n.name}function J(e){switch(e){case"+":case"-":case"~":return R.num;case"!":return R.bool;case"typeof":return R.str;case"void":case"delete":return d}}function K(e){switch(e){case"==":case"!=":case"===":case"!==":case"<":case">":case">=":case"<=":case"in":case"instanceof":return!0}}function X(e){if(e.regex)return T(R.protos.RegExp);switch(typeof e.value){case"boolean":return R.bool;case"number":return R.num;case"string":return R.str;case"object":case"function":return e.value?T(R.protos.RegExp):d}}function Z(s){return function(e,t,r,n,o){var i=s(e,t,r,o);return n&&i.propagate(n),i}}function $(i){return function(e,t,r,n,o){return n||(n=new f),i(e,t,r,n,o),n}}var Q={ArrayExpression:Z(function(e,t,r){for(var n=new f,o=0;o<e.elements.length;++o){var i=e.elements[o];i&&ee(i,t,r,n)}return new j(n)}),ObjectExpression:Z(function(e,t,r,n){var o=e.objType=new M(!0,n);o.originNode=e;for(var i=0;i<e.properties.length;++i){var s=e.properties[i],a=s.key;if(""!=s.value.name)if("Identifier"==a.type?n=a.name:"string"==typeof a.value&&(n=a.value),n&&"set"!=s.kind){var l=o.defProp(n,a),u=l;l.initializer=!0,"get"==s.kind&&(u=new b(o,[],null,l)),ee(s.value,t,r,u,n)}else ee(s.value,t,r,d)}return o}),FunctionExpression:Z(function(e,t,r,n){var o=e.body.scope,i=o.fnType;return n&&!i.name&&(i.name=n),r(e.body,t,"ScopeBody"),z(e,o)||W(o),e.id&&o.getProp(e.id.name).addType(i),i}),SequenceExpression:Z(function(e,t,r){for(var n=0,o=e.expressions.length-1;n<o;++n)ee(e.expressions[n],t,r,d);return ee(e.expressions[o],t,r)}),UnaryExpression:Z(function(e,t,r){return ee(e.argument,t,r,d),J(e.operator)}),UpdateExpression:Z(function(e,t,r){return ee(e.argument,t,r,d),R.num}),BinaryExpression:Z(function(e,t,r){if("+"==e.operator){var n=ee(e.left,t,r),o=ee(e.right,t,r);if(n.hasType(R.str)||o.hasType(R.str))return R.str;if(n.hasType(R.num)&&o.hasType(R.num))return R.num;var i=new f;return n.propagate(new S(o,i)),o.propagate(new S(n,i)),i}return ee(e.left,t,r,d),ee(e.right,t,r,d),K(e.operator)?R.bool:R.num}),AssignmentExpression:Z(function(e,t,r){var n,o,i;if("MemberExpression"==e.left.type?(i=Y(e.left,t,r),"Identifier"==e.left.object.type&&(o=e.left.object.name+"."+i)):o=e.left.name,"="!=e.operator&&"+="!=e.operator?(ee(e.right,t,r,d),n=R.num):n=ee(e.right,t,r,null,o),"MemberExpression"==e.left.type){var s=ee(e.left.object,t,r);if("prototype"==i&&B(t,20),"<i>"==i){var a=e.left.property.name,l=t.props[a],u=l&&l.iteratesOver;if(u){B(t,20);var c="MemberExpression"==e.right.type&&e.right.computed&&e.right.property.name==a;return u.forAllProps(function(e,t,r){r&&"prototype"!=e&&"<i>"!=e&&s.propagate(new y(e,c?t:d))}),n}}s.propagate(new y(i,n,e.left.property))}else n.propagate(t.defVar(e.left.name,e.left));return n}),LogicalExpression:$(function(e,t,r,n){ee(e.left,t,r,n),ee(e.right,t,r,n)}),ConditionalExpression:$(function(e,t,r,n){ee(e.test,t,r,d),ee(e.consequent,t,r,n),ee(e.alternate,t,r,n)}),NewExpression:$(function(e,t,r,n,o){"Identifier"==e.callee.type&&e.callee.name in t.props&&B(t,20);for(var i=0,s=[];i<e.arguments.length;++i)s.push(ee(e.arguments[i],t,r));var a=ee(e.callee,t,r),l=new f;a.propagate(new w(l,o&&/\.prototype$/.test(o))),l.propagate(n,90),a.propagate(new b(l,s,e.arguments,new C(n)))}),CallExpression:$(function(e,t,r,n){for(var o=0,i=[];o<e.arguments.length;++o)i.push(ee(e.arguments[o],t,r));if("MemberExpression"==e.callee.type){var s=ee(e.callee.object,t,r),a=Y(e.callee,t,r);("call"==a||"apply"==a)&&t.fnType&&-1<t.fnType.args.indexOf(s)&&B(t,30),s.propagate(new x(a,i,e.arguments,n))}else{var l=ee(e.callee,t,r);t.fnType&&-1<t.fnType.args.indexOf(l)&&B(t,30);var u=l.getFunctionType();u&&u.instantiateScore&&t.fnType&&B(t,u.instantiateScore/5),l.propagate(new b(R.topScope,i,e.arguments,n))}}),MemberExpression:$(function(e,t,r,n){var o=Y(e,t),i=ee(e.object,t,r).getProp(o);if("<i>"==o&&!ee(e.property,t,r).hasType(R.num))return i.propagate(n,5);i.propagate(n)}),Identifier:Z(function(e,t){return"arguments"!=e.name||!t.fnType||e.name in t.props||t.defProp(e.name,t.fnType.originNode).addType(new j(t.fnType.arguments=new f)),t.getProp(e.name)}),ThisExpression:Z(function(e,t){return t.fnType?t.fnType.self:R.topScope}),Literal:Z(function(e){return X(e)})};function ee(e,t,r,n,o){return Q[e.type](e,t,r,n,o)}var te=h.make({Expression:function(e,t,r){ee(e,t,r,d)},FunctionDeclaration:function(e,t,r){var n=e.body.scope,o=n.fnType;r(e.body,t,"ScopeBody"),z(e,n)||W(n),t.getProp(e.id.name).addType(o)},VariableDeclaration:function(e,t,r){for(var n=0;n<e.declarations.length;++n){var o=e.declarations[n],i=t.getProp(o.id.name);o.init&&ee(o.init,t,r,i,o.id.name)}},ReturnStatement:function(e,t,r){if(e.argument){var n=d;t.fnType&&(t.fnType.retval==d&&(t.fnType.retval=new f),n=t.fnType.retval),ee(e.argument,t,r,n)}},ForInStatement:function(e,t,r){var n,o=ee(e.right,t,r);("Identifier"==e.right.type&&e.right.name in t.props||"MemberExpression"==e.right.type&&"prototype"==e.right.property.name)&&(B(t,5),"Identifier"==e.left.type?n=e.left.name:"VariableDeclaration"==e.left.type&&(n=e.left.declarations[0].id.name),n&&n in t.props&&(t.getProp(n).iteratesOver=o));r(e.body,t,"Statement")},ScopeBody:function(e,t,r){r(e,e.scope||t)}});function re(e,t){var r=e&&e[t],n=Array.prototype.slice.call(arguments,2);if(r)for(var o=0;o<r.length;++o)r[o].apply(null,n)}var ne=s.parse=function(t,e,r){var n;try{n=o.parse(t,r)}catch(e){n=i.parse_dammit(t,r)}return re(e,"postParse",n,t),n};s.analyze=function(e,t,r,n){"string"==typeof e&&(e=ne(e)),t||(t="file#"+R.origins.length),s.addOrigin(R.curOrigin=t),r||(r=R.topScope),h.recursive(e,r,null,q),re(n,"preInfer",e,r),h.recursive(e,r,null,te),re(n,"postInfer",e,r),R.curOrigin=null},s.purge=function(e,t,r){var n=function(r,n,o){var e=Array.isArray(r);e&&1==r.length&&(r=r[0],e=!1);return e?null==o?function(e){return-1<r.indexOf(e.origin)}:function(e,t){return t&&t.start>=n&&t.end<=o&&-1<r.indexOf(e.origin)}:null==o?function(e){return e.origin==r}:function(e,t){return t&&t.start>=n&&t.end<=o&&e.origin==r}}(e,t,r);for(var o in++R.purgeGen,R.topScope.purge(n),R.props){for(var i=R.props[o],s=0;s<i.length;++s){var a=i[s].props[o];a&&!n(a,a.originNode)||i.splice(s--,1)}i.length||delete R.props[o]}},f.prototype.purge=function(e){if(this.purgeGen!=R.purgeGen){this.purgeGen=R.purgeGen;for(var t=0;t<this.types.length;++t){var r=this.types[t];e(r,r.originNode)?this.types.splice(t--,1):r.purge(e)}if(this.forward)for(t=0;t<this.forward.length;++t){var n=this.forward[t];e(n)?(this.forward.splice(t--,1),this.props&&(this.props=null)):n.purge&&n.purge(e)}}},d.purge=function(){},M.prototype.purge=function(e){if(this.purgeGen==R.purgeGen)return!0;for(var t in this.purgeGen=R.purgeGen,this.props){var r=this.props[t];e(r,r.originNode)&&this.removeProp(t),r.purge(e)}},E.prototype.purge=function(e){if(!M.prototype.purge.call(this,e)){this.self.purge(e),this.retval.purge(e);for(var t=0;t<this.args.length;++t)this.args[t].purge(e)}};var oe={ArrayExpression:function(e,t){for(var r=new f,n=0;n<e.elements.length;++n){var o=e.elements[n];o&&ie(o,t).propagate(r)}return new j(r)},ObjectExpression:function(e){return e.objType},FunctionExpression:function(e){return e.body.scope.fnType},SequenceExpression:function(e,t){return ie(e.expressions[e.expressions.length-1],t)},UnaryExpression:function(e){return J(e.operator)},UpdateExpression:function(){return R.num},BinaryExpression:function(e,t){if(K(e.operator))return R.bool;if("+"==e.operator){var r=ie(e.left,t),n=ie(e.right,t);if(r.hasType(R.str)||n.hasType(R.str))return R.str}return R.num},AssignmentExpression:function(e,t){return ie(e.right,t)},LogicalExpression:function(e,t){var r=ie(e.left,t);return r.isEmpty()?ie(e.right,t):r},ConditionalExpression:function(e,t){var r=ie(e.consequent,t);return r.isEmpty()?ie(e.alternate,t):r},NewExpression:function(e,t){var r=ie(e.callee,t).getFunctionType(),n=r&&r.getProp("prototype").getObjType();return n?T(n,r):d},CallExpression:function(e,t){var r=ie(e.callee,t).getFunctionType();if(!r)return d;if(r.computeRet){for(var n=0,o=[];n<e.arguments.length;++n)o.push(ie(e.arguments[n],t));var i=d;return"MemberExpression"==e.callee.type&&(i=ie(e.callee.object,t)),r.computeRet(i,o,e.arguments)}return r.retval},MemberExpression:function(e,t){var r=Y(e,t),n=ie(e.object,t).getType();return n?n.getProp(r):"<i>"==r?d:function(e){le=!0;var t=P(e);if(t)for(var r=0;r<t.length;++r){var n=t[r].getProp(e);if(!n.isEmpty())return n}return d}(r)},Identifier:function(e,t){return t.hasProp(e.name)||d},ThisExpression:function(e,t){return t.fnType?t.fnType.self:R.topScope},Literal:function(e){return X(e)}};function ie(e,t){return oe[e.type](e,t)}var se=s.searchVisitor=h.make({Function:function(e,t,r){var n=e.body.scope;e.id&&r(e.id,n);for(var o=0;o<e.params.length;++o)r(e.params[o],n);r(e.body,n,"ScopeBody")},TryStatement:function(e,t,r){e.handler&&r(e.handler.param,t),h.base.TryStatement(e,t,r)},VariableDeclaration:function(e,t,r){for(var n=0;n<e.declarations.length;++n){var o=e.declarations[n];r(o.id,t),o.init&&r(o.init,t,"Expression")}}});s.fullVisitor=h.make({MemberExpression:function(e,t,r){r(e.object,t,"Expression"),r(e.property,t,e.computed?"Expression":null)},ObjectExpression:function(e,t,r){for(var n=0;n<e.properties.length;++n)r(e.properties[n].value,t,"Expression"),r(e.properties[n].key,t)}},se),s.findExpressionAt=function(e,t,r,n,o){var i=o||function(e,t){return("Identifier"!=t.type||""!=t.name)&&oe.hasOwnProperty(t.type)};return h.findNodeAt(e,t,r,i,se,n||R.topScope)},s.findExpressionAround=function(e,r,t,n,o){var i=o||function(e,t){return!(null!=r&&t.start>r)&&(("Identifier"!=t.type||""!=t.name)&&oe.hasOwnProperty(t.type))};return h.findNodeAround(e,t,i,se,n||R.topScope)},s.expressionType=function(e){return ie(e.node,e.state)},s.parentNode=function(i,e){var s=[];try{!function e(t,r,n){if(t.start<=i.start&&t.end>=i.end){var o=s[s.length-1];if(t==i)throw{found:o};o!=t&&s.push(t),h.base[n||t.type](t,r,e),o!=t&&s.pop()}}(e,null)}catch(e){if(e.found)return e.found;throw e}};var ae={ArrayExpression:function(e,t,r){return r(e,!0).getProp("<i>")},ObjectExpression:function(e,t,r){for(var n=0;n<e.properties.length;++n){var o=t.properties[n];if(o.value==t)return r(e,!0).getProp(o.key.name)}},UnaryExpression:function(e){return J(e.operator)},UpdateExpression:function(){return R.num},BinaryExpression:function(e){return K(e.operator)?R.bool:R.num},AssignmentExpression:function(e,t,r){return r(e.left)},LogicalExpression:function(e,t,r){return r(e,!0)},ConditionalExpression:function(e,t,r){if(e.consequent==t||e.alternate==t)return r(e,!0)},NewExpression:function(e,t,r){return this.CallExpression(e,t,r)},CallExpression:function(e,t,r){for(var n=0;n<e.arguments.length;n++){if(e.arguments[n]==t){var o=r(e.callee).getFunctionType();if(o instanceof E)return o.args[n];break}}},ReturnStatement:function(e,t,r){var n=h.findNodeAround(t.sourceFile.ast,t.start,"Function");if(n){var o="FunctionExpression"==n.node.type?r(n.node,!0).getFunctionType():n.node.body.scope.fnType;if(o)return o.retval.getType()}},VariableDeclaration:function(e,t,r){for(var n=0;n<e.declarations.length;n++){var o=e.declarations[n];if(o.init==t)return r(o.id)}}},le=!(s.typeFromContext=function(n,o){var e=s.parentNode(o.node,n),t=null;return ae.hasOwnProperty(e.type)&&(t=ae[e.type](e,o.node,function(e,t){var r={node:e,state:o.state};return(t?s.typeFromContext(n,r):s.expressionType(r))||d})),t||s.expressionType(o)});s.resetGuessing=function(e){le=e},s.didGuess=function(){return le},s.forAllPropertiesOf=function(e,t){e.gatherProperties(t,0)};var ue=h.make({},se);s.findRefs=function(e,t,n,o,i){ue.Identifier=function(e,t){if(e.name==n)for(var r=t;r;r=r.prev)if(r==o&&i(e,t),n in r.props)return},h.recursive(e,t,null,ue)};var ce=h.make({Function:function(e,t,r){r(e.body,e.body.scope,"ScopeBody")}});s.findPropRefs=function(e,t,n,o,i){h.simple(e,{MemberExpression:function(e,t){e.computed||e.property.name!=o||ie(e.object,t).getType()==n&&i(e.property)},ObjectExpression:function(e,t){if(ie(e,t).getType()==n)for(var r=0;r<e.properties.length;++r)e.properties[r].key.name==o&&i(e.properties[r].key)}},ce,t)};var pe=s.scopeAt=function(e,t,r){var n=h.findNodeAround(e,t,function(e,t){return"ScopeBody"==e&&t.scope});return n?n.node.scope:r||R.topScope};s.forAllLocalsAt=function(e,t,r,n){pe(e,t,r).gatherProperties(n,0)},a=s.def=a.init({},s)}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../lib/infer"),require("../lib/tern"),require("../lib/comment"),require("acorn"),require("acorn/dist/walk")):"function"==typeof define&&define.amd?define(["../lib/infer","../lib/tern","../lib/comment","acorn/dist/acorn","acorn/dist/walk"],e):e(tern,tern,tern.comment,acorn,acorn.walk)}(function(w,e,n,T,o){"use strict";var i=1;function r(e,t){function r(e){n.ensureCommentsBefore(t,e)}o.simple(e,{VariableDeclaration:r,FunctionDeclaration:r,AssignmentExpression:function(e){"="==e.operator&&r(e)},ObjectExpression:function(e){for(var t=0;t<e.properties.length;++t)r(e.properties[t])},CallExpression:function(e){s(e)&&r(e)}})}function s(e){return"MemberExpression"==e.callee.type&&"Object"==e.callee.object.name&&"defineProperty"==e.callee.property.name&&3<=e.arguments.length&&"string"==typeof e.arguments[1].value}function a(e,t){!function(e,t){var r,n=w.cx(),o=/\s@typedef\s+(.*)/g;for(;r=o.exec(e);){var i=g(t,r[1]),s=i&&r[1].slice(i.end).match(/^\s*(\S+)/);s&&(n.parent.jsdocTypedefs[s[1]]=i.type)}}(e.sourceFile.text,t),o.simple(e,{VariableDeclaration:function(e,t){e.commentsBefore&&u(e,e.commentsBefore,t,t.getProp(e.declarations[0].id.name))},FunctionDeclaration:function(e,t){e.commentsBefore&&u(e,e.commentsBefore,t,t.getProp(e.id.name),e.body.scope.fnType)},AssignmentExpression:function(e,t){e.commentsBefore&&u(e,e.commentsBefore,t,w.expressionType({node:e.left,state:t}))},ObjectExpression:function(e,t){for(var r=0;r<e.properties.length;++r){var n=e.properties[r];n.commentsBefore&&u(n,n.commentsBefore,t,e.objType.getProp(n.key.name))}},CallExpression:function(e,t){if(e.commentsBefore&&s(e)){var r=w.expressionType({node:e.arguments[0],state:t}).getObjType();if(r&&r instanceof w.Obj){var n=r.props[e.arguments[1].value];n&&u(e,e.commentsBefore,t,n)}}}},w.searchVisitor,t)}function l(e){var t=e["!typedef"],r=w.cx(),n=e["!name"];if(t)for(var o in t)r.parent.jsdocTypedefs[o]=C(w.def.parse(t[o],n,o),o)}function u(e,t,r,n,o){!function(e,t,r,n){for(var o,i,s,a,l,u,c=0;c<n.length;++c)for(var p,h=n[c],d=/(?:\n|$|\*)\s*@(type|param|arg(?:ument)?|returns?|this)\s+(.*)/g;p=d.exec(h);)if("this"==p[1]&&(u=S(t,p[2],0)))l=u,a=!0;else if(u=g(t,p[2]))switch(a=!0,p[1]){case"returns":case"return":s=u;break;case"type":o=u;break;case"param":case"arg":case"argument":var f=p[2].slice(u.end).match(/^\s*(\[?)\s*([^\]\s=]+)\s*(?:=[^\]]+\s*)?(\]?).*/);if(!f)continue;var m=f[2]+(u.isOptional||"["===f[1]&&"]"===f[3]?"?":"");(i||(i=Object.create(null)))[m]=u}a&&function(e,t,r,n,o,i){var s;if("VariableDeclaration"==o.type){var a=o.declarations[0];a.init&&"FunctionExpression"==a.init.type&&(s=a.init.body.scope.fnType)}else"FunctionDeclaration"==o.type?s=o.body.scope.fnType:"AssignmentExpression"==o.type?"FunctionExpression"==o.right.type&&(s=o.right.body.scope.fnType):"CallExpression"==o.type||"FunctionExpression"==o.value.type&&(s=o.value.body.scope.fnType);if(s&&(r||n||t)){if(r)for(var l=0;l<s.argNames.length;++l){var u=s.argNames[l],c=r[u];!c&&(c=r[u+"?"])&&(s.argNames[l]+="?"),c&&y(c,s.args[l])}n&&y(n,s.retval),t&&y(t,s.self)}else e&&y(e,i)}(o,l,i,s,e,r)}(e,r,n,t);var i=w.cx();!o&&n instanceof w.AVal&&n.types.length&&((o=n.types[n.types.length-1])instanceof w.Obj&&o.origin==i.curOrigin&&!o.doc||(o=null));var s=t[t.length-1];if(i.parent._docComment.fullDocs)s=s.trim().replace(/\n[ \t]*\* ?/g,"\n");else{var a=s.search(/\.\s/);5<a&&(s=s.slice(0,a+1)),s=s.trim().replace(/\s*\n\s*\*\s*|\s{1,}/g," ")}s=s.replace(/^\s*\*+\s*/,""),n instanceof w.AVal&&(n.doc=s),o&&(o.doc=s)}function N(e,t){for(;/\s/.test(e.charAt(t));)++t;return t}function h(e){if(!T.isIdentifierStart(e.charCodeAt(0)))return!1;for(var t=1;t<e.length;t++)if(!T.isIdentifierChar(e.charCodeAt(t)))return!1;return!0}function O(e,t,r,n){for(var o=[],i=[],s=!1,a=!0;r=N(t,r),!a||t.charAt(r)!=n;a=!1){var l=t.indexOf(":",r);if(l<0)return null;var u=t.slice(r,l);if(!h(u))return null;o.push(u);var c=S(e,t,r=l+1);if(!c)return null;r=c.end,s=s||c.madeUp,i.push(c.type),r=N(t,r);var p=t.charAt(r);if(++r,p==n)break;if(","!=p)return null}return{labels:o,types:i,end:r,madeUp:s}}function S(e,t,r){for(var n,o=!1,i=!1;;){var s=c(e,t,r);if(!s)return null;if(i=i||s.madeUp,o?s.type.propagate(o):n=s.type,r=N(t,s.end),"|"!=t.charAt(r))break;r++,o||(o=new w.AVal,n.propagate(o),n=o)}var a=!1;return"="==t.charAt(r)&&(++r,a=!0),{type:n,end:r,isOptional:a,madeUp:i}}function c(e,t,r){r=N(t,r);var n,o=!1;if(t.indexOf("function(",r)==r){var i=O(e,t,r+9,")"),s=w.ANull;if(!i)return null;if(r=N(t,i.end),":"==t.charAt(r)){var a=S(e,t,++r+1);if(!a)return null;r=a.end,s=a.type,o=a.madeUp}n=new w.Fn(null,w.ANull,i.types,i.labels,s)}else if("["==t.charAt(r)){if(!(d=S(e,t,r+1)))return null;if(r=N(t,d.end),o=d.madeUp,"]"!=t.charAt(r))return null;++r,n=new w.Arr(d.type)}else if("{"==t.charAt(r)){var l=O(e,t,r+1,"}");if(!l)return null;n=new w.Obj(!0);for(var u=0;u<l.types.length;++u){var c=n.defProp(l.labels[u]);c.initializer=!0,l.types[u].propagate(c)}r=l.end,o=l.madeUp}else if("("==t.charAt(r)){if(!(d=S(e,t,r+1)))return null;if(r=N(t,d.end),")"!=t.charAt(r))return null;++r,n=d.type}else{var p=r;if(!T.isIdentifierStart(t.charCodeAt(r)))return null;for(;T.isIdentifierChar(t.charCodeAt(r));)++r;if(p==r)return null;var h=t.slice(p,r);if(/^(number|integer)$/i.test(h))n=w.cx().num;else if(/^bool(ean)?$/i.test(h))n=w.cx().bool;else if(/^string$/i.test(h))n=w.cx().str;else if(/^(null|undefined)$/i.test(h))n=w.ANull;else if(/^array$/i.test(h)){var d=null;if("."==t.charAt(r)&&"<"==t.charAt(r+1)){var f=S(e,t,r+2);if(!f)return null;if(r=N(t,f.end),o=f.madeUp,">"!=t.charAt(r++))return null;d=f.type}n=new w.Arr(d)}else if(/^object$/i.test(h)){if(n=new w.Obj(!0),"."==t.charAt(r)&&"<"==t.charAt(r+1)){var m=S(e,t,r+2);if(!m)return null;if(r=N(t,m.end),o=o||m.madeUp,","!=t.charAt(r++))return null;var g=S(e,t,r);if(!g)return null;if(r=N(t,g.end),o=m.madeUp||g.madeUp,">"!=t.charAt(r++))return null;g.type.propagate(n.defProp("<i>"))}}else{for(;46==t.charCodeAt(r)||T.isIdentifierChar(t.charCodeAt(r));)++r;var y,v=t.slice(p,r),b=w.cx(),x=b.parent&&b.parent.jsdocTypedefs;x&&v in x?n=x[v]:(y=w.def.parsePath(v,e).getObjType())?n=C(y,v):(b.jsdocPlaceholders||(b.jsdocPlaceholders=Object.create(null)),n=v in b.jsdocPlaceholders?b.jsdocPlaceholders[v]:b.jsdocPlaceholders[v]=new w.Obj(null,v),o=!0)}}return{type:n,end:r,madeUp:o}}function C(e,t){if(e instanceof w.Fn&&/^[A-Z]/.test(t)){var r=e.getProp("prototype").getObjType();if(r instanceof w.Obj)return w.getInstance(r)}return e}function g(e,t,r){if(r=N(t,r||0),"{"!=t.charAt(r))return null;var n=S(e,t,r+1);if(!n)return null;var o=N(t,n.end);return"}"!=t.charAt(o)?null:(n.end=o+1,n)}function y(e,t){var r=w.cx().parent._docComment.weight;e.type.propagate(t,r||(e.madeUp?i:void 0))}e.registerPlugin("doc_comment",function(e,t){return e.jsdocTypedefs=Object.create(null),e.on("reset",function(){e.jsdocTypedefs=Object.create(null)}),e._docComment={weight:t&&t.strong?101:void 0,fullDocs:t&&t.fullDocs},{passes:{postParse:r,postInfer:a,postLoadDef:l}}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("tern/lib/infer"),require("tern/lib/tern")):"function"==typeof define&&define.amd?define(["tern/lib/infer","tern/lib/tern"],e):e(tern,tern)}(function(e,t){"use strict";t.registerPlugin("tongjs",function(e,t){return{defs:{"!name":"tongjs",TONG:{Original:{"!url":"http://tongjs.org/docs/#Reference/Original",prototype:{"!proto":"TONG.Geometry.prototype"},"!doc":"todo"},Camera:{"!url":"http://tongjs.org/docs/#Reference/cameras/Camera",prototype:{"!proto":"TONG.Object3D.prototype",matrixWorldInverse:{"!type":"+TONG.Matrix4","!doc":"This is the inverse of matrixWorld. MatrixWorld contains the Matrix which has the world transform of the Camera."},projectionMatrix:{"!type":"+TONG.Matrix4","!doc":"This is the matrix which contains the projection."},lookAt:{"!type":"fn(vector: +TONG.Vector3)","!doc":"vector  point to look at<br>\n\t\t<br>\n\t\tThis makes the camera look at the vector position in the global space as long as the parent of this camera is the scene or at position (0,0,0)."}},"!doc":"Abstract base class for cameras. This class should always be inherited when you build a new camera.","!type":"fn()"},CubeCamera:{"!url":"http://tongjs.org/docs/#Reference/cameras/CubeCamera",prototype:{"!proto":"TONG.Object3D.prototype",renderTarget:{"!type":"+TONG.WebGLRenderTargetCube","!doc":"The cube texture that gets generated."},updateCubeMap:{"!type":"fn(renderer: todo, scene: todo) -> todo","!doc":"Call this to update the renderTarget."}},"!doc":"Creates 6 cameras that render to a [page:WebGLRenderTargetCube].","!type":"fn(near: number, far: number, cubeResolution: number)"},OrthographicCamera:{"!url":"http://tongjs.org/docs/#Reference/cameras/OrthographicCamera",prototype:{"!proto":"TONG.Camera.prototype",left:{"!type":"number","!doc":"Camera frustum left plane."},right:{"!type":"number","!doc":"Camera frustum right plane."},top:{"!type":"number","!doc":"Camera frustum top plane."},bottom:{"!type":"number","!doc":"Camera frustum bottom plane."},near:{"!type":"number","!doc":"Camera frustum near plane."},far:{"!type":"number","!doc":"Camera frustum far plane."},updateProjectionMatrix:{"!type":"fn()","!doc":"Updates the camera projection matrix. Must be called after change of parameters."}},"!doc":"Camera with orthographic projection.","!type":"fn(left: number, right: number, top: number, bottom: number, near: number, far: number)"},PerspectiveCamera:{"!url":"http://tongjs.org/docs/#Reference/cameras/PerspectiveCamera",prototype:{"!proto":"TONG.Camera.prototype",fov:{"!type":"number","!doc":"Camera frustum vertical field of view, from bottom to top of view, in degrees."},aspect:{"!type":"number","!doc":"Camera frustum aspect ratio, window width divided by window height."},near:{"!type":"number","!doc":"Camera frustum near plane."},far:{"!type":"number","!doc":"Camera frustum far plane."},setLens:{"!type":"fn(focalLength: number, frameSize: number)","!doc":"Uses focal length (in mm) to estimate and set FOV 35mm (fullframe) camera is used if frame size is not specified.<br>\n\t\tFormula based on [link:http://www.bobatkins.com/photography/technical/field_of_view.html]"},setViewOffset:{"!type":"fn(fullWidth: number, fullHeight: number, x: number, y: number, width: number, height: number)","!doc":"For example, if you have 3x2 monitors and each monitor is 1920x1080 and the monitors are in grid like this:<br>\n\n\t\t<pre>+---+---+---+\n| A | B | C |\n+---+---+---+\n| D | E | F |\n+---+---+---+</pre>\n\n\t\tthen for each monitor you would call it like this:<br>\n\n\t\t<code>var w = 1920;\nvar h = 1080;\nvar fullWidth = w * 3;\nvar fullHeight = h * 2;\n\n// A\ncamera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n// B\ncamera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n// C\ncamera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n// D\ncamera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n// E\ncamera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n// F\ncamera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n</code>\n\n\t\tNote there is no reason monitors have to be the same size or in a grid."},updateProjectionMatrix:{"!type":"fn()","!doc":"Updates the camera projection matrix. Must be called after change of parameters."}},"!doc":"Camera with perspective projection.","!type":"fn(fov: number, aspect: number, near: number, far: number)"},CustomBlendingEquations:{"!url":"http://tongjs.org/docs/#Reference/constants/CustomBlendingEquations",prototype:{}},GLState:{"!url":"http://tongjs.org/docs/#Reference/constants/GLState",prototype:{}},Materials:{"!url":"http://tongjs.org/docs/#Reference/constants/Materials",prototype:{}},ShadowingTypes:{"!url":"http://tongjs.org/docs/#Reference/constants/ShadowingTypes",prototype:{}},Textures:{"!url":"http://tongjs.org/docs/#Reference/constants/Textures",prototype:{}},BufferAttribute:{"!url":"http://tongjs.org/docs/#Reference/core/BufferAttribute",prototype:{array:{"!type":"[]","!doc":"Stores the data associated with this attribute; can be an Array or a Typed Array. This element should have <code>itemSize * numVertices</code> elements, where numVertices is the number of vertices in the associated [page:BufferGeometry geometry]."},itemSize:{"!type":"number","!doc":"Records how many items of the array are associated with a particular vertex. For instance, if this\n\t\tattribute is storing a 3-component vector (such as a position, normal, or color), then itemSize should be 3."},length:{"!type":"number","!doc":"Gives the total number of elements in the array."},needsUpdate:{"!type":"bool","!doc":"Flag to indicate that this attribute has changed and should be re-send to the GPU. Set this to true when you modify the value of the array."},setX:{"!type":"fn(index, x)","!doc":"Sets the value of the array at <code>index * itemSize</code> to x"},setY:{"!type":"fn(index, y)","!doc":"Sets the value of the array at <code>index * itemSize + 1</code> to y"},setZ:{"!type":"fn(index, z)","!doc":"Sets the value of the array at <code>index * itemSize + 2</code> to z"},setXY:{"!type":"fn(index, x, y)","!doc":"Sets the value of the array at <code>index * itemSize</code> to x and \n\t\tsets the value of the array at <code>index * itemSize + 1</code> to y"},setXYZ:{"!type":"fn(index, x, y, z)","!doc":"Sets the value of the array at <code>index * itemSize</code> to x,\n\t\tthe value of the array at <code>index * itemSize + 1</code> to y, and\n\t\tthe value of the array at <code>index * itemSize + 2</code> to z."},setXYZW:{"!type":"fn(index, x, y, z, w)","!doc":"Sets the value of the array at <code>index * itemSize</code> to x,\n\t\tthe value of the array at <code>index * itemSize + 1</code> to y, \n\t\tthe value of the array at <code>index * itemSize + 2</code> to z, and\n\t\tthe value of the array at <code>index * itemSize + 3</code> to w."},clone:{"!type":"fn() -> +TONG.BufferAttribute","!doc":"Copies this attribute."}},"!doc":"This class stores data for an attribute associated with a [page:BufferGeometry]. See that page for details and a usage example. This class is used to store builtin attributes such as vertex position, normals, color, etc., but can also be used in your code to store custom attributes in a [page:BufferGeometry].","!type":"fn(array: [], itemSize: number)"},BufferGeometry:{"!url":"http://tongjs.org/docs/#Reference/core/BufferGeometry",prototype:{id:{"!type":"number","!doc":"Unique number for this buffergeometry instance."},attributes:{"!type":"Hashmap","!doc":"This hashmap has as id the name of the attribute to be set and as value the [page:BufferAttribute buffer] to set it to.\n\t\tRather than accessing this property directly, use addAttribute and getAttribute to access attributes of this geometry."},drawCalls:{"!type":"[]","!doc":"For geometries that use indexed triangles, this Array can be used to split the object into multiple WebGL draw calls. Each draw call will draw some subset of the vertices in this geometry using the configured [page:Material shader]. This may be necessary if, for instance, you have more than 65535 vertices in your object. \n\t\tEach element is an object of the form:\n\t\t<code>{ start: Integer, count: Integer, index: Integer }</code>\n\t\twhere start specifies the index of the first vertex in this draw call, count specifies how many vertices are included, and index specifies an optional offset.\n\n\t\tUse addDrawCall to add draw calls, rather than modifying this array directly."},boundingBox:{"!type":"+TONG.Box3","!doc":"Bounding box.\n\t\t<code>{ min: new TONG.Vector3(), max: new TONG.Vector3() }</code>"},boundingSphere:{"!type":"+TONG.Sphere","!doc":"Bounding sphere.\n\t\t<code>{ radius: float }</code>"},morphTargets:{"!type":"[]","!doc":'Array of morph targets. Each morph target is a Javascript object:\n\t\t<code>{ name: "targetName", vertices: [ new TONG.Vertex(), ... ] }</code>\n\t\tMorph vertices match number and order of primary vertices.'},addAttribute:{"!type":"null","!doc":"Adds an attribute to this geometry. Use this rather than the attributes property, \n\t\tbecause an internal array of attributes is maintained to speed up iterating over\n\t\tattributes."},addDrawCall:{"!type":"fn(start: number, count: number, indexOffset: number)","!doc":"Adds a draw call to this geometry; see the drawcalls property for details."},applyMatrix:{"!type":"fn(matrix: +TONG.Matrix4)","!doc":"Bakes matrix transform directly into vertex coordinates."},computeVertexNormals:{"!type":"fn()","!doc":"Computes vertex normals by averaging face normals.<br>"},computeBoundingBox:{"!type":"fn()","!doc":"Computes bounding box of the geometry, updating [page:Geometry Geometry.boundingBox] attribute.<br>\n\t\tBounding boxes aren't computed by default. They need to be explicitly computed, otherwise they are *null*."},computeBoundingSphere:{"!type":"fn()","!doc":"Computes bounding sphere of the geometry, updating [page:Geometry Geometry.boundingSphere] attribute.<br>\n\t\tBounding spheres aren't computed by default. They need to be explicitly computed, otherwise they are *null*."},dispose:{"!type":"fn()","!doc":"Disposes the object from memory. <br>\n\t\tYou need to call this when you want the bufferGeometry removed while the application is running."},fromGeometry:{"!type":"fn()","!doc":"Populates this BufferGeometry with data from a [page:Geometry] object."},getAttribute:{"!type":"fn(name: string) -> +TONG.BufferAttribute","!doc":"Returns the [page:BufferAttribute attribute] with the specified name."},normalizeNormals:{"!type":"fn()","!doc":"Every normal vector in a geometry will have a magnitude of 1.\n\t\tThis will correct lighting on the geometry surfaces."}},"!doc":"<p>\n\t\tThis class is an efficient alternative to [page:Geometry], because it stores all data, including\n\t\tvertex positions, face indices, normals, colors, UVs, and custom attributes within buffers; this\n\t\treduces the cost of passing all this data to the GPU. \n\t\tThis also makes BufferGeometry harder to work with than [page:Geometry]; rather than accessing \n\t\tposition data as [page:Vector3] objects, color data as [page:Color] objects, and so on, you have to \n\t\taccess the raw data from the appropriate [page:BufferAttribute attribute] buffer. This makes \n\t\tBufferGeometry best-suited for static objects where you don't need to manipulate the geometry much\n\t\tafter instantiating it.\n\t\t</p>\n\n\t\t<h3>Example</h3>\n\t\t<code>\n\t\tvar geometry = new TONG.BufferGeometry();\n\t\t// create a simple square shape. We duplicate the top left and bottom right\n\t\t// vertices because each vertex needs to appear once per triangle. \n\t\tvar vertexPositions = [ \n\t\t\t[-1.0, -1.0,  1.0],\n\t\t\t[ 1.0, -1.0,  1.0],\n\t\t\t[ 1.0,  1.0,  1.0],\n\n\t\t\t[ 1.0,  1.0,  1.0],\n\t\t\t[-1.0,  1.0,  1.0],\n\t\t\t[-1.0, -1.0,  1.0]\n\t\t];\n\t\tvar vertices = new Float32Array( vertexPositions.length * 3 ); // TONG components per vertex\n\n\t\t// components of the position vector for each vertex are stored\n\t\t// contiguously in the buffer.\n\t\tfor ( var i = 0; i &lt; vertexPositions.length; i++ )\n\t\t{\n\t\t\tvertices[ i*3 + 0 ] = vertexPositions[i][0];\n\t\t\tvertices[ i*3 + 1 ] = vertexPositions[i][1];\n\t\t\tvertices[ i*3 + 2 ] = vertexPositions[i][2];\n\t\t}\n\n\t\t// itemSize = 3 because there are 3 values (components) per vertex\n\t\tgeometry.addAttribute( 'position', new TONG.BufferAttribute( vertices, 3 ) );\n\t\tvar material = new TONG.MeshBasicMaterial( { color: 0xff0000 } );\n\t\tvar mesh = new TONG.Mesh( geometry, material );\n\t\t</code>\n\t\t<p>More examples: [example:webgl_buffergeometry Complex mesh with non-indexed faces], [example:webgl_buffergeometry_uint Complex mesh with indexed faces], [example:webgl_buffergeometry_lines Lines], [example:webgl_buffergeometry_lines_indexed Indexed Lines], [example:webgl_buffergeometry_particles Particles], and [example:webgl_buffergeometry_rawshader Raw Shaders].</p>\n\n\t\t\n\t\t<h3>Accessing attributes</h3>\n\t\t<p>\n\t\tWebGL stores data associated with individual vertices of a geometry in <emph>attributes</emph>. \n\t\tExamples include the position of the vertex, the normal vector for the vertex, the vertex color,\n\t\tand so on. When using [page:Geometry], the [page:WebGLRenderer renderer] takes care of wrapping\n\t\tup this information into typed array buffers and sending this data to the shader. With \n\t\tBufferGeometry, all of this data is stored in buffers associated with an individual attributes.\n\t\tThis means that to get the position data associated with a vertex (for instance), you must call\n\t\t[page:.getAttribute] to access the 'position' [page:BufferAttribute attribute], then access the individual \n\t\tx, y, and z coordinates of the position.  \n\t\t</p>\n\t\t<p>\n\t\tThe following attributes are set by various members of this class:\n\t\t</p>\n\t\t<h4>[page:BufferAttribute position] (itemSize: 3)</h4>\n\t\t<div>\n\t\tStores the x, y, and z coordinates of each vertex in this geometry. Set by [page:.fromGeometry]().\n\t\t</div>\n\n\t\t<h4>[page:BufferAttribute normal] (itemSize: 3)</h4>\n\t\t<div>\n\t\tStores the x, y, and z components of the face or vertex normal vector of each vertex in this geometry.\n\t\tSet by [page:.fromGeometry]().\n\t\t</div>\n\n\t\t<h4>[page:BufferAttribute color] (itemSize: 3)</h4>\n\t\t<div>\n\t\tStores the red, green, and blue channels of vertex color of each vertex in this geometry.\n\t\tSet by [page:.fromGeometry]().\n\t\t</div>\n\n\t\t<h4>[page:BufferAttribute tangent] (itemSize: 3)</h4>\n\t\t<div>\n\t\tStores the x, y, and z components of the tangent vector of each vertex in this geometry. Set by [page:.computeTangents]().\n\t\t</div>\n\n\t\t<h4>[page:BufferAttribute index] (itemSize: 3)</h4>\n\t\tAllows for vertices to be re-used across multiple triangles; this is called using \"indexed triangles,\" and works much the same as it does in [page:Geometry]: each triangle is associated with the index of TONG vertices. This attribute therefore stores the index of each vertex for each triangular face.\n\n\t\tIf this attribute is not set, the [page:WebGLRenderer renderer] assumes that each TONG contiguous positions represent a single triangle.","!type":"fn()"},Clock:{"!url":"http://tongjs.org/docs/#Reference/core/Clock",prototype:{autoStart:{"!type":"bool","!doc":"If set, starts the clock automatically when the first update is called."},startTime:{"!type":"number","!doc":"When the clock is running, It holds the start time of the clock. <br>\n\t\tThis counted from the number of milliseconds elapsed since 1 January 1970 00:00:00 UTC."},oldTime:{"!type":"number","!doc":"When the clock is running, It holds the previous time from a update.<br>\n\t\tThis counted from the number of milliseconds elapsed since 1 January 1970 00:00:00 UTC."},elapsedTime:{"!type":"number","!doc":"When the clock is running, It holds the time elapsed between the start of the clock to the previous update.<br>\n\t\tThis counted from the number of milliseconds elapsed since 1 January 1970 00:00:00 UTC."},running:{"!type":"bool","!doc":"This property keeps track whether the clock is running or not."},start:{"!type":"fn()","!doc":"Starts clock."},stop:{"!type":"fn()","!doc":"Stops clock."},getElapsedTime:{"!type":"fn() -> number","!doc":"Get the seconds passed since the clock started."},getDelta:{"!type":"fn() -> number","!doc":"Get the seconds passed since the last call to this method."}},"!doc":"Object for keeping track of time.","!type":"fn(autoStart: bool)"},EventDispatcher:{"!url":"http://tongjs.org/docs/#Reference/core/EventDispatcher",prototype:{addEventListener:{"!type":"fn(type: string, listener: function)","!doc":"Adds a listener to an event type."},hasEventListener:{"!type":"fn(type: string, listener: function) -> bool","!doc":"Checks if listener is added to an event type."},removeEventListener:{"!type":"fn(type: string, listener: function)","!doc":"Removes a listener from an event type."},dispatchEvent:{"!type":"fn(type: string)","!doc":"Fire an event type."}},"!doc":'JavaScript events for custom objects.<br>\n\t\t<a href="https://github.com/mrdoob/eventdispatcher.js">https://github.com/mrdoob/eventdispatcher.js</a>',"!type":"fn()"},Face3:{"!url":"http://tongjs.org/docs/#Reference/core/Face3",prototype:{a:{"!type":"number","!doc":"Vertex A index."},b:{"!type":"number","!doc":"Vertex B index."},c:{"!type":"number","!doc":"Vertex C index."},normal:{"!type":"+TONG.Vector3","!doc":"Face normal."},color:{"!type":"+TONG.Color","!doc":"Face color."},vertexNormals:{"!type":"[]","!doc":"Array of 3 vertex normals."},vertexColors:{"!type":"[]","!doc":"Array of 3 vertex colors."},materialIndex:{"!type":"number","!doc":"Material index (points to [page:MultiMaterial MultiMaterial.materials])."},clone:{"!type":"fn() -> +TONG.Face3","!doc":"Creates a new clone of the Face3 object."}},"!doc":"Triangle face.","!type":"fn(a: number, b: number, c: number, normal: +TONG.Vector3, color: +TONG.Color, materialIndex: number)"},Geometry:{"!url":"http://tongjs.org/docs/#Reference/core/Geometry",prototype:{id:{"!type":"number","!doc":"Unique number for this geometry instance."},name:{"!type":"string","!doc":"Name for this geometry. Default is an empty string."},vertices:{"!type":"[]","!doc":"Array of [page:Vector3 vertices].<br>\n\t\tThe array of vertices holds every position of points in the model.<br>\n\t\tTo signal an update in this array, [page:Geometry Geometry.verticesNeedUpdate] needs to be set to true."},colors:{"!type":"[]","!doc":"Array of vertex [page:Color colors], matching number and order of vertices.<br>\n\t\tUsed in [page:PointCloud] and [page:Line].<br>\n\t\t[page:Mesh Meshes] use per-face-use-of-vertex colors embedded directly in faces.<br>\n\t\tTo signal an update in this array, [page:Geometry Geometry.colorsNeedUpdate] needs to be set to true."},faces:{"!type":"[]","!doc":"Array of [page:Face3 triangles].<br>\n\t\tThe array of faces describe how each vertex in the model is connected with each other.<br>\n\t\tTo signal an update in this array, [page:Geometry Geometry.elementsNeedUpdate] needs to be set to true."},faceVertexUvs:{"!type":"[]","!doc":"Array of face [page:UV] layers.<br>\n\t\tEach UV layer is an array of [page:UV]s matching the order and number of vertices in faces.<br>\n\t\tTo signal an update in this array, [page:Geometry Geometry.uvsNeedUpdate] needs to be set to true."},morphTargets:{"!type":"[]","!doc":'Array of morph targets. Each morph target is a Javascript object:\n\t\t<code>{ name: "targetName", vertices: [ new TONG.Vector3(), ... ] }</code>\n\t\tMorph vertices match number and order of primary vertices.'},morphNormals:{"!type":"[]","!doc":'Array of morph normals. Morph normals have similar structure as morph targets, each normal set is a Javascript object:\n\t\t<code>morphNormal = { name: "NormalName", normals: [ new TONG.Vector3(), ... ] }</code>'},skinWeights:{"!type":"[]","!doc":"Array of skinning weights, matching number and order of vertices."},skinIndices:{"!type":"[]","!doc":"Array of skinning indices, matching number and order of vertices."},boundingBox:{"!type":"object","!doc":"Bounding box.\n\t\t<code>{ min: new TONG.Vector3(), max: new TONG.Vector3() }</code>"},boundingSphere:{"!type":"object","!doc":"Bounding sphere.\n\t\t<code>{ radius: float }</code>"},dynamic:{"!type":"bool","!doc":'Set to *true* if attribute buffers will need to change in runtime (using "dirty" flags).<br>\n\t\tUnless set to true internal typed arrays corresponding to buffers will be deleted once sent to GPU.<br>\n\t\tDefaults to true.'},verticesNeedUpdate:{"!type":"bool","!doc":"Set to *true* if the vertices array has been updated."},elementsNeedUpdate:{"!type":"bool","!doc":"Set to *true* if the faces array has been updated."},uvsNeedUpdate:{"!type":"bool","!doc":"Set to *true* if the uvs array has been updated."},normalsNeedUpdate:{"!type":"bool","!doc":"Set to *true* if the normals array has been updated."},colorsNeedUpdate:{"!type":"bool","!doc":"Set to *true* if the colors array has been updated."},lineDistancesNeedUpdate:{"!type":"bool","!doc":"Set to *true* if the linedistances array has been updated."},lineDistances:{"!type":"array","!doc":"An array containing distances between vertices for Line geometries.\n\t\tThis is required for LinePieces/LineDashedMaterial to render correctly.\n\t\tLine distances can also be generated with computeLineDistances."},applyMatrix:{"!type":"fn(matrix: +TONG.Matrix4)","!doc":"Bakes matrix transform directly into vertex coordinates."},computeFaceNormals:{"!type":"fn()","!doc":"Computes face normals."},computeVertexNormals:{"!type":"fn()","!doc":"Computes vertex normals by averaging face normals.<br>\n\t\tFace normals must be existing / computed beforehand."},computeMorphNormals:{"!type":"fn()","!doc":"Computes morph normals."},computeBoundingBox:{"!type":"fn()","!doc":"Computes bounding box of the geometry, updating [page:Geometry Geometry.boundingBox] attribute."},computeBoundingSphere:{"!type":"fn()","!doc":"Neither bounding boxes or bounding spheres are computed by default. They need to be explicitly computed, otherwise they are *null*."},merge:{"!type":"fn(geometry: +TONG.Geometry, matrix: +TONG.Matrix4, materialIndexOffset: number)","!doc":"Merge two geometries or geometry and geometry from object (using object's transform)"},mergeVertices:{"!type":"fn()","!doc":"Checks for duplicate vertices using hashmap.<br>\n\t\tDuplicated vertices are removed and faces' vertices are updated."},clone:{"!type":"fn() -> +TONG.Geometry","!doc":"Creates a new clone of the Geometry."},dispose:{"!type":"fn()","!doc":"Removes The object from memory. <br>\n\t\tDon't forget to call this method when you remove a geometry because it can cause memory leaks."},computeLineDistances:{"!type":"fn()","!doc":"Compute distances between vertices for Line geometries."}},"!doc":"Base class for geometries.<br>\n\t\tA geometry holds all data necessary to describe a 3D model.","!type":"fn()"},Object3D:{"!url":"http://tongjs.org/docs/#Reference/core/Object3D",prototype:{id:{"!type":"number","!doc":"readonly  Unique number for this object instance."},uuid:{"!type":"string","!doc":"[link:http://en.wikipedia.org/wiki/Universally_unique_identifier UUID] of this object instance.\n\t\tThis gets automatically assigned, so this shouldn't be edited."},name:{"!type":"string","!doc":"Optional name of the object (doesn't need to be unique)."},parent:{"!type":"+TONG.Object3D","!doc":"Object's parent in the scene graph."},children:{"!type":"+TONG.Object3D","!doc":"Array with object's children."},position:{"!type":"+TONG.Vector3","!doc":"Object's local position."},rotation:{"!type":"+TONG.Euler","!doc":'Object\'s local rotation (<a href="https://en.wikipedia.org/wiki/Euler_angles" target="_blank">Euler angles</a>), in radians.'},scale:{"!type":"+TONG.Vector3","!doc":"Object's local scale."},up:{"!type":"+TONG.Vector3","!doc":"Up direction."},matrix:{"!type":"+TONG.Matrix4","!doc":"Local transform."},quaternion:{"!type":"+TONG.Quaternion","!doc":"Object's local rotation as [page:Quaternion Quaternion]."},visible:{"!type":"bool","!doc":"default  true"},castShadow:{"!type":"bool","!doc":"default  false"},receiveShadow:{"!type":"bool","!doc":"default  false"},frustumCulled:{"!type":"bool","!doc":"default  true"},matrixAutoUpdate:{"!type":"bool","!doc":"default  true"},matrixWorldNeedsUpdate:{"!type":"bool","!doc":"default  false"},userData:{"!type":"object","!doc":"An object that can be used to store custom data about the Object3d. It should not hold references to functions as these will not be cloned."},matrixWorld:{"!type":"+TONG.Matrix4","!doc":"The global transform of the object. If the Object3d has no parent, then it's identical to the local transform."},applyMatrix:{"!type":"fn(matrix: +TONG.Matrix4)","!doc":"This updates the position, rotation and scale with the matrix."},translateX:{"!type":"fn(distance: number)","!doc":"Translates object along x axis by distance."},translateY:{"!type":"fn(distance: number)","!doc":"Translates object along y axis by distance."},translateZ:{"!type":"fn(distance: number)","!doc":"Translates object along z axis by distance."},localToWorld:{"!type":"fn(vector: +TONG.Vector3) -> +TONG.Vector3","!doc":"Updates the vector from local space to world space."},worldToLocal:{"!type":"fn(vector: +TONG.Vector3) -> +TONG.Vector3","!doc":"Updates the vector from world space to local space."},lookAt:{"!type":"fn(vector: +TONG.Vector3)","!doc":"Rotates object to face point in space."},traverse:{"!type":"fn(callback: function)","!doc":"Executes the callback on this object and all descendants."},traverseVisible:{"!type":"fn(callback: function)","!doc":"Like traverse, but the callback will only be executed for visible objects.\n\t\tDescendants of invisible objects are not traversed."},traverseAncestors:{"!type":"fn(callback: function)","!doc":"Executes the callback on this object and all ancestors."},updateMatrix:{"!type":"fn()","!doc":"Updates local transform."},updateMatrixWorld:{"!type":"fn(force: bool)","!doc":"Updates global transform of the object and its children."},clone:{"!type":"fn() -> +TONG.Object3D","!doc":"Creates a new clone of this object and all descendants."},getObjectByName:{"!type":"fn(name: string) -> +TONG.Object3D","!doc":"Searches through the object's children and returns the first with a matching name."},getObjectById:{"!type":"fn(id: number) -> +TONG.Object3D","!doc":"Searches through the object's children and returns the first with a matching id."},translateOnAxis:{"!type":"fn(axis: +TONG.Vector3, distance: number) -> +TONG.Object3D","!doc":"Translate an object by distance along an axis in object space. The axis is assumed to be normalized."},rotateOnAxis:{"!type":"fn(axis: +TONG.Vector3, angle: number) -> +TONG.Object3D","!doc":"Rotate an object along an axis in object space. The axis is assumed to be normalized."},raycast:{"!type":"fn(raycaster: +TONG.Raycaster, intersects: []) -> []","!doc":"Abstract method to get intersections between a casted ray and this object. Subclasses such as [page:Mesh], [page:Line], and [page:PointCloud] implement this method in order to participate in raycasting."}},"!doc":"Base class for scene graph objects.","!type":"fn()"},Raycaster:{"!url":"http://tongjs.org/docs/#Reference/core/Raycaster",prototype:{ray:{"!type":"+TONG.Ray","!doc":"The Ray used for the raycasting."},near:{"!type":"float","!doc":"The near factor of the raycaster. This value indicates which objects can be discarded based on the distance.<br>\n\t\tThis value shouldn't be negative and should be smaller than the far property."},far:{"!type":"float","!doc":"The far factor of the raycaster. This value indicates which objects can be discarded based on the distance.<br>\n\t\tThis value shouldn't be negative and should be larger than the near property."},precision:{"!type":"float","!doc":"The precision factor of the raycaster when intersecting [page:Mesh] objects."},set:{"!type":"fn(origin: +TONG.Vector3, direction: +TONG.Vector3)","!doc":"Updates the ray with a new origin and direction."},setFromCamera:{"!type":"fn(coords: +TONG.Vector2, camera: +TONG.Camera)","!doc":"Updates the ray with a new origin and direction."},intersectObject:{"!type":"fn(object: +TONG.Object3D, recursive: bool) -> []","!doc":"Checks all intersection between the ray and the object with or without the descendants. Intersections are returned sorted by distance, closest first. An array of intersections is returned...\n        <code>\n            [ { distance, point, face, faceIndex, indices, object }, ... ]\n        </code>\n        <p>\n        [page:Float distance]  distance between the origin of the ray and the intersection<br>\n        [page:Vector3 point]  point of intersection, in world coordinates<br>\n        [page:Face3 face]  intersected face<br>\n        [page:Integer faceIndex]  index of the intersected face<br>\n        [page:Array indices]  indices of vertices comprising the intersected face<br>\n        [page:Object3D object]  the intersected object\n    \t</p>\n        <p>\n        When intersecting a [page:Mesh] with a [page:BufferGeometry], the *faceIndex* will be *undefined*, and *indices* will be set; when intersecting a [page:Mesh] with a [page:Geometry], *indices* will be *undefined*. \n        </p>\n\t\t<p>\n\t\t*Raycaster* delegates to the [page:Object3D.raycast raycast] method of the passed object, when evaluating whether the ray intersects the object or not. This allows [page:Mesh meshes] to respond differently to ray casting than [page:Line lines] and [page:PointCloud pointclouds].\n\t\t</p>\n\t\t<p>\n\t\t*Note* that for meshes, faces must be pointed towards the origin of the [page:.ray ray] in order to be detected; intersections of the ray passing through the back of a face will not be detected. To raycast against both faces of an object, you'll want to set the [page:Mesh.material material]'s [page:Material.side side] property to *TONG.DoubleSide*.  \n\t\t</p>"},intersectObjects:{"!type":"fn(objects: [], recursive: bool) -> []","!doc":"Checks all intersection between the ray and the objects with or without the descendants. Intersections are returned sorted by distance, closest first. Intersections are of the same form as those returned by [page:.intersectObject]."}},"!doc":"This class makes raycasting easier. Raycasting is used for picking and more.","!type":"fn(origin: +TONG.Vector3, direction: +TONG.Vector3, near: number, far: number)"},Lut:{"!url":"http://tongjs.org/docs/#Reference/examples/Lut",prototype:{minV:{"!type":"number","!doc":"The minimum value to be represented with the lookup table. Default is 0."},maxV:{"!type":"number","!doc":"The maximum value to be represented with the lookup table. Default is 1."},copy:{"!type":"fn(lut: +TONG.Lut)","!doc":"Copies given lut."},setminV:{"!type":"fn(minV: number) -> +TONG.Lut","!doc":"Sets this Lut with the minimum value to be represented."},setmaxV:{"!type":"fn(maxV: number) -> +TONG.Lut","!doc":"Sets this Lut with the maximum value to be represented."},changeNumberOfColors:{"!type":"fn(numberOfColors: number) -> +TONG.Lut","!doc":"Sets this Lut with the number of colors to be used."},changeColorMap:{"!type":"fn(colorMap: number) -> +TONG.Lut","!doc":"Sets this Lut with the colormap to be used."},addColorMap:{"!type":"fn(colorMapName, arrayOfColors) -> +TONG.Lut","!doc":"Insert a new color map into the set of available color maps."},getColor:{"!type":"fn(value) -> +TONG.Lut","!doc":"Returns a TONG.Color."}},"!doc":"Represents a lookup table for colormaps. It is used to determine the color values from a range of data values.","!type":"fn(colormap, numberOfColors)"},CombinedCamera:{"!url":"http://tongjs.org/docs/#Reference/examples/cameras/CombinedCamera",prototype:{"!proto":"TONG.Camera.prototype",fov:{"!type":"number","!doc":"Gets or sets the camera frustum vertical field of view in perspective view."},left:{"!type":"number","!doc":"Gets or sets the camera frustum left plane in orthographic view."},right:{"!type":"number","!doc":"Gets or sets the camera frustum right plane in orthographic view."},top:{"!type":"number","!doc":"Gets or sets the camera frustum top plane in orthographic view."},bottom:{"!type":"number","!doc":"Gets or sets the camera frustum bottom plane in orthographic view."},zoom:{"!type":"number","!doc":"Gets or sets the zoom factor of the camera."},near:{"!type":"number","!doc":"Gets camera frustum near plane."},far:{"!type":"number","!doc":"Gets camera frustum far plane."},cameraO:{"!type":"+TONG.OrthographicCamera","!doc":"Gets or sets the internal OrthographicCamera used as camera."},cameraP:{"!type":"+TONG.PerspectiveCamera","!doc":"Gets or sets the internal PerspectiveCamera used as camera."},inOrthographicMode:{"!type":"boolean","!doc":"Gets whether the combinedCamera is in Orthographic Mode."},inPerspectiveMode:{"!type":"boolean","!doc":"Gets whether the combinedCamera is in Perspective Mode."},setFov:{"!type":"fn(fov: number)","!doc":"sets the camera frustum vertical field of view in perspective view."},setZoom:{"!type":"fn(zoom: number)","!doc":"Sets the zoomfactor."},setLens:{"!type":"fn(focalLength: number, frameHeight: number)","!doc":"Sets the fov based on lens data."},toFrontView:{"!type":"fn()","!doc":"Sets the camera to view the front of the target."},toBackView:{"!type":"fn()","!doc":"Sets the camera to view the back of the target."},toLeftView:{"!type":"fn()","!doc":"Sets the camera to view the left of the target."},toRightView:{"!type":"fn()","!doc":"Sets the camera to view the right of the target."},toTopView:{"!type":"fn()","!doc":"Sets the camera to view the top."},toBottomView:{"!type":"fn()","!doc":"Sets the camera to view the bottom."},setSize:{"!type":"fn(width: number, height: number)","!doc":"Sets the size of the orthographic view."},toOrthographic:{"!type":"fn()","!doc":"Change the camera to orthographic view."},toPerspective:{"!type":"fn()","!doc":"Change the camera to Perspective view."},updateProjectionMatrix:{"!type":"fn()","!doc":"Updates the ProjectionMatrix."}},"!doc":"A general purpose camera, for setting FOV, Lens Focal Length,\n \t\tand switching between perspective and orthographic views easily.\n \t\tUse this only if you do not wish to manage\n \t\tboth an Orthographic and Perspective Camera","!type":"fn(width: number, height: number, fov: number, near: number, far: number, orthoNear: number, orthoFar: number)"},FontUtils:{"!url":"http://tongjs.org/docs/#Reference/extras/FontUtils",prototype:{divisions:{"!type":"number","!doc":"The amount of segments in a curve. Default is 10."},style:{"!type":"string","!doc":'The style of the used font. Default is "normal".'},weight:{"!type":"string","!doc":'The weight of the used font. Default is "normal".'},face:{"!type":"string","!doc":'The name of the font. Default is "helvetiker".'},faces:{"!type":"object","!doc":"All Fonts which are already loaded in."},size:{"!type":"number","!doc":"The size of the used Font. Default is 150."},drawText:{"!type":"fn(text: string) -> object","!doc":"Calculates the path and offset of the text in the used font. It returns an  object like { paths : fontPaths, offset : width }."},Triangulate:{"!type":"fn(contour: [], indices: bool) -> []","!doc":"Triangulates a contour into an array of faces."},extractGlyphPoints:{"!type":"fn(c: string, face: string, scale: number, offset: number, path: +TONG.Path) -> object","!doc":"This ectracts the glyphPoints of the character of the face and returns an object containing the path and the new offset."},generateShapes:{"!type":"fn(text: string, parameters: object) -> []","!doc":"Generates shapes from the text and return them as an Array of [page:Shape]."},loadFace:{"!type":"fn(data: object) -> object","!doc":"This loads and saves the data of the face and return the data. When you add the font Data as javascriptfile, then this automatically get called. So there is no need to do this yourself."},getFace:{"!type":"fn() -> object","!doc":"Returns the used font its data based on its style and weight."}},"!doc":"A class for text operations in TONG.js (See [page:TextGeometry])"},GeometryUtils:{"!url":"http://tongjs.org/docs/#Reference/extras/GeometryUtils",prototype:{},"!doc":"Contains handy functions geometry manipulations."},ImageUtils:{"!url":"http://tongjs.org/docs/#Reference/extras/ImageUtils",prototype:{crossOrigin:{"!type":"string","!doc":"The crossOrigin string to implement CORS for loading the image from a different domain that allows CORS."},generateDataTexture:{"!type":"fn(width: number, height: number, color: number) -> +TONG.DataTexture","!doc":"Generates a texture of a single color. It is a DataTexture with format, RGBFormat."},parseDDS:{"!type":"fn(buffer: string, loadMipmaps: boolean) -> +TONG.CompressedTexture","!doc":"Parses a DDS Image from the string into a CompressedTexture."},loadCompressedTexture:{"!type":"fn(url: todo, mapping: todo, onLoad: todo, onError: todo) -> todo","!doc":"todo"},loadTexture:{"!type":"fn(url: string, mapping: UVMapping, onLoad: function, onError: function) -> todo","!doc":"todo"},getNormalMap:{"!type":"fn(image: todo, depth: todo) -> todo","!doc":"todo"},loadCompressedTextureCube:{"!type":"fn(array: todo, mapping: todo, onLoad: todo, onError: todo) -> todo","!doc":"todo"},loadTextureCube:{"!type":"fn(array: todo, mapping: todo, onLoad: todo, onError: todo) -> todo","!doc":"todo"}},"!doc":"A Helper class to ease the loading of images of different types."},SceneUtils:{"!url":"http://tongjs.org/docs/#Reference/extras/SceneUtils",prototype:{createMultiMaterialObject:{"!type":"fn(geometry: +TONG.Geometry, materials: []) -> +TONG.Object3D","!doc":"Creates an new Object3D an new mesh for each material defined in materials. Beware that this is not the same as MultiMaterial which defines multiple material for 1 mesh.<br>\n\t\tThis is mostly useful for object that need a material and a wireframe implementation."},attach:{"!type":"fn(child: +TONG.Object3D, scene: +TONG.Object3D, parent: +TONG.Object3D)","!doc":"Attaches the object to the parent without the moving the object in the worldspace."},detach:{"!type":"fn(child: +TONG.Object3D, parent: +TONG.Object3D, scene: +TONG.Object3D)","!doc":"Detaches the object from the parent and adds it back to the scene without moving in worldspace."}},"!doc":"A class containing useful utility functions for scene manipulation."},Curve:{"!url":"http://tongjs.org/docs/#Reference/extras/core/Curve",prototype:{getPoint:{"!type":"fn(t) -> Vector","!doc":"Returns a vector for point t of the curve where t is between 0 and 1"},getPointAt:{"!type":"fn(u) -> Vector","!doc":"Returns a vector for point at relative position in curve according to arc length"},getPoints:{"!type":"fn(divisions) -> []","!doc":"Get sequence of points using getPoint( t )"},getSpacedPoints:{"!type":"fn(divisions) -> []","!doc":"Get sequence of equi-spaced points using getPointAt( u )"},getLength:{"!type":"fn() -> number","!doc":"Get total curve arc length"},getLengths:{"!type":"fn(divisions) -> []","!doc":"Get list of cumulative segment lengths"},updateArcLengths:{"!type":"fn()","!doc":"Update the cumlative segment distance cache"},getUtoTmapping:{"!type":"fn(u, distance) -> number","!doc":"Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant"},getTangent:{"!type":"fn(t) -> Vector","!doc":"Returns a unit vector tangent at t. If the subclassed curve do not implement its tangent derivation, 2 points a small delta apart will be used to find its gradient which seems to give a reasonable approximation"},getTangentAt:{"!type":"fn(u) -> Vector","!doc":"Returns tangent at equidistant point u on the curve"}},"!doc":"An extensible curve object which contains methods for interpolation.","!type":"fn()"},CurvePath:{"!url":"http://tongjs.org/docs/#Reference/extras/core/CurvePath",prototype:{"!proto":"TONG.Curve.prototype",curves:{"!type":"array","!doc":"todo"},bends:{"!type":"array","!doc":"todo"},autoClose:{"!type":"boolean","!doc":"todo"},getWrapPoints:{"!type":"fn(oldPts: todo, path: todo) -> todo","!doc":"todo"},createPointsGeometry:{"!type":"fn(divisions: todo) -> todo","!doc":"todo"},addWrapPath:{"!type":"fn(bendpath: todo) -> todo","!doc":"todo"},createGeometry:{"!type":"fn(points: todo) -> todo","!doc":"todo"},add:{"!type":"fn(curve: todo) -> todo","!doc":"todo"},getTransformedSpacedPoints:{"!type":"fn(segments: todo, bends: todo) -> todo","!doc":"todo"},createSpacedPointsGeometry:{"!type":"fn(divisions: todo) -> todo","!doc":"todo"},closePath:{"!type":"fn() -> todo","!doc":"todo"},getBoundingBox:{"!type":"fn() -> todo","!doc":"todo"},getCurveLengths:{"!type":"fn() -> todo","!doc":"todo"},getTransformedPoints:{"!type":"fn(segments: todo, bends: todo) -> todo","!doc":"todo"},checkConnection:{"!type":"fn() -> todo","!doc":"todo"}},"!doc":"todo","!type":"fn()"},Gyroscope:{"!url":"http://tongjs.org/docs/#Reference/extras/core/Gyroscope",prototype:{"!proto":"TONG.Object3D.prototype"},"!doc":"todo","!type":"fn()"},Path:{"!url":"http://tongjs.org/docs/#Reference/extras/core/Path",prototype:{"!proto":"TONG.CurvePath.prototype",actions:{"!type":"array","!doc":"The possible actions that define the path."},fromPoints:{"!type":"fn(vectors) -> todo","!doc":"Adds to the Path from the points. The first vector defines the offset. After that the lines get defined."},moveTo:{"!type":"fn(x, y) -> todo","!doc":"This moves the offset to x and y"},lineTo:{"!type":"fn(x, y) -> todo","!doc":"This creates a line from the offset to X and Y and updates the offset to X and Y."},quadraticCurveTo:{"!type":"fn(aCPx, aCPy, aX, aY) -> todo","!doc":"This creates a quadratic curve from the offset to aX and aY with aCPx and aCPy as control point and updates the offset to aX and aY."},bezierCurveTo:{"!type":"fn(aCP1x, aCP1y, aCP2x, aCP2y, aX, aY) -> todo","!doc":"This creates a bezier curve from the offset to aX and aY with aCP1x, aCP1y and aCP1x, aCP1y  as control points and updates the offset to aX and aY."},arc:{"!type":"fn(aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise) -> todo","!doc":"todo"},absarc:{"!type":"fn(aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise) -> todo","!doc":"todo"},ellipse:{"!type":"fn(aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise) -> todo","!doc":"todo"},absellipse:{"!type":"fn(aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise) -> todo","!doc":"todo"},toShapes:{"!type":"fn() -> todo","!doc":"todo"}},"!doc":"A 2d path representation, comprising of points, lines, and cubes,  similar to the html5 2d canvas api. It extends CurvePath.","!type":"fn(points: todo)"},Shape:{"!url":"http://tongjs.org/docs/#Reference/extras/core/Shape",prototype:{"!proto":"TONG.Path.prototype",holes:{"!type":"array","!doc":"todo"},makeGeometry:{"!type":"fn(options: todo) -> todo","!doc":"Convenience method to return ShapeGeometry"},extractAllPoints:{"!type":"fn(divisions: todo) -> todo","!doc":"Get points of shape and holes (keypoints based on segments parameter)"},extrude:{"!type":"fn(options: todo) -> todo","!doc":"Convenience method to return ExtrudeGeometry"},extractPoints:{"!type":"fn(divisions: todo) -> todo","!doc":"todo"},extractAllSpacedPoints:{"!type":"fn(divisions: todo) -> todo","!doc":"todo"},getPointsHoles:{"!type":"fn(divisions: todo) -> todo","!doc":"Get points of holes"},getSpacedPointsHoles:{"!type":"fn(divisions: todo) -> todo","!doc":"Get points of holes (spaced by regular distance)"}},"!doc":"Defines a 2d shape plane using paths.","!type":"fn()"},ArcCurve:{"!url":"http://tongjs.org/docs/#Reference/extras/curves/ArcCurve",prototype:{"!proto":"TONG.EllipseCurve.prototype"},"!doc":"Alias for [page:EllipseCurve]"},CubicBezierCurve:{"!url":"http://tongjs.org/docs/#Reference/extras/curves/CubicBezierCurve",prototype:{"!proto":"TONG.Curve.prototype",v0:"+TONG.Vector2",v1:"+TONG.Vector2",v2:"+TONG.Vector2",v3:"+TONG.Vector2"},"!doc":'Create a smooth 2d <a href="http://en.wikipedia.org/wiki/B%C3%A9zier_curve#mediaviewer/File:Bezier_curve.svg" target="_blank">cubic bezier curve</a>.'},CubicBezierCurve3:{"!url":"http://tongjs.org/docs/#Reference/extras/curves/CubicBezierCurve3",prototype:{"!proto":"TONG.Curve.prototype",v0:"+TONG.Vector3",v1:"+TONG.Vector3",v2:"+TONG.Vector3",v3:"+TONG.Vector3"},"!doc":'Create a smooth 3d <a href="http://en.wikipedia.org/wiki/B%C3%A9zier_curve#mediaviewer/File:Bezier_curve.svg" target="_blank">cubic bezier curve</a>.',"!type":"fn(v0: +TONG.Vector3, v1: +TONG.Vector3, v2: +TONG.Vector3, v3: +TONG.Vector3)"},EllipseCurve:{"!url":"http://tongjs.org/docs/#Reference/extras/curves/EllipseCurve",prototype:{"!proto":"TONG.Curve.prototype",aX:"number",aY:"number",xRadius:"Radians",yRadius:"Radians",aStartAngle:"number",aEndAngle:"number",aClockwise:"bool"},"!doc":"Creates a 2d curve in the shape of an ellipse.","!type":"fn(aX: number, aY: number, xRadius: number, yRadius: number, aStartAngle: Radians, aEndAngle: Radians, aClockwise: bool)"},LineCurve:{"!url":"http://tongjs.org/docs/#Reference/extras/curves/LineCurve",prototype:{"!proto":"TONG.Curve.prototype",v1:"+TONG.Vector2",v2:"+TONG.Vector2"},"!doc":"A curve representing a 2d line segment","!type":"fn(v1: +TONG.Vector2, v2: +TONG.Vector2)"},LineCurve3:{"!url":"http://tongjs.org/docs/#Reference/extras/curves/LineCurve3",prototype:{"!proto":"TONG.Curve.prototype",v1:"+TONG.Vector3",v2:"+TONG.Vector3"},"!doc":"A curve representing a 3d line segment","!type":"fn(v1: +TONG.Vector3, v2: +TONG.Vector3)"},QuadraticBezierCurve:{"!url":"http://tongjs.org/docs/#Reference/extras/curves/QuadraticBezierCurve",prototype:{"!proto":"TONG.Curve.prototype",v0:"+TONG.Vector2",v1:"+TONG.Vector2",v2:"+TONG.Vector2"},"!doc":'Create a smooth 2d <a href="http://en.wikipedia.org/wiki/B%C3%A9zier_curve#mediaviewer/File:B%C3%A9zier_2_big.gif" target="_blank">quadratic bezier curve</a>.',"!type":"fn(v0: +TONG.Vector2, v1: +TONG.Vector2, v2: +TONG.Vector2)"},QuadraticBezierCurve3:{"!url":"http://tongjs.org/docs/#Reference/extras/curves/QuadraticBezierCurve3",prototype:{"!proto":"TONG.Curve.prototype",v0:"+TONG.Vector3",v1:"+TONG.Vector3",v2:"+TONG.Vector3"},"!doc":'Create a smooth 3d <a href="http://en.wikipedia.org/wiki/B%C3%A9zier_curve#mediaviewer/File:B%C3%A9zier_2_big.gif" target="_blank">quadratic bezier curve</a>.',"!type":"fn(v0: +TONG.Vector3, v1: +TONG.Vector3, v2: +TONG.Vector3)"},SplineCurve:{"!url":"http://tongjs.org/docs/#Reference/extras/curves/SplineCurve",prototype:{"!proto":"TONG.Curve.prototype",points:"[]"},"!doc":"Create a smooth 2d spline curve from a series of points","!type":"fn(points: [])"},BoxGeometry:{"!url":"http://tongjs.org/docs/#Reference/geometries/BoxGeometry",prototype:{"!proto":"TONG.Geometry.prototype"},"!doc":"BoxGeometry is the quadrilateral primitive geometry class. It is typically used for creating a cube or irregular quadrilateral of the dimensions provided with the 'width', 'height', and 'depth' constructor arguments.","!type":"fn(width: number, height: number, depth: number, widthSegments: number, heightSegments: number, depthSegments: number)"},CircleGeometry:{"!url":"http://tongjs.org/docs/#Reference/geometries/CircleGeometry",prototype:{"!proto":"TONG.Geometry.prototype"},"!doc":"CircleGeometry is a simple shape of Euclidean geometry.  It is contructed from a number of triangular segments that are oriented around a central point and extend as far out as a given radius.  It is built counter-clockwise from a start angle and a given central angle.  It can also be used to create regular polygons, where the number of segments determines the number of sides.","!type":"fn(radius: number, segments: number, thetaStart: number, thetaLength: number)"},CubeGeometry:{"!url":"http://tongjs.org/docs/#Reference/geometries/CubeGeometry",prototype:{"!proto":"TONG.Geometry.prototype"},"!doc":"Renamed CubeGeometry to BoxGeometry. see [page:BoxGeometry]."},CylinderGeometry:{"!url":"http://tongjs.org/docs/#Reference/geometries/CylinderGeometry",prototype:{"!proto":"TONG.Geometry.prototype"},"!doc":"A class for generating cylinder geometries","!type":"fn(radiusTop: number, radiusBottom: number, height: number, radiusSegments: number, heightSegments: number, openEnded: bool, thetaStart: number, thetaLength: number)"},DodecahedronGeometry:{"!url":"http://tongjs.org/docs/#Reference/geometries/DodecahedronGeometry",prototype:{"!proto":"TONG.PolyhedronGeometry.prototype",parameters:{"!type":"object","!doc":"An object with all of the parameters that were used to generate the geometry."}},"!doc":"A class for generating a dodecahedron geometries.","!type":"fn(radius: number, detail: number)"},ExtrudeGeometry:{"!url":"http://tongjs.org/docs/#Reference/geometries/ExtrudeGeometry",prototype:{"!proto":"TONG.Geometry.prototype",addShapeList:{"!type":"fn(shapes: [], options: object)","!doc":"Adds the shapes to the list to extrude."},addShape:{"!type":"fn(shape: +TONG.Shape, options: object)","!doc":"Add the shape to the list to extrude."}},"!doc":"Creates extruded geometry from a path shape","!type":"fn(shapes: [], options: object)"},IcosahedronGeometry:{"!url":"http://tongjs.org/docs/#Reference/geometries/IcosahedronGeometry",prototype:{"!proto":"TONG.PolyhedronGeometry.prototype",parameters:{"!type":"object","!doc":"An object with all of the parameters that were used to generate the geometry."}},"!doc":"A class for generating an icosahedron geometry.","!type":"fn(radius: number, detail: number)"},LatheGeometry:{"!url":"http://tongjs.org/docs/#Reference/geometries/LatheGeometry",prototype:{"!proto":"TONG.Geometry.prototype"},"!doc":"Class for generating meshes with axial symmetry. Possible uses include donuts, pipes, vases etc. The lathe rotate around the Y axis.","!type":"fn(points: [], segments: number, phiStart: number, phiLength: number)"},OctahedronGeometry:{"!url":"http://tongjs.org/docs/#Reference/geometries/OctahedronGeometry",prototype:{"!proto":"TONG.PolyhedronGeometry.prototype",parameters:{"!type":"object","!doc":"An object with all of the parameters that were used to generate the geometry."}},"!doc":"A class for generating an octahedron geometry.","!type":"fn(radius: number, detail: number)"},ParametricGeometry:{"!url":"http://tongjs.org/docs/#Reference/geometries/ParametricGeometry",prototype:{"!proto":"TONG.Geometry.prototype"},"!doc":"Generate geometry representing a parametric surface.","!type":"fn(func: function, slices: number, stacks: number)"},PlaneGeometry:{"!url":"http://tongjs.org/docs/#Reference/geometries/PlaneGeometry",prototype:{"!proto":"TONG.Geometry.prototype"},"!doc":"A class for generating plane geometries","!type":"fn(width: number, height: number, widthSegments: number, heightSegments: number)"},PolyhedronGeometry:{"!url":"http://tongjs.org/docs/#Reference/geometries/PolyhedronGeometry",prototype:{"!proto":"TONG.Geometry.prototype",parameters:{"!type":"object","!doc":"An object with all of the parameters that were used to generate the geometry."}},"!doc":"A polyhedron is a solid in TONG dimensions with flat faces. This class will take an array of vertices,\n\t\t\tproject them onto a sphere, and then divide them up to the desired level of detail. This class is used\n\t\t\tby [page:DodecahedronGeometry], [page:IcosahedronGeometry], [page:OctahedronGeometry],\n\t\t\tand [page:TetrahedronGeometry] to generate their respective geometries.","!type":"fn(vertices: [], faces: [], radius: number, detail: number)"},RingGeometry:{"!url":"http://tongjs.org/docs/#Reference/geometries/RingGeometry",prototype:{"!proto":"TONG.Geometry.prototype"},"!doc":"A class for generating a two-dimensional ring geometry.","!type":"fn(innerRadius: number, outerRadius: number, thetaSegments: number, phiSegments: number, thetaStart: number, thetaLength: number)"},ShapeGeometry:{"!url":"http://tongjs.org/docs/#Reference/geometries/ShapeGeometry",prototype:{"!proto":"TONG.Geometry.prototype",addShape:{"!type":"fn(shape: +TONG.Shape, options: object)","!doc":"Adds a single shape to the geometry"}},"!doc":"Creates a one-sided polygonal geometry from one or more path shapes. Similar to [page:ExtrudeGeometry]","!type":"fn(shapes: [], options: object)"},SphereGeometry:{"!url":"http://tongjs.org/docs/#Reference/geometries/SphereGeometry",prototype:{"!proto":"TONG.Geometry.prototype"},"!doc":"A class for generating sphere geometries","!type":"fn(radius: number, widthSegments: number, heightSegments: number, phiStart: number, phiLength: number, thetaStart: number, thetaLength: number)"},TetrahedronGeometry:{"!url":"http://tongjs.org/docs/#Reference/geometries/TetrahedronGeometry",prototype:{"!proto":"TONG.PolyhedronGeometry.prototype",parameters:{"!type":"object","!doc":"An object with all of the parameters that were used to generate the geometry."}},"!doc":"A class for generating a tetrahedron geometries.","!type":"fn(radius: number, detail: number)"},TextGeometry:{"!url":"http://tongjs.org/docs/#Reference/geometries/TextGeometry",prototype:{"!proto":"TONG.ExtrudeGeometry.prototype"},"!doc":"This object creates an 3D object of text as a single object.","!type":"fn(text: string, parameters: object)"},TorusGeometry:{"!url":"http://tongjs.org/docs/#Reference/geometries/TorusGeometry",prototype:{"!proto":"TONG.Geometry.prototype"},"!doc":"A class for generating torus geometries","!type":"fn(radius: number, tube: number, radialSegments: number, tubularSegments: number, arc: number)"},TorusKnotGeometry:{"!url":"http://tongjs.org/docs/#Reference/geometries/TorusKnotGeometry",prototype:{"!proto":"TONG.Geometry.prototype"},"!doc":"Creates a torus knot, the particular shape of which is defined by a pair of coprime integers, p and q.  If p and q are not coprime, the result will be a torus link.","!type":"fn(radius: number, tube: number, radialSegments: number, tubularSegments: number, p: number, q: number, heightScale: number)"},TubeGeometry:{"!url":"http://tongjs.org/docs/#Reference/geometries/TubeGeometry",prototype:{"!proto":"TONG.Geometry.prototype",parameters:{"!type":"object","!doc":"An object with all of the parameters that were used to generate the geometry."},tangents:{"!type":"[]","!doc":"An array of [page:Vector3] tangents"},normals:{"!type":"[]","!doc":"An array of [page:Vector3] normals"},binormals:{"!type":"[]","!doc":"An array of [page:Vector3] binormals"}},"!doc":"Creates a tube that extrudes along a 3d curve","!type":"fn(path: +TONG.Curve, segments: number, radius: number, radiusSegments: number, closed: bool)"},ArrowHelper:{"!url":"http://tongjs.org/docs/#Reference/extras/helpers/ArrowHelper",prototype:{"!proto":"TONG.Object3D.prototype",line:{"!type":"+TONG.Line","!doc":"Contains the line part of the arrowHelper."},cone:{"!type":"+TONG.Mesh","!doc":"Contains the cone part of the arrowHelper."},setColor:{"!type":"fn(hex: number)","!doc":"Sets the color of the arrowHelper."},setLength:{"!type":"fn(length: number, headLength: number, headWidth: number)","!doc":"Sets the length of the arrowhelper."},setDirection:{"!type":"fn(dir: +TONG.Vector3)","!doc":"Sets the direction of the arrowhelper."}},"!doc":"An 3D arrow Object.","!type":"fn(dir: +TONG.Vector3, origin: +TONG.Vector3, length: number, hex: number, headLength: number, headWidth: number)"},AxisHelper:{"!url":"http://tongjs.org/docs/#Reference/extras/helpers/AxisHelper",prototype:{"!proto":"TONG.Line.prototype"},"!doc":"An axis object to visualize the the 3 axes in a simple way. <br>\n\t\t\tThe X axis is red. The Y axis is green. The Z axis is blue.","!type":"fn(size: number)"},BoundingBoxHelper:{"!url":"http://tongjs.org/docs/#Reference/extras/helpers/BoundingBoxHelper",prototype:{"!proto":"TONG.Mesh.prototype",object:{"!type":"+TONG.Object3D","!doc":"Contains the object3D to show the world-axis-aligned boundingbox."},box:{"!type":"+TONG.Box3","!doc":"Contains the bounding box of the object."},update:{"!type":"fn()","!doc":"Updates the BoundingBoxHelper based on the object property."}},"!doc":"A helper object to show the world-axis-aligned bounding box for an object.","!type":"fn(object: +TONG.Object3D, hex: number)"},BoxHelper:{"!url":"http://tongjs.org/docs/#Reference/extras/helpers/BoxHelper",prototype:{"!proto":"TONG.Line.prototype",update:{"!type":"fn(object: +TONG.Object3D)","!doc":"Updates the helper's geometry to match the dimensions of the [page:Geometry.boundingBox bounding box] of the passed object's geometry.\n\n\t\t<h2>Source</h2>\n\n\t\t[link:https://github.com/mrdoob/TONG.js/blob/master/src/[path].js src/[path].js]"}},"!doc":"Helper object to show a wireframe box (with no face diagonals) around an object","!type":"fn(object: +TONG.Object3D)"},CameraHelper:{"!url":"http://tongjs.org/docs/#Reference/extras/helpers/CameraHelper",prototype:{"!proto":"TONG.Line.prototype",pointMap:{"!type":"object","!doc":"This contains the points to viualize the cameraHelper"},camera:{"!type":"+TONG.Camera","!doc":"The camera to visualize."},update:{"!type":"fn()","!doc":"Updates the helper based on the projectionMatrix of the camera."}},"!doc":"The camera Helper is an Object3D which helps visualizing what a camera contains in its frustum.<br>\n\t\tIt visualizes the frustum with an line Geometry.","!type":"fn(camera: +TONG.Camera)"},DirectionalLightHelper:{"!url":"http://tongjs.org/docs/#Reference/extras/helpers/DirectionalLightHelper",prototype:{"!proto":"TONG.Object3D.prototype",lightPlane:{"!type":"+TONG.Line","!doc":"Contains the line mesh showing the location of the directional light."},light:{"!type":"+TONG.DirectionalLight","!doc":"Contains the directionalLight."},targetLine:{"!type":"+TONG.Line","!doc":"Contains the line mesh that shows the direction of the light."},update:{"!type":"fn()","!doc":"Updates the helper to match the position and direction of the [page:.light]."}},"!doc":"Visualize a [page:DirectionalLight]'s effect on the scene","!type":"fn(light: +TONG.DirectionalLight, size: number)"},EdgesHelper:{"!url":"http://tongjs.org/docs/#Reference/extras/helpers/EdgesHelper",prototype:{"!proto":"TONG.Line.prototype"},"!doc":'Creates a wireframe object that shows the "hard" edges of another object\'s geometry. To draw a full wireframe image of an object, see [page:WireframeHelper].',"!type":"fn(object: +TONG.Object3D, color: +TONG.Color, thresholdAngle: number)"},FaceNormalsHelper:{"!url":"http://tongjs.org/docs/#Reference/extras/helpers/FaceNormalsHelper",prototype:{"!proto":"TONG.Line.prototype",object:{"!type":"+TONG.Object3D","!doc":"The attached object"},update:{"!type":"fn()","!doc":"Updates the face normal preview based on movement of the object."}},"!doc":"Renders [page:ArrowHelper arrows] to visualize an object's [page:Face3 face] normals. Requires that the object's geometry be an instance of [page:Geometry] (does not work with [page:BufferGeometry]), and that face normals have been specified on all [page:Face3 faces] or calculated with [page:Geometry.computeFaceNormals computeFaceNormals].","!type":"fn(object: +TONG.Object3D, size: number, color: +TONG.Color, linewidth: number)"},GridHelper:{"!url":"http://tongjs.org/docs/#Reference/extras/helpers/GridHelper",prototype:{"!proto":"TONG.Line.prototype"},"!doc":"The GridHelper is an object to define grids. Grids are two-dimensional arrays of lines.","!type":"fn(size: number, step: number)"},HemisphereLightHelper:{"!url":"http://tongjs.org/docs/#Reference/extras/helpers/HemisphereLightHelper",prototype:{"!proto":"TONG.Object3D.prototype",lightSphere:{"!type":"+TONG.Mesh","!doc":"The sphere mesh that shows the location of the hemispherelight."},light:{"!type":"+TONG.HemisphereLight","!doc":"Contains the HemisphereLight."},update:{"!type":"fn()","!doc":"Updates the helper to match the position and direction of the [page:.light]."}},"!doc":"Creates a visual aid for a [page:HemisphereLight HemisphereLight].","!type":"fn(light: +TONG.HemisphereLight, sphereSize: number)"},PointLightHelper:{"!url":"http://tongjs.org/docs/#Reference/extras/helpers/PointLightHelper",prototype:{"!proto":"TONG.Mesh.prototype",lightSphere:{"!type":"+TONG.Mesh","!doc":"todo"},light:{"!type":"+TONG.PointLight","!doc":"todo"},update:{"!type":"fn() -> todo","!doc":"todo"}},"!doc":"This display a helper for a pointLight","!type":"fn(light: todo, sphereSize: todo)"},SpotLightHelper:{"!url":"http://tongjs.org/docs/#Reference/extras/helpers/SpotLightHelper",prototype:{"!proto":"TONG.Object3D.prototype",lightSphere:{"!type":"+TONG.Mesh","!doc":"todo"},light:{"!type":"+TONG.SpotLight","!doc":"todo"},lightCone:{"!type":"+TONG.Mesh","!doc":"todo"},update:{"!type":"fn() -> todo","!doc":"todo"}},"!doc":"todo","!type":"fn(light: todo, sphereSize: todo)"},VertexNormalsHelper:{"!url":"http://tongjs.org/docs/#Reference/extras/helpers/VertexNormalsHelper",prototype:{"!proto":"TONG.Line.prototype",object:{"!type":"+TONG.Object3D","!doc":"The attached object"},update:{"!type":"fn()","!doc":"Updates the vertex normal preview based on movement of the object."}},"!doc":"Renders [page:ArrowHelper arrows] to visualize an object's vertex normal vectors. Requires that normals have been specified in a [page:BufferAttribute custom attribute] or have been calculated using [page:Geometry.computeVertexNormals computeVertexNormals].","!type":"fn(object: +TONG.Object3D, size: number, color: +TONG.Color, linewidth: number)"},WireframeHelper:{"!url":"http://tongjs.org/docs/#Reference/extras/helpers/WireframeHelper",prototype:{"!proto":"TONG.Line.prototype"},"!doc":'Creates a wireframe object that shows the edges of another object\'s geometry. To draw a  wireframe image showing only "hard" edges (edges between non-coplanar faces), see [page:EdgesHelper].',"!type":"fn(object: +TONG.Object3D, color: +TONG.Color)"},ImmediateRenderObject:{"!url":"http://tongjs.org/docs/#Reference/extras/objects/ImmediateRenderObject",prototype:{"!proto":"TONG.Object3D.prototype",render:{"!type":"fn(renderCallback: function)","!doc":"This function needs to be overridden to start the creation of the object and should call renderCallback when finished."}},"!doc":"base class for immediate rendering objects.","!type":"fn()"},AmbientLight:{"!url":"http://tongjs.org/docs/#Reference/lights/AmbientLight",prototype:{"!proto":"TONG.Light.prototype"},"!doc":"This light's color gets applied to all the objects in the scene globally.","!type":"fn(hex: number)"},DirectionalLight:{"!url":"http://tongjs.org/docs/#Reference/lights/DirectionalLight",prototype:{"!proto":"TONG.Light.prototype",target:{"!type":"+TONG.Object3D","!doc":"Target used for shadow camera orientation."},intensity:{"!type":"number","!doc":"Light's intensity.<br>\n\t\t\tDefault  *1.0*."}},"!doc":"Affects objects using [page:MeshLambertMaterial] or [page:MeshPhongMaterial].","!type":"fn(hex: number, intensity: number)"},HemisphereLight:{"!url":"http://tongjs.org/docs/#Reference/lights/HemisphereLight",prototype:{"!proto":"TONG.Light.prototype",groundColor:{"!type":"number","!doc":"Light's ground color.<br>"},intensity:{"!type":"number","!doc":"Light's intensity.<br>\n\t\t\tDefault  *1.0*."}},"!doc":"A light source positioned directly above the scene.","!type":"fn(skyColorHex: number, groundColorHex: number, intensity: number)"},Light:{"!url":"http://tongjs.org/docs/#Reference/lights/Light",prototype:{"!proto":"TONG.Object3D.prototype",color:{"!type":"+TONG.Color","!doc":"Color of the light.<br>"}},"!doc":"Abstract base class for lights.","!type":"fn(hex: number)"},PointLight:{"!url":"http://tongjs.org/docs/#Reference/lights/PointLight",prototype:{"!proto":"TONG.Light.prototype",intensity:{"!type":"number","!doc":"Light's intensity.<br>\n\t\t\tDefault - *1.0*."},distance:{"!type":"number","!doc":"If non-zero, light will attenuate linearly from maximum intensity at light *position* down to zero at *distance*.<br>\n\t\t\tDefault  *0.0*."}},"!doc":"Affects objects using [page:MeshLambertMaterial] or [page:MeshPhongMaterial].","!type":"fn(hex: number, intensity: number, distance: number)"},SpotLight:{"!url":"http://tongjs.org/docs/#Reference/lights/SpotLight",prototype:{"!proto":"TONG.Light.prototype",target:{"!type":"+TONG.Object3D","!doc":"Spotlight focus points at target.position.<br>\n\t\t\tDefault position  *(0,0,0)*."},intensity:{"!type":"number","!doc":"Light's intensity.<br>\n\t\t\tDefault  *1.0*."},distance:{"!type":"number","!doc":"If non-zero, light will attenuate linearly from maximum intensity at light *position* down to zero at *distance*.<br>\n\t\t\tDefault  *0.0*."},angle:{"!type":"number","!doc":"Maximum extent of the spotlight, in radians, from its direction. Should be no more than *Math.PI/2*.<br>\n\t\t\tDefault  *Math.PI/3*."},exponent:{"!type":"number","!doc":"Rapidity of the falloff of light from its target direction.<br>\n\t\t\tDefault  *10.0*."}},"!doc":"A point light that can cast shadow in one direction.","!type":"fn(hex: number, intensity: number, distance: todo, angle: todo, exponent: todo)"},BabylonLoader:{"!url":"http://tongjs.org/docs/#Reference/loaders/BabylonLoader",prototype:{load:{"!type":"fn(url: string, onLoad: function, onProgress: function, onError: function)","!doc":"Begin loading from url and call onLoad with the parsed response content."},parse:{"!type":"fn(json: object) -> +TONG.Object3D","!doc":"Parse a <em>JSON</em> structure and return an [page:Object3D object] or a [page:Scene scene].<br>\n\t\tFound objects are converted to [page:Mesh] with a [page:BufferGeometry] and a default [page:MeshPhongMaterial].<br>\n\t\tLights are parsed accordingly."}},"!doc":"A loader for loading a <em>.babylon</em> resource.","!type":"fn(manager: +TONG.LoadingManager)"},BufferGeometryLoader:{"!url":"http://tongjs.org/docs/#Reference/loaders/BufferGeometryLoader",prototype:{load:{"!type":"fn(url: string, onLoad: function, onProgress: function, onError: function)","!doc":"Begin loading from url and call onLoad with the parsed response content."},parse:{"!type":"fn(json: object) -> +TONG.BufferGeometry","!doc":"Parse a <em>JSON</em> structure and return a [page:BufferGeometry]."}},"!doc":"A loader for loading a [page:BufferGeometry].","!type":"fn(manager: +TONG.LoadingManager)"},Cache:{"!url":"http://tongjs.org/docs/#Reference/loaders/Cache",prototype:{files:{"!type":"object","!doc":"An [page:Object object] that hold cached values."},add:{"!type":"fn(key: string, value)","!doc":"Adds a cache entry with that key to hold the value. If this key already holds a value, it is overwritten."},get:{"!type":"fn(key: string)","!doc":"Get the value of key. If the key does not exist the null value is returned."},remove:{"!type":"fn(key: string)","!doc":"Remove the cached value associated with the key."},clear:{"!type":"fn()","!doc":"Remove all values from the cache."}},"!doc":"A simple caching classe, used internaly by [page:FileLoader].","!type":"fn()"},ColladaLoader:{"!url":"http://tongjs.org/docs/#Reference/loaders/ColladaLoader",prototype:{options:{"!type":"[]","!doc":"&nbsp;.[page:Boolean centerGeometry]  Force [page:Geometry] to always be centered at the local origin of the containing [page: Mesh].<br>\n\t\t&nbsp;.[page:Boolean convertUpAxis]  Axis conversion is done for geometries, animations, and controllers.<br>\n\t\t&nbsp;.[page:Boolean subdivideFaces]  Force subdivision into multiple [page: Face3].<br>\n\t\t&nbsp;.[page:String upAxis]  X, Y or Z<br>\n\t\t&nbsp;.[page:Boolean defaultEnvMap]  Cubemap to use for reflective or refractive materials.<br>"},geometries:{"!type":"object","!doc":"Parsed <em>.dae</em> geometries."},load:{"!type":"fn(url: string, onLoad: function, onProgress: function)","!doc":"Begin loading from url and call onLoad with the parsed response content."},parse:{"!type":"fn(doc: Document, callBack: function, url: string) -> object","!doc":"Parse an <em>XML Document</em> and return an [page:Object object] that contain loaded parts: .[page:Scene scene], .[page:Array morphs], .[page:Array skins], .[page:Array animations], .[page:Object dae]"},setPreferredShading:{"!type":"fn(shading: number)","!doc":"Set the .[page:Integer shading] property on the resource's materials.<br>\n\t\tOptions are [page:Materials TONG.SmoothShading], [page:Materials TONG.FlatShading]."},applySkin:{"!type":"fn(geometry: +TONG.Geometry, instanceCtrl: object, frame: number)","!doc":"Apply a skin (vertices, animation, bones) from a <em>collada skin controller</em>, on the given [page:Geometry]."}},"!doc":"A loader for <em>Collada</em> files.","!type":"fn()"},ImageLoader:{"!url":"http://tongjs.org/docs/#Reference/loaders/ImageLoader",prototype:{crossOrigin:{"!type":"string","!doc":"The crossOrigin string to implement CORS for loading the url from a different domain that allows CORS."},load:{"!type":"fn(url: string, onLoad: function, onProgress: function, onError: function)","!doc":"Begin loading from url and return the [page:Image image] object that will contain the data."},setCrossOrigin:{"!type":"fn(value: string)","!doc":"The crossOrigin string to implement CORS for loading the url from a different domain that allows CORS."}},"!doc":"A loader for loading an [page:Image].","!type":"fn(manager: +TONG.LoadingManager)"},JSONLoader:{"!url":"http://tongjs.org/docs/#Reference/loaders/JSONLoader",prototype:{"!proto":"TONG.Loader.prototype",withCredentials:{"!type":"boolean","!doc":"If true, the ajax request will use cookies."},onLoadStart:{"!type":"function","!doc":"The default is a function with empty body."},onLoadComplete:{"!type":"function","!doc":"The default is a function with empty body."},load:{"!type":"fn(url: string, callback: function, texturePath: string)","!doc":"[page:String url]  required<br>\n\t\t[page:Function callback]  required. Will be called when load completes. The arguments will be the loaded [page:Object3D] and the loaded [page:Array materials].<br>\n\t\t[page:String texturePath]  optional. If not specified, textures will be assumed to be in the same folder as the Javascript model file."},loadAjaxJSON:{"!type":"fn(context: +TONG.JSONLoader, url: string, callback: function, texturePath: string, callbackProgress: function)","!doc":"Begin loading from url and call <em>callback</em> with the parsed response content."},parse:{"!type":"fn(json: object, texturePath: string) -> +TONG.Object3D","!doc":"Parse a <em>JSON</em> structure and return an [page:Object] containing the parsed .[page:Geometry] and .[page:Array materials]."},updateProgress:{"!type":"fn(progress: object)","!doc":"Updates the DOM object with the progress made."},createMaterial:{"!type":"fn(m: object, texturePath: string) -> +TONG.Material","!doc":"Creates the Material based on the parameters m."},initMaterials:{"!type":"fn(materials: [], texturePath: string) -> []","!doc":"Creates an array of [page:Material] based on the array of parameters m. The index of the parameters decide the correct index of the materials."},extractUrlBase:{"!type":"fn(url: string) -> string","!doc":"Extract the base from the URL."}},"!doc":"A loader for loading objects in JSON format.","!type":"fn()"},Loader:{"!url":"http://tongjs.org/docs/#Reference/loaders/Loader",prototype:{onLoadStart:{"!type":"function","!doc":"The default is a function with empty body."},onLoadProgress:{"!type":"function","!doc":"The default is a function with empty body."},onLoadComplete:{"!type":"function","!doc":"The default is a function with empty body."},crossOrigin:{"!type":"string","!doc":"The crossOrigin string to implement CORS for loading the url from a different domain that allows CORS."},updateProgress:{"!type":"fn(progress: object)","!doc":"Updates the DOM object with the progress made."},createMaterial:{"!type":"fn(m: object, texturePath: string) -> +TONG.Material","!doc":"Creates the Material based on the parameters m."},initMaterials:{"!type":"fn(materials: [], texturePath: string) -> []","!doc":"Creates an array of [page:Material] based on the array of parameters m. The index of the parameters decide the correct index of the materials."},extractUrlBase:{"!type":"fn(url: string) -> string","!doc":"Extract the base from the URL."}},"!doc":"Base class for implementing loaders.","!type":"fn()"},LoadingManager:{"!url":"http://tongjs.org/docs/#Reference/loaders/LoadingManager",prototype:{onLoad:{"!type":"function","!doc":"The function that needs to be called when all loaders are done."},onProgress:{"!type":"function","!doc":"The function that needs to be called when an item is complete. The arguments are url(The url of the item just loaded),<br>\n\t\tloaded(the amount of items already loaded), total( The total amount of items to be loaded.)"},onError:{"!type":"function","!doc":"The function that needs to be called when an item errors."},itemStart:{"!type":"fn(url: string)","!doc":"This should be called by any loader used by the manager when the loader starts loading an url. These shouldn't be called outside a loader."},itemEnd:{"!type":"fn(url: string)","!doc":"This should be called by any loader used by the manager when the loader ended loading an url.  These shouldn't be called outside a loader."}},"!doc":"Handles and keeps track of loaded and pending data.","!type":"fn(onLoad: function, onProgress: function, onError: function)"},MTLLoader:{"!url":"http://tongjs.org/docs/#Reference/loaders/MTLLoader",prototype:{load:{"!type":"fn(url: string, onLoad: function, onProgress: function, onError: function)","!doc":"Begin loading from url and return the loaded material."},parse:{"!type":"fn(text: string) -> MTLLoaderMaterialCreator","!doc":"Parse a <em>mtl</em> text structure and return a [page:MTLLoaderMaterialCreator] instance.<br>"}},"!doc":"A loader for loading an <em>.mtl</em> resource, used internaly by [page:OBJMTLLoader] and [page:UTF8Loader].","!type":"fn(baseUrl: string, options: object, crossOrigin: string)"},MaterialLoader:{"!url":"http://tongjs.org/docs/#Reference/loaders/MaterialLoader",prototype:{load:{"!type":"fn(url: string, onLoad: function, onProgress: function, onError: function)","!doc":"Begin loading from url and return the [page:Material] object that will contain the data."},setCrossOrigin:{"!type":"fn(value: string)","!doc":"The crossOrigin string to implement CORS for loading the url from a different domain that allows CORS."},parse:{"!type":"fn(json: object) -> +TONG.Material","!doc":"Parse a <em>JSON</em> structure and create a new [page:Material] of the type [page:String json.type] with parameters defined in the json object."}},"!doc":"A loader for loading a [page:Material] in JSON format.","!type":"fn(manager: +TONG.LoadingManager)"},OBJLoader:{"!url":"http://tongjs.org/docs/#Reference/loaders/OBJLoader",prototype:{load:{"!type":"fn(url: string, onLoad: function, onProgress: function, onError: function)","!doc":"Begin loading from url and call onLoad with the parsed response content."},parse:{"!type":"fn(text: string) -> +TONG.Object3D","!doc":"Parse an <em>obj</em> text structure and return an [page:Object3D].<br>\n\t\tFound objects are converted to [page:Mesh] with a [page:BufferGeometry] and a default [page:MeshLambertMaterial]."}},"!doc":"A loader for loading an <em>.obj</em> resource.","!type":"fn(manager: +TONG.LoadingManager)"},OBJMTLLoader:{"!url":"http://tongjs.org/docs/#Reference/loaders/OBJMTLLoader",prototype:{load:{"!type":"fn(objUrl: string, mtlUrl: string, onLoad: function, onProgress: function, onError: function)","!doc":"Begin loading from urls and call onLoad with the parsed response content."},parse:{"!type":"fn(text: string, mtllibCallback: function) -> +TONG.Object3D","!doc":"Parse an <em>obj</em> text structure and return an [page:Object3D].<br>\n\t\tFound objects are converted to a [page:Mesh] and materials are converted to [page:MeshLambertMaterial]."}},"!doc":"A loader for loading a <em>.obj</em> and its <em>.mtl</em> together.","!type":"fn(manager: +TONG.LoadingManager)"},ObjectLoader:{"!url":"http://tongjs.org/docs/#Reference/loaders/ObjectLoader",prototype:{load:{"!type":"fn(url: string, onLoad: function, onProgress: function, onError: function)","!doc":"Begin loading from url and call onLoad with the parsed response content."},parse:{"!type":"fn(json: object) -> +TONG.Object3D","!doc":"Parse a <em>JSON</em> content and return a tongjs object."},setCrossOrigin:{"!type":"fn(value: string)","!doc":"[page:String value]  The crossOrigin string to implement CORS for loading the url from a different domain that allows CORS."}},"!doc":"A loader for loading a JSON resource. Unlike the [page:JSONLoader], this one make use of the <em>.type</em> attributes of objects to map them to their original classes.","!type":"fn(manager: +TONG.LoadingManager)"},PDBLoader:{"!url":"http://tongjs.org/docs/#Reference/loaders/PDBLoader",prototype:{load:{"!type":"fn(url: string, onLoad: function, onProgress: function, onError: function)","!doc":"Begin loading from url and call onLoad with the parsed response content."},parsePDB:{"!type":"fn(text: string) -> object","!doc":"Parse a <em>pdb</em> text and return a <em>JSON</em> structure.<br>"},createModel:{"!type":"fn(json: object, callback: function)","!doc":"Parse a <em>(JSON) pdb</em> structure and return two [page:Geometry]: one for atoms, one for bonds.<br>"}},"!doc":'A loader for loading a <em>.pdb</em> resource.\n\t\t<br><br>\n\t\tThe <a href="http://en.wikipedia.org/wiki/Protein_Data_Bank_(file_format)">Protein Data Bank file format</a> is a textual file format describing the TONG-dimensional structures of molecules.',"!type":"fn(manager: +TONG.LoadingManager)"},SVGLoader:{"!url":"http://tongjs.org/docs/#Reference/loaders/SVGLoader",prototype:{load:{"!type":"fn(url: string, onLoad: function, onProgress: function, onError: function)","!doc":"Begin loading from url and call onLoad with the response content."}},"!doc":"A loader for loading an <em>.svg</em> resource.","!type":"fn(manager: +TONG.LoadingManager)"},TGALoader:{"!url":"http://tongjs.org/docs/#Reference/loaders/TGALoader",prototype:{load:{"!type":"fn(url: string, onLoad: function, onProgress: function, onError: function) -> +TONG.DataTexture","!doc":"Begin loading from url and pass the loaded [page:DataTexture texture] to onLoad. The [page:DataTexture texture] is also directly returned for immediate use (but may not be fully loaded)."}},"!doc":"Class for loading a <em>.tga</em> [page:DataTexture texture].","!type":"fn(manager: +TONG.LoadingManager)"},TextureLoader:{"!url":"http://tongjs.org/docs/#Reference/loaders/TextureLoader",prototype:{crossOrigin:{"!type":"string","!doc":"default  *null*.<br>\n\t\tIf set, assigns the *crossOrigin* attribute of the image to the value of *crossOrigin*, prior to starting the load."},load:{"!type":"fn(url: string, onLoad: function, onProgress: function, onError: function)","!doc":"Begin loading from url and pass the loaded [page:Texture texture] to onLoad."}},"!doc":"Class for loading a [page:Texture texture].","!type":"fn(manager: +TONG.LoadingManager)"},FileLoader:{"!url":"http://tongjs.org/docs/#Reference/loaders/FileLoader",prototype:{cache:{"!type":"+TONG.Cache","!doc":"A [page:Cache cache] instance that hold the response from each request made through this loader, so each file is requested once."},crossOrigin:{"!type":"string","!doc":"The crossOrigin string to implement CORS for loading the url from a different domain that allows CORS."},responseType:{"!type":"string","!doc":"Can be set to change the response type."},load:{"!type":"fn(url: string, onLoad: function, onProgress: function, onError: function)","!doc":"Begin loading from url and return the [page:String text] response that will contain the data."},setCrossOrigin:{"!type":"fn(value: string)","!doc":"[page:String value]  The crossOrigin string to implement CORS for loading the url from a different domain that allows CORS."},setResponseType:{"!type":"fn(value: string)","!doc":'[page:String value]  the empty string (default), "arraybuffer", "blob", "document", "json", or "text".'}},"!doc":"A low level class for loading resources with XMLHttpRequest, used internaly by most loaders.","!type":"fn(manager: +TONG.LoadingManager)"},GLTFLoader:{"!url":"http://tongjs.org/docs/#Reference/loaders/GLTFLoader",prototype:{"!proto":"TONG.Loader.prototype",load:{"!type":"fn(url: string, callback: function) -> +TONG.Object3D","!doc":"Begin loading from url and call the callback function with the parsed response content."}},"!doc":'A loader for loading a <em>.gltf</em> resource in <em>JSON</em> format.\n\t\t<br><br>\n\t\tThe <a href="https://www.khronos.org/gltf">glTF file format</a> is a JSON file format to enable rapid delivery and loading of 3D content.',"!type":"fn()"},LineBasicMaterial:{"!url":"http://tongjs.org/docs/#Reference/materials/LineBasicMaterial",prototype:{"!proto":"TONG.Material.prototype",color:{"!type":"number","!doc":"Sets the color of the line. Default is 0xffffff."},linewidth:{"!type":"number","!doc":'Due to limitations in the <a href="https://code.google.com/p/angleproject/" target="_blank">ANGLE layer</a>, on Windows platforms linewidth will always be 1 regardless of the set value.'},linecap:{"!type":"string","!doc":"This setting might not have any effect when used with certain renderers. For example, it is ignored with the [page:WebGLRenderer WebGL] renderer, but does work with the [page:CanvasRenderer Canvas] renderer."},linejoin:{"!type":"string","!doc":"This setting might not have any effect when used with certain renderers. For example, it is ignored with the [page:WebGLRenderer WebGL] renderer, but does work with the [page:CanvasRenderer Canvas] renderer."},vertexColors:{"!type":"number","!doc":"This setting might not have any effect when used with certain renderers."},fog:{"!type":"bool","!doc":"This setting might not have any effect when used with certain renderers. For example, it is ignored with the [page:CanvasRenderer Canvas] renderer, but does work with the [page:WebGLRenderer WebGL] renderer."}},"!doc":"A material for drawing wireframe-style geometries.","!type":"fn(parameters: object)"},LineDashedMaterial:{"!url":"http://tongjs.org/docs/#Reference/materials/LineDashedMaterial",prototype:{"!proto":"TONG.Material.prototype",color:{"!type":"+TONG.Color","!doc":"Sets the color of the line. Default is 0xffffff."},linewidth:{"!type":"number","!doc":'Due to limitations in the <a href="https://code.google.com/p/angleproject/" target="_blank">ANGLE layer</a>, on Windows platforms linewidth will always be 1 regardless of the set value.'},scale:{"!type":"number","!doc":"The scale of the dashed part of a line."},dashSize:{"!type":"number","!doc":"The size of the dash. This is both the gap with the stroke. Default is 3."},gapSize:{"!type":"number","!doc":"The size of the gap. Default is 1."},vertexColors:{"!type":"boolean","!doc":"This setting might not have any effect when used with certain renderers."},fog:{"!type":"boolean","!doc":"This setting might not have any effect when used with certain renderers. For example, it is ignored with the [page:CanvasRenderer Canvas] renderer, but does work with the [page:WebGLRenderer WebGL] renderer."}},"!doc":"A material for drawing wireframe-style geometries with dashed lines.","!type":"fn(parameters: object)"},Material:{"!url":"http://tongjs.org/docs/#Reference/materials/Material",prototype:{id:{"!type":"number","!doc":"Unique number for this material instance."},name:{"!type":"string","!doc":"Material name. Default is an empty string."},opacity:{"!type":"number","!doc":"Default is *1.0*."},transparent:{"!type":"bool","!doc":"Default is *false*."},blendDst:{"!type":"number","!doc":"Blending destination. It's one of the blending mode constants defined in [page:TONG TONG.js]. Default is [page:CustomBlendingEquation OneMinusSrcAlphaFactor]."},blendEquation:{"!type":"number","!doc":"Blending equation to use when applying blending. It's one of the constants defined in [page:TONG TONG.js]. Default is [page:CustomBlendingEquation AddEquation.]"},depthTest:{"!type":"bool","!doc":"Whether to have depth test enabled when rendering this material. Default is *true*."},depthWrite:{"!type":"bool","!doc":"When drawing 2D overlays it can be useful to disable the depth writing in order to layer several things together without creating z-index artifacts."},polygonOffset:{"!type":"bool","!doc":"Whether to use polygon offset. Default is *false*. This corresponds to the *POLYGON_OFFSET_FILL* WebGL feature."},polygonOffsetFactor:{"!type":"number","!doc":"Sets the polygon offset factor. Default is *0*."},polygonOffsetUnits:{"!type":"number","!doc":"Sets the polygon offset units. Default is *0*."},alphaTest:{"!type":"number","!doc":"Sets the alpha value to be used when running an alpha test. Default is *0*."},overdraw:{"!type":"number","!doc":"Amount of triangle expansion at draw time. This is a workaround for cases when gaps appear between triangles when using [page:CanvasRenderer]. *0.5* tends to give good results across browsers. Default is *0*."},visible:{"!type":"bool","!doc":"Defines whether this material is visible. Default is *true*."},side:{"!type":"Enum","!doc":"Default is [page:Materials TONG.FrontSide]. Other options are [page:Materials TONG.BackSide] and [page:Materials TONG.DoubleSide]."},needsUpdate:{"!type":"bool","!doc":"This property is automatically set to *true* when instancing a new material."},clone:{"!type":"fn(material: material) -> +TONG.Material","!doc":"This clones the material in the optional parameter and returns it."},dispose:{"!type":"fn()","!doc":"This disposes the material."},setValues:{"!type":"fn(values: object)","!doc":"Sets the properties based on the *values*."}},"!doc":"Materials describe the appearance of [page:Object objects]. They are defined in a (mostly) renderer-independent way, so you don't have to rewrite materials if you decide to use a different renderer.","!type":"fn()"},MeshBasicMaterial:{"!url":"http://tongjs.org/docs/#Reference/materials/MeshBasicMaterial",prototype:{"!proto":"TONG.Material.prototype",color:{"!type":"number","!doc":"Sets the color of the geometry. Default is 0xffffff."},lightMap:{"!type":"+TONG.Texture","!doc":"Set light map. Default is null."},specularMap:{"!type":"+TONG.Texture","!doc":"Set specular map. Default is null."},alphaMap:{"!type":"+TONG.Texture","!doc":"Only the color of the texture is used, ignoring the alpha channel if one exists. For RGB and RGBA textures, the [page:WebGLRenderer WebGL] renderer will use the green channel when sampling this texture due to the extra bit of precision provided for green in DXT-compressed and uncompressed RGB 565 formats. Luminance-only and luminance/alpha textures will also still work as expected."},envMap:{"!type":"TextureCube","!doc":"Set env map. Default is null."},fog:{"!type":"bool","!doc":"This setting might not have any effect when used with certain renderers. For example, it is ignored with the [page:CanvasRenderer Canvas] renderer, but does work with the [page:WebGLRenderer WebGL] renderer."},shading:{"!type":"string","!doc":"Define shading type. Default is TONG.SmoothShading."},wireframe:{"!type":"bool","!doc":"Render geometry as wireframe. Default is false (i.e. render as flat polygons)."},wireframeLinewidth:{"!type":"number","!doc":'Due to limitations in the <a href="https://code.google.com/p/angleproject/" target="_blank">ANGLE layer</a>, on Windows platforms linewidth will always be 1 regardless of the set value.'},wireframeLinecap:{"!type":"string","!doc":"This setting might not have any effect when used with certain renderers. For example, it is ignored with the [page:WebGLRenderer WebGL] renderer, but does work with the [page:CanvasRenderer Canvas] renderer."},wireframeLinejoin:{"!type":"string","!doc":"This setting might not have any effect when used with certain renderers. For example, it is ignored with the [page:WebGLRenderer WebGL] renderer, but does work with the [page:CanvasRenderer Canvas] renderer."},vertexColors:{"!type":"number","!doc":"This setting might not have any effect when used with certain renderers. For example, it is ignored with the [page:CanvasRenderer Canvas] renderer, but does work with the [page:WebGLRenderer WebGL] renderer."},skinning:{"!type":"bool","!doc":"Define whether the material uses skinning. Default is false."},morphTargets:{"!type":"bool","!doc":"Define whether the material uses morphTargets. Default is false."},map:{"!type":"+TONG.Texture","!doc":"Sets the texture map. Default is  null."},combine:{"!type":"number","!doc":"How to combine the result of the surface's color with the environment map, if any."},reflectivity:{"!type":"number","!doc":'How much the environment map affects the surface; also see "combine".'},refractionRatio:{"!type":"number","!doc":"The index of refraction for an environment map using [page:Textures TONG.CubeRefractionMapping]. Default is *0.98*."}},"!doc":"A material for drawing geometries in a simple shaded (flat or wireframe) way.","!type":"fn(parameters: object)"},MeshDepthMaterial:{"!url":"http://tongjs.org/docs/#Reference/materials/MeshDepthMaterial",prototype:{"!proto":"TONG.Material.prototype",morphTargets:{"!type":"boolean","!doc":"Define whether the material uses morphTargets. Default is false."},wireframe:{"!type":"boolean","!doc":"Render geometry as wireframe. Default is false (i.e. render as smooth shaded)."},wireframeLinewidth:{"!type":"number","!doc":"Controls wireframe thickness. Default is 1.<br><br>\n\t\t\tDue to limitations in the ANGLE layer, on Windows platforms linewidth will always be 1 regardless of the set value."}},"!doc":"A material for drawing geometry by depth. Depth is based off of the camera near and far plane. White is nearest, black is farthest.","!type":"fn(parameters: object)"},MultiMaterial:{"!url":"http://tongjs.org/docs/#Reference/materials/MultiMaterial",prototype:{materials:{"!type":"[]","!doc":"Get or set the materials for the geometry."}},"!doc":"A Material to define multiple materials for the same geometry. \n\t\tThe geometry decides which material is used for which faces by the [page:Face3 faces materialindex].\n\t\tThe materialindex corresponds with the index of the material in the materials array.","!type":"fn(materials: [])"},MeshLambertMaterial:{"!url":"http://tongjs.org/docs/#Reference/materials/MeshLambertMaterial",prototype:{"!proto":"TONG.Material.prototype",color:{"!type":"+TONG.Color","!doc":"Diffuse color of the material. Default is white.<br>"},emissive:{"!type":"+TONG.Color","!doc":"Emissive (light) color of the material, essentially a solid color unaffected by other lighting. Default is black.<br>"},wrapAround:{"!type":"boolean","!doc":"Define whether the diffuse lighting wraps around the model or not. This option adds a little more (tintable) light\n\t\t\tonto the side of the object in relation to a light."},wrapRGB:{"!type":"+TONG.Vector3","!doc":"Decide how much of the wrap around values get used if the wrapAround option is set. The x, y, z values correspond\n\t\t\tto the r, g, b values respectively. The typical range is of each is from 0 to 1. For example setting all of the\n\t\t\tvector values to 0.5 will add a moderate amount of light to the side of the model. Changing *b* to 1 will\n\t\t\ttint the light on the side to be more blue. Defaults to *(1,1,1)*."},map:{"!type":"+TONG.Texture","!doc":"Set color texture map. Default is null."},lightMap:{"!type":"+TONG.Texture","!doc":"Set light map. Default is null."},specularMap:{"!type":"+TONG.Texture","!doc":"Since this material does not have a specular component, the specular value affects only how much of the environment map affects the surface. Default is null."},alphaMap:{"!type":"+TONG.Texture","!doc":"Only the color of the texture is used, ignoring the alpha channel if one exists. For RGB and RGBA textures, the [page:WebGLRenderer WebGL] renderer will use the green channel when sampling this texture due to the extra bit of precision provided for green in DXT-compressed and uncompressed RGB 565 formats. Luminance-only and luminance/alpha textures will also still work as expected."},envMap:{"!type":"TextureCube","!doc":"Set env map. Default is null."},combine:{"!type":"number","!doc":"Options are [page:Textures TONG.Multiply] (default), [page:Textures TONG.MixOperation], [page:Textures TONG.AddOperation]. If mix is chosen, the reflectivity is used to blend between the two colors."},reflectivity:{"!type":"number","!doc":'How much the environment map affects the surface; also see "combine".'},refractionRatio:{"!type":"number","!doc":"The index of refraction for an environment map using [page:Textures TONG.CubeRefractionMapping]. Default is *0.98*."},fog:{"!type":"bool","!doc":"This setting might not have any effect when used with certain renderers. For example, it is ignored with the [page:CanvasRenderer Canvas] renderer, but does work with the [page:WebGLRenderer WebGL] renderer."},shading:{"!type":"number","!doc":"Options are [page:Materials TONG.SmoothShading] (default), [page:Materials TONG.FlatShading]."},wireframe:{"!type":"bool","!doc":"Whether the triangles' edges are displayed instead of surfaces. Default is *false*."},wireframeLinewidth:{"!type":"number","!doc":'Due to limitations in the <a href="https://code.google.com/p/angleproject/" target="_blank">ANGLE layer</a>, on Windows platforms linewidth will always be 1 regardless of the set value.'},wireframeLinecap:{"!type":"string","!doc":"This setting might not have any effect when used with certain renderers. For example, it is ignored with the [page:WebGLRenderer WebGL] renderer, but does work with the [page:CanvasRenderer Canvas] renderer."},wireframeLinejoin:{"!type":"string","!doc":"This setting might not have any effect when used with certain renderers. For example, it is ignored with the [page:WebGLRenderer WebGL] renderer, but does work with the [page:CanvasRenderer Canvas] renderer."},vertexColors:{"!type":"number","!doc":"This setting might not have any effect when used with certain renderers. For example, it is ignored with the [page:CanvasRenderer Canvas] renderer, but does work with the [page:WebGLRenderer WebGL] renderer."},skinning:{"!type":"bool","!doc":"Define whether the material uses skinning. Default is *false*."},morphTargets:{"!type":"bool","!doc":"Define whether the material uses morphTargets. Default is *false*."},morphNormals:{"!type":"boolean","!doc":"Defines whether the material uses morphNormals. Set as true to pass morphNormal attributes from the [page:Geometry]\n\t\t\tto the shader. Default is *false*."}},"!doc":"A material for non-shiny (Lambertian) surfaces, evaluated per vertex.","!type":"fn(parameters: object)"},MeshNormalMaterial:{"!url":"http://tongjs.org/docs/#Reference/materials/MeshNormalMaterial",prototype:{"!proto":"TONG.Material.prototype",wireframe:{"!type":"boolean","!doc":"Render geometry as wireframe. Default is false (i.e. render as smooth shaded)."},wireframeLinewidth:{"!type":"number","!doc":"Controls wireframe thickness. Default is 1.<br><br>\n\t\t\tDue to limitations in the ANGLE layer, on Windows platforms linewidth will always be 1 regardless of the set value."},morphTargets:{"!type":"boolean","!doc":"Define whether the material uses morphTargets. Default is false."}},"!doc":"A material that maps the normal vectors to RGB colors.","!type":"fn(parameters: object)"},MeshPhongMaterial:{"!url":"http://tongjs.org/docs/#Reference/materials/MeshPhongMaterial",prototype:{"!proto":"TONG.Material.prototype",color:{"!type":"+TONG.Color","!doc":"Diffuse color of the material. Default is white.<br>"},emissive:{"!type":"+TONG.Color","!doc":"Emissive (light) color of the material, essentially a solid color unaffected by other lighting. Default is black.<br>"},specular:{"!type":"+TONG.Color","!doc":"Specular color of the material, i.e., how shiny the material is and the color of its shine. Setting this the same color as the diffuse value (times some intensity) makes the material more metallic-looking; setting this to some gray makes the material look more plastic. Default is dark gray.<br>"},shininess:{"!type":"number","!doc":"How shiny the specular highlight is; a higher value gives a sharper highlight. Default is *30*. It should not be set to 0."},metal:{"!type":"boolean","!doc":"If set to true the shader multiplies the specular highlight by the underlying color of the object, making\n\t\t\tit appear to be more metal-like and darker. If set to false the specular highlight is added ontop of the\n\t\t\tunderlying colors."},wrapAround:{"!type":"boolean","!doc":"Define whether the diffuse lighting wraps around the model or not. This option adds a little more (tintable) light\n\t\t\tonto the side of the object in relation to a light."},wrapRGB:{"!type":"+TONG.Vector3","!doc":"Decide how much of the wrap around values get used if the wrapAround option is set. The x, y, z values correspond\n\t\t\tto the r, g, b values respectively. The typical range is of each is from 0 to 1. For example setting all of the\n\t\t\tvector values to 0.5 will add a moderate amount of light to the side of the model. Changing *b* to 1 will\n\t\t\ttint the light on the side to be more blue. Defaults to (1,1,1)."},map:{"!type":"+TONG.Texture","!doc":"Set color texture map. Default is null."},lightMap:{"!type":"+TONG.Texture","!doc":"Set light map. Default is null."},bumpMap:{"!type":"+TONG.Texture","!doc":"The texture to create a bump map. The black and white values map to the perceived depth in relation to the lights.\n\t\t\tBump doesn't actually affect the geometry of the object, only the lighting. If a normal map is defined this will\n\t\t\tbe ignored."},bumpScale:{"!type":"number","!doc":"How much the bump map affects the material. Typical ranges are 0-1. Default is 1."},normalMap:{"!type":"+TONG.Texture","!doc":"The texture to create a normal map. The RGB values affect the surface normal for each pixel fragment and change\n\t\t\tthe way the color is lit. Normal maps do not change the actual shape of the surface, only the lighting."},normalScale:{"!type":"+TONG.Vector2","!doc":"How much the normal map affects the material. Typical ranges are 0-1. Default is (1,1)."},specularMap:{"!type":"+TONG.Texture","!doc":"The specular map value affects both how much the specular surface highlight contributes and how much of the environment map affects the surface. Default is null."},alphaMap:{"!type":"+TONG.Texture","!doc":"Only the color of the texture is used, ignoring the alpha channel if one exists. For RGB and RGBA textures, the [page:WebGLRenderer WebGL] renderer will use the green channel when sampling this texture due to the extra bit of precision provided for green in DXT-compressed and uncompressed RGB 565 formats. Luminance-only and luminance/alpha textures will also still work as expected."},envMap:{"!type":"TextureCube","!doc":"Set env map. Default is null."},combine:{"!type":"number","!doc":"Options are [page:Textures TONG.MultiplyOperation] (default), [page:Textures TONG.MixOperation], [page:Textures TONG.AddOperation]. If mix is chosen, the reflectivity is used to blend between the two colors."},reflectivity:{"!type":"number","!doc":'How much the environment map affects the surface; also see "combine".'},refractionRatio:{"!type":"number","!doc":"The index of refraction for an environment map using [page:Textures TONG.CubeRefractionMapping]. Default is *0.98*."},fog:{"!type":"bool","!doc":"This setting might not have any effect when used with certain renderers. For example, it is ignored with the [page:CanvasRenderer Canvas] renderer, but does work with the [page:WebGLRenderer WebGL] renderer."},shading:{"!type":"number","!doc":"Options are [page:Materials TONG.SmoothShading] (default), [page:Materials TONG.FlatShading]."},wireframe:{"!type":"bool","!doc":"Whether the triangles' edges are displayed instead of surfaces. Default is *false*."},wireframeLinewidth:{"!type":"number","!doc":'Due to limitations in the <a href="https://code.google.com/p/angleproject/" target="_blank">ANGLE layer</a>, on Windows platforms linewidth will always be 1 regardless of the set value.'},wireframeLinecap:{"!type":"string","!doc":"This setting might not have any effect when used with certain renderers. For example, it is ignored with the [page:WebGLRenderer WebGL] renderer, but does work with the [page:CanvasRenderer Canvas] renderer."},wireframeLinejoin:{"!type":"string","!doc":"This setting might not have any effect when used with certain renderers. For example, it is ignored with the [page:WebGLRenderer WebGL] renderer, but does work with the [page:CanvasRenderer Canvas] renderer."},vertexColors:{"!type":"number","!doc":"This setting might not have any effect when used with certain renderers. For example, it is ignored with the [page:CanvasRenderer Canvas] renderer, but does work with the [page:WebGLRenderer WebGL] renderer."},skinning:{"!type":"bool","!doc":"Define whether the material uses skinning. Default is *false*."},morphTargets:{"!type":"bool","!doc":"Define whether the material uses morphTargets. Default is *false*."},morphNormals:{"!type":"boolean","!doc":"Defines whether the material uses morphNormals. Set as true to pass morphNormal attributes from the [page:Geometry]\n\t\t\tto the shader. Default is *false*."}},"!doc":"A material for shiny surfaces, evaluated per pixel.","!type":"fn(parameters: object)"},PointCloudMaterial:{"!url":"http://tongjs.org/docs/#Reference/materials/PointCloudMaterial",prototype:{"!proto":"TONG.Material.prototype",color:{"!type":"number","!doc":"Sets the color of the particles. Default is 0xffffff."},map:{"!type":"+TONG.Texture","!doc":"Sets the color of the particles using data from a texture."},size:{"!type":"number","!doc":"Sets the size of the particles. Default is 1.0."},sizeAttenuation:{"!type":"bool","!doc":"Specify whether particles' size will get smaller with the distance. Default is true."},vertexColors:{"!type":"bool","!doc":"This setting might not have any effect when used with certain renderers. For example, it is ignored with the [page:CanvasRenderer Canvas] renderer, but does work with the [page:WebGLRenderer WebGL] renderer."},fog:{"!type":"bool","!doc":"This setting might not have any effect when used with certain renderers. For example, it is ignored with the [page:CanvasRenderer Canvas] renderer, but does work with the [page:WebGLRenderer WebGL] renderer."}},"!doc":"The default material used by [page:PointCloud particle] systems.","!type":"fn(parameters: object)"},RawShaderMaterial:{"!url":"http://tongjs.org/docs/#Reference/materials/RawShaderMaterial",prototype:{"!proto":"TONG.ShaderMaterial.prototype"},"!doc":"This class works just like [page:ShaderMaterial], except that definitions of built-in uniforms and attributes are not automatically prepended to the GLSL shader code."},ShaderMaterial:{"!url":"http://tongjs.org/docs/#Reference/materials/ShaderMaterial",prototype:{"!proto":"TONG.Material.prototype",uniforms:{"!type":"object","!doc":"Object specifying the uniforms to be passed to the shader code; keys are uniform names, values are definitions of the form\n\t\t<code>\n\t\t{ type: 'f', value: 1.0 }\n\t\t</code>\n\t\twhere *type* is a <a href=\"#uniform-types\">uniform type string</a>, and *value* is the value of the uniform. Names must match the name of the uniform, as defined in the GLSL code. Note that uniforms are refreshed on every frame, so updating the value of the uniform will immediately update the value available to the GLSL code."},attributes:{"!type":"object","!doc":"<p>\n\t\tObject specifying the custom attributes to be passed to the shader code; keys are attribute names, values are definitions of the form\n\t\t<code>\n\t\t{ type: 'f', value: [1.0, 0.5, 2.0, ...] }\n\t\t</code>\n\t\twhere *type* is an <a href=\"#attribute-types\">attribute type string</a>, and *value* is an array containing an attribute value for each vertex in the geometry (or *undefined* if using [page:BufferGeometry]). Names must match the name of the attribute, as defined in the GLSL code.\n\t\t</p>\n\t\t<p>\n\t\tNote that attribute buffers are <emph>not</emph> refreshed automatically when their values change; if using [page:Geometry], set <code>needsUpdate = true</code> on the attribute definition. If using [page:BufferGeometry], set <code>needsUpdate = true</code> on the [page:BufferAttribute].\n\t\t</p>"},defines:{"!type":"object","!doc":"Defines custom constants using *#define* directives within the GLSL code for both the vertex shader and the fragment shader; each key/value pair yields another directive:\n\t\t<code>\n\t\tdefines: {\n\t\t\tFOO: 15,\n\t\t\tBAR: true\n\t\t}\n\t\t</code>\n\t\tyields the lines\n\t\t<code>\n\t\t#define FOO 15\n\t\t#define BAR true\n\t\t</code>\n\t\tin the GLSL code."},vertexShader:{"!type":"string","!doc":"Vertex shader GLSL code.  This is the actual code for the shader. In the example above, the *vertexShader* and *fragmentShader* code is extracted from the DOM; it could be passed as a string directly or loaded via AJAX instead."},fragmentShader:{"!type":"string","!doc":"Fragment shader GLSL code.  This is the actual code for the shader. In the example above, the *vertexShader* and *fragmentShader* code is extracted from the DOM; it could be passed as a string directly or loaded via AJAX instead."},shading:{"!type":"number","!doc":"Define shading type, which determines whether normals are smoothed between vertices; possible values are [page:Materials TONG.SmoothShading] or [page:Materials TONG.FlatShading]. Default is TONG.SmoothShading."},linewidth:{"!type":"number","!doc":'Due to limitations in the <a href="https://code.google.com/p/angleproject/" target="_blank">ANGLE layer</a>, on Windows platforms linewidth will always be 1 regardless of the set value.'},wireframe:{"!type":"bool","!doc":"Render geometry as wireframe (using GL_LINES instead of GL_TRIANGLES). Default is false (i.e. render as flat polygons)."},wireframeLinewidth:{"!type":"number","!doc":'Due to limitations in the <a href="https://code.google.com/p/angleproject/" target="_blank">ANGLE layer</a>, on Windows platforms linewidth will always be 1 regardless of the set value.'},fog:{"!type":"bool","!doc":"Define whether the material color is affected by global fog settings; true to pass fog uniforms to the shader. Default is false."},lights:{"!type":"bool","!doc":"Defines whether this material uses lighting; true to pass uniform data related to lighting to this shader"},vertexColors:{"!type":"number","!doc":"Define how the vertices are colored, by defining how the *colors* attribute gets populated. Possible values are [page:Materials TONG.NoColors], [page:Materials TONG.FaceColors] and [page:Materials TONG.VertexColors]. Default is TONG.NoColors."},skinning:{"!type":"bool","!doc":"Define whether the material uses skinning; true to pass skinning attributes to the shader. Default is false."},morphTargets:{"!type":"bool","!doc":"Defines whether the material uses morphTargets; true morphTarget attributes to this shader"},morphNormals:{"!type":"boolean","!doc":"Defines whether the material uses morphNormals. Set as true to pass morphNormal attributes from the [page:Geometry]\n\t\t\tto the shader. Default is *false*."},program:{"!type":"+TONG.WebGLProgram","!doc":"The compiled shader program associated with this material, generated by [page:WebGLRenderer]. You should not need to access this property."},clone:{"!type":"fn() -> +TONG.ShaderMaterial","!doc":"Generates a shallow copy of this material. Note that the vertexShader and fragmentShader are copied <emph>by reference</emph>, as are the definitions of the *attributes*; this means that clones of the material will share the same compiled [page:WebGLProgram]. However, the *uniforms* are copied <emph>by value</emph>, which allows you to have different sets of uniforms for different copies of the material."}},"!doc":'Material rendered with custom shaders. A shader is a small program written in [link:https://www.opengl.org/documentation/glsl/ GLSL] to run on the GPU. You may want to use a custom shader if you need to:\n\t\t<ul>\n\t\t\t<li>implement an effect not included with any of the built-in [page:Material materials]</li>\n\t\t\t<li>combine many objects into a single [page:Geometry] or [page:BufferGeometry] in order to improve performance</li>\n\t\t\t<li>associate custom data with individual vertices ("custom attributes")</li>\n\t\t</ul>\n\t\tNote that a ShaderMaterial will only be rendered properly by [page:WebGLRenderer], since the GLSL code in the vertexShader and fragmentShader properties must be compiled and run on the GPU using WebGL.',"!type":"fn(parameters: object)"},SpriteCanvasMaterial:{"!url":"http://tongjs.org/docs/#Reference/materials/SpriteCanvasMaterial",prototype:{"!proto":"TONG.Material.prototype",color:{"!type":"+TONG.Color","!doc":"The color of the sprite. The material will set up the color for the context before calling the material's program."},program:{"!type":"fn(context: CanvasRenderingContext2D, color: +TONG.Color)","!doc":"Define a program that will use the context to draw the sprite."}},"!doc":"Create a material that can draw custom sprites using a 2d canvas.","!type":"fn(parameters: object)"},SpriteMaterial:{"!url":"http://tongjs.org/docs/#Reference/materials/SpriteMaterial",prototype:{"!proto":"TONG.Material.prototype",color:{"!type":"+TONG.Color","!doc":"The texture is multiplied by this color. The default is 0xffffff"},map:{"!type":"+TONG.Texture","!doc":"The texture map. Default is null."},rotation:{"!type":"Radians","!doc":"The rotation of the sprite in radians. Default is 0."},fog:{"!type":"boolean","!doc":"Whether or not this material affected by the scene's fog. Default is false"}},"!doc":"A material for a [page:Sprite].","!type":"fn(parameters: object)"},Box2:{"!url":"http://tongjs.org/docs/#Reference/math/Box2",prototype:{min:{"!type":"+TONG.Vector2","!doc":"Lower (x, y) boundary of this box."},max:{"!type":"+TONG.Vector2","!doc":"Upper (x, y) boundary of this box."},set:{"!type":"fn(min: +TONG.Vector2, max: +TONG.Vector2) -> +TONG.Box2","!doc":"Sets the lower and upper (x, y) boundaries of this box."},expandByPoint:{"!type":"fn(point: +TONG.Vector2) -> +TONG.Box2","!doc":"Expands the boundaries of this box to include *point*."},clampPoint:{"!type":"fn(point: +TONG.Vector2, optionalTarget: +TONG.Vector2) -> +TONG.Vector2","!doc":"Clamps *point* within the bounds of this box."},isIntersectionBox:{"!type":"fn(box: +TONG.Box2) -> bool","!doc":"Determines whether or not this box intersects *box*."},setFromPoints:{"!type":"fn(points: []) -> +TONG.Box2","!doc":"Sets the upper and lower bounds of this box to include all of the points in *points*."},size:{"!type":"fn(optionalTarget: +TONG.Vector2) -> +TONG.Vector2","!doc":"Returns the width and height of this box."},union:{"!type":"fn(box: +TONG.Box2) -> +TONG.Box2","!doc":"Unions this box with *box* setting the upper bound of this box to the greater of the \n\t\ttwo boxes' upper bounds and the lower bound of this box to the lesser of the two boxes'\n\t\tlower bounds."},getParameter:{"!type":"fn(point: +TONG.Vector2, optionalTarget: +TONG.Vector2) -> +TONG.Vector2","!doc":"Returns a point as a proportion of this box's width and height."},expandByScalar:{"!type":"fn(scalar: float) -> +TONG.Box2","!doc":"Expands each dimension of the box by *scalar*. If negative, the dimensions of the box <br>\n\t\twill be contracted."},intersect:{"!type":"fn(box: +TONG.Box2) -> +TONG.Box2","!doc":"Returns the intersection of this and *box*, setting the upper bound of this box to the lesser <br>\n\t\tof the two boxes' upper bounds and the lower bound of this box to the greater of the two boxes' <br>\n\t\tlower bounds."},containsBox:{"!type":"fn(box: +TONG.Box2) -> bool","!doc":"Returns true if this box includes the entirety of *box*. If this and *box* overlap exactly,<br>\n\t\tthis function also returns true."},translate:{"!type":"fn(offset: +TONG.Vector2) -> +TONG.Box2","!doc":"Adds *offset* to both the upper and lower bounds of this box, effectively moving this box <br>\n\t\t*offset* units in 2D space."},empty:{"!type":"fn() -> bool","!doc":"Returns true if this box includes zero points within its bounds.<br>\n\t\tNote that a box with equal lower and upper bounds still includes one point, the\n\t\tone both bounds share."},clone:{"!type":"fn() -> +TONG.Box2","!doc":"Returns a copy of this box."},equals:{"!type":"fn(box: +TONG.Box2) -> bool","!doc":"Returns true if this box and *box* share the same lower and upper bounds."},expandByVector:{"!type":"fn(vector: +TONG.Vector2) -> +TONG.Box2","!doc":"Expands this box equilaterally by *vector*. The width of this box will be\n\t\texpanded by the x component of *vector* in both directions. The height of \n\t\tthis box will be expanded by the y component of *vector* in both directions."},copy:{"!type":"fn(box: +TONG.Box2) -> +TONG.Box2","!doc":"Copies the values of *box* to this box."},makeEmpty:{"!type":"fn() -> +TONG.Box2","!doc":"Makes this box empty."},center:{"!type":"fn(optionalTarget: +TONG.Vector2) -> +TONG.Vector2","!doc":"Returns the center point of this box."},distanceToPoint:{"!type":"fn(point: +TONG.Vector2) -> number","!doc":"Returns the distance from any edge of this box to the specified point. <br>\n\t\tIf the point lies inside of this box, the distance will be 0."},containsPoint:{"!type":"fn(point: +TONG.Vector2) -> bool","!doc":"Returns true if the specified point lies within the boundaries of this box."},setFromCenterAndSize:{"!type":"fn(center: +TONG.Vector2, size: +TONG.Vector2) -> +TONG.Box2","!doc":"Centers this box on *center* and sets this box's width and height to the values specified\n\t\tin *size*."}},"!doc":"Represents a boundary box in 2D space.","!type":"fn(min: +TONG.Vector2, max: +TONG.Vector2)"},Box3:{"!url":"http://tongjs.org/docs/#Reference/math/Box3",prototype:{min:{"!type":"+TONG.Vector3","!doc":"Lower (x, y, z) boundary of this box."},max:{"!type":"+TONG.Vector3","!doc":"Upper (x, y, z) boundary of this box."},set:{"!type":"fn(min: +TONG.Vector3, max: +TONG.Vector3) -> +TONG.Box3","!doc":"Sets the lower and upper (x, y, z) boundaries of this box."},applyMatrix4:{"!type":"fn(matrix: +TONG.Matrix4) -> +TONG.Box3","!doc":"Transforms this Box3 with the supplied matrix."},clampPoint:{"!type":"fn(point: +TONG.Vector3, optionalTarget: +TONG.Vector3) -> +TONG.Vector3","!doc":"Clamps *point* within the bounds of this box."},isIntersectionBox:{"!type":"fn(box: +TONG.Box3) -> bool","!doc":"Determines whether or not this box intersects *box*."},setFromPoints:{"!type":"fn(points: []) -> +TONG.Box3","!doc":"Sets the upper and lower bounds of this box to include all of the points in *points*."},setFromObject:{"!type":"fn(object: +TONG.Object3D) -> +TONG.Box3","!doc":"Computes the world-axis-aligned bounding box of an object (including its children),\n\t\taccounting for both the object's, and childrens', world transforms"},size:{"!type":"fn(optionalTarget: +TONG.Vector3) -> +TONG.Vector3","!doc":"Returns the width, height, and depth of this box."},union:{"!type":"fn(box: +TONG.Box3) -> +TONG.Box3","!doc":"Unions this box with *box* setting the upper bound of this box to the greater of the \n\t\ttwo boxes' upper bounds and the lower bound of this box to the lesser of the two boxes'\n\t\tlower bounds."},getParameter:{"!type":"fn(point: +TONG.Vector3, optionalTarget: +TONG.Vector3) -> +TONG.Vector3","!doc":"Returns point as a proportion of this box's width and height."},intersect:{"!type":"fn(box: +TONG.Box3) -> +TONG.Box3","!doc":"Returns the intersection of this and *box*, setting the upper bound of this box to the lesser <br>\n\t\tof the two boxes' upper bounds and the lower bound of this box to the greater of the two boxes' <br>\n\t\tlower bounds."},containsBox:{"!type":"fn(box: +TONG.Box3) -> bool","!doc":"Returns true if this box includes the entirety of *box*. If this and *box* overlap exactly,<br>\n\t\tthis function also returns true."},containsPoint:{"!type":"fn(point: +TONG.Vector3) -> bool","!doc":"Returns true if the specified point lies within the boundaries of this box."},translate:{"!type":"fn(offset: +TONG.Vector3) -> +TONG.Box3","!doc":"Adds *offset* to both the upper and lower bounds of this box, effectively moving this box <br>\n\t\t*offset* units in 3D space."},empty:{"!type":"fn() -> bool","!doc":"Returns true if this box includes zero points within its bounds.<br>\n\t\tNote that a box with equal lower and upper bounds still includes one point, the\n\t\tone both bounds share."},clone:{"!type":"fn() -> +TONG.Box3","!doc":"Returns a copy of this box."},equals:{"!type":"fn(box: +TONG.Box3) -> bool","!doc":"Returns true if this box and *box* share the same lower and upper bounds."},expandByPoint:{"!type":"fn(point: +TONG.Vector3) -> +TONG.Box3","!doc":"Expands the boundaries of this box to include *point*."},expandByScalar:{"!type":"fn(scalar: float) -> +TONG.Box3","!doc":"Expands each dimension of the box by *scalar*. If negative, the dimensions of the box <br>\n\t\twill be contracted."},expandByVector:{"!type":"fn(vector: +TONG.Vector3) -> +TONG.Box3","!doc":"Expands this box equilaterally by *vector*. The width of this box will be\n\t\texpanded by the x component of *vector* in both directions. The height of \n\t\tthis box will be expanded by the y component of *vector* in both directions.\n\t\tThe depth of this box will be expanded by the z component of *vector* in\n\t\tboth directions."},copy:{"!type":"fn(box: +TONG.Box3) -> +TONG.Box3","!doc":"Copies the values of *box* to this box."},makeEmpty:{"!type":"fn() -> +TONG.Box3","!doc":"Makes this box empty."},center:{"!type":"fn(optionalTarget: +TONG.Vector3) -> +TONG.Vector3","!doc":"Returns the center point of this box."},getBoundingSphere:{"!type":"fn(optionalTarget: +TONG.Sphere) -> +TONG.Sphere","!doc":"Gets a sphere that bounds the box."},distanceToPoint:{"!type":"fn(point: +TONG.Vector3) -> number","!doc":"Returns the distance from any edge of this box to the specified point. <br>\n\t\tIf the point lies inside of this box, the distance will be 0."},setFromCenterAndSize:{"!type":"fn(center: +TONG.Vector3, size: +TONG.Vector3) -> +TONG.Box3","!doc":"Centers this box on *center* and sets this box's width and height to the values specified\n\t\tin *size*."}},"!doc":"Represents a boundary box in 3d space.","!type":"fn(min: +TONG.Vector3, max: +TONG.Vector3)"},Color:{"!url":"http://tongjs.org/docs/#Reference/math/Color",prototype:{r:{"!type":"number","!doc":"Red channel value between 0 and 1. Default is 1."},g:{"!type":"number","!doc":"Green channel value between 0 and 1. Default is 1."},b:{"!type":"number","!doc":"Blue channel value between 0 and 1. Default is 1."},copy:{"!type":"fn(color: +TONG.Color) -> +TONG.Color","!doc":"Copies given color."},copyGammaToLinear:{"!type":"fn(color: +TONG.Color) -> +TONG.Color","!doc":"Copies given color making conversion from gamma to linear space."},copyLinearToGamma:{"!type":"fn(color: +TONG.Color) -> +TONG.Color","!doc":"Copies given color making conversion from linear to gamma space."},convertGammaToLinear:{"!type":"fn() -> +TONG.Color","!doc":"Converts this color from gamma to linear space."},convertLinearToGamma:{"!type":"fn() -> +TONG.Color","!doc":"Converts this color from linear to gamma space."},setRGB:{"!type":"fn(r: number, g: number, b: number) -> +TONG.Color","!doc":"Sets this color from RGB values."},getHex:{"!type":"fn() -> number","!doc":"Returns the hexadecimal value of this color."},getHexString:{"!type":"fn() -> string","!doc":"Returns the string formated hexadecimal value of this color."},setHex:{"!type":"fn(hex: number) -> +TONG.Color","!doc":"Sets this color from a hexadecimal value."},setStyle:{"!type":"fn(style: string) -> +TONG.Color","!doc":"Sets this color\tfrom a CSS-style string."},getStyle:{"!type":"fn() -> string","!doc":"Returns the value of this color as a CSS-style string. Example: rgb(255,0,0)"},setHSL:{"!type":"fn(h: number, s: number, l: number) -> +TONG.Color","!doc":"Sets color from hsl"},offsetHSL:{"!type":"fn(h: number, s: number, l: number) -> +TONG.Color","!doc":"Adds given h, s, and l to this color's existing h, s, and l values."},add:{"!type":"fn(color: +TONG.Color) -> +TONG.Color","!doc":"Adds rgb values of given color to rgb values of this color"},addColors:{"!type":"fn(color1: +TONG.Color, color2: +TONG.Color) -> +TONG.Color","!doc":"Sets this color to the sum of color1 and color2"},addScalar:{"!type":"fn(s: number) -> +TONG.Color","!doc":"Adds s to the rgb values of this color"},multiply:{"!type":"fn(color: +TONG.Color) -> +TONG.Color","!doc":"Multiplies this color's rgb values by given color's rgb values"},multiplyScalar:{"!type":"fn(s: number) -> +TONG.Color","!doc":"Multiplies this color's rgb values by s"},lerp:{"!type":"fn(color: +TONG.Color, alpha) -> +TONG.Color","!doc":"Linear interpolation of this colors rgb values and the rgb values of the first argument. The alpha argument can be thought of as the percent between the two colors, where 0 is this color and 1 is the first argument."},toArray:{"!type":"fn(array: []) -> []","!doc":"Returns an array [r,g,b]"},equals:{"!type":"fn(c: +TONG.Color) -> +TONG.Color","!doc":"Compares this color and c and returns true if they are the same, false otherwise."},clone:{"!type":"fn() -> +TONG.Color","!doc":"Clones this color."},set:{"!type":"fn(value) -> +TONG.Color","!doc":"Delegates to .copy, .setStyle, or .setHex depending on input type."}},"!doc":"Represents a color.","!type":"fn(value)"},Euler:{"!url":"http://tongjs.org/docs/#Reference/math/Euler",prototype:{x:"number",y:"number",z:"number",order:"string",set:{"!type":"fn(x: number, y: number, z: number, order: string) -> +TONG.Euler","!doc":"Sets the angles of this euler transform."},copy:{"!type":"fn(euler: +TONG.Euler) -> +TONG.Euler","!doc":"Copies value of *euler* to this euler."},setFromRotationMatrix:{"!type":"fn(m: +TONG.Matrix4, order: string) -> +TONG.Euler","!doc":"Sets the angles of this euler transform from a pure rotation matrix based on the orientation specified by order."},setFromQuaternion:{"!type":"fn(q: +TONG.Quaternion, order: string) -> +TONG.Euler","!doc":"Sets the angles of this euler transform from a normalized quaternion based on the orientation specified by order."},reorder:{"!type":"fn(newOrder: string) -> +TONG.Euler","!doc":"Resets the euler angle with a new order by creating a quaternion from this euler angle and then setting this euler angle with the quaternion and the new order. <br>\n\t\tWARNING: this discards revolution information."},setFromVector3:{"!type":"fn(vector: +TONG.Vector3, order: string) -> +TONG.Euler","!doc":"Optionally Vector3 to the XYZ parameters of Euler, and order to the Euler's order property."},toVector3:{"!type":"fn() -> +TONG.Vector3","!doc":"Returns the Euler's XYZ properties as a Vector3."},fromArray:{"!type":"fn(array: []) -> +TONG.Euler","!doc":"Assigns this euler's x angle to array[0]. <br>\n\t\tAssigns this euler's y angle to array[1]. <br>\n\t\tAssigns this euler's z angle to array[2]. <br>\n\t\tOptionally assigns this euler's order to array[3]."},toArray:{"!type":"fn(array: []) -> []","!doc":"Returns an array [x, y, z, order]"},equals:{"!type":"fn(euler: +TONG.Euler) -> bool","!doc":"Checks for strict equality of this euler and *euler*."},clone:{"!type":"fn() -> +TONG.Euler","!doc":"Returns a new euler created from this euler."}},"!doc":'Euler Angles. <br><br>\n\n\t\tEuler angles describe a rotation transformation by rotating an object on its various axes in specified amounts per axis, and a specified axis order.\n\t\t(More information on <a href="http://en.wikipedia.org/wiki/Euler_angles" target="blank">Wikipedia</a>)',"!type":"fn(x: number, y: number, z: number, order: string)"},Frustum:{"!url":"http://tongjs.org/docs/#Reference/math/Frustum",prototype:{planes:{"!type":"[]","!doc":"Array of 6 [page:Plane planes]."},setFromMatrix:{"!type":"fn(matrix: +TONG.Matrix4) -> +TONG.Frustum","!doc":"Array of 6 [page:Plane planes]."},intersectsObject:{"!type":"fn(object: +TONG.Object3D) -> bool","!doc":"Checks whether the object's bounding sphere is intersecting the Frustum."},clone:{"!type":"fn() -> +TONG.Frustum","!doc":"Return a copy of this Frustum"},set:{"!type":"fn(p0: +TONG.Plane, p1: +TONG.Plane, p2: +TONG.Plane, p3: +TONG.Plane, p4: +TONG.Plane, p5: +TONG.Plane) -> bool","!doc":"Sets the current frustum from the passed planes. No plane order is implicitely implied."},copy:{"!type":"fn(frustum: +TONG.Frustum) -> +TONG.Frustum","!doc":"Copies the values of the passed frustum."},containsPoint:{"!type":"fn(point: +TONG.Vector3) -> bool","!doc":"Checks to see if the frustum contains the point."},intersectsSphere:{"!type":"fn(sphere: +TONG.Sphere) -> bool","!doc":"Check to see if the sphere intersects with the frustum."}},"!doc":'<a href="http://en.wikipedia.org/wiki/Frustum">Frustums</a> are used to determine what is inside the camera\'s field of view. They help speed up the rendering process.',"!type":"fn(p0: +TONG.Plane, p1: +TONG.Plane, p2: +TONG.Plane, p3: +TONG.Plane, p4: +TONG.Plane, p5: +TONG.Plane)"},Line3:{"!url":"http://tongjs.org/docs/#Reference/math/Line3",prototype:{start:"+TONG.Vector3",end:"+TONG.Vector3",set:{"!type":"fn(start: +TONG.Vector3, end: +TONG.Vector3) -> +TONG.Line3","!doc":"Sets the start and end values by copying the provided vectors."},copy:{"!type":"fn(line: +TONG.Line3) -> +TONG.Line3","!doc":"Copies the passed line's start and end vectors to this line."},clone:{"!type":"fn() -> +TONG.Line3","!doc":"Return a new copy of this [page:Line3]."},equals:{"!type":"fn(line: +TONG.Line3) -> bool","!doc":"<h3>[method:Float distance]()</h3>\n\t\t<div>\n\t\tReturns the length of the line segment.\n\t\t</div>\n\t\tReturns true if both line's start and end points are equal."},distance:{"!type":"fn() -> number","!doc":"Returns the length of the line segment."},distanceSq:{"!type":"fn() -> number","!doc":"Returns the line segment's length squared."},applyMatrix4:{"!type":"fn(matrix: +TONG.Matrix4) -> +TONG.Line3","!doc":"Apply a matrix transform to the line segment."},at:{"!type":"fn(t: number, optionalTarget: +TONG.Vector3) -> Vector","!doc":"Return a vector at a certain position along the line. When t = 0, it returns the start vector, and when t=1 it returns the end vector."},center:{"!type":"fn(optionalTarget: +TONG.Vector3) -> +TONG.Vector3","!doc":"Return the center of the line segment."},delta:{"!type":"fn(optionalTarget: +TONG.Vector3) -> +TONG.Vector3","!doc":"Returns the delta vector of the line segment, or the end vector minus the start vector."},closestPointToPoint:{"!type":"fn(point: +TONG.Vector3, clampToLine: bool, optionalTarget: +TONG.Vector3) -> +TONG.Vector3","!doc":"Returns the closets point on the line. If clamp to line is true, then the returned value will be clamped to the line segment."},closestPointToPointParameter:{"!type":"fn(point: +TONG.Vector3, clampToLine: bool) -> number","!doc":"Returns a point parameter based on the closest point as projected on the line segement. If clamp to line is true, then the returned value will be between 0 and 1."}},"!doc":"A geometric line segment represented by a start and end point.","!type":"fn(start: +TONG.Vector3, end: +TONG.Vector3)"},Math:{"!url":"http://tongjs.org/docs/#Reference/math/Math",prototype:{clamp:{"!type":"fn(x: number, a: number, b: number) -> number","!doc":"Clamps the *x* to be between *a* and *b*."},clampBottom:{"!type":"fn(x: number, a: number) -> number","!doc":"Clamps the *x* to be larger than *a*."},mapLinear:{"!type":"fn(x: number, a1: number, a2: number, b1: number, b2: number) -> number","!doc":"Linear mapping of *x* from range [*a1*, *a2*] to range [*b1*, *b2*]."},random16:{"!type":"fn() -> number","!doc":"Random float from 0 to 1 with 16 bits of randomness.<br>\n\t\tStandard Math.random() creates repetitive patterns when applied over larger space."},randInt:{"!type":"fn(low: number, high: number) -> number","!doc":"Random integer from *low* to *high* interval."},randFloat:{"!type":"fn(low: number, high: number) -> number","!doc":"Random float from *low* to *high* interval."},randFloatSpread:{"!type":"fn(range: number) -> number","!doc":"Random float from *- range / 2* to *range / 2* interval."},sign:{"!type":"fn(x: number) -> number","!doc":"Returns -1 if *x* is less than 0, 1 if *x* is greater than 0, and 0 if *x* is zero."},degToRad:{"!type":"fn(degrees: number) -> number","!doc":"Converts degrees to radians."},radToDeg:{"!type":"fn(radians: number) -> number","!doc":"Converts radians to degrees"},smoothstep:{"!type":"fn(x: number, min: number, max: number) -> number","!doc":"Returns a value between 0-1 that represents the percentage that x has moved between min and max, but smoothed or slowed down the closer X is to the min and max.<br><br>\n\t\t\n\t\t[link:http://en.wikipedia.org/wiki/Smoothstep Wikipedia]"},smootherstep:{"!type":"fn(x: number, min: number, max: number) -> number","!doc":"Returns a value between 0-1. It works the same as smoothstep, but more smooth."}},"!doc":"Math utility functions"},Matrix3:{"!url":"http://tongjs.org/docs/#Reference/math/Matrix3",prototype:{elements:{"!type":"Float32Array","!doc":"Float32Array with column-major matrix values."},transpose:{"!type":"fn() -> +TONG.Matrix3","!doc":"Transposes this matrix in place."},transposeIntoArray:{"!type":"fn(array: []) -> +TONG.Matrix3","!doc":"Transposes this matrix into the supplied array, and returns itself."},determinant:{"!type":"fn() -> number","!doc":"Returns the matrix's determinant."},set:{"!type":"fn(n11: number, n12: number, n13: number, n21: number, n22: number, n23: number, n31: number, n32: number, n33: number) -> +TONG.Matrix3","!doc":"Set the 3x3 matrix values to the given row-major sequence of values."},multiplyScalar:{"!type":"fn(scalar: number) -> +TONG.Matrix3","!doc":"Multiply every component of the matrix by a scalar value."},applyToBufferAttribute:{"!type":"fn(attribute: []) -> +TONG.BufferAttribute","!doc":"Multiply (apply) this matrix to every vector3 in the attribute."},getNormalMatrix:{"!type":"fn(matrix4: +TONG.Matrix4) -> +TONG.Matrix3","!doc":"Set this matrix as the normal matrix of the passed [page:Matrix4 matrix4]. The normal matrix is the inverse transpose of the matrix."},getInverse:{"!type":"fn(matrix4: +TONG.Matrix4, throwOnInvertible: bool) -> +TONG.Matrix3","!doc":"Set this matrix to the inverse of the passed matrix."},copy:{"!type":"fn(matrix: +TONG.Matrix3) -> +TONG.Matrix3","!doc":"Copy the values of the passed matrix."},clone:{"!type":"fn() -> +TONG.Matrix3","!doc":"Create a copy of the matrix."},identity:{"!type":"fn() -> +TONG.Matrix3","!doc":"Set as an identity matrix.<br><br>\n\t\t\n\t\t1, 0, 0<br>\n\t\t0, 1, 0<br>\n\t\t0, 0, 1<br>"}},"!doc":"A 3x3 matrix.","!type":"fn(n11: number, n12: number, n13: number, n21: number, n22: number, n23: number, n31: number, n32: number, n33: number)"},Matrix4:{"!url":"http://tongjs.org/docs/#Reference/math/Matrix4",prototype:{elements:{"!type":"Float32Array","!doc":"A column-major list of matrix values."},set:{"!type":"fn(n11: number, n12: number, n13: number, n14: number, n21: number, n22: number, n23: number, n24: number, n31: number, n32: number, n33: number, n34: number, n41: number, n42: number, n43: number, n44: number) -> +TONG.Matrix4","!doc":"Sets all fields of this matrix to the supplied row-major values n11..n44."},identity:{"!type":"fn() -> +TONG.Matrix4","!doc":"Resets this matrix to identity."},copy:{"!type":"fn(m: +TONG.Matrix4) -> +TONG.Matrix4","!doc":"Copies a matrix *m* into this matrix."},copyPosition:{"!type":"fn(m: +TONG.Matrix4) -> +TONG.Matrix4","!doc":"Copies the translation component of the supplied matrix *m* into this matrix translation component."},makeBasis:{"!type":"fn(xAxis: +TONG.Vector3, zAxis: +TONG.Vector3, zAxis: +TONG.Vector3) -> +TONG.Matrix4","!doc":"Creates the basis matrix consisting of the TONG provided axis vectors.  Returns the current matrix."},extractBasis:{"!type":"fn(xAxis: +TONG.Vector3, zAxis: +TONG.Vector3, zAxis: +TONG.Vector3) -> +TONG.Matrix4","!doc":"Extracts basis of into the TONG axis vectors provided.  Returns the current matrix."},extractRotation:{"!type":"fn(m: +TONG.Matrix4) -> +TONG.Matrix4","!doc":"Extracts the rotation of the supplied matrix *m* into this matrix rotation component."},lookAt:{"!type":"fn(eye: +TONG.Vector3, center: +TONG.Vector3, up: +TONG.Vector3) -> +TONG.Matrix4","!doc":"Constructs a rotation matrix, looking from *eye* towards *center* with defined *up* vector."},multiply:{"!type":"fn(m: +TONG.Matrix4) -> +TONG.Matrix4","!doc":"Multiplies this matrix by *m*."},multiplyMatrices:{"!type":"fn(a: +TONG.Matrix4, b: +TONG.Matrix4) -> +TONG.Matrix4","!doc":"Sets this matrix to *a x b*."},multiplyScalar:{"!type":"fn(s: number) -> +TONG.Matrix4","!doc":"Multiplies this matrix by *s*."},determinant:{"!type":"fn() -> number","!doc":"Computes determinant of this matrix.<br>\n\t\tBased on [link:http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm]"},transpose:{"!type":"fn() -> +TONG.Matrix4","!doc":"Transposes this matrix."},flattenToArrayOffset:{"!type":"fn(flat: [], offset: number) -> []","!doc":"Flattens this matrix into supplied *flat* array starting from *offset* position in the array."},setPosition:{"!type":"fn(v: +TONG.Vector3) -> +TONG.Matrix4","!doc":"Sets the position component for this matrix from vector *v*."},getInverse:{"!type":"fn(m: +TONG.Matrix4) -> +TONG.Matrix4","!doc":"Sets this matrix to the inverse of matrix *m*.<br>\n\t\tBased on [link:http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm]."},makeRotationFromEuler:{"!type":"fn(euler: +TONG.Euler) -> +TONG.Matrix4","!doc":'Sets the rotation submatrix of this matrix to the rotation specified by Euler angles, the rest of the matrix is identity.<br>\n\t\tDefault order is *"XYZ"*.'},makeRotationFromQuaternion:{"!type":"fn(q: +TONG.Quaternion) -> +TONG.Matrix4","!doc":"Sets the rotation submatrix of this matrix to the rotation specified by *q*. The rest of the matrix is identity."},scale:{"!type":"fn(v: +TONG.Vector3) -> +TONG.Matrix4","!doc":"Multiplies the columns of this matrix by vector *v*."},compose:{"!type":"fn(translation: +TONG.Vector3, quaternion: +TONG.Quaternion, scale: +TONG.Vector3) -> +TONG.Matrix4","!doc":"Sets this matrix to the transformation composed of *translation*, *quaternion* and *scale*."},decompose:{"!type":"fn(translation: +TONG.Vector3, quaternion: +TONG.Quaternion, scale: +TONG.Vector3) -> []","!doc":"Decomposes this matrix into the *translation*, *quaternion* and *scale* components."},makeTranslation:{"!type":"fn(x: number, y: number, z: number) -> +TONG.Matrix4","!doc":"Sets this matrix as translation transform."},makeRotationX:{"!type":"fn(theta: number) -> +TONG.Matrix4","!doc":"Sets this matrix as rotation transform around x axis by *theta* radians."},makeRotationY:{"!type":"fn(theta: number) -> +TONG.Matrix4","!doc":"Sets this matrix as rotation transform around y axis by *theta* radians."},makeRotationZ:{"!type":"fn(theta: number) -> +TONG.Matrix4","!doc":"Sets this matrix as rotation transform around z axis by *theta* radians."},makeRotationAxis:{"!type":"fn(axis: +TONG.Vector3, theta: number) -> +TONG.Matrix4","!doc":"Sets this matrix as rotation transform around *axis* by *angle* radians.<br>\n\t\tBased on [link:http://www.gamedev.net/reference/articles/article1199.asp]."},makeScale:{"!type":"fn(x: number, y: number, z: number) -> +TONG.Matrix4","!doc":"Sets this matrix as scale transform."},makePerspective:{"!type":"fn(left: number, right: number, top: number, bottom: number, near: number, far: number) -> +TONG.Matrix4","!doc":"Creates a perspective projection matrix."},makeOrthographic:{"!type":"fn(left: number, right: number, top: number, bottom: number, near: number, far: number) -> +TONG.Matrix4","!doc":"Creates an orthographic projection matrix."},clone:{"!type":"fn() -> +TONG.Matrix4","!doc":"Clones this matrix."},applyToBufferAttribute:{"!type":"fn(attribute: []) -> +TONG.BufferAttribute","!doc":"Multiply (apply) this matrix to every vector3 in the attribute."},getMaxScaleOnAxis:{"!type":"fn() -> number","!doc":"Gets the max scale value of the 3 axes."}},"!doc":"A 4x4 Matrix.","!type":"fn(n11: number, n12: number, n13: number, n14: number, n21: number, n22: number, n23: number, n24: number, n31: number, n32: number, n33: number, n34: number, n41: number, n42: number, n43: number, n44: number)"},Plane:{"!url":"http://tongjs.org/docs/#Reference/math/Plane",prototype:{normal:"+TONG.Vector3",constant:"number",normalize:{"!type":"fn() -> +TONG.Plane","!doc":"Normalizes the normal vector, and adjusts the constant value accordingly."},set:{"!type":"fn(normal: +TONG.Vector3, constant: number) -> +TONG.Plane","!doc":"Sets the plane's values."},copy:{"!type":"fn(plane: +TONG.Plane) -> +TONG.Plane","!doc":"Copies the values of the passed plane to this plane."},applyMatrix4:{"!type":"fn(matrix: +TONG.Matrix4, optionalNormalMatrix: +TONG.Matrix3) -> +TONG.Plane","!doc":"Apply a Matrix4 to the plane. The second parameter is optional.\n\t\t\n\t\t<code>\n\t\tvar optionalNormalMatrix = new TONG.Matrix3().getNormalMatrix( matrix ) \n\t\t</code>"},orthoPoint:{"!type":"fn(point: +TONG.Vector3, optionalTarget: +TONG.Vector3) -> +TONG.Vector3","!doc":"Returns a vector in the same direction as the Plane's normal, but the magnitude is passed point's original distance to the plane."},isIntersectionLine:{"!type":"fn(line: +TONG.Line3) -> bool","!doc":"Tests whether a line segment intersects with the plane. (Do not mistake this for a collinear check.)"},intersectLine:{"!type":"fn(line: +TONG.Line3, optionalTarget: +TONG.Vector3) -> +TONG.Vector3","!doc":"Returns the intersection point of the passed line and the plane. Returns undefined if the line does not intersect. Returns the line's starting point if the line is coplanar with the plane."},setFromNormalAndCoplanarPoint:{"!type":"fn(normal: +TONG.Vector3, point: +TONG.Vector3) -> +TONG.Vector3","!doc":"Sets the plane's values as defined by a normal and arbitrary coplanar point."},clone:{"!type":"fn() -> +TONG.Plane","!doc":"Returns a new copy of this plane."},distanceToPoint:{"!type":"fn(point: +TONG.Vector3) -> number","!doc":"Returns the smallest distance from the point to the plane."},equals:{"!type":"fn(plane: +TONG.Plane) -> bool","!doc":"Checks to see if two planes are equal (their normals and constants match)"},setComponents:{"!type":"fn(x: number, y: number, z: number, w: number) -> +TONG.Plane","!doc":"Set the individual components that make up the plane."},distanceToSphere:{"!type":"fn(sphere: +TONG.Sphere) -> number","!doc":"Returns the smallest distance from an edge of the sphere to the plane."},setFromCoplanarPoints:{"!type":"fn(a: +TONG.Vector3, b: +TONG.Vector3, c: +TONG.Vector3) -> +TONG.Plane","!doc":"Defines the plane based on the 3 provided points. The winding order is counter clockwise, and determines which direction the normal will point."},projectPoint:{"!type":"fn(point: +TONG.Vector3, optionalTarget: +TONG.Vector3) -> +TONG.Vector3","!doc":"Projects a point onto the plane. The projected point is the closest point on the plane to the passed point, so a line drawn from the projected point and the passed point would be orthogonal to the plane."},negate:{"!type":"fn() -> +TONG.Plane","!doc":"Negates both the normal vector and constant, effectively mirroring the plane across the origin."},translate:{"!type":"fn(offset: +TONG.Vector3) -> +TONG.Plane","!doc":"Translates the plane the distance defined by the vector. Note that this only affects the constant (distance from origin) and will not affect the normal vector."},coplanarPoint:{"!type":"fn(optionalTarget: +TONG.Vector3) -> +TONG.Vector3","!doc":"Returns a coplanar point. (The projection of the normal vector at the origin onto the plane.)"}},"!doc":"A two dimensional surface that extends infinitely in 3d space.","!type":"fn(normal: +TONG.Vector3, constant: number)"},Quaternion:{"!url":"http://tongjs.org/docs/#Reference/math/Quaternion",prototype:{x:"number",y:"number",z:"number",w:"number",set:{"!type":"fn(x: number, y: number, z: number, w: number) -> +TONG.Quaternion","!doc":"Sets values of this quaternion."},copy:{"!type":"fn(q: +TONG.Quaternion) -> +TONG.Quaternion","!doc":"Copies values of *q* to this quaternion."},setFromEuler:{"!type":"fn(euler: +TONG.Euler) -> +TONG.Quaternion","!doc":"Sets this quaternion from rotation specified by Euler angle."},setFromAxisAngle:{"!type":"fn(axis: +TONG.Vector3, angle: number) -> +TONG.Quaternion","!doc":"Sets this quaternion from rotation specified by axis and angle.<br>\n\t\tAdapted from [link:http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm].<br>\n\t\t*Axis* is asumed to be normalized, *angle* is in radians."},setFromRotationMatrix:{"!type":"fn(m: +TONG.Matrix4) -> +TONG.Quaternion","!doc":"Sets this quaternion from rotation component of *m*.<br>\n\t\tAdapted from [link:http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm]."},setFromUnitVectors:{"!type":"fn(vFrom: +TONG.Vector3, vTo: +TONG.Vector3) -> +TONG.Quaternion","!doc":"Sets this quaternion to the rotation required to rotate direction vector *vFrom* to direction vector *vTo*.<br>\n\t\tAdapted from [link:http://lolengine.net/blog/2013/09/18/beautiful-maths-quaternion-from-vectors].<br>\n\t\t*vFrom* and *vTo* are assumed to be normalized."},inverse:{"!type":"fn() -> +TONG.Quaternion","!doc":"Inverts this quaternion."},length:{"!type":"fn() -> number","!doc":"Computes length of this quaternion."},normalize:{"!type":"fn() -> +TONG.Quaternion","!doc":"Normalizes this quaternion."},multiply:{"!type":"fn(b: +TONG.Quaternion) -> +TONG.Quaternion","!doc":"Multiplies this quaternion by *b*."},multiplyQuaternions:{"!type":"fn(a: +TONG.Quaternion, b: +TONG.Quaternion) -> +TONG.Quaternion","!doc":"Sets this quaternion to *a x b*<br>\n\t\tAdapted from [link:http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm]."},multiplyVector3:{"!type":"fn(vector: +TONG.Vector3, dest: +TONG.Vector3) -> +TONG.Quaternion","!doc":"Rotates *vector* by this quaternion into *dest*.<br>\n\t\tIf *dest* is not specified, result goes to *vec*."},clone:{"!type":"fn() -> +TONG.Quaternion","!doc":"Clones this quaternion."},slerp:{"!type":"fn(qb: +TONG.Quaternion, t: float) -> +TONG.Quaternion","!doc":"Handles the spherical linear interpolation between this quaternion's configuration\n\t\tand that of *qb*. *t* represents how close to the current (0) or target (1) rotation the\n\t\tresult should be."},toArray:{"!type":"fn(array: []) -> []","!doc":"Returns the numerical elements of this quaternion in an array of format (x, y, z, w)."},equals:{"!type":"fn(v: +TONG.Quaternion) -> bool","!doc":"Compares each component of *v* to each component of this quaternion to determine if they\n\t\trepresent the same rotation."},lengthSq:{"!type":"fn() -> number","!doc":"Calculates the squared length of the quaternion."},fromArray:{"!type":"fn(array: []) -> +TONG.Quaternion","!doc":"Sets this quaternion's component values from an array."},conjugate:{"!type":"fn() -> +TONG.Quaternion","!doc":"Returns the rotational conjugate of this quaternion. The conjugate of a quaternion\n\t\trepresents the same rotation in the opposite direction about the rotational axis."}},"!doc":'Implementation of a <a href="http://en.wikipedia.org/wiki/Quaternion">quaternion</a>. This is used for rotating things without encountering the dreaded <a href="http://en.wikipedia.org/wiki/Gimbal_lock">gimbal lock</a> issue, amongst other advantages.',"!type":"fn(x: number, y: number, z: number, w: number)"},Ray:{"!url":"http://tongjs.org/docs/#Reference/math/Ray",prototype:{origin:{"!type":"+TONG.Vector3","!doc":"The origin of the [page:Ray]."},direction:{"!type":"+TONG.Vector3","!doc":"The direction of the [page:Ray]. This must be normalized (with [page:Vector3].normalize) for the methods to operate properly."},applyMatrix4:{"!type":"fn(matrix4: +TONG.Matrix4) -> +TONG.Ray","!doc":"Transform this [page:Ray] by the [page:Matrix4]."},clone:{"!type":"fn() -> +TONG.Ray","!doc":"Create a clone of this [page:Ray]."},closestPointToPoint:{"!type":"fn(point: +TONG.Vector3, optionalTarget: +TONG.Vector3) -> +TONG.Vector3","!doc":"Get the point along this [page:Ray] that is closest to the [page:Vector3] provided."},copy:{"!type":"fn(ray: +TONG.Ray) -> +TONG.Ray","!doc":"Copy the properties of the provided [page:Ray], then return this [page:Ray]."},distanceToPlane:{"!type":"fn(plane: +TONG.Plane) -> number","!doc":"Get the distance from the origin to the [page:Plane], or *null* if the [page:Ray] doesn't intersect the [page:Plane]."},distanceToPoint:{"!type":"fn(point: +TONG.Vector3) -> number","!doc":"Get the distance of the closest approach between the [page:Ray] and the [page:Vector3]."},equals:{"!type":"fn(ray: +TONG.Ray) -> bool","!doc":"Return whether this and the other [page:Ray] have equal offsets and directions."},isIntersectionBox:{"!type":"fn(box: +TONG.Box3) -> bool","!doc":"Return whether or not this [page:Ray] intersects with the [page:Box3]."},isIntersectionPlane:{"!type":"fn(plane: +TONG.Plane) -> bool","!doc":"Return whether or not this [page:Ray] intersects with the [page:Plane]."},isIntersectionSphere:{"!type":"fn(sphere: +TONG.Sphere) -> bool","!doc":"Return whether or not this [page:Ray] intersects with the [page:Sphere]."},recast:{"!type":"fn(t: number) -> +TONG.Ray","!doc":"Shift the origin of this [page:Ray] along its direction by the distance given."},set:{"!type":"fn(origin: +TONG.Vector3, direction: +TONG.Vector3) -> +TONG.Ray","!doc":"Copy the parameters to the origin and direction properties."}},"!doc":"A ray that emits from an origin in a certain direction.","!type":"fn(origin: +TONG.Vector3, direction: +TONG.Vector3)"},Sphere:{"!url":"http://tongjs.org/docs/#Reference/math/Sphere",prototype:{center:"+TONG.Vector3",radius:"number",applyMatrix4:{"!type":"fn(matrix: +TONG.Matrix4) -> +TONG.Sphere","!doc":"Transforms this sphere with the provided [page:Matrix4]."},clampPoint:{"!type":"fn(point: +TONG.Vector3, optionalTarget: +TONG.Vector3) -> +TONG.Vector3","!doc":"Clamps a point within the sphere. If the point is is outside the sphere, it will clamp it to the closets point on the edge of the sphere."},translate:{"!type":"fn(offset: +TONG.Vector3) -> +TONG.Sphere","!doc":"Translate the sphere's center by the provided offset vector."},clone:{"!type":"fn() -> +TONG.Sphere","!doc":"Provides a new copy of the sphere."},equals:{"!type":"fn(sphere: +TONG.Sphere) -> bool","!doc":"Checks to see if the two spheres' centers and radii are equal."},setFromPoints:{"!type":"fn(points: [], optionalCenter: +TONG.Vector3) -> +TONG.Sphere","!doc":"Computes the minimum bounding sphere for *points*. If *optionalCenter* is given, it is used as the sphere's center. Otherwise, the center of the axis-aligned bounding box encompassing *points* is calculated."},distanceToPoint:{"!type":"fn(point: +TONG.Vector3) -> number","!doc":"Returns the closest distance from the boundary of the sphere to the point. If the sphere contains the point, the distance will be negative."},getBoundingBox:{"!type":"fn(optionalTarget: Box) -> Box","!doc":"Returns a bounding box for the sphere, optionally setting a provided box target."},containsPoint:{"!type":"fn(point: +TONG.Vector3) -> bool","!doc":"Checks to see if the sphere contains the provided point inclusive of the edge of the sphere."},copy:{"!type":"fn(sphere: +TONG.Sphere) -> +TONG.Sphere","!doc":"Copies the values of the passed sphere to this sphere."},intersectsSphere:{"!type":"fn(sphere: +TONG.Sphere) -> bool","!doc":"Checks to see if two spheres intersect."},empty:{"!type":"fn() -> bool","!doc":"Checks to see if the sphere is empty (the radius set to 0)."}},"!doc":"A geometric sphere defined by a center position and radius.","!type":"fn(center: +TONG.Vector3, radius: number)"},Triangle:{"!url":"http://tongjs.org/docs/#Reference/math/Triangle",prototype:{a:{"!type":"+TONG.Vector3","!doc":"The first [page:Vector3] of the triangle."},b:{"!type":"+TONG.Vector3","!doc":"The second [page:Vector3] of the triangle."},c:{"!type":"+TONG.Vector3","!doc":"The third [page:Vector3] of the triangle."},setFromPointsAndIndices:{"!type":"fn(points: [], i0: number, i1: number, i2: number) -> +TONG.Triangle","!doc":"Sets the triangle's vectors to the vectors in the array."},set:{"!type":"fn(a: +TONG.Vector3, b: +TONG.Vector3, c: +TONG.Vector3) -> +TONG.Triangle","!doc":"Sets the triangle's vectors to the passed vectors."},normal:{"!type":"fn(optionalTarget: +TONG.Vector3) -> +TONG.Vector3","!doc":"Return the calculated normal of the triangle."},barycoordFromPoint:{"!type":"fn(point: +TONG.Vector3, optionalTarget: +TONG.Vector3) -> +TONG.Vector3","!doc":"Return a barycentric coordinate from the given vector. <br><br>\n\t\t[link:http://commons.wikimedia.org/wiki/File:Barycentric_coordinates_1.png](Picture of barycentric coordinates)"},clone:{"!type":"fn() -> +TONG.Triangle","!doc":"Return a new copy of this triangle."},area:{"!type":"fn() -> number","!doc":"Return the area of the triangle."},midpoint:{"!type":"fn(optionalTarget: +TONG.Vector3) -> +TONG.Vector3","!doc":"Return the midpoint of the triangle. Optionally sets a target vector."},equals:{"!type":"fn(triangle: +TONG.Triangle) -> bool","!doc":"Checks to see if two triangles are equal (share the same vectors)."},plane:{"!type":"fn(optionalTarget: +TONG.Plane) -> +TONG.Plane","!doc":"Return a [page:Plane plane] based on the triangle. Optionally sets a target plane."},containsPoint:{"!type":"fn(point: +TONG.Vector3) -> bool","!doc":"Checks to see if the passed vector is within the triangle."},copy:{"!type":"fn(triangle: +TONG.Triangle) -> +TONG.Triangle","!doc":"Copies the values of the vertices of the passed triangle to this triangle."}},"!doc":"A geometric triangle as defined by TONG vectors.","!type":"fn(a: +TONG.Vector3, b: +TONG.Vector3, c: +TONG.Vector3)"},Vector2:{"!url":"http://tongjs.org/docs/#Reference/math/Vector2",prototype:{x:"number",y:"number",set:{"!type":"fn(x: number, y: number) -> +TONG.Vector2","!doc":"Sets value of this vector."},copy:{"!type":"fn(v: +TONG.Vector2) -> +TONG.Vector2","!doc":"Copies value of *v* to this vector."},add:{"!type":"fn(v: +TONG.Vector2) -> +TONG.Vector2","!doc":"Adds *v* to this vector."},addVectors:{"!type":"fn(a: +TONG.Vector2, b: +TONG.Vector2) -> +TONG.Vector2","!doc":"Sets this vector to *a + b*."},sub:{"!type":"fn(v: +TONG.Vector2) -> +TONG.Vector2","!doc":"Subtracts *v* from this vector."},subVectors:{"!type":"fn(a: +TONG.Vector2, b: +TONG.Vector2) -> +TONG.Vector2","!doc":"Sets this vector to *a - b*."},multiplyScalar:{"!type":"fn(s: number) -> +TONG.Vector2","!doc":"Multiplies this vector by scalar *s*."},divideScalar:{"!type":"fn(s: number) -> +TONG.Vector2","!doc":"Divides this vector by scalar *s*.<br>\n\t\tSet vector to *( 0, 0 )* if *s == 0*."},negate:{"!type":"fn() -> +TONG.Vector2","!doc":"Inverts this vector."},dot:{"!type":"fn(v: +TONG.Vector2) -> number","!doc":"Computes dot product of this vector and *v*."},lengthSq:{"!type":"fn() -> number","!doc":"Computes squared length of this vector."},length:{"!type":"fn() -> number","!doc":"Computes length of this vector."},normalize:{"!type":"fn() -> +TONG.Vector2","!doc":"Normalizes this vector."},distanceTo:{"!type":"fn(v: +TONG.Vector2) -> number","!doc":"Computes distance of this vector to *v*."},distanceToSquared:{"!type":"fn(v: +TONG.Vector2) -> number","!doc":"Computes squared distance of this vector to *v*."},setLength:{"!type":"fn(l: number) -> +TONG.Vector2","!doc":"Normalizes this vector and multiplies it by *l*."},equals:{"!type":"fn(v: +TONG.Vector2) -> bool","!doc":"Checks for strict equality of this vector and *v*."},clone:{"!type":"fn() -> +TONG.Vector2","!doc":"Clones this vector."},clamp:{"!type":"fn(min: +TONG.Vector2, max: +TONG.Vector2) -> +TONG.Vector2","!doc":"If this vector's x or y value is greater than the max vector's x or y value, it is replaced by the corresponding value. <br>\tIf this vector's x or y value is less than the min vector's x or y value, it is replace by the corresponding value."},clampScalar:{"!type":"fn(min: number, max: number) -> +TONG.Vector2","!doc":"If this vector's x or y values are greater than the max value, they are replaced by the max value. <br>  If this vector's x or y values are less than the min value, they are replace by the min value."},floor:{"!type":"fn() -> +TONG.Vector2","!doc":"The components of the vector are rounded downwards (towards negative infinity) to an integer value."},ceil:{"!type":"fn() -> +TONG.Vector2","!doc":"The components of the vector are rounded upwards (towards positive infinity) to an integer value."},round:{"!type":"fn() -> +TONG.Vector2","!doc":"The components of the vector are rounded towards the nearest integer value."},roundToZero:{"!type":"fn() -> +TONG.Vector2","!doc":"The components of the vector are rounded towards zero (up if negative, down if positive) to an integer value."},lerp:{"!type":"fn(v: +TONG.Vector2, alpha: number) -> +TONG.Vector2","!doc":"Linear interpolation between this vector and v, where alpha is the percent along the line."},lerpVectors:{"!type":"fn(v1: +TONG.Vector2, v2: +TONG.Vector2, alpha: number) -> +TONG.Vector2","!doc":"Sets this vector to be the vector linearly interpolated between *v1* and *v2* with *alpha* factor."},setComponent:{"!type":"fn(index: number, value: number) -> undefined","!doc":"if index equals 0 method replaces this.x with value. <br>\n\t\tif index equals 1 method replaces this.y with value."},addScalar:{"!type":"fn(s: number) -> +TONG.Vector2","!doc":"Add the scalar value s to this vector's x and y values."},getComponent:{"!type":"fn(index: number) -> number","!doc":"if index equals 0 returns the x value. <br>\n\t\tif index equals 1 returns the y value."},fromArray:{"!type":"fn(array: []) -> +TONG.Vector2","!doc":"Sets this vector's x value to be array[0] and y value to be array[1]."},toArray:{"!type":"fn(array: []) -> []","!doc":"Returns an array [x, y]."},min:{"!type":"fn(v: +TONG.Vector2) -> +TONG.Vector2","!doc":"If this vector's x or y value is less than v's x or y value, replace that value with the corresponding min value."},max:{"!type":"fn(v: +TONG.Vector2) -> +TONG.Vector2","!doc":"If this vector's x or y value is greater than v's x or y value, replace that value with the corresponding max value."},setX:{"!type":"fn(x: number) -> +TONG.Vector2","!doc":"replace this vector's x value with x."},setY:{"!type":"fn(y: number) -> +TONG.Vector2","!doc":"replace this vector's y value with y."}},"!doc":"2D vector.","!type":"fn(x: number, y: number)"},Vector3:{"!url":"http://tongjs.org/docs/#Reference/math/Vector3",prototype:{x:"number",y:"number",z:"number",set:{"!type":"fn(x: number, y: number, z: number) -> +TONG.Vector3","!doc":"Sets value of this vector."},setX:{"!type":"fn(x: number) -> +TONG.Vector3","!doc":"Sets x value of this vector."},setY:{"!type":"fn(y: number) -> +TONG.Vector3","!doc":"Sets y value of this vector."},setZ:{"!type":"fn(z: number) -> +TONG.Vector3","!doc":"Sets z value of this vector."},copy:{"!type":"fn(v: +TONG.Vector3) -> +TONG.Vector3","!doc":"Copies value of *v* to this vector."},add:{"!type":"fn(v: +TONG.Vector3) -> +TONG.Vector3","!doc":"Adds *v* to this vector."},addVectors:{"!type":"fn(a: +TONG.Vector3, b: +TONG.Vector3) -> +TONG.Vector3","!doc":"Sets this vector to *a + b*."},sub:{"!type":"fn(v: +TONG.Vector3) -> +TONG.Vector3","!doc":"Subtracts *v* from this vector."},subVectors:{"!type":"fn(a: +TONG.Vector3, b: +TONG.Vector3) -> +TONG.Vector3","!doc":"Sets this vector to *a - b*."},multiplyScalar:{"!type":"fn(s: number) -> +TONG.Vector3","!doc":"Multiplies this vector by scalar *s*."},divideScalar:{"!type":"fn(s: number) -> +TONG.Vector3","!doc":"Divides this vector by scalar *s*.<br>\n\t\tSet vector to *( 0, 0, 0 )* if *s == 0*."},negate:{"!type":"fn() -> +TONG.Vector3","!doc":"Inverts this vector."},dot:{"!type":"fn(v: +TONG.Vector3) -> number","!doc":"Computes dot product of this vector and *v*."},lengthSq:{"!type":"fn() -> number","!doc":"Computes squared length of this vector."},length:{"!type":"fn() -> number","!doc":"Computes length of this vector."},lengthManhattan:{"!type":"fn() -> number","!doc":"Computes Manhattan length of this vector.<br>\n\t\t[link:http://en.wikipedia.org/wiki/Taxicab_geometry]"},normalize:{"!type":"fn() -> +TONG.Vector3","!doc":"Normalizes this vector. Transforms this Vector into a Unit vector by dividing the vector by it's length."},distanceTo:{"!type":"fn(v: +TONG.Vector3) -> number","!doc":"Computes distance of this vector to *v*."},distanceToSquared:{"!type":"fn(v: +TONG.Vector3) -> number","!doc":"Computes squared distance of this vector to *v*."},setLength:{"!type":"fn(l: number) -> +TONG.Vector3","!doc":"Normalizes this vector and multiplies it by *l*."},cross:{"!type":"fn(v: +TONG.Vector3) -> +TONG.Vector3","!doc":"Sets this vector to cross product of itself and *v*."},crossVectors:{"!type":"fn(a: +TONG.Vector3, b: +TONG.Vector3) -> +TONG.Vector3","!doc":"Sets this vector to cross product of *a* and *b*."},setFromMatrixPosition:{"!type":"fn(m: +TONG.Matrix4) -> +TONG.Vector3","!doc":"Sets this vector extracting position from matrix transform."},setFromMatrixScale:{"!type":"fn(m: +TONG.Matrix4) -> +TONG.Vector3","!doc":"Sets this vector extracting scale from matrix transform."},equals:{"!type":"fn(v: +TONG.Vector3) -> bool","!doc":"Checks for strict equality of this vector and *v*."},clone:{"!type":"fn() -> +TONG.Vector3","!doc":"Clones this vector."},clamp:{"!type":"fn(min: +TONG.Vector3, max: +TONG.Vector3) -> +TONG.Vector3","!doc":"If this vector's x, y or z value is greater than the max vector's x, y or z value, it is replaced by the corresponding value. <br><br>\n\t\tIf this vector's x, y or z value is less than the min vector's x, y or z value, it is replace by the corresponding value."},clampScalar:{"!type":"fn(min: number, max: number) -> +TONG.Vector3","!doc":"If this vector's x, y or z values are greater than the max value, they are replaced by the max value. <br>  If this vector's x, y or z values are less than the min value, they are replace by the min value."},floor:{"!type":"fn() -> +TONG.Vector3","!doc":"The components of the vector are rounded downwards (towards negative infinity) to an integer value."},ceil:{"!type":"fn() -> +TONG.Vector3","!doc":"The components of the vector are rounded upwards (towards positive infinity) to an integer value."},round:{"!type":"fn() -> +TONG.Vector3","!doc":"The components of the vector are rounded towards the nearest integer value."},roundToZero:{"!type":"fn() -> +TONG.Vector3","!doc":"The components of the vector are rounded towards zero (up if negative, down if positive) to an integer value."},applyMatrix3:{"!type":"fn(m: +TONG.Matrix3) -> +TONG.Vector3","!doc":"Multiplies this vector times a 3 x 3 matrix."},applyMatrix4:{"!type":"fn(m: +TONG.Matrix3) -> +TONG.Vector3","!doc":"Multiplies this vector by 4 x 3 subset of a Matrix4."},projectOnPlane:{"!type":"fn(planeNormal: +TONG.Vector3) -> +TONG.Vector3","!doc":"Projects this vector onto a plane by subtracting this vector projected onto the plane's normal from this vector."},projectOnVector:{"!type":"fn() -> +TONG.Vector3","!doc":"Projects this vector onto another vector."},addScalar:{"!type":"fn() -> +TONG.Vector3","!doc":"Adds a s to this vector."},divide:{"!type":"fn(v: +TONG.Vector3) -> +TONG.Vector3","!doc":"Divides this vector by vector v."},min:{"!type":"fn(v: +TONG.Vector3) -> +TONG.Vector3","!doc":"If this vector's x, y, or z value is less than vector v's x, y, or z value, that value is replaced by the corresponding vector v value."},max:{"!type":"fn(v: +TONG.Vector3) -> +TONG.Vector3","!doc":"If this vector's x, y, or z value is greater than vector v's x, y, or z value, that value is replaced by the corresponding vector v value."},setComponent:{"!type":"fn(index: number, value: number) -> +TONG.Vector3","!doc":"If index equals 0 the method sets this vector's x value to value <br>\n\t\tIf index equals 1 the method sets this vector's y value to value <br>\n\t\tIf index equals 2 the method sets this vector's z value to value"},transformDirection:{"!type":"fn(m: +TONG.Matrix4) -> +TONG.Vector3","!doc":"Transforms the direction of this vector by a matrix (a 3 x 3 subset of a Matrix4) and then normalizes the result."},multiplyVectors:{"!type":"fn(a: +TONG.Vector3, b: +TONG.Vector3) -> +TONG.Vector3","!doc":"Sets this vector equal to the result of multiplying vector a by vector b."},getComponent:{"!type":"fn(index: number) -> number","!doc":"Returns the value of the vector component x, y, or z by an index. <br><br>\n\n\t\tIndex 0: x <br>\n\t\tIndex 1: y <br>\n\t\tIndex 2: z <br>"},applyAxisAngle:{"!type":"fn(axis: +TONG.Vector3, angle: number) -> +TONG.Vector3","!doc":"Applies a rotation specified by an axis and an angle to this vector."},lerp:{"!type":"fn(v: +TONG.Vector3, alpha: number) -> +TONG.Vector3","!doc":"Linear Interpolation between this vector and vector v, where alpha is the percent along the line."},lerpVectors:{"!type":"fn(v1: +TONG.Vector3, v2: +TONG.Vector3, alpha: number) -> +TONG.Vector3","!doc":"Sets this vector to be the vector linearly interpolated between *v1* and *v2* with *alpha* factor."},angleTo:{"!type":"fn(v: +TONG.Vector3) -> number","!doc":"Returns the angle between this vector and vector v in radians."},setFromMatrixColumn:{"!type":"fn(index: number, matrix: +TONG.Matrix4) -> +TONG.Vector3","!doc":"Sets this vector's x, y, and z equal to the column of the matrix specified by the index."},reflect:{"!type":"fn(normal: +TONG.Vector3) -> +TONG.Vector3","!doc":"Reflect incident vector off of plane orthogonal to normal. Normal is assumed to have unit length."},fromArray:{"!type":"fn(array: []) -> +TONG.Vector3","!doc":"Sets the vector's components based on an array formatted like [x, y, z]"},multiply:{"!type":"fn(v: +TONG.Vector3) -> +TONG.Vector3","!doc":"Multiplies this vector by vector v."},applyProjection:{"!type":"fn(m: +TONG.Matrix4) -> +TONG.Vector3","!doc":"Multiplies this vector and m, and divides by perspective."},toArray:{"!type":"fn(array: []) -> []","!doc":"Assigns this vector's x value to array[0]. <br>\n\t\tAssigns this vector's y value to array[1]. <br>\n\t\tAssigns this vector's z value to array[2]. <br>\n\t\tReturns the created array."},applyEuler:{"!type":"fn(euler: +TONG.Euler) -> +TONG.Vector3","!doc":"Applies euler transform to this vector by converting the [page:Euler] object to a [page:Quaternion] and applying."},applyQuaternion:{"!type":"fn(quaternion: +TONG.Quaternion) -> +TONG.Vector3","!doc":"Applies a [page:Quaternion] transform to this vector."},project:{"!type":"fn(camera: +TONG.Camera) -> +TONG.Vector3","!doc":"Projects the vector with the camera."},unproject:{"!type":"fn(camera: +TONG.Camera) -> +TONG.Vector3","!doc":"Unprojects the vector with the camera."}},"!doc":"3D vector.","!type":"fn(x: number, y: number, z: number)"},Vector4:{"!url":"http://tongjs.org/docs/#Reference/math/Vector4",prototype:{x:"number",y:"number",z:"number",w:"number",set:{"!type":"fn(x: number, y: number, z: number, w: number) -> +TONG.Vector4","!doc":"Sets value of this vector."},copy:{"!type":"fn(v: +TONG.Vector4) -> +TONG.Vector4","!doc":"Copies value of *v* to this vector."},add:{"!type":"fn(v: +TONG.Vector4) -> +TONG.Vector4","!doc":"Adds *v* to this vector."},addVectors:{"!type":"fn(a: +TONG.Vector4, b: +TONG.Vector4) -> +TONG.Vector4","!doc":"Sets this vector to *a + b*."},sub:{"!type":"fn(v: +TONG.Vector4) -> +TONG.Vector4","!doc":"Subtracts *v* from this vector."},subVectors:{"!type":"fn(a: +TONG.Vector4, b: +TONG.Vector4) -> +TONG.Vector4","!doc":"Sets this vector to *a - b*."},multiplyScalar:{"!type":"fn(s: number) -> +TONG.Vector4","!doc":"Multiplies this vector by scalar *s*."},divideScalar:{"!type":"fn(s: number) -> +TONG.Vector4","!doc":"Divides this vector by scalar *s*.<br>\n\t\tSet vector to *( 0, 0, 0 )* if *s == 0*."},negate:{"!type":"fn() -> +TONG.Vector4","!doc":"Inverts this vector."},dot:{"!type":"fn(v: +TONG.Vector4) -> number","!doc":"Computes dot product of this vector and *v*."},lengthSq:{"!type":"fn() -> number","!doc":"Computes squared length of this vector."},length:{"!type":"fn() -> number","!doc":"Computes length of this vector."},normalize:{"!type":"fn() -> +TONG.Vector4","!doc":"Normalizes this vector."},setLength:{"!type":"fn(l: number) -> +TONG.Vector4","!doc":"Normalizes this vector and multiplies it by *l*."},lerp:{"!type":"fn(v: +TONG.Vector4, alpha: number) -> +TONG.Vector4","!doc":"Linearly interpolate between this vector and *v* with *alpha* factor."},lerpVectors:{"!type":"fn(v1: +TONG.Vector4, v2: +TONG.Vector4, alpha: number) -> +TONG.Vector4","!doc":"Sets this vector to be the vector linearly interpolated between *v1* and *v2* with *alpha* factor."},clone:{"!type":"fn() -> +TONG.Vector4","!doc":"Clones this vector."},clamp:{"!type":"fn(min: +TONG.Vector4, max: +TONG.Vector4) -> +TONG.Vector4","!doc":"If this vector's x, y, z, or w value is greater than the max vector's x, y, z, or w value, it is replaced by the corresponding value.<br><br>\n\n\t\tIf this vector's x, y, z, or w value is less than the min vector's x, y, z, or w value, it is replace by the corresponding value."},clampScalar:{"!type":"fn(min: number, max: number) -> +TONG.Vector4","!doc":"If this vector's x, y, z or w values are greater than the max value, they are replaced by the max value. <br>\n\t\tIf this vector's x, y, z or w values are less than the min value, they are replace by the min value."},floor:{"!type":"fn() -> +TONG.Vector4","!doc":"The components of the vector are rounded downwards (towards negative infinity) to an integer value."},ceil:{"!type":"fn() -> +TONG.Vector4","!doc":"The components of the vector are rounded upwards (towards positive infinity) to an integer value."},round:{"!type":"fn() -> +TONG.Vector4","!doc":"The components of the vector are rounded towards the nearest integer value."},roundToZero:{"!type":"fn() -> +TONG.Vector4","!doc":"The components of the vector are rounded towards zero (up if negative, down if positive) to an integer value."},applyMatrix4:{"!type":"fn(m: +TONG.Matrix4) -> +TONG.Vector4","!doc":"Transforms the vector by the matrix."},min:{"!type":"fn(v: +TONG.Vector4) -> +TONG.Vector4","!doc":"If this vector's x, y, z, or w value is less than vector v's x, y, z, or w value, that value is replaced by the corresponding vector v value."},max:{"!type":"fn(v: +TONG.Vector4) -> +TONG.Vector4","!doc":"If this vector's x, y, z, or w value is greater than vector v's x, y, z, or w value, that value is replaced by the corresponding vector v value."},addScalar:{"!type":"fn(s: number) -> +TONG.Vector4","!doc":"Adds a scalar value to all of the vector's components."},equals:{"!type":"fn(v: +TONG.Vector4) -> bool","!doc":"Checks to see if this vector matches vector v."},setAxisAngleFromRotationMatrix:{"!type":"fn(m: +TONG.Matrix4) -> +TONG.Vector4","!doc":'Sets this Vector4 to the computed <a href="http://en.wikipedia.org/wiki/Axis%E2%80%93angle_representation" target="_blank">axis-angle representation</a> of the rotation defined by Matrix4 m. Assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled).<br><br>\n\n\t\tThe axis is stored in components (x, y, z) of the vector, and the rotation in radians is stored in component w'},setAxisAngleFromQuaternion:{"!type":"fn(q: +TONG.Quaternion) -> +TONG.Vector4","!doc":'Sets this Vector4 to the computed <a href="http://en.wikipedia.org/wiki/Axis%E2%80%93angle_representation" target="_blank">axis-angle representation</a> of the rotation defined by Quaternion q.<br><br>\n\n\t\tThe axis is stored in components (x, y, z) of the vector, and the rotation in radians is stored in component w'},getComponent:{"!type":"fn(index: number) -> number","!doc":"Returns the value of the vector component x, y, or z by an index.<br><br>\n\n\t\tIndex 0: x<br>\n\t\tIndex 1: y<br>\n\t\tIndex 2: z<br>\n\t\tIndex 3: w<br>"},setComponent:{"!type":"fn(index: number, value: number)","!doc":"Sets the value of the vector component\tx, y, or z by an index.<br><br>\n\n\t\tIndex 0: x<br>\n\t\tIndex 1: y<br>\n\t\tIndex 2: z<br>\n\t\tIndex 3: w<br>"},fromArray:{"!type":"fn(array: []) -> +TONG.Vector4","!doc":"Sets the vector's components based on an array formatted like [x, y, z, w]"},toArray:{"!type":"fn(array: []) -> []","!doc":"Returns an array in the format [x, y, z, w]"},lengthManhattan:{"!type":"fn() -> number","!doc":"Computes Manhattan length of this vector.<br>\n\t\t[link:http://en.wikipedia.org/wiki/Taxicab_geometry]"},setX:{"!type":"fn(x: number) -> +TONG.Vector4","!doc":"Sets the x component of the vector."},setY:{"!type":"fn(y: number) -> +TONG.Vector4","!doc":"Sets the y component of the vector."},setZ:{"!type":"fn(z: number) -> +TONG.Vector4","!doc":"Sets the z component of the vector."},setW:{"!type":"fn(w: number) -> +TONG.Vector4","!doc":"Sets the w component of the vector."}},"!doc":"4D vector.","!type":"fn(x: number, y: number, z: number, w: number)"},Bone:{"!url":"http://tongjs.org/docs/#Reference/objects/Bone",prototype:{"!proto":"TONG.Object3D.prototype",skinMatrix:{"!type":"+TONG.Matrix4","!doc":"The matrix of the bone."},skin:{"!type":"+TONG.SkinnedMesh","!doc":"The skin that contains this bone."},update:{"!type":"fn(parentSkinMatrix: +TONG.Matrix4, forceUpdate: boolean) -> todo","!doc":"This updates the matrix of the bone and the matrices of its children."}},"!doc":"A bone which is part of a SkinnedMesh.","!type":"fn(belongsToSkin: +TONG.SkinnedMesh)"},LOD:{"!url":"http://tongjs.org/docs/#Reference/objects/LOD",prototype:{"!proto":"TONG.Object3D.prototype",objects:{"!type":"array","!doc":"todo"},addLevel:{"!type":"fn(object: todo, distance: todo) -> todo","!doc":"todo"},getObjectForDistance:{"!type":"fn(distance: todo) -> todo","!doc":"todo"},update:{"!type":"fn(camera: todo) -> todo","!doc":"todo"}},"!doc":"todo","!type":"fn()"},LensFlare:{"!url":"http://tongjs.org/docs/#Reference/objects/LensFlare",prototype:{"!proto":"TONG.Object3D.prototype",lensFlares:{"!type":"array","!doc":"todo"},positionScreen:{"!type":"+TONG.Vector3","!doc":"todo"},customUpdateCallback:{"!type":"todo","!doc":"todo"},updateLensFlares:{"!type":"fn() -> todo","!doc":"todo"}},"!doc":"todo","!type":"fn(texture: todo, size: todo, distance: todo, blending: todo, color: todo)"},Line:{"!url":"http://tongjs.org/docs/#Reference/objects/Line",prototype:{"!proto":"TONG.Object3D.prototype",geometry:{"!type":"+TONG.Geometry","!doc":"Vertices representing the line segment(s)."},material:{"!type":"+TONG.Material","!doc":"Material for the line."},type:{"!type":"number","!doc":"In OpenGL terms, LineStrip is the classic GL_LINE_STRIP and LinePieces is the equivalent to GL_LINES."},raycast:{"!type":"fn(raycaster: +TONG.Raycaster, intersects: []) -> []","!doc":"Get intersections between a casted ray and this Line. [page:Raycaster.intersectObject] will call this method."}},"!doc":"A line or a series of lines.","!type":"fn(geometry: +TONG.Geometry, material: +TONG.Material, type: number)"},Mesh:{"!url":"http://tongjs.org/docs/#Reference/objects/Mesh",prototype:{"!proto":"TONG.Object3D.prototype",geometry:{"!type":"+TONG.Geometry","!doc":"An instance of [page:Geometry], defining the object's structure."},material:{"!type":"+TONG.Material","!doc":"An instance of [page:Material], defining the object's appearance. Default is a [page:MeshBasicMaterial] with wireframe mode enabled and randomised colour."},getMorphTargetIndexByName:{"!type":"fn(name: string) -> number","!doc":"Returns the index of a morph target defined by name."},updateMorphTargets:{"!type":"fn()","!doc":"Updates the morphtargets to have no influence on the object."},raycast:{"!type":"fn(raycaster: +TONG.Raycaster, intersects: []) -> []","!doc":"Get intersections between a casted ray and this mesh. [page:Raycaster.intersectObject] will call this method."}},"!doc":"Base class for Mesh objects, such as [page:MorphAnimMesh] and [page:SkinnedMesh].","!type":"fn(geometry: +TONG.Geometry, material: +TONG.Material)"},MorphAnimMesh:{"!url":"http://tongjs.org/docs/#Reference/objects/MorphAnimMesh",prototype:{"!proto":"TONG.Object3D.prototype",directionBackwards:{"!type":"boolean","!doc":"todo"},direction:{"!type":"number","!doc":"todo"},endKeyframe:{"!type":"number","!doc":"todo"},mirroredLoop:{"!type":"boolean","!doc":"todo"},startKeyframe:{"!type":"number","!doc":"todo"},lastKeyframe:{"!type":"number","!doc":"todo"},length:{"!type":"number","!doc":"todo"},time:{"!type":"number","!doc":"todo"},duration:{"!type":"number","!doc":"todo"},currentKeyframe:{"!type":"number","!doc":"todo"},setDirectionForward:{"!type":"fn() -> todo","!doc":"todo"},playAnimation:{"!type":"fn(label: todo, fps: todo) -> todo","!doc":"todo"},setFrameRange:{"!type":"fn(start: todo, end: todo) -> todo","!doc":"todo"},setDirectionBackward:{"!type":"fn() -> todo","!doc":"todo"},parseAnimations:{"!type":"fn() -> todo","!doc":"todo"},updateAnimation:{"!type":"fn(delta: todo) -> todo","!doc":"todo"},setAnimationLabel:{"!type":"fn(label: todo, start: todo, end: todo) -> todo","!doc":"todo"}},"!doc":"todo","!type":"fn(geometry: todo, material: todo)"},PointCloud:{"!url":"http://tongjs.org/docs/#Reference/objects/PointCloud",prototype:{"!proto":"TONG.Object3D.prototype",geometry:{"!type":"+TONG.Geometry","!doc":"An instance of [page:Geometry], where each vertex designates the position of a particle in the system."},material:{"!type":"+TONG.Material","!doc":"An instance of [page:Material], defining the object's appearance. Default is a [page:PointCloudMaterial] with randomised colour."},clone:{"!type":"fn() -> +TONG.PointCloud","!doc":"This creates a clone of the particle system."},raycast:{"!type":"fn(raycaster: +TONG.Raycaster, intersects: []) -> []","!doc":"Get intersections between a casted ray and this PointCloud. [page:Raycaster.intersectObject] will call this method."}},"!doc":"A class for displaying particles in the form of variable size points. For example, if using the [page:WebGLRenderer], the particles are displayed using GL_POINTS.","!type":"fn(geometry: +TONG.Geometry, material: +TONG.Material)"},SkinnedMesh:{"!url":"http://tongjs.org/docs/#Reference/objects/SkinnedMesh",prototype:{"!proto":"TONG.Object3D.prototype",bones:{"!type":"array","!doc":"This contains the array of bones for this mesh. These should be set in the constructor."},identityMatrix:{"!type":"+TONG.Matrix4","!doc":"This is an identityMatrix to calculate the bones matrices from."},useVertexTexture:{"!type":"boolean","!doc":"The boolean defines whether a vertex texture is used to calculate the bones. This boolean shouldn't be changed after constructor."},boneMatrices:{"!type":"array","!doc":"This array of matrices contains the matrices of the bones. These get calculated in the constructor."},pose:{"!type":"fn()","!doc":"This method sets the skinnedmesh in the rest pose."},addBone:{"!type":"fn(bone: +TONG.Bone) -> +TONG.Bone","!doc":"This method adds the bone to the skinnedmesh when it is provided. It creates a new bone and adds that when no bone is given."}},"!doc":"An 3d object that has bones data. These Bones can then be used to animate the vertices of the object.","!type":"fn(geometry: +TONG.Geometry, material: +TONG.Material, useVertexTexture: boolean)"},Sprite:{"!url":"http://tongjs.org/docs/#Reference/objects/Sprite",prototype:{"!proto":"TONG.Object3D.prototype",material:{"!type":"+TONG.SpriteMaterial","!doc":"An instance of [page:Material], defining the object's appearance. Default is a [page:SpriteMaterial] which is a white plane."},clone:{"!type":"fn() -> +TONG.Sprite","!doc":"This creates a new clone of the sprite."}},"!doc":"A sprite is a plane in an 3d scene which faces always towards the camera.","!type":"fn(material: +TONG.Material)"},CanvasRenderer:{"!url":"http://tongjs.org/docs/#Reference/renderers/CanvasRenderer",prototype:{info:{"!type":"object","!doc":"An object with a series of statistical information about the graphics board memory and the rendering process. Useful for debugging or just for the sake of curiosity. The object contains the following fields:"},domElement:{"!type":"DOMElement","!doc":"A [page:Canvas] where the renderer draws its output.<br>\n\t\t\tThis is automatically created by the renderer in the constructor (if not provided already); you just need to add it to your page."},autoClear:{"!type":"bool","!doc":"Defines whether the renderer should automatically clear its output before rendering."},sortObjects:{"!type":"bool","!doc":"Defines whether the renderer should sort objects. Default is true.<br>\n      Note: Sorting is used to attempt to properly render objects that have some degree of transparency.  By definition, sorting objects may not work in all cases.  Depending on the needs of application, it may be neccessary to turn off sorting and use other methods to deal with transparency rendering e.g. manually determining the object rendering order."},sortElements:{"!type":"boolean","!doc":"Defines whether the renderer should sort the face of each object. Default is true."},render:{"!type":"fn(scene: +TONG.Scene, camera: +TONG.Camera)","!doc":"Render a scene using a camera."},clear:{"!type":"fn()","!doc":"Tells the renderer to clear its color drawing buffer with the clearcolor."},setClearColor:{"!type":"fn(color: +TONG.Color, alpha: number)","!doc":"This set the clearColor and the clearAlpha."},setSize:{"!type":"fn(width: number, height: number)","!doc":"This set the size of the drawing canvas and if updateStyle is set, then the css of the canvas is updated too."},setClearColorHex:{"!type":"fn(hex: number, alpha: number)","!doc":"This set the clearColor and the clearAlpha."},getClearColorHex:{"!type":"fn() -> number","!doc":"Returns the [page:number hex] color."},getClearAlpha:{"!type":"fn() -> number","!doc":"Returns the alpha value."}},"!doc":"The Canvas renderer displays your beautifully crafted scenes <em>not</em> using WebGL, but draws it using the (slower) <a href=\"http://www.w3.org/html/wg/drafts/2dcontext/html5_canvas/\">Canvas 2D Context</a> API.<br><br>\n\t\t\tThis renderer can be a nice fallback from [page:WebGLRenderer] for simple scenes:\n\n\t\t\t<code>\n\t\t\tfunction webglAvailable() {\n\t\t\t\ttry {\n\t\t\t\t\tvar canvas = document.createElement( 'canvas' );\n\t\t\t\t\treturn !!( window.WebGLRenderingContext &amp;&amp; (\n\t\t\t\t\t\tcanvas.getContext( 'webgl' ) ||\n\t\t\t\t\t\tcanvas.getContext( 'experimental-webgl' ) )\n\t\t\t\t\t);\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( webglAvailable() ) {\n\t\t\t\trenderer = new TONG.WebGLRenderer();\n\t\t\t} else {\n\t\t\t\trenderer = new TONG.CanvasRenderer();\n\t\t\t}\n\t\t\t</code>\n\n\t\t\tNote: both WebGLRenderer and CanvasRenderer are embedded in the web page using an HTML5 &lt;canvas&gt; tag.\n\t\t\tThe \"Canvas\" in CanvasRenderer means it uses Canvas 2D instead of WebGL.<br><br>\n\n\t\t\tDon't confuse either CanvasRenderer with the SoftwareRenderer example, which simulates a screen buffer in a Javascript array.","!type":"fn(parameters: object)"},WebGLRenderTarget:{"!url":"http://tongjs.org/docs/#Reference/renderers/WebGLRenderTarget",prototype:{wrapS:{"!type":"number","!doc":"The default is TONG.ClampToEdgeWrapping, where the edge is clamped to the outer edge texels. The other two choices are TONG.RepeatWrapping and TONG.MirroredRepeatWrapping."},wrapT:{"!type":"number","!doc":"The default is TONG.ClampToEdgeWrapping, where the edge is clamped to the outer edge texels. The other two choices are TONG.RepeatWrapping and TONG.MirroredRepeatWrapping."},magFilter:{"!type":"number","!doc":"How the texture is sampled when a texel covers more than one pixel. The default is TONG.LinearFilter, which takes the four closest texels and bilinearly interpolates among them. The other option is TONG.NearestFilter, which uses the value of the closest texel."},minFilter:{"!type":"number","!doc":"How the texture is sampled when a texel covers less than one pixel. The default is TONG.LinearMipMapLinearFilter, which uses mipmapping and a trilinear filter. Other choices are TONG.NearestFilter, TONG.NearestMipMapNearestFilter, TONG.NearestMipMapLinearFilter, TONG.LinearFilter, and TONG.LinearMipMapNearestFilter. These vary whether the nearest texel or nearest four texels are retrieved on the nearest mipmap or nearest two mipmaps. Interpolation occurs among the samples retrieved."},anisotropy:{"!type":"number","!doc":"The number of samples taken along the axis through the pixel that has the highest density of texels. By default, this value is 1. A higher value gives a less blurry result than a basic mipmap, at the cost of more texture samples being used. Use renderer.getMaxAnisotropy() to find the maximum valid anisotropy value for the GPU; this value is usually a power of 2."},repeat:{"!type":"+TONG.Vector2","!doc":"How many times the texture is repeated across the surface, in each direction U and V."},offset:{"!type":"+TONG.Vector2","!doc":"How much a single repetition of the texture is offset from the beginning, in each direction U and V. Typical range is 0.0 to 1.0."},format:{"!type":"number","!doc":"The default is TONG.RGBAFormat for the texture. Other formats are: TONG.AlphaFormat, TONG.RGBFormat, TONG.LuminanceFormat, and TONG.LuminanceAlphaFormat. There are also compressed texture formats, if the S3TC extension is supported: TONG.RGB_S3TC_DXT1_Format, TONG.RGBA_S3TC_DXT1_Format, TONG.RGBA_S3TC_DXT3_Format, and TONG.RGBA_S3TC_DXT5_Format."},type:{"!type":"number","!doc":"The default is TONG.UnsignedByteType. Other valid types (as WebGL allows) are TONG.ByteType, TONG.ShortType, TONG.UnsignedShortType, TONG.IntType, TONG.UnsignedIntType, TONG.HalfFloatType, TONG.FloatType, TONG.UnsignedShort4444Type, TONG.UnsignedShort5551Type, and TONG.UnsignedShort565Type."},depthBuffer:{"!type":"boolean","!doc":"Renders to the depth buffer. Default is true."},stencilBuffer:{"!type":"boolean","!doc":"Renders to the stencil buffer. Default is true."},generateMipmaps:{"!type":"boolean","!doc":"Whether to generate mipmaps (if possible) for a texture. True by default."},setSize:{"!type":"fn(width: number, height: number)","!doc":"Sets the size of the renderTarget."},clone:{"!type":"fn() -> RenderTarget","!doc":"Creates a copy of the render target."},dispose:{"!type":"fn()","!doc":"Dispatches a dispose event."}},"!doc":"A render target is a buffer where the video card draws pixels for a scene that is being rendered in the background. It is used in different effects.","!type":"fn(width: number, height: number, options: object)"},WebGLRenderTargetCube:{"!url":"http://tongjs.org/docs/#Reference/renderers/WebGLRenderTargetCube",prototype:{"!proto":"TONG.WebGLRenderTarget.prototype",activeCubeFace:{"!type":"integer","!doc":"The activeCubeFace property corresponds to a cube side (PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5) and is\n\t\tused and set internally by the [page:CubeCamera]."}},"!doc":"[page:CubeCamera] uses this as its [page:WebGLRenderTarget]","!type":"fn(width: number, height: number, options: object)"},WebGLRenderer:{"!url":"http://tongjs.org/docs/#Reference/renderers/WebGLRenderer",prototype:{domElement:{"!type":"DOMElement","!doc":"A [page:Canvas] where the renderer draws its output.<br>\n\t\tThis is automatically created by the renderer in the constructor (if not provided already); you just need to add it to your page."},context:{"!type":"WebGLRenderingContext","!doc":"The HTML5 Canvas's 'webgl' context obtained from the canvas where the renderer will draw."},autoClear:{"!type":"bool","!doc":"Defines whether the renderer should automatically clear its output before rendering."},autoClearColor:{"!type":"bool","!doc":"If autoClear is true, defines whether the renderer should clear the color buffer. Default is true."},autoClearDepth:{"!type":"bool","!doc":"If autoClear is true, defines whether the renderer should clear the depth buffer. Default is true."},autoClearStencil:{"!type":"bool","!doc":"If autoClear is true, defines whether the renderer should clear the stencil buffer. Default is true."},sortObjects:{"!type":"bool","!doc":"Note: Sorting is used to attempt to properly render objects that have some degree of transparency.  By definition, sorting objects may not work in all cases.  Depending on the needs of application, it may be neccessary to turn off sorting and use other methods to deal with transparency rendering e.g. manually determining the object rendering order."},autoUpdateObjects:{"!type":"bool","!doc":"Defines whether the renderer should auto update objects. Default is true."},gammaInput:{"!type":"bool","!doc":"Default is false. If set, then it expects that all textures and colors are premultiplied gamma."},gammaOutput:{"!type":"bool","!doc":"Default is false.  If set, then it expects that all textures and colors need to be outputted in premultiplied gamma."},shadowMapEnabled:{"!type":"bool","!doc":"Default is false. If set, use shadow maps in the scene."},shadowMapType:{"!type":"number","!doc":"Options are TONG.BasicShadowMap, TONG.PCFShadowMap, TONG.PCFSoftShadowMap. Default is TONG.PCFShadowMap."},shadowMapCullFace:{"!type":"number","!doc":"Default is TONG.CullFaceFront. The faces that needed to be culled. Possible values: TONG.CullFaceFront and TONG.CullFaceBack"},shadowMapCascade:{"!type":"bool","!doc":"Default is false. If Set, use cascaded shadowmaps. See [link:http://developer.download.nvidia.com/SDK/10.5/opengl/src/cascaded_shadow_maps/doc/cascaded_shadow_maps.pdf cascaded shadowmaps] for more information."},maxMorphTargets:{"!type":"number","!doc":"Default is 8. The maximum number of MorphTargets allowed in a shader. Keep in mind that the standard materials only allow 8 MorphTargets."},maxMorphNormals:{"!type":"number","!doc":"Default is 4. The maximum number of MorphNormals allowed in a shader. Keep in mind that the standard materials only allow 4 MorphNormals."},autoScaleCubemaps:{"!type":"bool","!doc":"Default is true. If set, then Cubemaps are scaled, when they are bigger than the maximum size, to make sure that they aren't bigger than the maximum size."},info:{"!type":"object","!doc":"<ul>\n\t\t\t<li>memory:\n\t\t\t\t<ul>\n\t\t\t\t\t<li>programs</li>\n\t\t\t\t\t<li>geometries</li>\n\t\t\t\t\t<li>textures</li>\n\t\t\t\t</ul>\n\t\t\t</li>\n\t\t\t<li>render:\n\t\t\t\t<ul>\n\t\t\t\t\t<li>calls</li>\n\t\t\t\t\t<li>vertices</li>\n\t\t\t\t\t<li>faces</li>\n\t\t\t\t\t<li>points</li>\n\t\t\t\t</ul>\n\t\t\t</li>\n\t\t</ul>"},shadowMapPlugin:{"!type":"+TONG.ShadowMapPlugin","!doc":"This contains the reference to the shadowMapPlugin."},getContext:{"!type":"fn() -> WebGLRenderingContext","!doc":"Return the WebGL context."},supportsVertexTextures:{"!type":"fn() -> bool","!doc":"Return a [page:Boolean] true if the context supports vertex textures."},setSize:{"!type":"fn(width: number, height: number)","!doc":"Resizes the output canvas to (width, height), and also sets the viewport to fit that size, starting in (0, 0)."},setViewport:{"!type":"fn(x: number, y: number, width: number, height: number)","!doc":"Sets the viewport to render from (x, y) to (x + width, y + height)."},setScissor:{"!type":"fn(x: number, y: number, width: number, height: number)","!doc":"Sets the scissor area from (x, y) to (x + width, y + height)."},enableScissorTest:{"!type":"fn(enable: bool)","!doc":"Enable the scissor test. When this is enabled, only the pixels within the defined scissor area will be affected by further renderer actions."},setClearColor:{"!type":"fn(color: +TONG.Color, alpha: number)","!doc":"Sets the clear color and opacity."},getClearColor:{"!type":"fn() -> +TONG.Color","!doc":"Returns a [page:Color TONG.Color] instance with the current clear color."},getClearAlpha:{"!type":"fn() -> number","!doc":"Returns a [page:Float float] with the current clear alpha. Ranges from 0 to 1."},clear:{"!type":"fn(color: bool, depth: bool, stencil: bool)","!doc":"Arguments default to true."},renderBufferImmediate:{"!type":"fn(object: +TONG.Object3D, program: shaderprogram, shading: +TONG.Material)","!doc":"Render an immediate buffer. Gets called by renderImmediateObject."},renderBufferDirect:{"!type":"fn(camera: +TONG.Camera, lights: [], fog: +TONG.Fog, material: +TONG.Material, geometryGroup: object, object: +TONG.Object3D)","!doc":"Render a buffer geometry group using the camera and with the correct material."},renderBuffer:{"!type":"fn(camera: +TONG.Camera, lights: [], fog: +TONG.Fog, material: +TONG.Material, geometryGroup: object, object: +TONG.Object3D)","!doc":"Render a geometry group using the camera and with the correct material."},render:{"!type":"fn(scene: +TONG.Scene, camera: +TONG.Camera, renderTarget: +TONG.WebGLRenderTarget, forceClear: bool)","!doc":"Even with forceClear set to true you can prevent certain buffers being cleared by setting either the .autoClearColor, .autoClearStencil or .autoClearDepth properties to false."},renderImmediateObject:{"!type":"fn(camera, lights, fog, material, object)","!doc":"Renders an immediate Object using a camera."},setFaceCulling:{"!type":"fn(cullFace, frontFace)","!doc":"If cullFace is false, culling will be disabled."},setDepthTest:{"!type":"fn(depthTest: boolean)","!doc":"This sets, based on depthTest, whether or not the depth data needs to be tested against the depth buffer."},setDepthWrite:{"!type":"fn(depthWrite: boolean)","!doc":"This sets, based on depthWrite, whether or not the depth data needs to be written in the depth buffer."},setBlending:{"!type":"fn(blending: number, blendEquation: number, blendSrc: number, blendDst: number)","!doc":"This method sets the correct blending."},setTexture:{"!type":"fn(texture: +TONG.Texture, slot: number)","!doc":"This method sets the correct texture to the correct slot for the wegl shader. The slot number can be found as a value of the uniform of the sampler."},setRenderTarget:{"!type":"fn(renderTarget: +TONG.WebGLRenderTarget)","!doc":"This method sets the active rendertarget."},supportsCompressedTextureS3TC:{"!type":"fn() -> boolean","!doc":"This method returns true if the webgl implementation supports compressed textures of the format S3TC."},getMaxAnisotropy:{"!type":"fn() -> number","!doc":"This returns the anisotropy level of the textures."},getPrecision:{"!type":"fn() -> string","!doc":'This gets the precision used by the shaders. It returns "highp","mediump" or "lowp".'},setMaterialFaces:{"!type":"fn(material: +TONG.Material)","!doc":"This sets which side needs to be culled in the webgl renderer."},supportsStandardDerivatives:{"!type":"fn() -> boolean","!doc":"This method returns true if the webgl implementation supports standard derivatives."},supportsFloatTextures:{"!type":"fn() -> boolean","!doc":"This method returns true if the webgl implementation supports float textures."},clearTarget:{"!type":"fn(renderTarget: +TONG.WebGLRenderTarget, color: boolean, depth: boolean, stencil: boolean)","!doc":"This method clears a rendertarget. To do this, it activates the rendertarget."}},"!doc":"The WebGL renderer displays your beautifully crafted scenes using WebGL, if your device supports it.","!type":"fn(parameters: object)"},ShaderChunk:{"!url":"http://tongjs.org/docs/#Reference/renderers/shaders/ShaderChunk",prototype:{},"!doc":"Shader chunks for WebLG Shader library"},ShaderLib:{"!url":"http://tongjs.org/docs/#Reference/renderers/shaders/ShaderLib",prototype:{},"!doc":"Webgl Shader Library for TONG.js"},UniformsLib:{"!url":"http://tongjs.org/docs/#Reference/renderers/shaders/UniformsLib",prototype:{},"!doc":"Uniforms library for shared webgl shaders"},UniformsUtils:{"!url":"http://tongjs.org/docs/#Reference/renderers/shaders/UniformsUtils",prototype:{},"!doc":"Uniform Utilities. Support merging and cloning of uniform variables"},WebGLProgram:{"!url":"http://tongjs.org/docs/#Reference/renderers/webgl/WebGLProgram",prototype:{uniforms:"object",attributes:"object",id:"string",code:"string",usedTimes:"number",program:"object",vertexShader:"+TONG.WebGLShader",fragmentShader:"+TONG.WebGLShader"},"!doc":"Constructor for the GLSL program sent to vertex and fragment shaders, including default uniforms and attributes.","!type":"fn(renderer: +TONG.WebGLRenderer, code: object, material: +TONG.Material, parameters: object)"},WebGLShader:{"!url":"http://tongjs.org/docs/#Reference/renderers/webgl/WebGLShader",prototype:{},"!doc":"todo"},LensFlarePlugin:{"!url":"http://tongjs.org/docs/#Reference/renderers/webgl/plugins/LensFlarePlugin",prototype:{render:{"!type":"fn(scene: +TONG.Scene, camera: +TONG.Camera, viewportWidth: number, viewportHeight: number)","!doc":"Renders the lensflares defined in the scene. This gets automatically called as post render function to draw the lensflares."}},"!doc":"The Webglrenderer plugin class that allows lensflares to be rendered in the WebglRenderer. This plugin is automatically loaded in the Webglrenderer.","!type":"fn()"},ShadowMapPlugin:{"!url":"http://tongjs.org/docs/#Reference/renderers/webgl/plugins/ShadowMapPlugin",prototype:{render:{"!type":"fn(scene: +TONG.Scene, camera: +TONG.Camera)","!doc":"Prepares the shadowmaps to be rendered defined in the scene. This gets automatically called as pre render function to draw the lensflares."}},"!doc":"The Webglrenderer plugin class that allows shadowmaps to be rendered in the WebglRenderer. This plugin is automatically loaded in the Webglrenderer.","!type":"fn()"},SpritePlugin:{"!url":"http://tongjs.org/docs/#Reference/renderers/webgl/plugins/SpritePlugin",prototype:{render:{"!type":"fn(scene: +TONG.Scene, camera: +TONG.Camera)","!doc":"Renders the sprites defined in the scene. This gets automatically called as post-render function to draw the lensflares."}},"!doc":"The Webglrenderer plugin class that allows Sprites to be rendered in the WebglRenderer. This plugin is automatically loaded in the Webglrenderer.","!type":"fn()"},Fog:{"!url":"http://tongjs.org/docs/#Reference/scenes/Fog",prototype:{name:{"!type":"string","!doc":"Default is the empty string."},color:{"!type":"+TONG.Color","!doc":"Fog color.  Example: If set to black, far away objects will be rendered black."},near:{"!type":"number","!doc":"Default is 1."},far:{"!type":"number","!doc":"Default is 1000."},clone:{"!type":"fn() -> +TONG.Fog","!doc":"Returns a copy of this."}},"!doc":"This class contains the parameters that define linear fog, i.e., that grows linearly denser with the distance.","!type":"fn(hex: number, near: number, far: number)"},FogExp2:{"!url":"http://tongjs.org/docs/#Reference/scenes/FogExp2",prototype:{name:{"!type":"string","!doc":"Default is the empty string."},color:{"!type":"+TONG.Color","!doc":"Fog color. Example: If set to black, far away objects will be rendered black."},density:{"!type":"number","!doc":"Default is 0.00025."},clone:{"!type":"fn() -> +TONG.FogExp2","!doc":"Returns a copy of this."}},"!doc":"This class contains the parameters that define exponential fog, i.e., that grows exponentially denser with the distance.","!type":"fn(hex: number, density: number)"},Scene:{"!url":"http://tongjs.org/docs/#Reference/scenes/Scene",prototype:{"!proto":"TONG.Object3D.prototype",fog:{"!type":"+TONG.Fog","!doc":"A [page:Fog fog] instance defining the type of fog that affects everything rendered in the scene. Default is null."},overrideMaterial:{"!type":"+TONG.Material","!doc":"If not null, it will force everything in the scene to be rendered with that material. Default is null."},autoUpdate:{"!type":"boolean","!doc":"Default is true. If set, then the renderer checks every frame if the scene and its objects needs matrix updates. \n\t\tWhen it isn't, then you have to maintain all matrices in the scene yourself."}},"!doc":"Scenes allow you to set up what and where is to be rendered by TONG.js. This is where you place objects, lights and cameras.","!type":"fn()"},CompressedTexture:{"!url":"http://tongjs.org/docs/#Reference/textures/CompressedTexture",prototype:{"!proto":"TONG.Texture.prototype",flipY:{"!type":"boolean","!doc":"False by default. Flipping textures does not work for compressed textures."},generateMipmaps:{"!type":"boolean","!doc":"False by default. Mipmaps can't be generated for compressed textures"}},"!doc":"Creates a texture based on data in compressed form.","!type":"fn(mipmaps: [], width: number, height: number, format: number, type: number, mapping: number, wrapS: number, wrapT: number, magFilter: number, minFilter: number, anisotropy: number)"},DataTexture:{"!url":"http://tongjs.org/docs/#Reference/textures/DataTexture",prototype:{"!proto":"TONG.Texture.prototype"},"!doc":"Creates a texture directly from bitmapdata, width and height.","!type":"fn(data: ArraybufferView, width: number, height: number, format: number, type: number, mapping: number, wrapS: number, wrapT: number, magFilter: number, minFilter: number, anisotropy: number)"},Texture:{"!url":"http://tongjs.org/docs/#Reference/textures/Texture",prototype:{id:{"!type":"number","!doc":"Unique number for this texture instance."},image:{"!type":"Image","!doc":"An Image object, typically created using the ImageUtils or [page:ImageLoader ImageLoader] classes. The Image object can include an image (e.g., PNG, JPG, GIF, DDS), video (e.g., MP4, OGG/OGV), or set of six images for a cube map. To use video as a texture you need to have a playing HTML5 video element as a source for your texture image and continuously update this texture as long as video is playing."},mapping:{"!type":"object","!doc":"How the image is applied to the object. An object type of TONG.UVMapping is the default, where the U,V coordinates are used to apply the map, and a single texture is expected. The other types are TONG.CubeReflectionMapping, for cube maps used as a reflection map; TONG.CubeRefractionMapping, refraction mapping; and TONG.SphericalReflectionMapping, a spherical reflection map projection."},wrapS:{"!type":"number","!doc":"The default is TONG.ClampToEdgeWrapping, where the edge is clamped to the outer edge texels. The other two choices are TONG.RepeatWrapping and TONG.MirroredRepeatWrapping."},wrapT:{"!type":"number","!doc":"NOTE: tiling of images in textures only functions if image dimensions are powers of two (2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, ...) in terms of pixels. Individual dimensions need not be equal, but each must be a power of two. This is a limitation of WebGL, not TONG.js."},magFilter:{"!type":"number","!doc":"How the texture is sampled when a texel covers more than one pixel. The default is TONG.LinearFilter, which takes the four closest texels and bilinearly interpolates among them. The other option is TONG.NearestFilter, which uses the value of the closest texel."},minFilter:{"!type":"number","!doc":"How the texture is sampled when a texel covers less than one pixel. The default is TONG.LinearMipMapLinearFilter, which uses mipmapping and a trilinear filter. Other choices are TONG.NearestFilter, TONG.NearestMipMapNearestFilter, TONG.NearestMipMapLinearFilter, TONG.LinearFilter, and TONG.LinearMipMapNearestFilter. These vary whether the nearest texel or nearest four texels are retrieved on the nearest mipmap or nearest two mipmaps. Interpolation occurs among the samples retrieved."},format:{"!type":"number","!doc":"The default is TONG.RGBAFormat for the texture. Other formats are: TONG.AlphaFormat, TONG.RGBFormat, TONG.LuminanceFormat, and TONG.LuminanceAlphaFormat. There are also compressed texture formats, if the S3TC extension is supported: TONG.RGB_S3TC_DXT1_Format, TONG.RGBA_S3TC_DXT1_Format, TONG.RGBA_S3TC_DXT3_Format, and TONG.RGBA_S3TC_DXT5_Format."},type:{"!type":"number","!doc":"The default is TONG.UnsignedByteType. Other valid types (as WebGL allows) are TONG.ByteType, TONG.ShortType, TONG.UnsignedShortType, TONG.IntType, TONG.UnsignedIntType, TONG.FloatType, TONG.UnsignedShort4444Type, TONG.UnsignedShort5551Type, and TONG.UnsignedShort565Type."},anisotropy:{"!type":"number","!doc":"The number of samples taken along the axis through the pixel that has the highest density of texels. By default, this value is 1. A higher value gives a less blurry result than a basic mipmap, at the cost of more texture samples being used. Use renderer.getMaxAnisotropy() to find the maximum valid anisotropy value for the GPU; this value is usually a power of 2."},needsUpdate:{"!type":"boolean","!doc":"If a texture is changed after creation, set this flag to true so that the texture is properly set up. Particularly important for setting the wrap mode."},repeat:{"!type":"+TONG.Vector2","!doc":"How many times the texture is repeated across the surface, in each direction U and V."},offset:{"!type":"+TONG.Vector2","!doc":"How much a single repetition of the texture is offset from the beginning, in each direction U and V. Typical range is 0.0 to 1.0."},name:{"!type":"string","!doc":"Given name of the texture, empty string by default."},generateMipmaps:{"!type":"boolean","!doc":"Whether to generate mipmaps (if possible) for a texture. True by default."},flipY:{"!type":"boolean","!doc":"True by default. Flips the image's Y axis to match the WebGL texture coordinate space."},mipmaps:{"!type":"array","!doc":"Array of mipmaps generated."},unpackAlignment:{"!type":"number","!doc":'4 by default. Specifies the alignment requirements for the start of each pixel row in memory. The allowable values are 1 (byte-alignment), 2 (rows aligned to even-numbered bytes), 4 (word-alignment), and 8 (rows start on double-word boundaries). See <a href="http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml">glPixelStorei</a> for more information.'},premultiplyAlpha:{"!type":"boolean","!doc":"False by default, which is the norm for PNG images. Set to true if the RGB values have been stored premultiplied by alpha."},onUpdate:{"!type":"object","!doc":"A callback function, called when the texture is updated (e.g., when needsUpdate has been set to true and then the texture is used)."}},"!doc":"Create a texture to apply to a surface or as a reflection or refraction map.","!type":"fn(image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy)"}}}}})}),function(e){function i(e,t,r,n,o){this._listener=t,this._isOnce=r,this.context=n,this._signal=e,this._priority=o||0}function n(e,t){if("function"!=typeof e)throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}var t={VERSION:"0.7.4"};i.prototype={active:!0,params:null,execute:function(e){var t;return this.active&&this._listener&&(e=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,e),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},getListener:function(){return this._listener},_destroy:function(){delete this._signal,delete this._listener,delete this.context},isOnce:function(){return this._isOnce},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},t.Signal=function(){this._bindings=[],this._prevParams=null},t.Signal.prototype={memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(e,t,r,n){var o=this._indexOfListener(e,r);if(-1!==o){if((e=this._bindings[o]).isOnce()!==t)throw Error("You cannot add"+(t?"":"Once")+"() then add"+(t?"Once":"")+"() the same listener without removing the relationship first.")}else e=new i(this,e,t,r,n),this._addBinding(e);return this.memorize&&this._prevParams&&e.execute(this._prevParams),e},_addBinding:function(e){for(var t=this._bindings.length;--t,this._bindings[t]&&e._priority<=this._bindings[t]._priority;);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var r,n=this._bindings.length;n--;)if((r=this._bindings[n])._listener===e&&r.context===t)return n;return-1},has:function(e,t){return-1!==this._indexOfListener(e,t)},add:function(e,t,r){return n(e,"add"),this._registerListener(e,!1,t,r)},addOnce:function(e,t,r){return n(e,"addOnce"),this._registerListener(e,!0,t,r)},remove:function(e,t){n(e,"remove");var r=this._indexOfListener(e,t);return-1!==r&&(this._bindings[r]._destroy(),this._bindings.splice(r,1)),e},removeAll:function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(e){if(this.active){var t,r=Array.prototype.slice.call(arguments),n=this._bindings.length;if(this.memorize&&(this._prevParams=r),n)for(t=this._bindings.slice(),this._shouldPropagate=!0;t[--n]&&this._shouldPropagate&&!1!==t[n].execute(r););}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}},"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module&&module.exports?module.exports=t:e.signals=t}(this);var UI={Element:function(e){this.dom=e}};UI.Element.prototype={style:function(e){return this.dom.setAttribute("style",e+""),this},add:function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];t instanceof UI.Element?this.dom.appendChild(t.dom):console.error("UI.Element:",t,"is not an instance of UI.Element.")}return this},remove:function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];t instanceof UI.Element?this.dom.removeChild(t.dom):console.error("UI.Element:",t,"is not an instance of UI.Element.")}return this},clear:function(){for(;this.dom.children.length;)this.dom.removeChild(this.dom.lastChild)},setId:function(e){return this.dom.id=e,this},setClass:function(e){return this.dom.className=e,this},setStyle:function(e,t){for(var r=0;r<t.length;r++)this.dom.style[e]=t[r];return this},setDisabled:function(e){return this.dom.disabled=e,this},setTextContent:function(e){return this.dom.textContent=e,this},setAttribute:function(e,t){return this.dom.setAttribute(e+"",""+t),this},toString:function(){return function(e){var t=document.createElement("div");t.appendChild(e.cloneNode(!0));var r=t.innerHTML;return t=e=null,r}(this.dom).replace("<","&lt;").replace(">","&gt;")}};var properties=["position","left","top","right","bottom","width","height","border","borderLeft","borderTop","borderRight","borderBottom","borderColor","display","overflow","margin","marginLeft","marginTop","marginRight","marginBottom","padding","paddingLeft","paddingTop","paddingRight","paddingBottom","color","background","backgroundColor","backgroundImage","backgroundPosition","backgroundRepeat","visibility","opacity","fontSize","fontWeight","textAlign","textDecoration","textTransform","cursor","zIndex"];properties.forEach(function(e){var t="set"+e.substr(0,1).toUpperCase()+e.substr(1,e.length);UI.Element.prototype[t]=function(){return this.setStyle(e,arguments),this}});var events=["KeyUp","Blur","KeyDown","MouseOver","MouseDown","MouseOut","Click","DblClick","Input","PropertyChange","Change","Drop","DragStart","Drag","DragEnd","DragEnter","DragOver","DragLeave"];events.forEach(function(t){var e="on"+t;UI.Element.prototype[e]=function(e){return this.dom.addEventListener(t.toLowerCase(),e.bind(this),!1),this}}),UI.Span=function(){return UI.Element.call(this),this.dom=document.createElement("span"),this},UI.Span.prototype=Object.create(UI.Element.prototype),UI.Span.prototype.constructor=UI.Span,UI.Div=function(){return UI.Element.call(this),this.dom=document.createElement("div"),this},UI.Div.prototype=Object.create(UI.Element.prototype),UI.Div.prototype.constructor=UI.Div,UI.Ul=function(e){UI.Element.call(this);var t=document.createElement("ul");return t.className="Ul",this.dom=t,null!=e&&(this.dom.textContent=e),this},UI.Ul.prototype=Object.create(UI.Element.prototype),UI.Ul.prototype.constructor=UI.Ul,UI.Li=function(e){UI.Element.call(this);var t=document.createElement("li");return t.className="Li",this.dom=t,null!=e&&(this.dom.textContent=e),this},UI.Li.prototype=Object.create(UI.Element.prototype),UI.Li.prototype.constructor=UI.Li,UI.Image=function(e){UI.Element.call(this);var t=document.createElement("img");return this.dom=t,this.dom.src=e,this},UI.Image.prototype=Object.create(UI.Element.prototype),UI.Image.prototype.constructor=UI.Image,UI.Menu=function(e){UI.Element.call(this);var t=document.createElement("li"),r=document.createElement("a");r.href="#";var n=document.createElement("span");return r.appendChild(n),r.textContent=e,t.appendChild(r),this.dom=t,this},UI.Menu.prototype=Object.create(UI.Element.prototype),UI.Menu.prototype.constructor=UI.Menu,UI.Row=function(){UI.Element.call(this);var e=document.createElement("div");return e.className="Row",this.dom=e,this},UI.Row.prototype=Object.create(UI.Element.prototype),UI.Row.prototype.constructor=UI.Row,UI.Panel=function(){UI.Element.call(this);var e=document.createElement("div");return e.className="Panel",this.dom=e,this},UI.Panel.prototype=Object.create(UI.Element.prototype),UI.Panel.prototype.constructor=UI.Panel,UI.Form=function(e){UI.Element.call(this);var t=document.createElement("form");return t.className="Form",t.method="get"==e||"post"==e?e:"post",this.dom=t,this},UI.Form.prototype=Object.create(UI.Element.prototype),UI.Form.prototype.constructor=UI.Form,UI.Text=function(e){UI.Element.call(this);var t=document.createElement("span");return t.className="Text",t.style.cursor="default",t.style.display="inline-block",t.style.verticalAlign="middle",this.dom=t,this.setValue(e),this},UI.Text.prototype=Object.create(UI.Element.prototype),UI.Text.prototype.constructor=UI.Text,UI.Text.prototype.getValue=function(){return this.dom.textContent},UI.Text.prototype.setValue=function(e){return void 0!==e&&(this.dom.textContent=e),this},UI.Progress=function(e,t){UI.Element.call(this);var r=document.createElement("progress");return r.className="Progress",r.max=t,r.style.border="1px solid transparent",this.dom=r,this.setValue(e),this},UI.Progress.prototype=Object.create(UI.Element.prototype),UI.Progress.prototype.constructor=UI.Progress,UI.Progress.prototype.getValue=function(){return this.dom.value},UI.Progress.prototype.setValue=function(e){return this.dom.value=e,this},UI.Input=function(e){UI.Element.call(this);var t=document.createElement("input");return t.className="Input",t.style.padding="2px",t.style.border="1px solid transparent",t.addEventListener("keydown",function(e){e.stopPropagation()},!1),this.dom=t,this.setValue(e),this},UI.Input.prototype=Object.create(UI.Element.prototype),UI.Input.prototype.constructor=UI.Input,UI.Input.prototype.getValue=function(){return this.dom.value},UI.Input.prototype.setValue=function(e){return this.dom.value=e,this},UI.TextArea=function(){UI.Element.call(this);var r=document.createElement("textarea");return r.className="TextArea",r.style.padding="2px",r.spellcheck=!1,r.addEventListener("keydown",function(e){if(e.stopPropagation(),9===e.keyCode){e.preventDefault();var t=r.selectionStart;r.value=r.value.substring(0,t)+"\t"+r.value.substring(t),r.selectionStart=t+1,r.selectionEnd=r.selectionStart}},!1),this.dom=r,this},UI.TextArea.prototype=Object.create(UI.Element.prototype),UI.TextArea.prototype.constructor=UI.TextArea,UI.TextArea.prototype.getValue=function(){return this.dom.value},UI.TextArea.prototype.setValue=function(e){return this.dom.value=e,this},UI.Select=function(){UI.Element.call(this);var e=document.createElement("select");return e.className="Select",e.style.padding="2px",this.dom=e,this},UI.Select.prototype=Object.create(UI.Element.prototype),UI.Select.prototype.constructor=UI.Select,UI.Select.prototype.setMultiple=function(e){return this.dom.multiple=e,this},UI.Select.prototype.setOptions=function(e){for(var t=this.dom.value;0<this.dom.children.length;)this.dom.removeChild(this.dom.firstChild);for(var r in e){var n=document.createElement("option");n.value=r,n.innerHTML=e[r],this.dom.appendChild(n)}return this.dom.value=t,this},UI.Select.prototype.getValue=function(){return this.dom.value},UI.Select.prototype.setValue=function(e){return e=String(e),this.dom.value!==e&&(this.dom.value=e),this},UI.Checkbox=function(e){UI.Element.call(this);var t=document.createElement("input");return t.className="Checkbox",t.type="checkbox",this.dom=t,this.setValue(e),this},UI.Checkbox.prototype=Object.create(UI.Element.prototype),UI.Checkbox.prototype.constructor=UI.Checkbox,UI.Checkbox.prototype.getValue=function(){return this.dom.checked},UI.Checkbox.prototype.setValue=function(e){return void 0!==e&&(this.dom.checked=e),this},UI.Color=function(){UI.Element.call(this);var e=document.createElement("input");e.className="Color",e.style.width="64px",e.style.height="17px",e.style.border="0px",e.style.padding="2px",e.style.backgroundColor="transparent";try{e.type="color",e.value="#ffffff"}catch(e){}return this.dom=e,this},UI.Color.prototype=Object.create(UI.Element.prototype),UI.Color.prototype.constructor=UI.Color,UI.Color.prototype.getValue=function(){return this.dom.value},UI.Color.prototype.getHexValue=function(){return parseInt(this.dom.value.substr(1),16)},UI.Color.prototype.setValue=function(e){return this.dom.value=e,this},UI.Color.prototype.setHexValue=function(e){return this.dom.value="#"+("000000"+e.toString(16)).slice(-6),this},UI.Number=function(e){UI.Element.call(this);var n=this,o=document.createElement("input");o.className="Number",o.value="0.00",o.addEventListener("keydown",function(e){e.stopPropagation(),13===e.keyCode&&o.blur()},!1),this.value=0,this.min=-1/0,this.max=1/0,this.precision=2,this.step=1,this.unit="",this.dom=o,this.setValue(e);var i=document.createEvent("HTMLEvents");i.initEvent("change",!0,!0);var s=0,a=0,l=[0,0],u=[0,0];function t(e){var t=n.value;l=[e.clientX,e.clientY],s+=l[0]-u[0]-(l[1]-u[1]);var r=a+s/(e.shiftKey?5:50)*n.step;t!==(r=Math.min(n.max,Math.max(n.min,r)))&&(n.setValue(r),o.dispatchEvent(i)),u=[e.clientX,e.clientY]}function r(e){document.removeEventListener("mousemove",t,!1),document.removeEventListener("mouseup",r,!1),Math.abs(s)<2&&(o.focus(),o.select())}function c(e){}return o.addEventListener("mousedown",function(e){e.preventDefault(),s=0,a=n.value,u=[e.clientX,e.clientY],document.addEventListener("mousemove",t,!1),document.addEventListener("mouseup",r,!1)},!1),o.addEventListener("change",function(e){n.setValue(o.value)},!1),o.addEventListener("focus",function(e){},!1),o.addEventListener("blur",c,!1),this},UI.Number.prototype=Object.create(UI.Element.prototype),UI.Number.prototype.constructor=UI.Number,UI.Number.prototype.getValue=function(){return this.value},UI.Number.prototype.setValue=function(e){return void 0!==e&&((e=parseFloat(e))<this.min&&(e=this.min),e>this.max&&(e=this.max),this.value=e,this.dom.value=e.toFixed(this.precision),""!==this.unit&&(this.dom.value+=" "+this.unit)),this},UI.Number.prototype.setPrecision=function(e){return this.precision=e,this},UI.Number.prototype.setStep=function(e){return this.step=e,this},UI.Number.prototype.setRange=function(e,t){return this.min=e,this.max=t,this},UI.Number.prototype.setUnit=function(e){return this.unit=e,this},UI.Integer=function(e){UI.Element.call(this);var n=this,o=document.createElement("input");o.className="Number",o.value="0",o.addEventListener("keydown",function(e){e.stopPropagation()},!1),this.value=0,this.min=-1/0,this.max=1/0,this.step=1,this.dom=o,this.setValue(e);var i=document.createEvent("HTMLEvents");i.initEvent("change",!0,!0);var s=0,a=0,l=[0,0],u=[0,0];function t(e){var t=n.value;l=[e.clientX,e.clientY],s+=l[0]-u[0]-(l[1]-u[1]);var r=a+s/(e.shiftKey?5:50)*n.step;t!==(r=0|Math.min(n.max,Math.max(n.min,r)))&&(n.setValue(r),o.dispatchEvent(i)),u=[e.clientX,e.clientY]}function r(e){document.removeEventListener("mousemove",t,!1),document.removeEventListener("mouseup",r,!1),Math.abs(s)<2&&(o.focus(),o.select())}function c(e){o.style.backgroundColor="transparent",o.style.cursor="col-resize"}return c(),o.addEventListener("mousedown",function(e){e.preventDefault(),s=0,a=n.value,u=[e.clientX,e.clientY],document.addEventListener("mousemove",t,!1),document.addEventListener("mouseup",r,!1)},!1),o.addEventListener("change",function(e){n.setValue(o.value)},!1),o.addEventListener("focus",function(e){o.style.backgroundColor="",o.style.cursor=""},!1),o.addEventListener("blur",c,!1),this},UI.Integer.prototype=Object.create(UI.Element.prototype),UI.Integer.prototype.constructor=UI.Integer,UI.Integer.prototype.getValue=function(){return this.value},UI.Integer.prototype.setValue=function(e){return void 0!==e&&(e=parseInt(e),this.value=e,this.dom.value=e),this},UI.Integer.prototype.setStep=function(e){return this.step=parseInt(e),this},UI.Integer.prototype.setRange=function(e,t){return this.min=e,this.max=t,this},UI.Break=function(){UI.Element.call(this);var e=document.createElement("br");return e.className="Break",this.dom=e,this},UI.Break.prototype=Object.create(UI.Element.prototype),UI.Break.prototype.constructor=UI.Break,UI.HorizontalRule=function(){UI.Element.call(this);var e=document.createElement("hr");return e.className="HorizontalRule",this.dom=e,this},UI.HorizontalRule.prototype=Object.create(UI.Element.prototype),UI.HorizontalRule.prototype.constructor=UI.HorizontalRule,UI.Button=function(e){UI.Element.call(this);var t=document.createElement("button");return t.className="Button",t.type="button",this.dom=t,this.dom.textContent=e,this},UI.Button.prototype=Object.create(UI.Element.prototype),UI.Button.prototype.constructor=UI.Button,UI.Button.prototype.setLabel=function(e){return this.dom.textContent=e,this},UI.Slider=function(e,t,r,n){UI.Element.call(this);var o=document.createElement("input");return o.className="Slider",o.type="range",this.dom=o,this.dom.min=e||"0",this.dom.max=t||"100",this.dom.value=r||"50",this.dom.step=n||"1",this},UI.Slider.prototype=Object.create(UI.Element.prototype),UI.Slider.prototype.constructor=UI.Slider,UI.Slider.prototype.setValue=function(e){return this.dom.value=e,this},UI.ButtonIcon=function(e,t,r,n){UI.Element.call(this);var o=document.createElement("button");return o.className="Button",o.type="button",this.dom=o,this.dom.textContent=n,this.dom.style.background="url("+e+") "+t+" "+r+" no-repeat",this.dom.style.textAlign="right",this},UI.ButtonIcon.prototype=Object.create(UI.Element.prototype),UI.ButtonIcon.prototype.constructor=UI.ButtonIcon,UI.ButtonIcon.prototype.setLabel=function(e){return this.dom.textContent=e,this},UI.ButtonIcon.prototype.getValue=function(){return this.dom.value},UI.ButtonIcon.prototype.setValue=function(e){return this.dom.value=e,this},UI.Modal=function(e){var t=this,r=document.createElement("div");return r.style.position="absolute",r.style.width="100%",r.style.height="100%",r.style.backgroundColor="rgba(0,0,0,0.5)",r.style.display="none",r.style.alignItems="center",r.style.justifyContent="center",r.addEventListener("click",function(e){t.hide()}),this.dom=r,this.container=new UI.Panel,this.container.dom.style.width="200px",this.container.dom.style.padding="20px",this.container.dom.style.backgroundColor="#ffffff",this.container.dom.style.boxShadow="0px 5px 10px rgba(0,0,0,0.5)",this.add(this.container),this},UI.Modal.prototype=Object.create(UI.Element.prototype),UI.Modal.prototype.constructor=UI.Modal,UI.Modal.prototype.show=function(e){return this.container.clear(),this.container.add(e),this.dom.style.display="flex",this},UI.Modal.prototype.hide=function(){return this.dom.style.display="none",this},UI.Texture=function(o){UI.Element.call(this);var i=this,e=document.createElement("span"),t=document.createElement("form"),r=document.createElement("input");r.type="file",r.addEventListener("change",function(e){s(e.target.files[0])}),t.appendChild(r);var n=document.createElement("canvas");function s(n){if(n.type.match("image.*")){var e=new FileReader;"image/targa"===n.type?(e.addEventListener("load",function(e){var t=(new TONG.TGALoader).parse(e.target.result),r=new TONG.CanvasTexture(t,o);r.sourceFile=n.name,i.setValue(r),i.onChangeCallback&&i.onChangeCallback()},!1),e.readAsArrayBuffer(n)):(e.addEventListener("load",function(e){var t=document.createElement("img");t.addEventListener("load",function(e){var t=new TONG.Texture(this,o);t.sourceFile=n.name,t.needsUpdate=!0,i.setValue(t),i.onChangeCallback&&i.onChangeCallback()},!1),t.src=e.target.result},!1),e.readAsDataURL(n))}t.reset()}return n.width=32,n.height=16,n.style.cursor="pointer",n.style.marginRight="5px",n.style.border="1px solid #888",n.addEventListener("click",function(e){r.click()},!1),n.addEventListener("drop",function(e){e.preventDefault(),e.stopPropagation(),s(e.dataTransfer.files[0])},!1),e.appendChild(n),this.dom=e,this.texture=null,this.onChangeCallback=null,this},UI.Texture.prototype=Object.create(UI.Element.prototype),UI.Texture.prototype.constructor=UI.Texture,UI.Texture.prototype.getValue=function(){return this.texture},UI.Texture.prototype.setValue=function(e){var t=this.dom.children[0],r=t.getContext("2d");if(null!==e){var n=e.image;if(void 0!==n&&0<n.width){var o=t.width/n.width;r.drawImage(n,0,0,n.width*o,n.height*o)}else r.clearRect(0,0,t.width,t.height)}else null!==r&&r.clearRect(0,0,t.width,t.height);this.texture=e},UI.Texture.prototype.onChange=function(e){return this.onChangeCallback=e,this},UI.Outliner=function(e){UI.Element.call(this);var t=this,r=document.createElement("div");return r.className="Outliner",r.tabIndex=0,this.scene=e.scene,r.addEventListener("keydown",function(e){switch(e.keyCode){case 38:case 40:e.preventDefault(),e.stopPropagation()}},!1),r.addEventListener("keyup",function(e){switch(e.keyCode){case 38:t.selectIndex(t.selectedIndex-1);break;case 40:t.selectIndex(t.selectedIndex+1)}},!1),this.dom=r,this.options=[],this.selectedIndex=-1,this.selectedValue=null,this},UI.Outliner.prototype=Object.create(UI.Element.prototype),UI.Outliner.prototype.constructor=UI.Outliner,UI.Outliner.prototype.selectIndex=function(e){if(0<=e&&e<this.options.length){this.setValue(this.options[e].value);var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!0),this.dom.dispatchEvent(t)}},UI.Outliner.prototype.setOptions=function(e){for(var i,s=this;0<s.dom.children.length;)s.dom.removeChild(s.dom.firstChild);function t(){s.setValue(this.value);var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!0),s.dom.dispatchEvent(e)}function r(e){i=this,console.log("on Drag ")}function n(e){console.log("on Drag start");var t=s.scene.getObjectById(e.target.value);e.dataTransfer.setData("uuid",t.uuid)}function o(e){if(this!==i){var t=e.offsetY/this.clientHeight;this.className=t<.25?"option dragTop":.75<t?"option dragBottom":"option drag"}}function a(){this!==i&&(this.className="option")}function l(e){if(this!==i){this.className="option";var t=s.scene,r=t.getObjectById(i.value),n=e.offsetY/this.clientHeight;if(n<.25)u(r,(o=t.getObjectById(this.value)).parent,o);else if(.75<n){var o;u(r,(o=t.getObjectById(this.nextSibling.value)).parent,o)}else{u(r,t.getObjectById(this.value))}}}function u(e,t,r){null===r&&(r=void 0);var n=!1;if(e.traverse(function(e){e===t&&(n=!0)}),!n){editor.execute(new MoveObjectCommand(e,t,r));var o=document.createEvent("HTMLEvents");o.initEvent("change",!0,!0),s.dom.dispatchEvent(o),editor.signals.sceneGraphChanged.dispatch()}}s.options=[];for(var c=0;c<e.length;c++){var p=e[c];p.className="option",s.dom.appendChild(p),s.options.push(p),p.addEventListener("click",t,!1),!0===p.draggable&&(p.addEventListener("drag",r,!1),p.addEventListener("dragstart",n,!1),p.addEventListener("dragover",o,!1),p.addEventListener("dragleave",a,!1),p.addEventListener("drop",l,!1))}return s},UI.Outliner.prototype.getValue=function(){return this.selectedValue},UI.Outliner.prototype.setValue=function(e){for(var t=0;t<this.options.length;t++){var r=this.options[t];if(r.value===e){r.classList.add("active");var n=r.offsetTop-this.dom.offsetTop,o=n+r.offsetHeight-this.dom.offsetHeight;this.dom.scrollTop>n?this.dom.scrollTop=n:this.dom.scrollTop<o&&(this.dom.scrollTop=o),this.selectedIndex=t}else r.classList.remove("active")}return this.selectedValue=e,this},UI.TONG={},UI.TONG.Boolean=function(e,t,r){UI.Span.call(this),this.setMarginRight("10px"),this.checkbox=new UI.Checkbox(e),this.text=new UI.Text(t).setMarginLeft("3px"),r?(this.add(this.text),this.add(this.checkbox)):(this.add(this.checkbox),this.add(this.text))},UI.TONG.Boolean.prototype=Object.create(UI.Span.prototype),UI.TONG.Boolean.prototype.constructor=UI.TONG.Boolean,UI.TONG.Boolean.prototype.getValue=function(){return this.checkbox.getValue()},UI.TONG.Boolean.prototype.setValue=function(e){return this.checkbox.setValue(e)};var APP={Player:function(){window.isEditor=isEditor||!1,window.isPlay=!1;var h,d,f,t,r,n,m,g=new ObjectLoader;this.CurrentProjectData=null;var y=!1,v={};this.dom=document.createElement("div"),this.components={},this.resources={},this.width=500,this.height=500;var o,b=this;function x(e,t){for(var r=0,n=e.length;r<n;r++)e[r](t)}function i(e){if(0!=window.isPlay&&(o=requestAnimationFrame(i),y)){try{x(v.Update,{time:d.clock.elapsedTime,delta:d.delta})}catch(e){console.error(e.message||e,e.stack||"")}d.update(),!0===m?(h.updateMatrixWorld(),t.update(),d&&r.render(d,n)):d&&d.render(f)}}function e(e){x(v.KeyDown,e)}function s(e){x(v.KeyUp,e)}function a(e){x(v.MouseDown,e)}function l(e){x(v.MouseUp,e)}function u(e){x(v.MouseMove,e)}function c(e){x(v.TouchStart,e)}function p(e){x(v.TouchEnd,e)}function w(e){x(v.TouchMove,e)}this.LoadLevel=function(e){if(window.isPlay=!0,this.CurrentProjectData){var t=this.CurrentProjectData;if(null!=t[Object.keys(t)[0]].GUID){var r=this.width=this.dom.width,n=this.height=this.dom.height;f&&this.dispose(),y=!1,this.load(t,e),this.setSize(r,n)}}},this.load=function(e,t){this.CurrentProjectData||(this.CurrentProjectData=e);for(var r=0;r<Object.keys(e).length;r++){var n=e[Object.keys(e)[r]];if(n.GUID){var o=null;if(t){if(!(o=n[t+""].data)&&t&&""!=t)return void console.error("TONG Engine LoadLevel Error:Scene Name Is NaN")}else o=n[Object.keys(n)[2]].data;e=o;break}}m=e.project.vr,(f=new TONG.WebGLRenderer({antialias:!0})).domElement.style.position="absolute",f.setClearColor(e.scene.object.background),f.setPixelRatio(window.devicePixelRatio),e.project.gammaInput&&(f.gammaInput=!0),e.project.gammaOutput&&(f.gammaOutput=!0),e.project.shadows&&(f.shadowMap.enabled=!0),this.dom.appendChild(f.domElement);var i=null;e.project.gravity;if(this.setScene(i),v={Awake:[],Start:[],Stop:[],Dispose:[],KeyDown:[],KeyUp:[],MouseDown:[],MouseUp:[],MouseMove:[],TouchStart:[],TouchEnd:[],TouchMove:[],Update:[],OnTrigger:[],OnGUI:[]},this.components=e.scene.components?e.scene.components:{},this.resources.images=e.scene.images,!isEditor){for(var s in e.scene)if("materials"!=s&&"images"!=s&&"meshes"!=s&&e.scene[s]instanceof Array)for(r=0;r<e.scene[s].length;r++)TONG.RM.configureResource(s,e.scene[s][r],e.scene);if(e.scene.materials instanceof Array)for(r=0;r<e.scene.materials.length;r++)TONG.RM.configureResource("materials",e.scene.materials[r],e.scene);if(e.scene.meshes instanceof Array)for(r=0;r<e.scene.meshes.length;r++)TONG.RM.configureResource("meshes",e.scene.meshes[r],e.scene)}var a=g.parseObject(e.scene.object,TONG.RM.geometries,TONG.RM.materials,TONG.RM.textures,TONG.RM.fontAssets,TONG.RM.animationClips);isEmptyObject(TONG.RM.skeletons)||g.bindSkeletons(a,TONG.RM.skeletons),d=i=a,TONG.Components.configureComponents(e.scene,d,TONG.RM.materials);var l="player,renderer,scene,camera",u={};for(var c in v)l+=","+c,u[c]=c;var p=JSON.stringify(u).replace(/\"/g,"");d.traverse(function(e){for(var t=e._getComponents(),r=0;r<t.length;r++){var n=t[r];for(var o in n)n[o]instanceof Function&&void 0!==v[o]&&"constructor"!=o&&v[o].push(n[o].bind(n));n.player=b,n.scene=d,n.cameras=d.cameras,n.renderer=f}}),function(e){for(var t in e){var r=d.getObjectByProperty("uuid",t,!0);if(void 0!==r)for(var n=e[t],o=0;o<n.length;o++){var i=n[o],s=new Function(l,i.source+"\nreturn "+p+";").bind(r)(b,f,d,h);for(var a in s)void 0!==s[a]&&(void 0!==v[a]?v[a].push(s[a].bind(r)):console.warn("APP.Player: Event type not supported (",a,")"))}else console.warn("APP.Player: Script without object.",t)}}(e.scripts),d.initialize(f),x(v.Awake,arguments),x(v.Start,arguments),y=!0},this.add=function(e){this.getContainer().append(e.root||e)},this.getContainer=function(){return f.domElement.parentNode},this.setScene=function(e){d=e},this.setSize=function(e,t){this.width=e,this.height=t,d&&d.setSize(e,t)},this.play=function(){document.addEventListener("keydown",e),document.addEventListener("keyup",s),document.addEventListener("mousedown",a),document.addEventListener("mouseup",l),document.addEventListener("mousemove",u),document.addEventListener("touchstart",c),document.addEventListener("touchend",p),document.addEventListener("touchmove",w),o=requestAnimationFrame(i),x(v.OnGUI,arguments)},this.stop=function(){window.isPlay=!1,document.removeEventListener("keydown",e),document.removeEventListener("keyup",s),document.removeEventListener("mousedown",a),document.removeEventListener("mouseup",l),document.removeEventListener("mousemove",u),document.removeEventListener("touchstart",c),document.removeEventListener("touchend",p),document.removeEventListener("touchmove",w),x(v.Stop,arguments),cancelAnimationFrame(o)},this.dispose=function(){for(x(v.Dispose,arguments);this.dom.children.length;)this.dom.removeChild(this.dom.firstChild);f.forceContextLoss(),f.context=null,f.domElement=null,f.dispose(),f=d=h=void 0}}},AppPlayer=null,Player=function(e){var t=e.signals,r=new UI.Panel;return r.setId("player"),r.setPosition("absolute"),r.setDisplay("none"),AppPlayer=new APP.Player,r.dom.appendChild(AppPlayer.dom),t.startPlayer.add(function(){r.setDisplay(""),$("#playGameBtn").css("background-color","#06f"),TONG.RM.getMenuBar("tong3d/"+GetLanguage("Play")).name=GetLanguage("Stop"),clickList["button#playGameBtn"].state=!0,AppPlayer.CurrentProjectData=e.projectsJsonData.data,AppPlayer.LoadLevel(e.currentSceneName),AppPlayer.setSize(r.dom.clientWidth,r.dom.clientHeight),AppPlayer.play()}),t.stopPlayer.add(function(){r.setDisplay("none"),TONG.RM.getMenuBar("tong3d/"+GetLanguage("Play")).name=GetLanguage("Play"),$("#playGameBtn").css("background-color","#303030"),clickList["button#playGameBtn"].state=!1,AppPlayer.dispose(),EditorModule.target.reduction(EditorModule.target.getCurrentScene()),AppPlayer.stop()}),r},Script=function(n){var y=n.signals,s=new UI.Panel;s.setId("script"),s.setPosition("absolute"),s.setBackgroundColor("#272822"),s.setDisplay("none");var e=new UI.Panel;e.setPadding("10px"),s.add(e);var a=(new UI.Text).setColor("#fff");e.add(a);var v,t,b,x,r=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("width",32),e.setAttribute("height",32);var t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d","M 12,12 L 22,22 M 22,12 12,22"),t.setAttribute("stroke","#fff"),e.appendChild(t),e}(),o=new UI.Element(r);o.setPosition("absolute"),o.setTop("3px"),o.setRight("1px"),o.setCursor("pointer"),o.onClick(function(){s.setDisplay("none")}),e.add(o),y.rendererChanged.add(function(e){v=e});var w=CodeMirror(s.dom,{value:"",lineNumbers:!0,matchBrackets:!0,indentWithTabs:!0,tabSize:4,indentUnit:4,hintOptions:{completeSingle:!1}});w.setOption("theme","monokai"),w.on("change",function(){!1!==w.state.focused&&(clearTimeout(t),t=setTimeout(function(){var e=w.getValue();if(i(e))if("object"!=typeof b){if("programInfo"===b){var t,r=JSON.parse(e);if(JSON.stringify(x.material.defines)!==JSON.stringify(r.defines))(t=new SetMaterialValueCommand(x,"defines",r.defines)).updatable=!1,n.execute(t);if(JSON.stringify(x.material.uniforms)!==JSON.stringify(r.uniforms))(t=new SetMaterialValueCommand(x,"uniforms",r.uniforms)).updatable=!1,n.execute(t);if(JSON.stringify(x.material.attributes)!==JSON.stringify(r.attributes))(t=new SetMaterialValueCommand(x,"attributes",r.attributes)).updatable=!1,n.execute(t)}}else e!==b.source&&n.execute(new SetScriptValueCommand(x,b,"source",e))},300))}),w.getWrapperElement().addEventListener("keydown",function(e){e.stopPropagation()});var T=[],N=[],i=function(f){var m,g=[];return w.operation(function(){for(;0<T.length;)w.removeLineClass(T.shift(),"background","errorLine");for(;0<N.length;)w.removeLineWidget(N.shift());switch(Utils.Script.GetCurrentMode()){case"javascript":try{var e=esprima.parse(f,{tolerant:!0});g=e.errors}catch(c){g.push({lineNumber:c.lineNumber-1,message:c.message})}for(var t=0;t<g.length;t++){(c=g[t]).message=c.message.replace(/Line [0-9]+: /,"")}break;case"json":g=[],jsonlint.parseError=function(e,t){e=e.split("\n")[3],g.push({lineNumber:t.loc.first_line-1,message:e})};try{jsonlint.parse(f)}catch(c){}break;case"glsl":try{var r="vertexShader"===b?glslprep.Shader.VERTEX:glslprep.Shader.FRAGMENT;glslprep.parseGlsl(f,r)}catch(c){c instanceof glslprep.SyntaxError?g.push({lineNumber:c.line,message:"Syntax Error: "+c.message}):console.error(c.stack||c)}if(0!==g.length)break;if(v instanceof TONG.WebGLRenderer==!1)break;x.material[b]=f,x.material.needsUpdate=!0,y.materialChanged.dispatch(x.material);var n=v.info.programs;m=!0;for(var o=/^(?:ERROR|WARNING): \d+:(\d+): (.*)/g,i=(t=0,n.length);t!==i;++t){var s=n[t].diagnostics;if(void 0!==s&&s.material===x.material){s.runnable||(m=!1);for(var a=s[b],l=a.prefix.split(/\r\n|\r|\n/).length;;){var u=o.exec(a.log);if(null===u)break;g.push({lineNumber:u[1]-l,message:u[2]})}break}}}for(t=0;t<g.length;t++){var c=g[t],p=document.createElement("div");p.className="esprima-error",p.textContent=c.message;var h=Math.max(c.lineNumber,0);T.push(h),w.addLineClass(h,"background","errorLine");var d=w.addLineWidget(h,p);N.push(d)}return void 0!==m?m:0===g.length})},l=new CodeMirror.TernServer({caseInsensitive:!0,plugins:{tongjs:null}});return w.setOption("extraKeys",{"Ctrl-P":function(e){l.complete(e)},"Ctrl-I":function(e){l.showType(e)},"Ctrl-O":function(e){l.showDocs(e)},"Alt-.":function(e){l.jumpToDef(e)},"Alt-,":function(e){l.jumpBack(e)},"Ctrl-Q":function(e){l.rename(e)},"Ctrl-.":function(e){l.selectName(e)},"Ctrl-S":function(e){y.saveScript.dispatch(e)}}),w.on("cursorActivity",function(e){"javascript"===Utils.Script.GetCurrentMode()&&l.updateArgHints(e)}),w.on("keypress",function(e,t){if("javascript"===Utils.Script.GetCurrentMode()){var r=String.fromCharCode(t.which||t.keyCode);/[\w\.]/.exec(r)&&l.complete(e)}}),y.editorCleared.add(function(){s.setDisplay("none")}),y.editScript.add(function(e,t){var r,n,o;if("object"==typeof t)r="javascript",n=t.name,o=t.source,a.setValue(e.name+" / "+n);else{switch(t){case"vertexShader":r="glsl",n="Vertex Shader",o=e.material.vertexShader||"";break;case"fragmentShader":r="glsl",n="Fragment Shader",o=e.material.fragmentShader||"";break;case"programInfo":r="json",n="Program Properties";var i={defines:e.material.defines,uniforms:e.material.uniforms,attributes:e.material.attributes};o=JSON.stringify(i,null,"\t")}a.setValue(e.material.name+" / "+n)}Utils.Script.SetCurrentMode(r),b=t,x=e,s.setDisplay(""),w.setValue(o),w.clearHistory(),"json"===r&&(r={name:"javascript",json:!0}),w.setOption("mode",r)}),y.scriptRemoved.add(function(e){b===e&&s.setDisplay("none")}),{container:s,codemirror:w,title:a}};TONG.VREffect=function(h,t){var d,r,f,m,g=new TONG.Vector3,y=new TONG.Vector3,v=null;"VRFrameData"in window&&(v=new window.VRFrameData),navigator.getVRDisplays&&navigator.getVRDisplays().then(function(e){0<(r=e).length?d=e[0]:t&&t("HMD not available")}).catch(function(){console.warn("THREE.VREffect: Unable to get VR Displays")}),this.isPresenting=!1;var b=this,o=h.getSize(),i=!1,s=h.getPixelRatio();this.getVRDisplay=function(){return d},this.setVRDisplay=function(e){d=e},this.getVRDisplays=function(){return console.warn("THREE.VREffect: getVRDisplays() is being deprecated."),r},this.setSize=function(e,t,r){if(o={width:e,height:t},i=r,b.isPresenting){var n=d.getEyeParameters("left");h.setPixelRatio(1),h.setSize(2*n.renderWidth,n.renderHeight,!1)}else h.setPixelRatio(s),h.setSize(e,t,r)};var n=h.domElement,x=[0,0,.5,1],w=[.5,0,.5,1];function e(){var e=b.isPresenting;if(b.isPresenting=void 0!==d&&d.isPresenting,b.isPresenting){var t=d.getEyeParameters("left"),r=t.renderWidth,n=t.renderHeight;e||(s=h.getPixelRatio(),o=h.getSize(),h.setPixelRatio(1),h.setSize(2*r,n,!1))}else e&&(h.setPixelRatio(s),h.setSize(o.width,o.height,i))}window.addEventListener("vrdisplaypresentchange",e,!1),this.setFullScreen=function(r){return new Promise(function(e,t){void 0!==d?b.isPresenting!==r?e(r?d.requestPresent([{source:n}]):d.exitPresent()):e():t(new Error("No VR hardware found."))})},this.requestPresent=function(){return this.setFullScreen(!0)},this.exitPresent=function(){return this.setFullScreen(!1)},this.requestAnimationFrame=function(e){return void 0!==d?d.requestAnimationFrame(e):window.requestAnimationFrame(e)},this.cancelAnimationFrame=function(e){void 0!==d?d.cancelAnimationFrame(e):window.cancelAnimationFrame(e)},this.submitFrame=function(){void 0!==d&&b.isPresenting&&d.submitFrame()},this.autoSubmitFrame=!0;var T=new TONG.PerspectiveCamera;T.layers.enable(1);var N=new TONG.PerspectiveCamera;function O(e,t,r,n){var o=Math.PI/180;return function(e,t,r,n){r=void 0===r?.01:r,n=void 0===n?1e4:n;var o,i,s,a,l=(t=void 0===t||t)?-1:1,u=new TONG.Matrix4,c=u.elements,p=(i=2/((o=e).leftTan+o.rightTan),s=(o.leftTan-o.rightTan)*i*.5,a=2/(o.upTan+o.downTan),{scale:[i,a],offset:[s,(o.upTan-o.downTan)*a*.5]});return c[0]=p.scale[0],c[1]=0,c[2]=p.offset[0]*l,c[3]=0,c[4]=0,c[5]=p.scale[1],c[6]=-p.offset[1]*l,c[7]=0,c[8]=0,c[9]=0,c[10]=n/(r-n)*-l,c[11]=n*r/(r-n),c[12]=0,c[13]=0,c[14]=l,c[15]=0,u.transpose(),u}({upTan:Math.tan(e.upDegrees*o),downTan:Math.tan(e.downDegrees*o),leftTan:Math.tan(e.leftDegrees*o),rightTan:Math.tan(e.rightDegrees*o)},t,r,n)}N.layers.enable(2),this.render=function(e,t,r,n){if(d&&b.isPresenting){var o=e.autoUpdate;o&&(e.updateMatrixWorld(),e.autoUpdate=!1);var i=d.getEyeParameters("left"),s=d.getEyeParameters("right");g.fromArray(i.offset),y.fromArray(s.offset),Array.isArray(e)&&(console.warn("THREE.VREffect.render() no longer supports arrays. Use object.layers instead."),e=e[0]);var a,l,u=h.getSize(),c=d.getLayers();if(c.length){var p=c[0];a=null!==p.leftBounds&&4===p.leftBounds.length?p.leftBounds:x,l=null!==p.rightBounds&&4===p.rightBounds.length?p.rightBounds:w}else a=x,l=w;return f={x:Math.round(u.width*a[0]),y:Math.round(u.height*a[1]),width:Math.round(u.width*a[2]),height:Math.round(u.height*a[3])},m={x:Math.round(u.width*l[0]),y:Math.round(u.height*l[1]),width:Math.round(u.width*l[2]),height:Math.round(u.height*l[3])},r?(h.setRenderTarget(r),r.scissorTest=!0):(h.setRenderTarget(null),h.setScissorTest(!0)),(h.autoClear||n)&&h.clear(),null===t.parent&&t.updateMatrixWorld(),t.matrixWorld.decompose(T.position,T.quaternion,T.scale),N.position.copy(T.position),N.quaternion.copy(T.quaternion),N.scale.copy(T.scale),T.translateOnAxis(g,T.scale.x),N.translateOnAxis(y,N.scale.x),d.getFrameData?(d.depthNear=t.near,d.depthFar=t.far,d.getFrameData(v),T.projectionMatrix.elements=v.leftProjectionMatrix,N.projectionMatrix.elements=v.rightProjectionMatrix):(T.projectionMatrix=O(i.fieldOfView,!0,t.near,t.far),N.projectionMatrix=O(s.fieldOfView,!0,t.near,t.far)),r?(r.viewport.set(f.x,f.y,f.width,f.height),r.scissor.set(f.x,f.y,f.width,f.height)):(h.setViewport(f.x,f.y,f.width,f.height),h.setScissor(f.x,f.y,f.width,f.height)),h.render(e,T,r,n),r?(r.viewport.set(m.x,m.y,m.width,m.height),r.scissor.set(m.x,m.y,m.width,m.height)):(h.setViewport(m.x,m.y,m.width,m.height),h.setScissor(m.x,m.y,m.width,m.height)),h.render(e,N,r,n),r?(r.viewport.set(0,0,u.width,u.height),r.scissor.set(0,0,u.width,u.height),r.scissorTest=!1,h.setRenderTarget(null)):(h.setViewport(0,0,u.width,u.height),h.setScissorTest(!1)),o&&(e.autoUpdate=!0),void(b.autoSubmitFrame&&b.submitFrame())}h.render(e,t,r,n)},this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",e,!1)}},TONG.VRControls=function(t,r){var n,o,i=this,s=new TONG.Matrix4,a=null;"VRFrameData"in window&&(a=new VRFrameData),navigator.getVRDisplays&&navigator.getVRDisplays().then(function(e){0<(o=e).length?n=e[0]:r&&r("VR input not available.")}).catch(function(){console.warn("THREE.VRControls: Unable to get VR Displays")}),this.scale=1,this.standing=!1,this.userHeight=1.6,this.getVRDisplay=function(){return n},this.setVRDisplay=function(e){n=e},this.getVRDisplays=function(){return console.warn("THREE.VRControls: getVRDisplays() is being deprecated."),o},this.getStandingMatrix=function(){return s},this.update=function(){var e;n&&(n.getFrameData?(n.getFrameData(a),e=a.pose):n.getPose&&(e=n.getPose()),null!==e.orientation&&t.quaternion.fromArray(e.orientation),null!==e.position?t.position.fromArray(e.position):t.position.set(0,0,0),this.standing&&(n.stageParameters?(t.updateMatrix(),s.fromArray(n.stageParameters.sittingToStandingTransform),t.applyMatrix(s)):t.position.setY(t.position.y+this.userHeight)),t.position.multiplyScalar(i.scale))},this.dispose=function(){n=null}};var WEBVR={isLatestAvailable:function(){return console.warn("WEBVR: isLatestAvailable() is being deprecated. Use .isAvailable() instead."),this.isAvailable()},isAvailable:function(){return void 0!==navigator.getVRDisplays},getVRDisplay:function(t){"getVRDisplays"in navigator&&navigator.getVRDisplays().then(function(e){t(e[0])})},getMessage:function(){var t;if(navigator.getVRDisplays?navigator.getVRDisplays().then(function(e){0===e.length&&(t="WebVR supported, but no VRDisplays found.")}):t='Your browser does not support WebVR. See <a href="http://webvr.info">webvr.info</a> for assistance.',void 0!==t){var e=document.createElement("div");e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.right="0",e.style.zIndex="999",e.align="center";var r=document.createElement("div");return r.style.fontFamily="sans-serif",r.style.fontSize="16px",r.style.fontStyle="normal",r.style.lineHeight="26px",r.style.backgroundColor="#fff",r.style.color="#000",r.style.padding="10px 20px",r.style.margin="50px",r.style.display="inline-block",r.innerHTML=t,e.appendChild(r),e}},getButton:function(e,t){if("VREffect"in TONG&&e instanceof TONG.VREffect)return console.error("WebVR.getButton() now expects a VRDisplay."),document.createElement("button");var r=document.createElement("button");return r.style.position="absolute",r.style.left="calc(50% - 50px)",r.style.bottom="20px",r.style.width="100px",r.style.border="0",r.style.padding="8px",r.style.cursor="pointer",r.style.backgroundColor="#000",r.style.color="#fff",r.style.fontFamily="sans-serif",r.style.fontSize="13px",r.style.fontStyle="normal",r.style.textAlign="center",r.style.zIndex="999",e?(r.textContent="ENTER VR",r.onclick=function(){e.isPresenting?e.exitPresent():e.requestPresent([{source:t}])},window.addEventListener("vrdisplaypresentchange",function(){r.textContent=e.isPresenting?"EXIT VR":"ENTER VR"},!1)):r.textContent="NO VR DISPLAY",r}};